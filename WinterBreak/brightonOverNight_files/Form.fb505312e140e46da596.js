(window.brJsonP=window.brJsonP||[]).push([[4],{104:function(e,t,s){"use strict";s.r(t),s.d(t,"default",(function(){return B}));var r=s(3);const i=".js-field",a=".js-error-message",n='[type="checkbox"], [type="radio"]',o="input, textarea, select",h=".js-dropdown-trigger",d=".js-dropdown-hidden",l=".js-dropdown-list-item-btn",c=".js-formBuilder-inputs",u=".js-formBuilder-successMessage",m=".js-formBuilder-errorMessage",b='button[type="submit"]',g="field_error",f="dropdown-trigger_error",v="btn_primaryDisabled",p="submit",C="focusout",x="change",E="click",w={REQUIRED:{attribute:"required-message",test:function(e){return""!==e.trim()},message:"This field is required."},EMAIL:{attribute:"email-message",test:function(e){return/^(([^<>()\[\]\\.,;:\s@']+(\.[^<>()\[\]\\.,;:\s@']+)*)|('.+'))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},message:"Please enter a valid email address."},CHECKBOX:{test:function(e){return e.filter(":checked").length>0},message:"Please select an option."}};class B extends r.a{createChildren(){return this.$checkboxes=this.$element.find(n),this.$textfields=this.$element.find(o).not(n),this.$dropdownBtns=this.$element.find(l),this.$errorMessage=$(m),this.$successMessage=$(u),this.$submitBtn=this.$element.find(b),this}enable(){return this.$element.on(p,e=>this.handleFormSubmit(e)),this.$checkboxes.on(x,e=>this.handleCheckboxChange(e)),this.$textfields.on(C,e=>this.handleFieldBlur(e)),this.$dropdownBtns.on(E,e=>this.handleDropdownChange(e)),this.moveHiddenInputs(),this}moveHiddenInputs(){this.$element.append(this.$element.siblings(c))}handleCheckboxChange(e){this.validateCheckbox($(e.currentTarget))}handleFieldBlur(e){this.validateTextField($(e.currentTarget))}handleDropdownChange(e){const t=$(e.currentTarget).closest(i);""!==t.find(d).val()&&this.removeError(t)}handleFormSubmit(e){if(e.preventDefault(),this.processing)return!1;if(this.processing=!0,this.$submitBtn.addClass(v),this.$submitBtn.attr("disabled",!0),this.validateForm()){const e={data:this.$element.serialize(),error:()=>{this.showFail()},success:()=>{this.showSuccess()},type:"POST",url:this.$element.attr("action"),async:!1};this.$submitBtn.addClass(v),this.$submitBtn.attr("disabled",!0),$.ajax(e)}else this.$submitBtn.removeClass(v),this.$submitBtn.removeAttr("disabled");return this.processing=!1,!1}showSuccess(){this.$errorMessage.hide(),this.$successMessage.show()}showFail(){this.$successMessage.hide(),this.$errorMessage.show(),this.$submitBtn.removeClass(v),this.$submitBtn.removeAttr("disabled")}validateForm(){return this.errors=0,this.validateTextFields(),this.validateCheckboxes(),0===this.errors}validateTextFields(){this.$textfields.each((e,t)=>this.validateTextField($(t)))}validateCheckboxes(){this.$checkboxes.each((e,t)=>this.validateCheckbox($(t)))}validateTextField(e){const t=e.closest(i),s=void 0!==e.attr("required"),r="email"===e.attr("type"),a=w.REQUIRED.test(e.val());s&&!a?this.trackError(e.closest(i),w.REQUIRED):r&&a&&!w.EMAIL.test(e.val())?this.trackError(e.closest(i),w.EMAIL):this.removeError(t)}validateCheckbox(e){const t=e.closest(i),s=this.$element.find(`[name=${e.attr("name")}]`),r=s.filter("[required]").length>0;let a=w.CHECKBOX.test(s);r&&!a?this.trackError(t,w.CHECKBOX):r&&a&&this.removeError(t)}trackError(e,t){this.errors++,this.showError(e,t)}showError(e,t){const s=e.find(a).data(t.attribute)||t.message;this.showErrorMessage(e,s)}showErrorMessage(e,t){const s=e.find(h);e.addClass(g);e.find(a).text(t),s.length>0&&s.addClass(f)}removeError(e){const t=e.find(h);e.removeClass(g),e.find(a).text(""),t.length>0&&t.removeClass(f)}}}}]);
//# sourceMappingURL=Form.fb505312e140e46da596.js.map