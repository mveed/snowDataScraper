function datePickHandler(t,e){var a,i=$(e);e||console.error("MUST PASS CLOSE BUTTON INTO DAYTRIPPER"),$(t).off("keydown"),t.setAttribute("role","application"),t.setAttribute("aria-label","Calendar view date-picker");var s=$(".ui-datepicker-prev",t)[0],n=$(".ui-datepicker-next",t)[0];$(s).attr("tabindex","0"),$(n).attr("tabindex","0"),$(n).on("click",handleNextClicks.bind(null,t)),$(s).on("click",handlePrevClicks.bind(null,t)),$(t).on("keydown",function(e){var u=e.which,r=e.target,l=getCurrentDate(t);if($(t).hasClass("isVisuallyHidden")&&(i.removeClass("isVisuallyHidden"),$(t).removeClass("isVisuallyHidden"),updateHeaderElements(t)),l||setHighlightState(l=$("a.ui-state-default")[0],t),27!==u){if(9===u&&e.shiftKey)e.preventDefault(),$(r).hasClass("js-closeButton")?$(".ui-datepicker-prev",t)[0].focus():$(r).hasClass("ui-state-default")?$(".ui-datepicker-prev",t)[0].focus():$(r).hasClass("ui-datepicker-prev")?i[0].focus():$(r).hasClass("ui-datepicker-next")&&(a=$(".ui-state-highlight",t)||$(".ui-state-active",t)[0])&&a.focus();else if(9===u)e.preventDefault(),$(r).hasClass("js-closeButton")?(a=$(".ui-state-highlight",t)||$(".ui-state-active",t)[0])&&a.focus():$(r).hasClass("ui-state-default")?$(".ui-datepicker-next",t)[0].focus():$(r).hasClass("ui-datepicker-next")?i[0].focus():$(r).hasClass("ui-datepicker-prev")&&(a=$(".ui-state-highlight",t)[0]||$(".ui-state-active",t)[0])&&a.focus();else if(37===u)!$(r).hasClass("js-closeButton")&&$(r).hasClass("ui-state-default")&&(e.preventDefault(),previousDay(r,t));else if(39===u)!$(r).hasClass("js-closeButton")&&$(r).hasClass("ui-state-default")&&(e.preventDefault(),nextDay(r,t));else if(38===u)!$(r).hasClass("js-closeButton")&&$(r).hasClass("ui-state-default")&&(e.preventDefault(),upHandler(r,t,s));else if(40===u)!$(r).hasClass("js-closeButton")&&$(r).hasClass("ui-state-default")&&(e.preventDefault(),downHandler(r,t,n));else if(13===u)$(r).hasClass("ui-state-default")?setTimeout(function(){$(".ui-datepicker-prev",t).attr("tabindex","0"),$(".ui-datepicker-next",t).attr("tabindex","0")},100):$(r).hasClass("ui-datepicker-prev")?previousMonth(t):$(r).hasClass("ui-datepicker-next")&&nextMonth(t);else if(32===u)($(r).hasClass("ui-datepicker-prev")||$(r).hasClass("ui-datepicker-next"))&&r.click();else if(33===u)moveOneMonth(r,t,"prev");else if(34===u)moveOneMonth(r,t,"next");else if(36===u){var d=$(r).closest("tbody").find(".ui-state-default")[0];d&&(d.focus(),setHighlightState(d,$("#ui-datepicker-div")[0]))}else if(35===u){var o=$(r).closest("tbody").find(".ui-state-default"),c=o[o.length-1];c&&(c.focus(),setHighlightState(c,$("#ui-datepicker-div")[0]))}}else e.stopPropagation()})}function removeAria(){$("#dp-container").removeAttr("aria-hidden"),$("#skipnav").removeAttr("aria-hidden")}function isOdd(t){return t%2}function moveOneMonth(t,e,a){var i="next"===a?$(".ui-datepicker-next",e)[0]:$(".ui-datepicker-prev",e)[0];if(i){var s="#ui-datepicker-div tbody td:not(.ui-state-disabled)",n=$(s),u=$.inArray(t.parentNode,n);i.click(),setTimeout(function(){updateHeaderElements(e);for(var t=$(s),a=t[u],i=a&&$(a).find("a")[0];!i;)i=(a=t[--u])&&$(a).find("a")[0];setHighlightState(i,$("#ui-datepicker-div",e)[0]),i.focus()},0)}}function handleNextClicks(t){setTimeout(function(){updateHeaderElements(t),prepHighlightState(t),$(".ui-datepicker-next",t).focus(),$(".ui-datepicker-current",t).hide()},0)}function handlePrevClicks(t){setTimeout(function(){updateHeaderElements(t),prepHighlightState(t),$(".ui-datepicker-prev",t).focus(),$(".ui-datepicker-current",t).hide()},0)}function previousDay(t,e){if(t){var a=$(t).closest("td");if(a){var i=$(a).prev(),s=$("a.ui-state-default",i)[0];i&&s?(setHighlightState(s,e),s.focus()):handlePrevious(t,e)}}}function handlePrevious(t,e){if(t){var a=$(t).closest("tr");if(a){var i=$(a).prev();if(i&&0!==i.length){var s=$("td a.ui-state-default",i),n=s[s.length-1];n&&setTimeout(function(){setHighlightState(n,e),n.focus()},0)}else previousMonth(e)}}}function previousMonth(t){$(".ui-datepicker-prev",t)[0].click(),setTimeout(function(){var e=$(t).find(".ui-datepicker-group-first"),a=$("tr",e),i=$("td a.ui-state-default",a[a.length-1]),s=i[i.length-1];updateHeaderElements(t),setHighlightState(s,t),s.focus()},0)}function nextDay(t,e){if(t){var a=$(t).closest("td");if(a){var i=$(a).next(),s=$("a.ui-state-default",i)[0];i&&s?(setHighlightState(s,e),s.focus()):handleNext(t,e)}}}function handleNext(t,e){if(t){var a=$(t).closest("tr"),i=$(a).next();if(i&&0!==i.length){var s=$("a.ui-state-default",i)[0];s&&(setHighlightState(s,e),s.focus())}else nextMonth(e)}}function nextMonth(t){nextMon=$(".ui-datepicker-next",t)[0],nextMon.click(),setTimeout(function(){updateHeaderElements(t);var e=$("a.ui-state-default",t)[0];setHighlightState(e,t),e.focus()},0)}function upHandler(t,e,a){a=$(".ui-datepicker-prev",e)[0];var i=$(t).closest("tr");if(i){var s=$("td",i),n=$("a.ui-state-default",i),u=$.inArray(t,n),r=$(i).prev(),l=$("td",r)[u],d=$("a.ui-state-default",l)[0];r&&l&&d?(setHighlightState(d,e),d.focus()):(a.click(),setTimeout(function(){updateHeaderElements(e);var a=$("tr",e),i=a[a.length-1],n=$("td",i),u=$.inArray(t.parentNode,s),r=n[u],l=$("a.ui-state-default",r)[0];if(i&&r&&l)setHighlightState(l,e),l.focus();else{var d=a[a.length-2],o=$("td",d)[u],c=$("a.ui-state-default",o)[0];c&&(setHighlightState(c,e),c.focus())}},0))}}function downHandler(t,e,a){a=$(".ui-datepicker-next",e)[0];var i=$(t).closest("tr");if(i){var s=$("td",i),n=$.inArray(t.parentNode,s),u=$(i).next(),r=$("td",u)[n],l=$("a.ui-state-default",r)[0];u&&r&&l?(setHighlightState(l,e),l.focus()):(a.click(),setTimeout(function(){updateHeaderElements(e);var t=$("tbody tr",e),a=$("td",t[0])[n],i=$("a.ui-state-default",a)[0];if(a&&i)setHighlightState(i,e),i.focus();else{var s=t[1],u=$("td",s)[n],r=$("a.ui-state-default",u)[0];s&&r&&(setHighlightState(r,e),r.focus())}},0))}}function monthDayYearText(){var t=$(".amaze-date");$(t).each(function(t){t.parentNode.removeChild(t)});var e=document.getElementById("ui-datepicker-div");if(e){var a=$("a.ui-state-default",e);$(a).attr("role","button").on("keydown",function(t){32===t.which&&(t.preventDefault(),t.target.click())}),$(a).each(function(t,a){var i=$(a).closest("tr"),s=$("td",i),n=$.inArray(a.parentNode,s),u=$("thead tr th",e)[n],r=$("span",u)[0],l=$(".ui-datepicker-month",e)[0].innerHTML,d=$(".ui-datepicker-year",e)[0].innerHTML,o=a.innerHTML;if(r&&l&&o&&d){var c=l+" "+a.innerHTML+" "+d+" "+r.title;a.setAttribute("aria-label",c)}})}}function updateHeaderElements(t){var e=$(".ui-datepicker-prev",t)[0],a=$(".ui-datepicker-next",t)[0];$(e).attr("tabindex","0"),$(a).attr("tabindex","0"),a.href="javascript:void(0)",e.href="javascript:void(0)",a.setAttribute("role","button"),e.setAttribute("role","button"),$(a).on("click",handleNextClicks.bind(null,t)),$(e).on("click",handlePrevClicks.bind(null,t))}function prepHighlightState(t){var e;(e=$(".ui-state-highlight",t)[0]||$(".ui-state-default",t)[0])&&t&&setHighlightState(e,t)}function setHighlightState(t,e){var a=getCurrentDate(e);$(a).removeClass("ui-state-highlight"),$(t).addClass("ui-state-highlight")}function getCurrentDate(t){return $(".ui-state-highlight",t)[0]}function firstToCap(t){return t.charAt(0).toUpperCase()+t.slice(1)}ï»¿
