(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{j3DM:function(e,t,i){"use strict";i.r(t),i.d(t,"TimelapseModule",function(){return tt});var a=i("ofXK"),n=i("3Pt+"),s=i("bTqV"),r=i("iadO"),o=i("kmnG"),l=i("NFeN"),c=i("qFsG"),m=i("rDax"),h=i("fXoL"),p=i("FKr1"),u=i("vxfF"),d=i("u47x"),g=i("8LU1"),b=i("0EQZ"),f=i("FtGj"),_=i("XNiG"),v=i("NXyV"),C=i("VRyK"),y=i("JX91"),O=i("eIep"),P=i("IzEk"),M=i("pLZG"),x=i("lJxs"),w=i("/uUt"),T=i("1G5W"),I=i("R0Ic"),D=i("cH1L");const k=["trigger"],S=["panel"];function F(e,t){if(1&e&&(h.Ub(0,"span",8),h.Dc(1),h.Tb()),2&e){const e=h.fc();h.Cb(1),h.Ec(e.placeholder)}}function j(e,t){if(1&e&&(h.Ub(0,"span",12),h.Dc(1),h.Tb()),2&e){const e=h.fc(2);h.Cb(1),h.Ec(e.triggerValue)}}function U(e,t){1&e&&h.jc(0,0,["*ngSwitchCase","true"])}function V(e,t){if(1&e&&(h.Ub(0,"span",9),h.Bc(1,j,2,1,"span",10),h.Bc(2,U,1,0,"ng-content",11),h.Tb()),2&e){const e=h.fc();h.lc("ngSwitch",!!e.customTrigger),h.Cb(2),h.lc("ngSwitchCase",!0)}}function B(e,t){if(1&e){const e=h.Vb();h.Ub(0,"div",13),h.Ub(1,"div",14,15),h.bc("@transformPanel.done",function(t){return h.uc(e),h.fc()._panelDoneAnimatingStream.next(t.toState)})("keydown",function(t){return h.uc(e),h.fc()._handleKeydown(t)}),h.jc(3,1),h.Tb(),h.Tb()}if(2&e){const e=h.fc();h.lc("@transformPanelWrap",void 0),h.Cb(1),h.Fb("mat-select-panel ",e._getPanelTheme(),""),h.yc("transform-origin",e._transformOrigin)("font-size",e._triggerFontSize,"px"),h.lc("ngClass",e.panelClass)("@transformPanel",e.multiple?"showing-multiple":"showing"),h.Db("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}const N=[[["mat-select-trigger"]],"*"],R=["mat-select-trigger","*"],$={transformPanelWrap:Object(I.n)("transformPanelWrap",[Object(I.m)("* => void",Object(I.i)("@transformPanel",[Object(I.f)()],{optional:!0}))]),transformPanel:Object(I.n)("transformPanel",[Object(I.k)("void",Object(I.l)({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),Object(I.k)("showing",Object(I.l)({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),Object(I.k)("showing-multiple",Object(I.l)({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),Object(I.m)("void => *",Object(I.e)("120ms cubic-bezier(0, 0, 0.2, 1)")),Object(I.m)("* => void",Object(I.e)("100ms 25ms linear",Object(I.l)({opacity:0})))])};let W=0;const A=new h.r("mat-select-scroll-strategy"),E=new h.r("MAT_SELECT_CONFIG"),L={provide:A,deps:[m.c],useFactory:function(e){return()=>e.scrollStrategies.reposition()}};class Y{constructor(e,t){this.source=e,this.value=t}}class H{constructor(e,t,i,a,n){this._elementRef=e,this._defaultErrorStateMatcher=t,this._parentForm=i,this._parentFormGroup=a,this.ngControl=n}}const z=Object(p.p)(Object(p.s)(Object(p.q)(Object(p.r)(H)))),q=new h.r("MatSelectTrigger");let G=(()=>{class e extends z{constructor(e,t,i,a,n,s,r,o,l,c,m,p,u,d){var g,b,f;super(n,a,r,o,c),this._viewportRuler=e,this._changeDetectorRef=t,this._ngZone=i,this._dir=s,this._parentFormField=l,this.ngControl=c,this._liveAnnouncer=u,this._defaultOptions=d,this._panelOpen=!1,this._compareWith=(e,t)=>e===t,this._uid="mat-select-"+W++,this._triggerAriaLabelledBy=null,this._destroy=new _.a,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+W++,this._panelDoneAnimatingStream=new _.a,this._overlayPanelClass=(null===(g=this._defaultOptions)||void 0===g?void 0:g.overlayPanelClass)||"",this._focused=!1,this.controlType="mat-select",this._required=!1,this._multiple=!1,this._disableOptionCentering=null!==(f=null===(b=this._defaultOptions)||void 0===b?void 0:b.disableOptionCentering)&&void 0!==f&&f,this.ariaLabel="",this.optionSelectionChanges=Object(v.a)(()=>{const e=this.options;return e?e.changes.pipe(Object(y.a)(e),Object(O.a)(()=>Object(C.a)(...e.map(e=>e.onSelectionChange)))):this._ngZone.onStable.pipe(Object(P.a)(1),Object(O.a)(()=>this.optionSelectionChanges))}),this.openedChange=new h.n,this._openedStream=this.openedChange.pipe(Object(M.a)(e=>e),Object(x.a)(()=>{})),this._closedStream=this.openedChange.pipe(Object(M.a)(e=>!e),Object(x.a)(()=>{})),this.selectionChange=new h.n,this.valueChange=new h.n,this.ngControl&&(this.ngControl.valueAccessor=this),null!=(null==d?void 0:d.typeaheadDebounceInterval)&&(this._typeaheadDebounceInterval=d.typeaheadDebounceInterval),this._scrollStrategyFactory=p,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(m)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get required(){return this._required}set required(e){this._required=Object(g.b)(e),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(e){this._multiple=Object(g.b)(e)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(e){this._disableOptionCentering=Object(g.b)(e)}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){(e!==this._value||this._multiple&&Array.isArray(e))&&(this.options&&this._setSelectionByValue(e),this._value=e)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(e){this._typeaheadDebounceInterval=Object(g.e)(e)}get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new b.b(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(Object(w.a)(),Object(T.a)(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(Object(T.a)(this._destroy)).subscribe(e=>{e.added.forEach(e=>e.select()),e.removed.forEach(e=>e.deselect())}),this.options.changes.pipe(Object(y.a)(null),Object(T.a)(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const e=this._getTriggerAriaLabelledby();if(e!==this._triggerAriaLabelledBy){const t=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?t.setAttribute("aria-labelledby",e):t.removeAttribute("aria-labelledby")}this.ngControl&&this.updateErrorState()}ngOnChanges(e){e.disabled&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(e){this.value=e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel.selected:this._selectionModel.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const e=this._selectionModel.selected.map(e=>e.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){const t=e.keyCode,i=t===f.c||t===f.o||t===f.h||t===f.l,a=t===f.e||t===f.m,n=this._keyManager;if(!n.isTyping()&&a&&!Object(f.r)(e)||(this.multiple||e.altKey)&&i)e.preventDefault(),this.open();else if(!this.multiple){const t=this.selected;n.onKeydown(e);const i=this.selected;i&&t!==i&&this._liveAnnouncer.announce(i.viewValue,1e4)}}_handleOpenKeydown(e){const t=this._keyManager,i=e.keyCode,a=i===f.c||i===f.o,n=t.isTyping();if(a&&e.altKey)e.preventDefault(),this.close();else if(n||i!==f.e&&i!==f.m||!t.activeItem||Object(f.r)(e))if(!n&&this._multiple&&i===f.a&&e.ctrlKey){e.preventDefault();const t=this.options.some(e=>!e.disabled&&!e.selected);this.options.forEach(e=>{e.disabled||(t?e.select():e.deselect())})}else{const i=t.activeItemIndex;t.onKeydown(e),this._multiple&&a&&e.shiftKey&&t.activeItem&&t.activeItemIndex!==i&&t.activeItem._selectViaInteraction()}else e.preventDefault(),t.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this.disabled||this.panelOpen||(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this.overlayDir.positionChange.pipe(Object(P.a)(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this._selectionModel.selected.forEach(e=>e.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(e=>this._selectValue(e)),this._sortValues();else{const t=this._selectValue(e);t?this._keyManager.updateActiveItem(t):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectValue(e){const t=this.options.find(t=>{if(this._selectionModel.isSelected(t))return!1;try{return null!=t.value&&this._compareWith(t.value,e)}catch(i){return!1}});return t&&this._selectionModel.select(t),t}_initKeyManager(){this._keyManager=new d.b(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(Object(T.a)(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe(Object(T.a)(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):this._panelOpen||this.multiple||!this._keyManager.activeItem||this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const e=Object(C.a)(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(Object(T.a)(e)).subscribe(e=>{this._onSelect(e.source,e.isUserInput),e.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),Object(C.a)(...this.options.map(e=>e._stateChanges)).pipe(Object(T.a)(e)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(e,t){const i=this._selectionModel.isSelected(e);null!=e.value||this._multiple?(i!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),t&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),t&&this.focus())):(e.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(e.value)),i!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const e=this.options.toArray();this._selectionModel.sort((t,i)=>this.sortComparator?this.sortComparator(t,i,e):e.indexOf(t)-e.indexOf(i)),this.stateChanges.next()}}_propagateChanges(e){let t=null;t=this.multiple?this.selected.map(e=>e.value):this.selected?this.selected.value:e,this._value=t,this.valueChange.emit(t),this._onChange(t),this.selectionChange.emit(this._getChangeEvent(t)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){var e;return!this._panelOpen&&!this.disabled&&(null===(e=this.options)||void 0===e?void 0:e.length)>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const e=this._getLabelId();return this.ariaLabelledby?e+" "+this.ariaLabelledby:e}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getLabelId(){var e;return(null===(e=this._parentFormField)||void 0===e?void 0:e.getLabelId())||""}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;let e=this._getLabelId()+" "+this._valueId;return this.ariaLabelledby&&(e+=" "+this.ariaLabelledby),e}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){this._ariaDescribedby=e.join(" ")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return e.\u0275fac=function(t){return new(t||e)(h.Ob(u.d),h.Ob(h.h),h.Ob(h.A),h.Ob(p.b),h.Ob(h.l),h.Ob(D.b,8),h.Ob(n.n,8),h.Ob(n.f,8),h.Ob(o.a,8),h.Ob(n.k,10),h.Zb("tabindex"),h.Ob(A),h.Ob(d.j),h.Ob(E,8))},e.\u0275dir=h.Jb({type:e,viewQuery:function(e,t){if(1&e&&(h.Jc(k,1),h.Jc(S,1),h.Jc(m.a,1)),2&e){let e;h.qc(e=h.cc())&&(t.trigger=e.first),h.qc(e=h.cc())&&(t.panel=e.first),h.qc(e=h.cc())&&(t.overlayDir=e.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],id:"id",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",typeaheadDebounceInterval:"typeaheadDebounceInterval",panelClass:"panelClass",ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",sortComparator:"sortComparator"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[h.zb,h.Ab]}),e})(),K=(()=>{class e extends G{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(e,t,i){const a=this._getItemHeight();return Math.min(Math.max(0,a*e-t+a/2),i)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(Object(T.a)(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe(Object(P.a)(1)).subscribe(()=>{this._triggerFontSize&&this.overlayDir.overlayRef&&this.overlayDir.overlayRef.overlayElement&&(this.overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(e){const t=Object(p.m)(e,this.options,this.optionGroups),i=this._getItemHeight();this.panel.nativeElement.scrollTop=Object(p.n)((e+t)*i,i,this.panel.nativeElement.scrollTop,256)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(e){this.panelOpen?this._scrollTop=0:(this.overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(e)}_getChangeEvent(e){return new Y(this,e)}_calculateOverlayOffsetX(){const e=this.overlayDir.overlayRef.overlayElement.getBoundingClientRect(),t=this._viewportRuler.getViewportSize(),i=this._isRtl(),a=this.multiple?56:32;let n;if(this.multiple)n=40;else if(this.disableOptionCentering)n=16;else{let e=this._selectionModel.selected[0]||this.options.first;n=e&&e.group?32:16}i||(n*=-1);const s=0-(e.left+n-(i?a:0)),r=e.right+n-t.width+(i?0:a);s>0?n+=s+8:r>0&&(n-=r+8),this.overlayDir.offsetX=Math.round(n),this.overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(e,t,i){const a=this._getItemHeight(),n=(a-this._triggerRect.height)/2,s=Math.floor(256/a);let r;return this.disableOptionCentering?0:(r=0===this._scrollTop?e*a:this._scrollTop===i?(e-(this._getItemCount()-s))*a+(a-(this._getItemCount()*a-256)%a):t-a/2,Math.round(-1*r-n))}_checkOverlayWithinViewport(e){const t=this._getItemHeight(),i=this._viewportRuler.getViewportSize(),a=this._triggerRect.top-8,n=i.height-this._triggerRect.bottom-8,s=Math.abs(this._offsetY),r=Math.min(this._getItemCount()*t,256)-s-this._triggerRect.height;r>n?this._adjustPanelUp(r,n):s>a?this._adjustPanelDown(s,a,e):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(e,t){const i=Math.round(e-t);this._scrollTop-=i,this._offsetY-=i,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(e,t,i){const a=Math.round(e-t);if(this._scrollTop+=a,this._offsetY+=a,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=i)return this._scrollTop=i,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const e=this._getItemHeight(),t=this._getItemCount(),i=Math.min(t*e,256),a=t*e-i;let n;n=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),n+=Object(p.m)(n,this.options,this.optionGroups);const s=i/2;this._scrollTop=this._calculateOverlayScroll(n,s,a),this._offsetY=this._calculateOverlayOffsetY(n,s,a),this._checkOverlayWithinViewport(a)}_getOriginBasedOnOption(){const e=this._getItemHeight(),t=(e-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-t+e/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return e.\u0275fac=function(t){return X(t||e)},e.\u0275cmp=h.Ib({type:e,selectors:[["mat-select"]],contentQueries:function(e,t,i){if(1&e&&(h.Hb(i,q,1),h.Hb(i,p.h,1),h.Hb(i,p.d,1)),2&e){let e;h.qc(e=h.cc())&&(t.customTrigger=e.first),h.qc(e=h.cc())&&(t.options=e),h.qc(e=h.cc())&&(t.optionGroups=e)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:20,hostBindings:function(e,t){1&e&&h.bc("keydown",function(e){return t._handleKeydown(e)})("focus",function(){return t._onFocus()})("blur",function(){return t._onBlur()}),2&e&&(h.Db("id",t.id)("tabindex",t.tabIndex)("aria-controls",t.panelOpen?t.id+"-panel":null)("aria-expanded",t.panelOpen)("aria-label",t.ariaLabel||null)("aria-required",t.required.toString())("aria-disabled",t.disabled.toString())("aria-invalid",t.errorState)("aria-describedby",t._ariaDescribedby||null)("aria-activedescendant",t._getAriaActiveDescendant()),h.Gb("mat-select-disabled",t.disabled)("mat-select-invalid",t.errorState)("mat-select-required",t.required)("mat-select-empty",t.empty)("mat-select-multiple",t.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[h.Bb([{provide:o.e,useExisting:e},{provide:p.e,useExisting:e}]),h.zb],ngContentSelectors:R,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(e,t){if(1&e&&(h.kc(N),h.Ub(0,"div",0,1),h.bc("click",function(){return t.toggle()}),h.Ub(3,"div",2),h.Bc(4,F,2,1,"span",3),h.Bc(5,V,3,2,"span",4),h.Tb(),h.Ub(6,"div",5),h.Pb(7,"div",6),h.Tb(),h.Tb(),h.Bc(8,B,4,14,"ng-template",7),h.bc("backdropClick",function(){return t.close()})("attach",function(){return t._onAttached()})("detach",function(){return t.close()})),2&e){const e=h.rc(1);h.Db("aria-owns",t.panelOpen?t.id+"-panel":null),h.Cb(3),h.lc("ngSwitch",t.empty),h.Db("id",t._valueId),h.Cb(1),h.lc("ngSwitchCase",!0),h.Cb(1),h.lc("ngSwitchCase",!1),h.Cb(3),h.lc("cdkConnectedOverlayPanelClass",t._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",t._scrollStrategy)("cdkConnectedOverlayOrigin",e)("cdkConnectedOverlayOpen",t.panelOpen)("cdkConnectedOverlayPositions",t._positions)("cdkConnectedOverlayMinWidth",null==t._triggerRect?null:t._triggerRect.width)("cdkConnectedOverlayOffsetY",t._offsetY)}},directives:[m.b,a.o,a.p,m.a,a.q,a.k],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-table;cursor:pointer;position:relative;box-sizing:border-box}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-select-value{display:table-cell;max-width:0;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{display:table-cell;vertical-align:middle}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;-webkit-text-fill-color:transparent;transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px}\n'],encapsulation:2,data:{animation:[$.transformPanelWrap,$.transformPanel]},changeDetection:0}),e})();const X=h.Wb(K);let J=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.Mb({type:e}),e.\u0275inj=h.Lb({providers:[L],imports:[[a.c,m.f,p.i,p.f],u.a,o.f,p.i,p.f]}),e})();var Q=i("5RNC"),Z=i("tyNb"),ee=i("sYmb"),te=i("dBhb"),ie=i("Ef4b"),ae=i("Ygrt"),ne=i("2/kF"),se=i("Gnqh"),re=i("0Faz"),oe=i("mrSG"),le=i("VfN6"),ce=i("itXk"),me=i("4r8k"),he=i("2Vo4"),pe=i("quSY"),ue=i("l5mm"),de=i("vkgz"),ge=i("NJ9Y"),be=i("3E1i");let fe=(()=>{class e{constructor(e){this.canvasImageLoaderService=e,this.isSmoothPlay$=new he.a(!0),this.currentImage$=new he.a(null),this.firstImageIndex$=new he.a(0),this.lastImageIndex$=new he.a(0),this.currentImageIndex$=new he.a(-1),this.currentImageIndex=-1,this.speed=3,this.playSubscription=new pe.a,this.canvasPrerender=[]}setStructure(e){this.timalapseStructure=e}doesStructureExists(){return!!this.timalapseStructure}reset(){this.stopTimelapse(),this.timalapseStructure=null,this.timelapseImages=null,this.currentImageIndex=-1,this.currentImageIndex$.next(this.currentImageIndex),this.currentImage$.next(null),this.canvasImageLoaderService.abortLoadTimelapse(),this.canvasPrerender=[]}loadImages$(){this.setTimelapseImages(),this.setCanvasPrerender();const e=this.timelapseImages.map(e=>e.url),t=this.getBestResolutionStructure(this.timalapseStructure.images[0]),i=t.size.width,a=t.size.height,n=[];let s=0;return this.canvasImageLoaderService.loadTimelapse$(e).pipe(Object(de.a)(e=>{if(e instanceof be.b){const t=e.imageBitmap||e.imgEl;if(!0===this.isSmoothPlay$.value){this.canvasPrerender[s].ctx.fillStyle="#000000",this.canvasPrerender[s].ctx.fillRect(0,0,i,2e3),this.canvasPrerender[s].ctx.save();const e=2*window.innerWidth/i;this.canvasPrerender[s].ctx.scale(e,e),this.canvasPrerender[s].ctx.translate(0,window.innerHeight-a*e)}else this.canvasPrerender[s].ctx.restore();this.canvasPrerender[s].ctx.drawImage(t,0,0,i,a),this.timelapseImages[s].source=this.canvasPrerender[s].canvas,s++}n.push(e)}),Object(ge.a)(),Object(x.a)(()=>(this.lastImageIndex$.next(this.timelapseImages.length-1),[n])))}getPreviewImageData(){return this.getBestResolutionStructure(this.timalapseStructure.images[0])}getFirstImageIndex$(){return this.firstImageIndex$}getLastImageIndex$(){return this.lastImageIndex$}getCurrentImageIndex$(){return this.currentImageIndex$}getCurrentImage$(){return this.currentImage$.pipe(Object(M.a)(e=>!!e))}goToImage(e){this.currentImageIndex=e,this.currentImageIndex$.next(this.currentImageIndex),this.currentImage$.next(this.timelapseImages[this.currentImageIndex])}goToNextImage(){this.currentImageIndex++,this.currentImageIndex===this.timelapseImages.length&&(this.currentImageIndex=0),this.currentImageIndex$.next(this.currentImageIndex),this.currentImage$.next(this.timelapseImages[this.currentImageIndex])}goToPreviousImage(){this.currentImageIndex--,this.currentImageIndex<0&&(this.currentImageIndex=this.timelapseImages.length-1),this.currentImageIndex$.next(this.currentImageIndex),this.currentImage$.next(this.timelapseImages[this.currentImageIndex])}setSpeed(e){this.speed=e,this.stopTimelapse(),0!==e&&this.playTimelapse()}playTimelapse(){0!==this.speed&&(this.playSubscription.unsubscribe(),this.isSmoothPlay$.value&&(this.speed=1),this.playSubscription=Object(ue.a)(1/this.speed*1e3).subscribe(()=>this.goToNextImage()))}stopTimelapse(){this.playSubscription.unsubscribe()}getTimelapseSpeed(){return this.speed}isSmoothPlay(){return this.isSmoothPlay$}changeSmoothPlayState(e){this.isSmoothPlay$.next(e||!this.isSmoothPlay$.value)}setTimelapseImages(){this.timelapseImages=this.timalapseStructure.images.map(e=>({id:e.id,url:e.structure.half.url_full,createdAt:new Date(1e3*e.datetime)}))}setCanvasPrerender(){const e=this.getBestResolutionStructure(this.timalapseStructure.images[0]);this.timelapseImages.forEach(t=>{const i=document.createElement("canvas");i.width=e.size.width,i.height=e.size.height;const a=i.getContext("2d");this.canvasPrerender.push({canvas:i,ctx:a})})}getBestResolutionStructure(e){let t;const i=e.structure.full.w,a=e.structure.full2.w;return t=e.structure.full3.w>a?e.structure.full3:a>i?e.structure.full2:i>e.structure.half.w?e.structure.full:e.structure.half,{id:e.id,url:e.structure.half.url_full,previewUrl:e.structure.oneeighth.url_full,size:{width:e.structure.half.w,height:e.structure.half.h},tiles:{url:t.url_tile,axis:{x:t.x,y:t.y},size:{width:e.tile.w,height:e.tile.h},containerSize:{width:t.w,height:t.h}}}}}return e.\u0275fac=function(t){return new(t||e)(h.Yb(be.c))},e.\u0275prov=h.Kb({token:e,factory:e.\u0275fac}),e})();var _e=i("R3IY"),ve=i("wbTk"),Ce=i("pzvt"),ye=i("QDQP"),Oe=i("EdfR"),Pe=i("/DeH");function Me(e,t){if(1&e){const e=h.Vb();h.Ub(0,"div",11),h.Ub(1,"button",12),h.bc("click",function(){return h.uc(e),h.fc().changePlayerView()}),h.Ub(2,"mat-icon"),h.Dc(3,"menu"),h.Tb(),h.Tb(),h.Tb()}}function xe(e,t){if(1&e&&(h.Ub(0,"div",13),h.Pb(1,"app-live-cameras-chooser",5),h.Pb(2,"app-camera-menu",14),h.Tb()),2&e){const e=h.fc();h.Cb(1),h.lc("settings",e.liveCamerasSettings),h.Cb(1),h.lc("settings",e.cameraMenuSettings)("showToggleButton",!1)("showHotspotButton",!1)("showTimelapseButton",!0)}}let we=(()=>{let e=class{constructor(e,t,i,a){this.activatedRoute=e,this.timelapsePlayerService=t,this.canvasPublicService=i,this.ngZone=a,this.areImageLoaded=!1}ngOnInit(){this.handleResolvers(),this.playerImage$=this.timelapsePlayerService.getCurrentImage$(),this.playerIndex$=this.timelapsePlayerService.getCurrentImageIndex$(),this.playerIndexMin$=this.timelapsePlayerService.getFirstImageIndex$(),this.playerIndexMax$=this.timelapsePlayerService.getLastImageIndex$(),this.isSmoothPlay$=this.timelapsePlayerService.isSmoothPlay()}ngAfterViewInit(){this.canvasComponent.loadPreviewImage(this.timelapsePlayerService.getPreviewImageData())}ngOnDestroy(){this.timelapsePlayerService.reset()}sliderChangeValue(e){this.timelapsePlayerService.goToImage(e.value)}goToPreviousImage(){this.timelapsePlayerService.stopTimelapse(),this.timelapsePlayerService.goToPreviousImage(),this.timelapsePlayerService.playTimelapse()}goToNextImage(){this.timelapsePlayerService.stopTimelapse(),this.timelapsePlayerService.goToNextImage(),this.timelapsePlayerService.playTimelapse()}playPlayer(){this.areImageLoaded&&this.timelapsePlayerService.playTimelapse()}stopPlayer(){this.areImageLoaded&&this.timelapsePlayerService.stopTimelapse()}loadImages(){this.timelapsePlayerService.loadImages$().pipe(Object(le.b)(this)).subscribe(()=>{this.ngZone.run(()=>{this.areImageLoaded=!0,this.playPlayer(),this.onTimelapseImageChange(),this.onTimelapseSpeedChange()})})}changePlayerView(){this.timelapsePlayerService.changeSmoothPlayState(),this.loadImages()}onTimelapseImageChange(){Object(ce.b)([this.timelapsePlayerService.getCurrentImage$(),this.isSmoothPlay$]).subscribe(([e,t])=>{this.canvasComponent.setMainImage(e.source,this.timelapsePlayerService.getPreviewImageData(),t)})}onTimelapseSpeedChange(){this.canvasPublicService.getTimelapseSpeed$().pipe(Object(le.b)(this)).subscribe(e=>{this.timelapsePlayerService.setSpeed(e)})}handleResolvers(){this.activatedRoute.data.pipe(Object(le.b)(this)).subscribe(e=>{this.canvasSettings=e.canvasSettings,this.compassSettings=e.compassSettings,this.liveCamerasSettings=e.liveCamerasSettings,this.cameraMenuSettings=e.cameraMenuSettings})}};return e.\u0275fac=function(t){return new(t||e)(h.Ob(Z.a),h.Ob(fe),h.Ob(_e.a),h.Ob(h.A))},e.\u0275cmp=h.Ib({type:e,selectors:[["app-timelapse-player"]],viewQuery:function(e,t){if(1&e&&h.Jc(me.a,1),2&e){let e;h.qc(e=h.cc())&&(t.canvasComponent=e.first)}},decls:19,vars:30,consts:[[3,"routerPopupIsFullScreen"],[3,"isSmoothPlay","disableImageLoad","canvasSettings","previewImageLoaded"],["class","camera-menu",4,"ngIf"],["class","timelapse-navigation",4,"ngIf"],[1,"timelapse-compass",3,"ngClass"],[3,"settings"],[1,"timelapse-footer"],[1,"timelapse-time-indicator"],[3,"timeAt","hasButtons","previous","next"],[1,"timelapse-slider"],[3,"value","min","max","disabled","mousedown","mouseup","input"],[1,"camera-menu"],[1,"camera-menu__button",3,"click"],[1,"timelapse-navigation"],[3,"settings","showToggleButton","showHotspotButton","showTimelapseButton"]],template:function(e,t){if(1&e&&(h.Ub(0,"app-router-popup",0),h.Ub(1,"app-canvas",1),h.bc("previewImageLoaded",function(){return t.loadImages()}),h.gc(2,"async"),h.Tb(),h.Bc(3,Me,4,0,"div",2),h.gc(4,"async"),h.Bc(5,xe,3,5,"div",3),h.gc(6,"async"),h.Ub(7,"div",4),h.gc(8,"async"),h.Pb(9,"app-compass-container",5),h.Tb(),h.Ub(10,"div",6),h.Ub(11,"div",7),h.Ub(12,"app-ui-camera-time-indicator",8),h.bc("previous",function(){return t.goToPreviousImage()})("next",function(){return t.goToNextImage()}),h.gc(13,"async"),h.Tb(),h.Tb(),h.Ub(14,"div",9),h.Ub(15,"mat-slider",10),h.bc("mousedown",function(){return t.stopPlayer()})("mouseup",function(){return t.playPlayer()})("input",function(e){return t.sliderChangeValue(e)}),h.gc(16,"async"),h.gc(17,"async"),h.gc(18,"async"),h.Tb(),h.Tb(),h.Tb(),h.Tb()),2&e){let e=null;h.lc("routerPopupIsFullScreen",!0),h.Cb(1),h.lc("isSmoothPlay",h.hc(2,14,t.isSmoothPlay$))("disableImageLoad",!0)("canvasSettings",t.canvasSettings),h.Cb(2),h.lc("ngIf",h.hc(4,16,t.isSmoothPlay$)),h.Cb(2),h.lc("ngIf",!h.hc(6,18,t.isSmoothPlay$)),h.Cb(2),h.lc("ngClass",h.hc(8,20,t.isSmoothPlay$)?"hidden":""),h.Cb(2),h.lc("settings",t.compassSettings),h.Cb(3),h.lc("timeAt",null==(e=h.hc(13,22,t.playerImage$))?null:e.createdAt)("hasButtons",!0),h.Cb(3),h.lc("value",h.hc(16,24,t.playerIndex$))("min",h.hc(17,26,t.playerIndexMin$))("max",h.hc(18,28,t.playerIndexMax$))("disabled",!t.areImageLoaded)}},directives:[ve.a,me.a,a.m,a.k,Ce.a,ye.a,Q.a,l.a,Oe.a,Pe.a],pipes:[a.b],styles:["[_nghost-%COMP%]{display:block}.timelapse-navigation[_ngcontent-%COMP%]{position:absolute;top:10px;left:30px}.timelapse-compass[_ngcontent-%COMP%]{position:absolute;top:30px;right:130px;display:block}.timelapse-compass.hidden[_ngcontent-%COMP%]{display:none}.timelapse-footer[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;left:0;padding:15px 7%}.timelapse-footer[_ngcontent-%COMP%]   .timelapse-time-indicator[_ngcontent-%COMP%]{display:flex;justify-content:center;padding-bottom:20px}.camera-menu[_ngcontent-%COMP%]{position:absolute;top:12vh;left:2vw;display:flex;flex-direction:column;justify-content:space-between;width:60px;border-radius:18px;box-shadow:0 0 40px 0 rgba(60,66,91,.3);overflow:hidden;pointer-events:all;transition:transform .3s ease;will-change:transform}.theme-light   [_nghost-%COMP%]   .camera-menu[_ngcontent-%COMP%]{background-color:#fff}.theme-dark   [_nghost-%COMP%]   .camera-menu[_ngcontent-%COMP%]{background-color:#222}.camera-menu__button[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:inherit;height:60px;padding:0;border:none;cursor:pointer;outline:none}"],changeDetection:0}),e=Object(oe.a)([Object(le.a)()],e),e})();var Te,Ie=i("PqYM"),De=i("nYR2"),ke=i("ZxDN"),Se=i("fkFo"),Fe=function(e){return e.forWeb="for_web",e.forDownload="for_download",e}({}),je=function(e){return e.lastDay="last_day",e.lastWeek="last_week",e.lastMonth="last_month",e.lastYear="last_year",e.custom="custom",e}({}),Ue=i("H8Wg");function Ve(e,t){if(1&e){const e=h.Vb();h.Ub(0,"div",4),h.Ub(1,"div"),h.Ub(2,"span"),h.Dc(3),h.gc(4,"translate"),h.Tb(),h.Ub(5,"mat-form-field",5),h.bc("click",function(){return h.uc(e),h.rc(9).open()}),h.Ub(6,"input",6),h.bc("dateChange",function(t){return h.uc(e),h.fc().onDateFromChange(t)}),h.Tb(),h.Pb(7,"mat-datepicker-toggle",7),h.Pb(8,"mat-datepicker",8,9),h.Tb(),h.Tb(),h.Ub(10,"div"),h.Ub(11,"span"),h.Dc(12),h.gc(13,"translate"),h.Tb(),h.Ub(14,"mat-form-field",5),h.bc("click",function(){return h.uc(e),h.rc(18).open()}),h.Ub(15,"input",10),h.bc("dateChange",function(t){return h.uc(e),h.fc().onDateToChange(t)}),h.Tb(),h.Pb(16,"mat-datepicker-toggle",7),h.Pb(17,"mat-datepicker",8,11),h.Tb(),h.Tb(),h.Tb()}if(2&e){const e=h.rc(9),t=h.rc(18),i=h.fc();h.Cb(3),h.Ec(h.hc(4,12,"_timelapse_from")),h.Cb(3),h.lc("matDatepicker",e)("min",i.minDateFrom)("max",i.maxDateFrom),h.Cb(1),h.lc("for",e),h.Cb(1),h.lc("calendarHeaderComponent",i.calendarHeaderComponent),h.Cb(4),h.Ec(h.hc(13,14,"_timelapse_to")),h.Cb(3),h.lc("matDatepicker",t)("min",i.minDateTo)("max",i.maxDateTo),h.Cb(1),h.lc("for",t),h.Cb(1),h.lc("calendarHeaderComponent",i.calendarHeaderComponent)}}function Be(e,t){if(1&e){const e=h.Vb();h.Ub(0,"div",12),h.Ub(1,"div",13),h.Ub(2,"div"),h.Dc(3),h.Tb(),h.Ub(4,"div"),h.Dc(5),h.gc(6,"translate"),h.Tb(),h.Tb(),h.Ub(7,"mat-slider",14),h.bc("input",function(t){return h.uc(e),h.fc().onPictureNumberChange(t.value)}),h.Tb(),h.Tb()}if(2&e){const e=h.fc();h.Cb(3),h.Fc(" ",e.form.get("pictureNumber").value," "),h.Cb(2),h.Ec(h.hc(6,4,"_timelapse_pictures")),h.Cb(2),h.lc("min",e.pictureNumberMin)("max",e.pictureNumberMax)}}function Ne(e,t){if(1&e){const e=h.Vb();h.Ub(0,"div",12),h.Ub(1,"div",13),h.Ub(2,"div"),h.Dc(3),h.Tb(),h.Ub(4,"div"),h.Dc(5),h.gc(6,"translate"),h.Tb(),h.Tb(),h.Ub(7,"mat-slider",15),h.bc("input",function(t){return h.uc(e),h.fc().onPictureNumberPerDayChange(t.value)}),h.Tb(),h.Tb()}if(2&e){const e=h.fc();h.Cb(3),h.Fc(" ",e.form.get("pictureNumberPerDay").value," "),h.Cb(2),h.Ec(h.hc(6,3,"_timelapse_pictures_perday")),h.Cb(2),h.lc("max",e.pictureNumberPerDayMax)}}function Re(e,t){if(1&e&&(h.Ub(0,"mat-option",22),h.Dc(1),h.Tb()),2&e){const e=t.$implicit;h.lc("value",e),h.Cb(1),h.Fc(" ",e," ")}}function $e(e,t){if(1&e&&(h.Ub(0,"mat-option",22),h.Dc(1),h.Tb()),2&e){const e=t.$implicit;h.lc("value",e),h.Cb(1),h.Fc(" ",e," ")}}function We(e,t){if(1&e&&(h.Ub(0,"div",16),h.Ub(1,"span"),h.Dc(2),h.gc(3,"translate"),h.Tb(),h.Ub(4,"div",17),h.Ub(5,"mat-form-field",18),h.Ub(6,"mat-select",19),h.Bc(7,Re,2,2,"mat-option",20),h.Tb(),h.Tb(),h.Ub(8,"span"),h.Dc(9,":"),h.Tb(),h.Ub(10,"mat-form-field",18),h.Ub(11,"mat-select",21),h.Bc(12,$e,2,2,"mat-option",20),h.Tb(),h.Tb(),h.Tb(),h.Tb()),2&e){const e=h.fc();h.Cb(2),h.Ec(h.hc(3,3,"_timelapse_time_of_day")),h.Cb(5),h.lc("ngForOf",e.availableHours),h.Cb(5),h.lc("ngForOf",e.availableMinutes)}}let Ae=(()=>{let e=Te=class{constructor(e){this.fb=e,this.timeFrames=je,this.calendarHeaderComponent=Ue.a;const t=new Date;t.setHours(0,0,0,0),this.minDateTo=t,this.maxDateFrom=t,this.maxDateTo=t}get isPicturesInputVisible(){return this.activeTimeFrame===this.timeFrames.lastDay}get isPicturesNumberPerDayInputVisible(){if(this.activeTimeFrame===this.timeFrames.lastWeek)return!0;if(this.activeTimeFrame===this.timeFrames.lastMonth&&this.activeTab===Fe.forDownload)return!0;if(this.activeTimeFrame===this.timeFrames.custom&&this.activeTab===Fe.forWeb){const e=this.getDayDiff();if(e>0&&e<7)return!0}if(this.activeTimeFrame===this.timeFrames.custom&&this.activeTab===Fe.forDownload){const e=this.getDayDiff();if(e>0&&e<31)return!0}return!1}get isTimeInputVisible(){if(this.activeTab===Fe.forWeb){if(this.activeTimeFrame===this.timeFrames.lastMonth||this.activeTimeFrame===this.timeFrames.lastYear)return!0;if(this.activeTimeFrame===this.timeFrames.custom&&this.getDayDiff()>=7)return!0}else if(this.activeTab===Fe.forDownload){if(this.activeTimeFrame===this.timeFrames.lastYear)return!0;if(this.activeTimeFrame===this.timeFrames.custom&&this.getDayDiff()>=31)return!0}return!1}get isDatesInputVisible(){return this.activeTimeFrame===this.timeFrames.custom}ngOnInit(){this.setAvailableHours(),this.setAvailableMinutes(),this.buildForm()}ngOnChanges(){this.activeTimeFrame&&this.activeTab&&this.calcLimits()}ngAfterViewInit(){this.form.valueChanges.pipe(Object(le.b)(this)).subscribe(()=>{this.emitValue(this.form.getRawValue())})}buildForm(){this.form=this.fb.group({from:[{value:"",disabled:!0}],to:[{value:"",disabled:!0}],pictureNumber:[""],pictureNumberPerDay:[""],time:this.fb.group({hours:[""],minutes:[""]})})}writeValue(e){this.form.patchValue(e,{emitEvent:!1})}registerOnChange(e){this.emitValue=e}registerOnTouched(){}onPictureNumberChange(e){this.form.get("pictureNumber").setValue(e)}onPictureNumberPerDayChange(e){this.form.get("pictureNumberPerDay").setValue(e)}onDateFromChange(e){this.minDateTo=e.value,this.calcLimits()}onDateToChange(e){this.maxDateFrom=e.value,this.calcLimits()}calcLimits(){this.pictureNumberMin=this.activeTimeFrame===je.lastDay?2:1,this.activeTab===Fe.forWeb?this.calcLimitsForWeb():this.activeTab===Fe.forDownload&&this.calcLimitsForDownload()}calcLimitsForWeb(){if(this.activeTimeFrame===je.lastDay)this.pictureNumberMax=this.limits.web,this.form.get("pictureNumber").setValue(Math.ceil(this.pictureNumberMax/2));else if(this.activeTimeFrame===je.lastWeek)this.pictureNumberPerDayMax=Math.floor(this.limits.web/7),this.form.get("pictureNumberPerDay").setValue(Math.ceil(this.pictureNumberPerDayMax/2));else if(this.activeTimeFrame===je.custom){const e=this.getDayDiff();e<8&&(this.pictureNumberPerDayMax=Math.floor(this.limits.web/(e+1)),this.form.get("pictureNumberPerDay").setValue(Math.ceil(this.pictureNumberPerDayMax/2)))}}calcLimitsForDownload(){if(this.activeTimeFrame===je.lastDay)this.pictureNumberMax=this.limits.download,this.form.get("pictureNumber").setValue(Math.ceil(this.pictureNumberMax/2));else if(this.activeTimeFrame===je.lastWeek)this.pictureNumberPerDayMax=Math.floor(this.limits.download/7),this.form.get("pictureNumberPerDay").setValue(Math.ceil(this.pictureNumberPerDayMax/2));else if(this.activeTimeFrame===je.lastMonth)this.pictureNumberPerDayMax=Math.floor(this.limits.download/30),this.form.get("pictureNumberPerDay").setValue(Math.ceil(this.pictureNumberPerDayMax/2));else if(this.activeTimeFrame===je.custom){const e=this.getDayDiff();(e<8||e<33)&&(this.pictureNumberPerDayMax=Math.floor(this.limits.download/(e+1)),this.form.get("pictureNumberPerDay").setValue(Math.ceil(this.pictureNumberPerDayMax/2)))}}getDayDiff(){const e=this.form.get("from").value,t=this.form.get("to").value,i=Math.abs(t-e);return Math.ceil(i/864e5)}setAvailableHours(){const e=[];for(let t=0;t<24;t++)e.push(`${t<10?"0":""}${t}`);this.availableHours=e}setAvailableMinutes(){const e=[];for(let t=0;t<59;t++){const i=t<10?"0":"";0!==t&&t%5!=0||e.push(`${i}${t}`)}this.availableMinutes=e}};return e.\u0275fac=function(t){return new(t||e)(h.Ob(n.d))},e.\u0275cmp=h.Ib({type:e,selectors:[["app-timelapse-range-inputs"]],inputs:{activeTimeFrame:"activeTimeFrame",activeTab:"activeTab",limits:"limits"},features:[h.Bb([{provide:n.j,useExisting:Object(h.U)(()=>Te),multi:!0}]),h.Ab],decls:5,vars:5,consts:[[3,"formGroup"],["class","timelapse-dates",4,"ngIf"],["class","timelapse-pictures",4,"ngIf"],["class","timelapse-times",4,"ngIf"],[1,"timelapse-dates"],[1,"form-field-no-padding",3,"click"],["formControlName","from","matInput","",1,"pointer-events-none",3,"matDatepicker","min","max","dateChange"],["matSuffix","",3,"for"],["disabled","false",3,"calendarHeaderComponent"],["pickerFrom",""],["formControlName","to","matInput","",1,"pointer-events-none",3,"matDatepicker","min","max","dateChange"],["pickerTo",""],[1,"timelapse-pictures"],[1,"timelapse-pictures-title"],["formControlName","pictureNumber",3,"min","max","input"],["formControlName","pictureNumberPerDay","min","1",3,"max","input"],[1,"timelapse-times"],["formGroupName","time",1,"timelapse-times-picker"],[1,"form-field-no-padding"],["formControlName","hours"],[3,"value",4,"ngFor","ngForOf"],["formControlName","minutes"],[3,"value"]],template:function(e,t){1&e&&(h.Ub(0,"div",0),h.Bc(1,Ve,19,16,"div",1),h.Bc(2,Be,8,6,"div",2),h.Bc(3,Ne,8,5,"div",2),h.Bc(4,We,13,5,"div",3),h.Tb()),2&e&&(h.lc("formGroup",t.form),h.Cb(1),h.lc("ngIf",t.isDatesInputVisible),h.Cb(1),h.lc("ngIf",t.isPicturesInputVisible),h.Cb(1),h.lc("ngIf",t.isPicturesNumberPerDayInputVisible),h.Cb(1),h.lc("ngIf",t.isTimeInputVisible))},directives:[n.m,n.f,a.m,o.d,n.c,c.b,r.c,n.l,n.e,r.e,o.g,r.b,Q.a,n.g,K,a.l,p.h],pipes:[ee.d],styles:["[_nghost-%COMP%]{display:block}@media screen and (min-width:500px){[_nghost-%COMP%]{padding:0 30px}}.timelapse-pictures[_ngcontent-%COMP%]{padding:20px 0}@media screen and (min-width:500px){.timelapse-pictures[_ngcontent-%COMP%]{margin:0 5%}}.timelapse-pictures-title[_ngcontent-%COMP%]{text-align:center;margin-bottom:40px}.timelapse-pictures-title[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{line-height:1.2}.timelapse-pictures-title[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{font-size:67px}.timelapse-pictures-title[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){font-size:18px;text-transform:lowercase}.timelapse-pictures-title[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2):first-letter{text-transform:uppercase}.timelapse-time[_ngcontent-%COMP%]{font-size:18px;display:flex;align-items:center;padding-bottom:20px}.timelapse-time[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{display:inline-block;margin-right:20px;width:110px}.timelapse-times[_ngcontent-%COMP%]{font-size:18px;display:flex;align-items:center;flex-wrap:wrap}.timelapse-times[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{margin:10px 20px 10px 0;width:100px}.timelapse-times[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:first-letter{text-transform:uppercase}.timelapse-times[_ngcontent-%COMP%]   .timelapse-times-picker[_ngcontent-%COMP%]{display:flex;align-items:center}.timelapse-times[_ngcontent-%COMP%]   .timelapse-times-picker[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{margin:0 10px}.timelapse-times[_ngcontent-%COMP%]   .timelapse-times-picker[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:95px}.timelapse-dates[_ngcontent-%COMP%]{font-size:18px}.timelapse-dates[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center}.timelapse-dates[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(:last-child){margin-bottom:18px}.timelapse-dates[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{margin:10px 20px 10px 0;width:70px}.timelapse-dates[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:first-letter{text-transform:uppercase}.timelapse-dates[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{flex-grow:1}.timelapse-dates[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:20px}"],changeDetection:0}),e=Te=Object(oe.a)([Object(le.a)()],e),e})();var Ee=i("tk/3"),Le=i("HlYp");let Ye=(()=>{class e{constructor(e){this.httpClient=e}getAvailableMenuOptions$(){return this.httpClient.get(Le.a.timelapseoptions).pipe(Object(x.a)(e=>({lastDay:e.last_day,lastWeek:e.last_week,lastMonth:e.last_month,lastYear:e.last_year})))}generateTimelapaseForWeb$(e){const t={params:new Ee.e({fromObject:e})};return this.httpClient.get(Le.a.timelapse,t)}generateTimelapaseForDownload$(e){const t={params:new Ee.e({fromObject:e}),withCredentials:!0};return this.httpClient.get(Le.a.timelapse,t)}downloadFile$(e){return this.httpClient.get(e,{responseType:"blob"})}}return e.\u0275fac=function(t){return new(t||e)(h.Yb(Ee.b))},e.\u0275prov=h.Kb({token:e,factory:e.\u0275fac}),e})();var He=i("0IaG");let ze=(()=>{class e{constructor(){this.tabs=Fe}selectTab(e){this.activeTab=e,this.emitValue(this.activeTab)}writeValue(e){this.activeTab=e}registerOnChange(e){this.emitValue=e}registerOnTouched(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=h.Ib({type:e,selectors:[["app-timelapse-tabs"]],features:[h.Bb([{provide:n.j,useExisting:Object(h.U)(()=>e),multi:!0}])],decls:9,vars:10,consts:[[1,"timelapse-tabs"],["mat-stroked-button","","type","button",1,"timelapse-tabs__button",3,"click"]],template:function(e,t){1&e&&(h.Ub(0,"div",0),h.Ub(1,"div"),h.Ub(2,"button",1),h.bc("click",function(){return t.selectTab(t.tabs.forWeb)}),h.Dc(3),h.gc(4,"translate"),h.Tb(),h.Tb(),h.Ub(5,"div"),h.Ub(6,"button",1),h.bc("click",function(){return t.selectTab(t.tabs.forDownload)}),h.Dc(7),h.gc(8,"translate"),h.Tb(),h.Tb(),h.Tb()),2&e&&(h.Cb(2),h.Gb("timelapse-tabs__button--active",t.activeTab===t.tabs.forWeb),h.Cb(1),h.Fc(" ",h.hc(4,6,"_timelapse_for_web")," "),h.Cb(3),h.Gb("timelapse-tabs__button--active",t.activeTab===t.tabs.forDownload),h.Cb(1),h.Fc(" ",h.hc(8,8,"_timelapse_for_download")," "))},directives:[s.a],pipes:[ee.d],styles:[".timelapse-tabs[_ngcontent-%COMP%]{border-bottom:1px solid;margin-bottom:20px}.theme-light   [_nghost-%COMP%]   .timelapse-tabs[_ngcontent-%COMP%]{border-color:rgba(0,0,0,.2)}.theme-dark   [_nghost-%COMP%]   .timelapse-tabs[_ngcontent-%COMP%]{border-color:hsla(0,0%,100%,.2)}@media screen and (min-width:500px){.timelapse-tabs[_ngcontent-%COMP%]{padding-left:30px;padding-bottom:10px;margin-bottom:30px}}.timelapse-tabs__button[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}.timelapse-tabs__button[_ngcontent-%COMP%]:first-letter{text-transform:capitalize}.timelapse-tabs__button--active[_ngcontent-%COMP%]{color:#fff!important}.theme-light   [_nghost-%COMP%]   .timelapse-tabs__button--active[_ngcontent-%COMP%]{background-color:#3c425b!important}.theme-dark   [_nghost-%COMP%]   .timelapse-tabs__button--active[_ngcontent-%COMP%]{background-color:#909090!important}.theme-light.theme-color-yellow   [_nghost-%COMP%]   .timelapse-tabs__button--active[_ngcontent-%COMP%]{background-color:#bf9900!important}.theme-light.theme-color-red   [_nghost-%COMP%]   .timelapse-tabs__button--active[_ngcontent-%COMP%]{background-color:#d50015!important}.theme-light.theme-color-green   [_nghost-%COMP%]   .timelapse-tabs__button--active[_ngcontent-%COMP%]{background-color:green!important}.theme-light.theme-color-blue   [_nghost-%COMP%]   .timelapse-tabs__button--active[_ngcontent-%COMP%]{background-color:#008fd0!important}.theme-light.theme-color-orange   [_nghost-%COMP%]   .timelapse-tabs__button--active[_ngcontent-%COMP%]{background-color:#f76200!important}.theme-light.theme-color-purple   [_nghost-%COMP%]   .timelapse-tabs__button--active[_ngcontent-%COMP%]{background-color:#af52de!important}.theme-light.theme-color-monochrome   [_nghost-%COMP%]   .timelapse-tabs__button--active[_ngcontent-%COMP%]{background-color:#000!important}.theme-dark.theme-color-yellow   [_nghost-%COMP%]   .timelapse-tabs__button--active[_ngcontent-%COMP%]{background-color:#c8a600!important}.theme-dark.theme-color-red   [_nghost-%COMP%]   .timelapse-tabs__button--active[_ngcontent-%COMP%]{background-color:#b00011!important}.theme-dark.theme-color-green   [_nghost-%COMP%]   .timelapse-tabs__button--active[_ngcontent-%COMP%]{background-color:#070!important}.theme-dark.theme-color-blue   [_nghost-%COMP%]   .timelapse-tabs__button--active[_ngcontent-%COMP%]{background-color:#0077ad!important}.theme-dark.theme-color-orange   [_nghost-%COMP%]   .timelapse-tabs__button--active[_ngcontent-%COMP%]{background-color:#d35400!important}.theme-dark.theme-color-purple   [_nghost-%COMP%]   .timelapse-tabs__button--active[_ngcontent-%COMP%]{background-color:#903db9!important}.theme-dark.theme-color-monochrome   [_nghost-%COMP%]   .timelapse-tabs__button--active[_ngcontent-%COMP%]{background-color:#fff!important}"],changeDetection:0}),e})(),qe=(()=>{class e{constructor(){this.timeFrames=je}selecTimeFrame(e){this.activeTimeFrame=e,this.emitValue(this.activeTimeFrame)}writeValue(e){this.activeTimeFrame=e}registerOnChange(e){this.emitValue=e}registerOnTouched(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=h.Ib({type:e,selectors:[["app-timelapse-menu"]],inputs:{lastDayButtonDisabled:"lastDayButtonDisabled",lastWeekButtonDisabled:"lastWeekButtonDisabled",lastMonthButtonDisabled:"lastMonthButtonDisabled",lastYearButtonDisabled:"lastYearButtonDisabled"},features:[h.Bb([{provide:n.j,useExisting:Object(h.U)(()=>e),multi:!0}])],decls:16,vars:29,consts:[[1,"timelapse-menu"],["mat-stroked-button","","type","button",1,"timelapse-menu__button",3,"disabled","click"],["mat-stroked-button","","type","button",1,"timelapse-menu__button",3,"click"]],template:function(e,t){1&e&&(h.Ub(0,"div",0),h.Ub(1,"button",1),h.bc("click",function(){return t.selecTimeFrame(t.timeFrames.lastDay)}),h.Dc(2),h.gc(3,"translate"),h.Tb(),h.Ub(4,"button",1),h.bc("click",function(){return t.selecTimeFrame(t.timeFrames.lastWeek)}),h.Dc(5),h.gc(6,"translate"),h.Tb(),h.Ub(7,"button",1),h.bc("click",function(){return t.selecTimeFrame(t.timeFrames.lastMonth)}),h.Dc(8),h.gc(9,"translate"),h.Tb(),h.Ub(10,"button",1),h.bc("click",function(){return t.selecTimeFrame(t.timeFrames.lastYear)}),h.Dc(11),h.gc(12,"translate"),h.Tb(),h.Ub(13,"button",2),h.bc("click",function(){return t.selecTimeFrame(t.timeFrames.custom)}),h.Dc(14),h.gc(15,"translate"),h.Tb(),h.Tb()),2&e&&(h.Cb(1),h.Gb("timelapse-menu__button--active",t.activeTimeFrame===t.timeFrames.lastDay),h.lc("disabled",t.lastDayButtonDisabled),h.Cb(1),h.Fc(" ",h.hc(3,19,"_timelapse_last_day")," "),h.Cb(2),h.Gb("timelapse-menu__button--active",t.activeTimeFrame===t.timeFrames.lastWeek),h.lc("disabled",t.lastWeekButtonDisabled),h.Cb(1),h.Fc(" ",h.hc(6,21,"_timelapse_last_week")," "),h.Cb(2),h.Gb("timelapse-menu__button--active",t.activeTimeFrame===t.timeFrames.lastMonth),h.lc("disabled",t.lastMonthButtonDisabled),h.Cb(1),h.Fc(" ",h.hc(9,23,"_timelapse_last_month")," "),h.Cb(2),h.Gb("timelapse-menu__button--active",t.activeTimeFrame===t.timeFrames.lastYear),h.lc("disabled",t.lastYearButtonDisabled),h.Cb(1),h.Fc(" ",h.hc(12,25,"_timelapse_last_year")," "),h.Cb(2),h.Gb("timelapse-menu__button--active",t.activeTimeFrame===t.timeFrames.custom),h.Cb(1),h.Fc(" ",h.hc(15,27,"_timelapse_custom")," "))},directives:[s.a],pipes:[ee.d],styles:["[_nghost-%COMP%]{display:block}.timelapse-menu[_ngcontent-%COMP%]{border-bottom:1px solid;padding-bottom:20px;margin-bottom:20px}.theme-light   [_nghost-%COMP%]   .timelapse-menu[_ngcontent-%COMP%]{border-color:rgba(0,0,0,.2)}.theme-dark   [_nghost-%COMP%]   .timelapse-menu[_ngcontent-%COMP%]{border-color:hsla(0,0%,100%,.2)}@media screen and (min-width:500px){.timelapse-menu[_ngcontent-%COMP%]{padding-left:30px;border-bottom:none;padding-bottom:0;margin-bottom:0}}.timelapse-menu__button[_ngcontent-%COMP%]{display:block;width:100%}.timelapse-menu__button[_ngcontent-%COMP%]:not(:last-child){margin-bottom:20px}.timelapse-menu__button[_ngcontent-%COMP%]:first-letter{text-transform:capitalize}.timelapse-menu__button--active[_ngcontent-%COMP%]{color:#fff!important}.theme-light   [_nghost-%COMP%]   .timelapse-menu__button--active[_ngcontent-%COMP%]{background-color:#3c425b!important}.theme-dark   [_nghost-%COMP%]   .timelapse-menu__button--active[_ngcontent-%COMP%]{background-color:#909090!important}.theme-light.theme-color-yellow   [_nghost-%COMP%]   .timelapse-menu__button--active[_ngcontent-%COMP%]{background-color:#bf9900!important}.theme-light.theme-color-red   [_nghost-%COMP%]   .timelapse-menu__button--active[_ngcontent-%COMP%]{background-color:#d50015!important}.theme-light.theme-color-green   [_nghost-%COMP%]   .timelapse-menu__button--active[_ngcontent-%COMP%]{background-color:green!important}.theme-light.theme-color-blue   [_nghost-%COMP%]   .timelapse-menu__button--active[_ngcontent-%COMP%]{background-color:#008fd0!important}.theme-light.theme-color-orange   [_nghost-%COMP%]   .timelapse-menu__button--active[_ngcontent-%COMP%]{background-color:#f76200!important}.theme-light.theme-color-purple   [_nghost-%COMP%]   .timelapse-menu__button--active[_ngcontent-%COMP%]{background-color:#af52de!important}.theme-light.theme-color-monochrome   [_nghost-%COMP%]   .timelapse-menu__button--active[_ngcontent-%COMP%]{background-color:#000!important}.theme-dark.theme-color-yellow   [_nghost-%COMP%]   .timelapse-menu__button--active[_ngcontent-%COMP%]{background-color:#c8a600!important}.theme-dark.theme-color-red   [_nghost-%COMP%]   .timelapse-menu__button--active[_ngcontent-%COMP%]{background-color:#b00011!important}.theme-dark.theme-color-green   [_nghost-%COMP%]   .timelapse-menu__button--active[_ngcontent-%COMP%]{background-color:#070!important}.theme-dark.theme-color-blue   [_nghost-%COMP%]   .timelapse-menu__button--active[_ngcontent-%COMP%]{background-color:#0077ad!important}.theme-dark.theme-color-orange   [_nghost-%COMP%]   .timelapse-menu__button--active[_ngcontent-%COMP%]{background-color:#d35400!important}.theme-dark.theme-color-purple   [_nghost-%COMP%]   .timelapse-menu__button--active[_ngcontent-%COMP%]{background-color:#903db9!important}.theme-dark.theme-color-monochrome   [_nghost-%COMP%]   .timelapse-menu__button--active[_ngcontent-%COMP%]{background-color:#fff!important}"],changeDetection:0}),e})();var Ge;let Ke=(()=>{let e=Ge=class{constructor(e){this.fb=e}ngOnInit(){this.buildForm()}buildForm(){this.form=this.fb.group({frames:[""],quality:[""],width:[""],height:[""]})}ngAfterViewInit(){this.form.valueChanges.pipe(Object(le.b)(this)).subscribe(e=>{this.emitValue(e)})}writeValue(e){this.form.patchValue(e,{emitEvent:!1})}registerOnChange(e){this.emitValue=e}registerOnTouched(){}validateFrames(e=!1){const t=this.form.get("frames").value;(e||null!==t)&&(null===t?this.form.get("frames").setValue(3):t<1?this.form.get("frames").setValue(1):t>999&&this.form.get("frames").setValue(999))}validateWidth(e=!1){let t=this.form.get("width").value;if(!e&&null===t)return void this.form.get("height").setValue(null);null===t?t=this.defaultWidth:t<0&&(t=0);let i=Math.floor(t*this.defaultHeight/this.defaultWidth);i>512&&(i=512,t=Math.round(i*this.defaultWidth/this.defaultHeight)),this.form.get("width").setValue(t),this.form.get("height").setValue(i)}validateHeight(e=!1){let t=this.form.get("height").value;if(!e&&null===t)return void this.form.get("width").setValue(null);null===t?t=this.defaultHeight:t<0?t=0:t>512&&(t=512);const i=Math.floor(t*this.defaultWidth/this.defaultHeight);this.form.get("height").setValue(t),this.form.get("width").setValue(i)}validateQuality(e=!1){const t=this.form.get("quality").value;(e||null!==t)&&(null===t?this.form.get("quality").setValue(80):t<1?this.form.get("quality").setValue(1):t>100&&this.form.get("quality").setValue(100))}};return e.\u0275fac=function(t){return new(t||e)(h.Ob(n.d))},e.\u0275cmp=h.Ib({type:e,selectors:[["app-timelapse-specification-inputs"]],inputs:{defaultWidth:"defaultWidth",defaultHeight:"defaultHeight"},features:[h.Bb([{provide:n.j,useExisting:Object(h.U)(()=>Ge),multi:!0}])],decls:33,vars:13,consts:[[1,"timelapse-specification-inputs",3,"formGroup"],[1,"form-field-no-padding"],["formControlName","frames","matInput","","type","number","min","1",3,"blur","input"],["formControlName","width","matInput","","type","number","min","0",3,"blur","input"],["formControlName","height","matInput","","type","number","min","0",3,"blur","input"],["formControlName","quality","matInput","","type","number",3,"blur","input"]],template:function(e,t){1&e&&(h.Ub(0,"div",0),h.Ub(1,"div"),h.Ub(2,"span"),h.Dc(3),h.gc(4,"translate"),h.Tb(),h.Ub(5,"mat-form-field",1),h.Ub(6,"input",2),h.bc("blur",function(){return t.validateFrames(!0)})("input",function(){return t.validateFrames()}),h.Tb(),h.Tb(),h.Ub(7,"span"),h.Dc(8,"fps"),h.Tb(),h.Tb(),h.Ub(9,"div"),h.Ub(10,"span"),h.Dc(11),h.gc(12,"translate"),h.Tb(),h.Ub(13,"mat-form-field",1),h.Ub(14,"input",3),h.bc("blur",function(){return t.validateWidth(!0)})("input",function(){return t.validateWidth()}),h.Tb(),h.Tb(),h.Ub(15,"span"),h.Dc(16,"px"),h.Tb(),h.Tb(),h.Ub(17,"div"),h.Ub(18,"span"),h.Dc(19),h.gc(20,"translate"),h.Tb(),h.Ub(21,"mat-form-field",1),h.Ub(22,"input",4),h.bc("blur",function(){return t.validateHeight(!0)})("input",function(){return t.validateHeight()}),h.Tb(),h.Tb(),h.Ub(23,"span"),h.Dc(24,"px"),h.Tb(),h.Tb(),h.Ub(25,"div"),h.Ub(26,"span"),h.Dc(27),h.gc(28,"translate"),h.Tb(),h.Ub(29,"mat-form-field",1),h.Ub(30,"input",5),h.bc("blur",function(){return t.validateQuality(!0)})("input",function(){return t.validateQuality()}),h.Tb(),h.Tb(),h.Ub(31,"span"),h.Dc(32,"%"),h.Tb(),h.Tb(),h.Tb()),2&e&&(h.lc("formGroup",t.form),h.Cb(3),h.Ec(h.hc(4,5,"_timelapse_frames")),h.Cb(8),h.Ec(h.hc(12,7,"_timelapse_width")),h.Cb(8),h.Ec(h.hc(20,9,"_timelapse_height")),h.Cb(8),h.Ec(h.hc(28,11,"_timelapse_quality")))},directives:[n.m,n.f,o.d,n.c,c.b,n.p,n.l,n.e],pipes:[ee.d],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;padding-top:30px;margin-top:30px;border-top:1px solid}.theme-light   [_nghost-%COMP%]{border-color:rgba(0,0,0,.2)}.theme-dark   [_nghost-%COMP%]{border-color:hsla(0,0%,100%,.2)}@media screen and (min-width:500px){[_nghost-%COMP%]{padding-right:30px}}.timelapse-specification-inputs[_ngcontent-%COMP%]{font-size:18px;box-sizing:border-box}.timelapse-specification-inputs[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;align-items:center}.timelapse-specification-inputs[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(:last-child){margin-bottom:20px}.timelapse-specification-inputs[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:first-child{display:inline-block;min-width:60px;width:60px}.timelapse-specification-inputs[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:first-child:first-letter{text-transform:uppercase}.timelapse-specification-inputs[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{margin:0 20px;width:100px}"],changeDetection:0}),e=Ge=Object(oe.a)([Object(le.a)()],e),e})();var Xe=i("zzDJ");function Je(e,t){if(1&e&&h.Pb(0,"app-timelapse-specification-inputs",13),2&e){const e=h.fc();h.lc("defaultWidth",e.defaultWidth)("defaultHeight",e.defaultHeight)}}function Qe(e,t){1&e&&(h.Ub(0,"div",14),h.Pb(1,"app-ui-spinner",15),h.Tb()),2&e&&(h.Cb(1),h.lc("invertColor",!0))}let Ze=(()=>{let e=class{constructor(e,t,i,a,n,s,r,o){this.fb=e,this.cdRef=t,this.activatedRoute=i,this.timelapseService=a,this.timelapsePlayerService=n,this.translateService=s,this.router=r,this.dialog=o,this.timelapseTabs=Fe,this.defaultFrames=3,this.defaultQuality=80,this.defaultPicureNumber=35,this.defaultPictureNumberPerDay=3,this.defaultTimeHours="12",this.defaultTimeMinutes="00",this.lastDayButtonDisabled=!0,this.lastWeekButtonDisabled=!0,this.lastMonthButtonDisabled=!0,this.lastYearButtonDisabled=!0,this.isLoading=!0}ngOnInit(){this.handleResolvers(),this.buildForm(),this.getAvailableMenuOptions()}onSubmit(){const e={suffix:"",designation:this.form.get("designation").value,type:this.form.get("type").value,from:this.parseDateToString(this.form.get("range").value.from),to:this.parseDateToString(this.form.get("range").value.to),number:this.getRequestDataNumber(),time:`${this.form.get("range").value.time.hours}:${this.form.get("range").value.time.minutes}`,frames:this.form.get("specification").value.frames,quality:this.form.get("specification").value.quality,width:this.form.get("specification").value.width,height:this.form.get("specification").value.height};e.designation===this.timelapseTabs.forWeb&&this.generateTimelapseForWeb(e),e.designation===this.timelapseTabs.forDownload&&this.generateTimelapseForDownload(e)}buildForm(){const e=new Date;e.setHours(0,0,0,0),this.form=this.fb.group({designation:[Fe.forWeb],type:[],specification:[{frames:this.defaultFrames,quality:this.defaultQuality,width:this.defaultWidth,height:this.defaultHeight}],range:[{from:e,to:e,pictureNumber:this.defaultPicureNumber,pictureNumberPerDay:this.defaultPictureNumberPerDay,time:{hours:this.defaultTimeHours,minutes:this.defaultTimeMinutes}}]})}getAvailableMenuOptions(){this.timelapseService.getAvailableMenuOptions$().pipe(Object(le.b)(this)).subscribe(e=>{this.lastDayButtonDisabled=!e.lastDay,this.lastWeekButtonDisabled=!e.lastWeek,this.lastMonthButtonDisabled=!e.lastMonth,this.lastYearButtonDisabled=!e.lastYear,e.lastDay?this.form.get("type").setValue(je.lastDay):e.lastWeek?this.form.get("type").setValue(je.lastWeek):e.lastMonth?this.form.get("type").setValue(je.lastMonth):e.lastYear?this.form.get("type").setValue(je.lastYear):this.form.get("type").setValue(je.custom),this.isLoading=!1,this.cdRef.markForCheck()})}generateTimelapseForWeb(e){this.isRequestInProgress=!0,this.timelapsePlayerService.changeSmoothPlayState(!0),this.timelapseService.generateTimelapaseForWeb$(e).pipe(Object(le.b)(this),Object(De.a)(()=>{this.isRequestInProgress=!1,this.cdRef.markForCheck()})).subscribe(e=>{e.images.length<=1?this.displayTimelapseNotEnoughImagesError():(e.images=e.images.sort((e,t)=>e.datetime-t.datetime),this.timelapsePlayerService.setStructure(e),this.router.navigate([ke.a.timelapse,"player"]))},()=>this.displayTimelapseForWebError())}generateTimelapseForDownload(e){this.isRequestInProgress=!0,this.timelapseService.generateTimelapaseForDownload$(e).pipe(Object(le.b)(this)).subscribe(t=>{t.url?this.downloadTimelapse(t.url):Object(Ie.a)(1500).pipe(Object(le.b)(this)).subscribe(()=>this.generateTimelapseForDownload(e))},()=>{this.isRequestInProgress=!1,this.cdRef.markForCheck(),this.displayTimelapseForDownloadError()})}downloadTimelapse(e){const t=e.split("/").pop();this.timelapseService.downloadFile$(e).pipe(Object(le.b)(this)).subscribe(e=>{this.isRequestInProgress=!1,this.cdRef.markForCheck();const i=document.createElement("a"),a=URL.createObjectURL(e);i.href=a,i.download=t,i.click(),URL.revokeObjectURL(a)},()=>{this.isRequestInProgress=!1,this.cdRef.markForCheck(),this.displayTimelapseForDownloadError()})}getRequestDataNumber(){return this.timelapseRangeInputComponent.isPicturesNumberPerDayInputVisible?this.form.get("range").value.pictureNumberPerDay:this.form.get("range").value.pictureNumber}parseDateToString(e){const t=e.getFullYear(),i=e.getMonth()+1,a=e.getDate();return`${a<10?"0":""}${a}.${i<10?"0":""}${i}.${t}`}handleResolvers(){this.activatedRoute.data.pipe(Object(le.b)(this)).subscribe(e=>{const t=e.currentImage;this.settings=e.timelapseSettings,this.defaultWidth=t.structure.thumbnail.w,this.defaultHeight=t.structure.thumbnail.h})}displayTimelapseForWebError(){this.dialog.open(Se.a,{data:{title:"Timelapse",message:"An error occured in this camera. Please try again later."},width:"600px"})}displayTimelapseForDownloadError(){this.dialog.open(Se.a,{data:{title:"Timelapse",message:"An error occured in this camera. Please try again later."},width:"600px"})}displayTimelapseNotEnoughImagesError(){this.dialog.open(Se.a,{data:{title:"Timelapse",message:this.translateService.instant("_timelapse_not_enough_images")},width:"600px"})}};return e.\u0275fac=function(t){return new(t||e)(h.Ob(n.d),h.Ob(h.h),h.Ob(Z.a),h.Ob(Ye),h.Ob(fe),h.Ob(ee.e),h.Ob(Z.d),h.Ob(He.b))},e.\u0275cmp=h.Ib({type:e,selectors:[["app-timelapse"]],viewQuery:function(e,t){if(1&e&&h.Jc(Ae,1),2&e){let e;h.qc(e=h.cc())&&(t.timelapseRangeInputComponent=e.first)}},decls:17,vars:18,consts:[[3,"routerPopupTitle"],[3,"formGroup","ngSubmit"],["blurForm","ngForm"],[1,"timelapse"],[1,"timelapse-navigation"],["formControlName","designation"],["formControlName","type",3,"lastDayButtonDisabled","lastWeekButtonDisabled","lastMonthButtonDisabled","lastYearButtonDisabled"],[1,"timelapse-inputs"],["formControlName","range",3,"limits","activeTimeFrame","activeTab"],["formControlName","specification",3,"defaultWidth","defaultHeight",4,"ngIf"],[1,"timelapse-submit"],["mat-stroked-button",""],["class","timelapse-loader",4,"ngIf"],["formControlName","specification",3,"defaultWidth","defaultHeight"],[1,"timelapse-loader"],[3,"invertColor"]],template:function(e,t){1&e&&(h.Ub(0,"app-router-popup",0),h.gc(1,"titlecase"),h.gc(2,"translate"),h.Ub(3,"form",1,2),h.bc("ngSubmit",function(){return t.onSubmit()}),h.Ub(5,"div",3),h.Ub(6,"div",4),h.Pb(7,"app-timelapse-tabs",5),h.Pb(8,"app-timelapse-menu",6),h.Tb(),h.Ub(9,"div",7),h.Pb(10,"app-timelapse-range-inputs",8),h.Bc(11,Je,1,2,"app-timelapse-specification-inputs",9),h.Ub(12,"div",10),h.Ub(13,"button",11),h.Dc(14),h.gc(15,"translate"),h.Tb(),h.Tb(),h.Tb(),h.Bc(16,Qe,2,1,"div",12),h.Tb(),h.Tb(),h.Tb()),2&e&&(h.lc("routerPopupTitle",h.hc(1,12,h.hc(2,14,"_timelapse"))),h.Cb(3),h.lc("formGroup",t.form),h.Cb(5),h.lc("lastDayButtonDisabled",t.lastDayButtonDisabled)("lastWeekButtonDisabled",t.lastWeekButtonDisabled)("lastMonthButtonDisabled",t.lastMonthButtonDisabled)("lastYearButtonDisabled",t.lastYearButtonDisabled),h.Cb(2),h.lc("limits",t.settings.limits)("activeTimeFrame",t.form.get("type").value)("activeTab",t.form.get("designation").value),h.Cb(1),h.lc("ngIf",t.form.get("designation").value===t.timelapseTabs.forDownload),h.Cb(3),h.Fc(" ",h.hc(15,16,"_timelapse_create")," "),h.Cb(2),h.lc("ngIf",t.isRequestInProgress||t.isLoading))},directives:[ve.a,n.s,n.m,n.f,ze,n.l,n.e,qe,Ae,a.m,s.a,Ke,Xe.a],pipes:[a.u,ee.d],styles:["[_nghost-%COMP%]{display:block}.timelapse[_ngcontent-%COMP%]{box-sizing:border-box;position:relative;min-height:calc(90vh - 68px);padding:20px}@media screen and (min-width:500px){.timelapse[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse}}@media screen and (min-width:600px){.timelapse-navigation[_ngcontent-%COMP%]{min-width:220px}}@media screen and (min-width:500px){.timelapse-inputs[_ngcontent-%COMP%]{flex-grow:1;border-right:1px solid}.theme-light   [_nghost-%COMP%]   .timelapse-inputs[_ngcontent-%COMP%]{border-color:rgba(0,0,0,.2)}.theme-dark   [_nghost-%COMP%]   .timelapse-inputs[_ngcontent-%COMP%]{border-color:hsla(0,0%,100%,.2)}}.timelapse-submit[_ngcontent-%COMP%]{margin-top:30px;padding:30px 30px 0;border-top:1px solid}.theme-light   [_nghost-%COMP%]   .timelapse-submit[_ngcontent-%COMP%]{border-color:rgba(0,0,0,.2)}.theme-dark   [_nghost-%COMP%]   .timelapse-submit[_ngcontent-%COMP%]{border-color:hsla(0,0%,100%,.2)}.timelapse-submit[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{display:block;width:100%}.timelapse-submit[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:first-letter{text-transform:uppercase}.timelapse-loader[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0;display:flex;justify-content:center;align-items:center;border-radius:18px;z-index:2}.theme-light   [_nghost-%COMP%]   .timelapse-loader[_ngcontent-%COMP%]{background-color:#fff}.theme-dark   [_nghost-%COMP%]   .timelapse-loader[_ngcontent-%COMP%]{background-color:#1b1b1b}"],changeDetection:0}),e=Object(oe.a)([Object(le.a)()],e),e})(),et=(()=>{class e{constructor(e){this.timelapsePlayerService=e}canActivate(){return this.timelapsePlayerService.doesStructureExists()}}return e.\u0275fac=function(t){return new(t||e)(h.Yb(fe))},e.\u0275prov=h.Kb({token:e,factory:e.\u0275fac}),e})(),tt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.Mb({type:e}),e.\u0275inj=h.Lb({providers:[Ye,fe,et],imports:[[a.c,Z.f.forChild([{path:"player",component:we,data:{animation:!0,fullscreen:!0},canActivate:[et]},{path:"",component:Ze}]),n.q,c.c,s.b,o.f,Q.b,r.d,re.a,J,ee.c,ae.a,se.a,ie.a,ne.a,te.a,l.b]]}),e})()}}]);