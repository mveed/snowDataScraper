!function(t){function e(i){if(r[i])return r[i].exports;var n=r[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var i=window.webpackJsonp;window.webpackJsonp=function(e,r,a){for(var s,o,l=0,u=[];l<e.length;l++)o=e[l],n[o]&&u.push(n[o][0]),n[o]=0;for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s]);for(i&&i(e,r,a);u.length;)u.shift()()};var r={},n={4:0};e.e=function(t){function i(){o.onerror=o.onload=null,clearTimeout(l);var e=n[t];0!==e&&(e&&e[1](new Error("Loading chunk "+t+" failed.")),n[t]=void 0)}var r=n[t];if(0===r)return new Promise(function(t){t()});if(r)return r[2];var a=new Promise(function(e,i){r=n[t]=[e,i]});r[2]=a;var s=document.getElementsByTagName("head")[0],o=document.createElement("script");o.type="text/javascript",o.charset="utf-8",o.async=!0,o.timeout=12e4,e.nc&&o.setAttribute("nonce",e.nc),o.src=e.p+""+{0:"3249b45eab494e6ebbe1",1:"7c7d7ff9131fd098cc42",2:"f4a609c46e7d77b7b1c0",3:"09ca1816183903732aa0"}[t]+".js";var l=setTimeout(i,12e4);return o.onerror=o.onload=i,s.appendChild(o),a},e.m=t,e.c=r,e.d=function(t,i,r){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="https://cdn.hdrelay.com/js/player-2021/",e.oe=function(t){throw console.error(t),t},e(e.s=31)}([function(t,e){var i,r,n,a,s,o,l,u,d,c,h,f,p,g,y;o=function(t){var e;return"string"==typeof t?(e=document.querySelector(t),e||(e=document.querySelector("#"+t)),e):t},l=function(t,e){var i;return i=t.className.split(" "),-1!==i.findIndex(function(t,i){return t.trim()===e})},i=function(t,e){var i;if(i=t.className.split(" "),-1===i.findIndex(function(t,i){return t.trim()===e}))return i.push(e),t.className=i.join(" ")},f=function(t,e){var i,r;if(i=t.className.split(" "),-1!==(r=i.findIndex(function(t,i){return t.trim()===e})))return i.splice(r,1),t.className=i.join(" ")},p=function(t,e,i){var r,n;if(r=t.className.split(" "),-1!==(n=r.findIndex(function(t,i){return t.trim()===e})))return r[n]=i,t.className=r.join(" ")},g=function(t){return function(){switch(!1){case!0!==t:case"true"!==t:return!0;default:return!1}}()},d=function(){var t;return t=navigator.userAgent.toLowerCase(),t.indexOf("safari")>0&&-1===t.indexOf("chrome")},u=function(){return!!navigator.platform.match(/iPhone|iPod|iPad/)&&navigator.userAgent.match(/\b[0-9]+_[0-9]+(?:_[0-9]+)?\b/)[0].replace(/_/g,".")},c=function(){return!!u()||window.ontouchstart||navigator.maxTouchPoints},h=function(t){var e,i;return e=t.split("&"),i={},e.forEach(function(t){return t=t.split("="),i[t[0]]=decodeURIComponent(t[1]||"")}),i},r=function(){return(new Date).getTime().toString(36)+Math.random().toString(36).substr(2)},n=function(t,e){var i,r;if(t===e)return!0;if(null==t)return!1;if(null==e)return!1;for(i in t)if(r=t[i],e[i]!==r)return!1;for(i in e)if(r=e[i],t[i]!==r)return!1;return!0},s=function(t){var e,i,r,n,a;for(r=[],e=1,n=t.over_resize_at?t.over_resize_at:800;t["over_u_"+e];)a=t["over_u_"+e],i={url:a,opacity:100,x:5,y:5},null!=t["over_l_"+e]&&(i.link=t["over_l_"+e]),null!=t["over_x_"+e]&&(i.x=parseInt(t["over_x_"+e])),null!=t["over_y_"+e]&&(i.y=parseInt(t["over_y_"+e])),null!=t["over_o_"+e]&&(i.opacity=parseInt(t["over_o_"+e])),i.fit="fit"===t["over_s_"+e],i.clicktoplay="true"===t["over_c_"+e],i.resize_at=n,r.push(i),e++;return r},a=function(t){var e,i,r,n;for(i=[],r=1;t["button_u_"+r];)n=t["button_u_"+r],e={url:n},null!=t["button_i_"+r]&&(e.img=t["button_i_"+r]),null!=t["button_t_"+r]&&(e.tooltip=t["button_t_"+r]),null!=t["button_la_"+r]&&(e.layer=t["button_la_"+r]),e.open="true"===t["button_o_"+r],null!=t["button_p_"+r]&&(e.preload=parseInt(t["button_p_"+r])),i.push(e),r++;return i},y=function(t){var e,i,r;i=[];for(e in t)r=t[e],i.push(e+"="+r);return 0===i.length?"":i.join("&")},t.exports={getTarget:o,removeClass:f,addClass:i,replaceClass:p,hasClass:l,toBoolean:g,parametersToJSON:h,getOverlayers:s,getButtons:a,toQuery:y,createToken:r,deepEquals:n,isTouch:c,isIOS:u,isSafari:d}},function(t,e,i){(function(t){var i,r,n=function(){};n.prototype={bind:function(t,e){this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(e)},unbind:function(t,e){if(this._events=this._events||{},t in this._events!=0){var i=this._events[t].indexOf(e);-1!==i?this._events[t].splice(i,1):this._events[t]=[]}},trigger:function(t){if(this._events=this._events||{},t in this._events!=0)for(var e=0;e<this._events[t].length;e++)this._events[t][e].apply(this,Array.prototype.slice.call(arguments,1))}},n.mixin=function(t){for(var e=["bind","unbind","trigger"],i=0;i<e.length;i++)"function"==typeof t?t.prototype[e[i]]=n.prototype[e[i]]:t[e[i]]=n.prototype[e[i]]},void 0!==t&&"exports"in t&&(t.exports=n),i=[],void 0!==(r=function(){return n}.apply(e,i))&&(t.exports=r)}).call(e,i(30)(t))},function(t,e,i){!function(e,i){t.exports=function(){return function(t){function e(r){if(i[r])return i[r].exports;var n=i[r]={exports:{},id:r,loaded:!1};return t[r].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){t.exports={format:i(1),Timezone:i(3)}},function(t,e,i){var r,n,a,s,o,l,u,d,c,h,f;f=i(2),o=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|MM?M?M?|DD?|d|YYYYYY|YYYYY|YYYY|YY|hh?|HH?|kk?|mm?|ss?|S{1,3}|ZZ?|.)/g,s={},a={},h=function(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")},d=function(t){var e,i,r,n,a;for(e=t.match(o),n=e.length,i=r=0,a=n;a>=0?a>r:r>a;i=a>=0?++r:--r)s[e[i]]?e[i]=s[e[i]]:e[i]=h(e[i]);return function(r){var a,s,o;for(s="",i=a=0,o=n;o>=0?o>a:a>o;i=o>=0?++a:--a)s+=e[i]instanceof Function?e[i].call(r,t):e[i];return s}},r=function(t,e,i){var r;return r=i,t&&(s[t]=r),e?s[e[0]]=function(){return f(r.apply(this,arguments),e[1],e[2])}:void 0},n=function(t,e,i){var r,n;return n=t.getTimezoneOffset(),i&&(n=i.offset(t)),r=new Date(t.getTime()-6e4*n),r.offset=n,a[e]=a[e]||d(e),a[e](r)},r("S",0,function(){return Math.floor(this.getUTCMilliseconds()/100)}),r(0,["SS",2],function(){return Math.floor(this.getUTCMilliseconds()/10)}),r(0,["SSS",3],function(){return this.getUTCMilliseconds()}),r("s",["ss",2],function(){return this.getUTCSeconds()}),r("m",["mm",2],function(){return this.getUTCMinutes()}),l=function(){return this.getUTCHours()%12||12},u=function(){return this.getUTCHours()||24},r("H",["HH",2],function(){return this.getUTCHours()}),r("h",["hh",2],l),r("k",["kk",2],u),r("hmm",0,function(){return""+l.apply(this+f(this.getUTCMinutes(),2))}),r("hmmss",0,function(){return""+l.apply(this+f(this.getUTCMinutes(),2+f(this.getUTCSeconds(),2)))}),r("Hmm",0,function(){return""+this.getUTCHours()+f(this.getUTCMinutes(),2)}),r("Hmmss",0,function(){return""+this.getUTCHours()+f(this.getUTCMinutes(),2+f(this.getUTCSeconds(),2))}),r("D",["DD",2],function(){return this.getUTCDate()}),r("Y",0,function(){return this.getUTCFullYear()}),r(0,["YY",2],function(){return this.getUTCFullYear()%100}),r(0,["YYYY",4],function(){return this.getUTCFullYear()}),r(0,["YYYYY",5],function(){return this.getUTCFullYear()}),r(0,["YYYYYY",6,!0],function(){return this.getUTCFullYear()}),r("d",0,function(){return this.getUTCDay()}),r("M",["MM",2],function(){return this.getUTCMonth()+1}),c=function(t,e){return r(t,0,function(){var t;return c=-this.offset,t="+",0>c&&(c=-c,t="-"),t+f(Math.floor(c/60),2)+e+f(c%60,2)})},c("Z",":"),c("ZZ",""),t.exports=n},function(t,e){t.exports=function(t,e,i){var r,n,a;return r=""+Math.abs(t),a=e-r.length,n=t>=0,(n?i?"+":"":"-")+Math.pow(10,Math.max(0,a)).toString().substr(1)+r}},function(t,e){var i,r,n,a,s,o,l;n=function(t){return t>96?t-87:t>64?t-29:t-48},l=function(t){var e,i,r,a,s,o,l,u,d,c,h,f,p;for(i=0,u=t.split("."),p=u[0],e=u[1]||"",s=1,l=0,f=1,45===t.charCodeAt(0)&&(i=1,f=-1),i=r=d=i,c=p.length;c>=d?c>r:r>c;i=c>=d?++r:--r)o=n(p.charCodeAt(i)),l=60*l+o;for(i=a=0,h=e.length;h>=0?h>a:a>h;i=h>=0?++a:--a)s/=60,o=n(e.charCodeAt(i)),l+=o*s;return l*f},r=function(t){var e,i,r,n;for(n=[],e=i=0,r=t.length;r>=0?r>i:i>r;e=r>=0?++i:--i)n.push(t[e]=l(t[e]));return n},a=function(t,e){var i,r,n;for(i=r=0,n=e;n>=0?n>r:r>n;i=n>=0?++r:--r)t[i]=Math.round((t[i-1]||0)+6e4*t[i]);return t[e-1]=1/0},s=function(t,e){var i,r,n,a;for(n=[],i=r=0,a=e.length;a>=0?a>r:r>a;i=a>=0?++r:--r)n[i]=t[e[i]];return n},o=function(t){var e,i,n,o;return e=t.split("|"),n=e[2].split(" "),i=e[3].split(""),o=e[4].split(" "),r(n),r(i),r(o),a(o,i.length),{name:e[0],abbrs:s(e[1].split(" "),i),offsets:s(n,i),untils:o,population:0|e[5]}},i=function(){function t(t){t&&this._set(o(t))}return t.prototype._set=function(t){return this.name=t.name,this.abbrs=t.abbrs,this.untils=t.untils,this.offsets=t.offsets,this.population=t.population},t.prototype._index=function(t){var e,i,r,n,a;for(n=+t,a=this.untils,e=i=0,r=a.length;r>=0?r>i:i>r;e=r>=0?++i:--i)if(n<a[e])return e},t.prototype.abbr=function(t){return this.abbrs[this._index(t)]},t.prototype.offset=function(t){return this.offsets[this._index(t)]},t}(),t.exports=i}])}()}()},function(t,e){t.exports=function(t){return t>3333?3333:t}},function(t,e,i){(function(e){function i(t){return t&&e.XDomainRequest&&!/MSIE 1/.test(navigator.userAgent)?new XDomainRequest:e.XMLHttpRequest?new XMLHttpRequest:void 0}function r(t,e,i){t[e]=t[e]||i}var n=["responseType","withCredentials","timeout","onprogress"];t.exports=function(t,a){function s(t,e){return function(){d||(a(void 0===c.status?t:c.status,0===c.status?"Error":c.response||c.responseText||e,c),d=!0)}}var o=t.headers||{},l=t.body,u=t.method||(l?"POST":"GET"),d=!1,c=i(t.cors);0===t.url.indexOf("//")&&(t.url=document.location.protocol+t.url),c.open(u,t.url,!0);var h=c.onload=s(200);c.onreadystatechange=function(){4===c.readyState&&h()},c.onerror=s(null,"Error"),c.ontimeout=s(null,"Timeout"),c.onabort=s(null,"Abort"),l&&(r(o,"X-Requested-With","XMLHttpRequest"),e.FormData&&l instanceof e.FormData||r(o,"Content-Type","application/x-www-form-urlencoded"));for(var f,p=0,g=n.length;p<g;p++)f=n[p],void 0!==t[f]&&(c[f]=t[f]);for(var f in o)c.setRequestHeader(f,o[f]);return c.send(l),c}}).call(e,i(17))},function(t,e){var i,r,n,a;r=-1,a=function(t){return t+"_"+ ++r},n=function(){return null!=window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+":8080"},i=function(){function t(t,e,i){this.player=t,this.url=e,this.parameters=i,this.element=document.createElement("div")}return t.prototype.prepare=function(t){var e,i,r,s;return this.prepared?void(null!=t&&t()):this.error?void(null!=t&&t(this.error)):null==this.onPrepare?(this.onPrepare=[],null!=t&&this.onPrepare.push(t),i=document.createElement("iframe"),i.marginWidth="0",i.marginHeight="0",i.frameBorder="0",i.width="0",i.height="0",e=a("vpaidIframe"),s=n(),i.id=e,document.body.appendChild(i),r=function(n){return function(a){var o,l,u,d,c,h,f,p,g,y,v;o={};try{o=JSON.parse(a.data)}catch(t){return void(l=t)}if(o.id===e){if(window.removeEventListener("message",r),a.origin!==s){if(n.error=new Error("Origin do not match"),n.onPrepare)for(g=n.onPrepare,u=0,h=g.length;u<h;u++)(t=g[u])(l);return void delete n.onPrepare}if(n.createAd=i.contentWindow.getVPAIDAd,"function"==typeof n.createAd){if(n.ad=n.createAd(),n.ad.handshakeVersion(),n.prepared=!0,n.onPrepare)for(y=n.onPrepare,d=0,f=y.length;d<f;d++)(t=y[d])();return delete n.onPrepare}if(n.error=new Error("VPAID Ad did not return getVPAIDAd function"),n.onPrepare)for(v=n.onPrepare,c=0,p=v.length;c<p;c++)(t=v[c])(n.error);return delete n.onPrepare}}}(this),window.addEventListener("message",r),i.contentWindow.document.write('<html lang="en">\n<head><meta charset="UTF-8"></head>\n<body style="margin:0;padding:0">\n<script type="text/javascript" src="'+this.url+'"><\/script>\n<script type="text/javascript">\nwindow.parent.postMessage(\'{"event": "ready", "id": "'+e+"\"}', '"+s+"');\n<\/script>\n</body>\n</html>")):void(null!=t&&this.onPrepare.push(t))},t.prototype._init=function(t){return this.ad.subscribe(function(e){return function(){return e.ad.unsubscribe("AdLoaded"),e.ad.unsubscribe("AdError"),t()}}(this),"AdLoaded"),this.ad.subscribe(function(e){return function(){return console.log("AdError"),e.ad.unsubscribe("AdLoaded"),e.ad.unsubscribe("AdError"),t(new Error("adLoadError"))}}(this),"AdError"),this.ad.initAd(this.player.video.element.parentElement.offsetWidth,this.player.video.element.parentElement.offsetHeight,"normal",512,{AdParameters:JSON.stringify(this.parameters)},{slot:this.element,videoSlot:this.player.video.element,player:this.player})},t.prototype.load=function(t){return this.loaded?void(null!=t&&t()):this.error?void(null!=t&&t(this.error)):null==this.onLoad?(this.onLoad=[],null!=t&&this.onLoad.push(t),this.prepare(function(e){return function(i){var r,n,a;if(null!=i){if(e.error=i,e.onLoad)for(a=e.onLoad,r=0,n=a.length;r<n;r++)(t=a[r])(i);return void delete e.onLoad}return e._init(function(i){var r,n,a,s,o,l;if(null!=i){if(e.error=i,e.onLoad)for(o=e.onLoad,r=0,a=o.length;r<a;r++)(t=o[r])(i);return void delete e.onLoad}if(e.loaded=!0,e.onLoad)for(l=e.onLoad,n=0,s=l.length;n<s;n++)(t=l[n])();return delete e.onLoad})}}(this))):void(null!=t&&this.onLoad.push(t))},t.prototype.start=function(t){return this.started?void(null!=t&&t()):this.error?void(null!=t&&t(this.error)):this.loaded?(this.ad.startAd(),this.started=!0,void(null!=t&&t())):this.load(function(e){return function(i){return null!=i?void(null!=t&&t(i)):e.start(t)}}(this))},t.prototype.resize=function(t,e){if(null!=this.ad)return this.ad.resizeAd(t,e,"normal")},t}(),t.exports=i},function(t,e,i){var r,n;n=i(1),r=function(){function t(t){this.target=t,n.mixin(this),this.wantControl=!1,this.target.addEventListener("click",function(t){return function(){return t.wantControl=!t.wantControl,t.wantControl?t.trigger("get",null):(t.trigger("release",null),t.target.style.backgroundColor="white",t.target.style.color="black",t.timer&&clearInterval(t.timer),t.timer=null,t.target.innerHTML="Control")}}(this))}return t.prototype._clearTimer=function(){return clearInterval(this.timer),this.timer=null},t.prototype._setTimer=function(t){return this.time=Date.now()+t,null!=this.timer&&clearInterval(this.timer),this.timer=setInterval(function(t){return function(){var e;return e=Math.ceil((t.time-Date.now())/1e3),e<0&&(e=0,clearInterval(t.timer),t.timer=null),t.target.innerHTML=e}}(this),250)},t.prototype.update=function(t){return!0===t.control?(this.target.style.backgroundColor="green",this.target.style.color="white",this._setTimer(t.time)):null!=t.time?0===t.time?(this._clearTimer(),this.target.style.backgroundColor="white",this.target.style.color="black",this.target.innerHTML="Control",this._clearTimer(),this.wantControl=!1):(this.target.style.backgroundColor="yellow",this.target.style.color="black",this._setTimer(-t.time)):(this._clearTimer(),this.target.style.backgroundColor="red",this.target.style.color="white",this._clearTimer(),this.target.innerHTML="Admin")},t}(),t.exports=r},function(t,e,i){var r,n,a,s,o,l,u,d=function(t,e){return function(){return t.apply(e,arguments)}};o=i(8),r=i(6),s=i(9),a=i(10),l=i(11),u=i(0),n=function(){function t(t){var e,i,n,c,h,f,p;this.interface=t,this.snapshotShow=d(this.snapshotShow,this),this.snapshotClose=d(this.snapshotClose,this),this._onInteraction=d(this._onInteraction,this),this._onSunsetClick=d(this._onSunsetClick,this),this._onSunriseClick=d(this._onSunriseClick,this),this._onFastClick=d(this._onFastClick,this),this._onReviewClick=d(this._onReviewClick,this),this._onLiveClick=d(this._onLiveClick,this),this._onDownloadClick=d(this._onDownloadClick,this),this._onArchiveClick=d(this._onArchiveClick,this),this._onWarningClose=d(this._onWarningClose,this),this._onFullscreenExitClick=d(this._onFullscreenExitClick,this),this._onFullscreenClick=d(this._onFullscreenClick,this),this._onSnapShotCloseClick=d(this._onSnapShotCloseClick,this),this._onSnapShotClick=d(this._onSnapShotClick,this),this._onLogoClick=d(this._onLogoClick,this),this._onPauseClick=d(this._onPauseClick,this),this._onReconnectClick=d(this._onReconnectClick,this),this._onPlayClick=d(this._onPlayClick,this),this.interface.elements.playBt.addEventListener("click",this._onPlayClick),this.interface.elements.reconnectBt.addEventListener("click",this._onReconnectClick),this.interface.elements.clicktoplay.addEventListener("click",this._onPlayClick),this.interface.elements.pauseBt.addEventListener("click",this._onPauseClick),this.interface.elements.logoBt.addEventListener("click",this._onLogoClick),this.interface.elements.snapshotBt.addEventListener("click",this._onSnapShotClick),this.interface.elements.snapshotCloseBt.addEventListener("click",this._onSnapShotCloseClick),this.interface.elements.fullscreenBt.addEventListener("click",this._onFullscreenClick),this.interface.elements.fullscreenExitBt.addEventListener("click",this._onFullscreenExitClick),this.interface.elements.warningCloseBt.addEventListener("click",this._onWarningClose),this.interface.elements.archiveBt.addEventListener("click",this._onArchiveClick),this.interface.elements.downloadBt.addEventListener("click",this._onDownloadClick),this.interface.elements.liveBt.addEventListener("click",this._onLiveClick),this.interface.elements.reviewBt.addEventListener("click",this._onReviewClick),this.interface.elements.fastBt.addEventListener("click",this._onFastClick),this.interface.elements.sunriseBt.addEventListener("click",this._onSunriseClick),this.interface.elements.sunsetBt.addEventListener("click",this._onSunsetClick),this.interface.elements.inactiveTimeout.addEventListener("click",this._onInteraction),this.interface.elements.logoBt.style.display=this.interface.player.settings.video.buttons.logo?"block":"none",!0===this.interface.player.settings.video.overlays.live&&(this.interface.elements.bigLive.style.display="block",this.interface.elements.bigButtons.style.display="block",this.interface.elements.bigLive.addEventListener("click",this._onLiveClick)),!0===this.interface.player.settings.video.overlays.fastReview&&(this.interface.elements.bigReview.style.display="block",this.interface.elements.bigButtons.style.display="block",this.interface.elements.bigReview.addEventListener("click",this._onReviewClick)),(null!=(c=this.interface.player.settings.video.overlays.hotlink)?c.enabled:void 0)&&(this.interface.elements.bigCustom.style.display="block",this.interface.elements.bigButtons.style.display="block",this.interface.player.settings.video.overlays.hotlink.label&&(this.interface.elements.bigCustom.innerHTML=this.interface.player.settings.video.overlays.hotlink.label),this.interface.elements.bigCustom.addEventListener("click",function(t){return function(e){var i;return t.interface.elements.bigButtons.style.display="none",i=t.interface.player.settings.video.overlays.hotlink.speed||1,t.interface.player.play(t.interface.player.settings.video.overlays.hotlink.time,i)}}(this))),this.interface.player.settings.video.buttons.panorama&&this.interface.elements.panoBt&&this.interface.elements.panoBt.addEventListener("click",function(t){return function(){var e;return null!=(null!=(e=t.interface)?e.customButtons:void 0)&&t.interface.customButtons.hideFull(),t.interface.player.settings.video.buttons.panorama()}}(this)),null!=this.interface.player.control&&("vote"===this.interface.player.settings.video.control.type&&(f=new l(this.interface.elements.voteBox),this.interface.player.settings.video.control.previewPreset&&!u.isTouch()&&new a({presetsBox:f,camera:this.interface.player.settings.camera.id,target:this.interface.elements.presetPreview}),this.interface.elements.controlBt.addEventListener("click",function(t){return function(){var e;return t.interface.player.trigger("interaction"),t.interface.player.control.getVotes(),e=t.interface.elements.voteBox.style,e.visibility="visible"===e.visibility?"hidden":"visible"}}(this)),this.interface.player.control.bind("presets",function(t){return f.update({presets:t})}),this.interface.player.control.bind("votes",function(t){return f.update({votes:t})}),f.bind("vote",function(t){return function(e){return t.interface.player.trigger("interaction"),!0===t.interface.player.settings.video.control.reviewPreset&&null!=t.interface.player.video.playPreset&&null!=e&&(t.interface.player.manager.playPreset(e),f.target.style.visibility="hidden"),t.interface.player.control.vote(e)}}(this))),"control"===this.interface.player.settings.video.control.type&&(this.interface.player.settings.video.control.preset&&(n=new s(this.interface.elements.presetsBox),this.interface.player.settings.video.control.previewPreset&&!u.isTouch()&&new a({presetsBox:n,camera:this.interface.player.settings.camera.id,target:this.interface.elements.presetPreview}),this.interface.elements.presetsBox.style.visibility="hidden",this.interface.elements.presetsBt.addEventListener("click",function(t){return function(){var e;return t.interface.player.trigger("interaction"),e=t.interface.elements.presetsBox.style,e.visibility="visible"===e.visibility?"hidden":"visible"}}(this)),this.interface.player.control.bind("presets",function(t){return n.update(t)}),n.bind("preset",function(t){return function(e){return t.interface.player.trigger("interaction"),t.interface.player.control.gotoPreset(e)}}(this))),this.interface.player.settings.video.control.pan?(i=new o({target:this.interface.elements.panScroll}),this.interface.elements.goLeft.addEventListener("click",function(t){return function(){return t.interface.player.trigger("interaction"),t.interface.player.control.moveLeft()}}(this)),this.interface.elements.goRight.addEventListener("click",function(t){return function(){return t.interface.player.trigger("interaction"),t.interface.player.control.moveRight()}}(this)),i.bind("value",function(t){return function(e){return t.interface.player.trigger("interaction"),t.interface.player.control.setPosition({pan:Math.floor(e)})}}(this))):(this.interface.elements.panScroll.style.visibility="hidden",this.interface.elements.goLeft.style.visibility="hidden",this.interface.elements.goRight.style.visibility="hidden"),this.interface.player.settings.video.control.tilt?(h=new o({target:this.interface.elements.tiltScroll,vertical:!0}),this.interface.elements.goUp.addEventListener("click",function(t){return function(){return t.interface.player.trigger("interaction"),t.interface.player.control.moveUp()}}(this)),this.interface.elements.goDown.addEventListener("click",function(t){return function(){return t.interface.player.trigger("interaction"),t.interface.player.control.moveDown()}}(this)),h.bind("value",function(t){return function(e){return t.interface.player.trigger("interaction"),t.interface.player.control.setPosition({tilt:Math.floor(e)})}}(this))):(this.interface.elements.tiltScroll.style.visibility="hidden",this.interface.elements.goUp.style.visibility="hidden",this.interface.elements.goDown.style.visibility="hidden"),this.interface.player.settings.video.control.zoom?(p=new o({target:this.interface.elements.zoomScroll,vertical:!0}),this.interface.elements.zoomIn.addEventListener("click",function(t){return function(){return t.interface.player.trigger("interaction"),t.interface.player.control.zoomIn()}}(this)),this.interface.elements.zoomOut.addEventListener("click",function(t){return function(){return t.interface.player.trigger("interaction"),t.interface.player.control.zoomOut()}}(this)),p.bind("value",function(t){return function(e){return t.interface.player.trigger("interaction"),t.interface.player.control.setPosition({zoom:Math.floor(e)})}}(this))):(this.interface.elements.zoomScroll.style.visibility="hidden",this.interface.elements.zoomIn.style.visibility="hidden",this.interface.elements.zoomOut.style.visibility="hidden"),this.interface.player.settings.video.control.byclick&&this.interface.elements.clicker.addEventListener("click",function(t){return function(e){var i,r,n;return t.interface.player.trigger("interaction"),i=e.target.getBoundingClientRect(),r=e.offsetX,n=e.offsetY,r=r/i.width*1e3-500,n=500-n/i.height*1e3,t.interface.player.control.setPositionByClick({x:r,y:n})}}(this)),this.interface.player.control.bind("info",function(t){if(null!=i&&i.update({min:t.minPan,max:t.maxPan}),null!=h&&h.update({min:t.minTilt,max:t.maxTilt}),null!=p)return p.update({min:t.minZoom,max:t.maxZoom})}),this.interface.player.control.bind("ptz",function(t){if(null!=i&&i.setValue(t.pan),null!=h&&h.setValue(t.tilt),null!=p)return p.setValue(t.zoom)}),this.interface.player.control.bind("reached",function(t){if(null!=i&&i.setValue(t.pan),null!=h&&h.setValue(t.tilt),null!=p)return p.setValue(t.zoom)}),e=new r(this.interface.elements.controlBt),this.interface.player.control.bind("control",function(t){return function(i){return e.update(i),t._showControl(i.control)}}(this)),e.bind("get",function(t){return function(){return t.interface.player.trigger("interaction"),t.interface.player.control.getControl()}}(this)),e.bind("release",function(t){return function(){return t.interface.player.trigger("interaction"),t.interface.player.control.releaseControl()}}(this))))}return t.prototype._showControl=function(t){return t?(this.interface.player.settings.video.control.preset&&(this.interface.elements.presetsBt.style.display="block"),this.interface.elements.controlUI.style.visibility="visible",this.interface.player.settings.video.control.byclick?this.interface.elements.clicker.style.visibility="visible":void 0):(this.interface.elements.presetsBt.style.display="none",this.interface.elements.controlUI.style.visibility="hidden",this.interface.elements.presetsBox.style.visibility="hidden",this.interface.elements.clicker.style.visibility="hidden")},t.prototype._onPlayClick=function(t){return this.interface.elements.bigButtons.style.display="none",this.interface.trigger("play-click",t)},t.prototype._onReconnectClick=function(t){return this.interface.trigger("reconnect-click",t)},t.prototype._onPauseClick=function(t){return this.interface.trigger("pause-click",t)},t.prototype._onLogoClick=function(t){return this.interface.trigger("logo-click",t)},t.prototype._onSnapShotClick=function(t){return this.interface.trigger("snapshot-click",t)},t.prototype._onSnapShotCloseClick=function(t){return this.interface.trigger("snapshot-close-click",t)},t.prototype._onFullscreenClick=function(t){return this.interface.trigger("fullscreen-click",t)},t.prototype._onFullscreenExitClick=function(t){return this.interface.trigger("fullscreen-exit-click",t)},t.prototype._onWarningClose=function(){return this.interface.elements.warning.style.display="none"},t.prototype._onArchiveClick=function(t){return this.interface.elements.bigButtons.style.display="none",this.interface.trigger("archive-click",t)},t.prototype._onDownloadClick=function(t){return this.interface.trigger("download-click",t)},t.prototype._onLiveClick=function(t){return this.interface.elements.bigButtons.style.display="none",this.interface.trigger("live-click",t)},t.prototype._onReviewClick=function(t){return this.interface.elements.bigButtons.style.display="none",this.interface.trigger("review-click",t)},t.prototype._onFastClick=function(t){return this.interface.elements.bigButtons.style.display="none",this.interface.trigger("fast-click",t)},t.prototype._onSunriseClick=function(t){return this.interface.elements.bigButtons.style.display="none",this.interface.trigger("sunrise-click",t)},t.prototype._onSunsetClick=function(t){return this.interface.elements.bigButtons.style.display="none",this.interface.trigger("sunset-click",t)},t.prototype._onInteraction=function(t){return this.interface.player.trigger("interaction",t)},t.prototype.snapshotClose=function(){return this.interface.elements.snapshot.style.display="none"},t.prototype.snapshotShow=function(t){return this.interface.elements.snapshotImg.src=t.url,this.interface.elements.snapshot.style.display="block"},t.prototype.destroy=function(){return this.interface.elements.playBt.removeEventListener("click",this._onPlayClick),this.interface.elements.pauseBt.removeEventListener("click",this._onPauseClick),this.interface.elements.logoBt.removeEventListener("click",this._onLogoClick),this.interface.elements.snapshotBt.removeEventListener("click",this._onSnapShotClick),this.interface.elements.snapshotCloseBt.removeEventListener("click",this._onSnapShotCloseClick),this.interface.elements.fullscreenBt.removeEventListener("click",this._onFullscreenClick),this.interface.elements.fullscreenExitBt.removeEventListener("click",this._onFullscreenExitClick),this.interface.elements.warningCloseBt.removeEventListener("click",this._onWarningClose),this.interface.elements.archiveBt.removeEventListener("click",this._onArchiveClick),this.interface.elements.downloadBt.removeEventListener("click",this._onDownloadClick),this.interface.elements.liveBt.removeEventListener("click",this._onLiveClick)},t}(),t.exports=n},function(t,e,i){var r,n;r=i(1),i(0),n=function(){function t(t){r.mixin(this),this.target=t.target,this.window=this.target.ownerDocument.defaultView,this.max=t.max||100,this.min=t.min||0,this.value=t.value,null==this.value&&(this.value=(this.max+this.min)/2),this.dragger=this.target.firstChild,this.vertical=t.vertical||!1,this.target.style.position="relative",this.dragger.style.position="absolute",this.dragger.addEventListener("mousedown",function(t){return function(e){return t._onDragStart({x:e.clientX,y:e.clientY})}}(this)),this.window.addEventListener("mousemove",function(t){return function(e){return t._onDrag({x:e.clientX,y:e.clientY})}}(this)),this.window.addEventListener("mouseup",function(t){return function(e){return t._onDragEnd({x:e.clientX,y:e.clientY})}}(this)),this.dragger.addEventListener("touchstart",function(t){return function(e){var i;if(!(e.touches.length>1))return t._stopEventProgagation(e),i=e.targetTouches.item(0),t._onDragStart({x:i.clientX,y:i.clientY}),!1}}(this)),this.window.addEventListener("touchmove",function(t){return function(e){var i;if(null!=t.dragStart)return t._stopEventProgagation(e),i=e.targetTouches.item(0),t._onDrag({x:i.clientX,y:i.clientY}),!1}}(this)),this.window.addEventListener("touchend",function(t){return function(e){if(null!=t.dragStart)return t._stopEventProgagation(e),e.targetTouches.item(0),t._onDragEnd({x:t.dragMove.x,y:t.dragMove.y}),!1}}(this)),this.window.addEventListener("resize",function(t){return function(){return t.update()}}(this)),this.position=0}return t.prototype.update=function(t){return null!=(null!=t?t.max:void 0)&&(this.max=t.max),null!=(null!=t?t.min:void 0)&&(this.min=t.min),null!=(null!=t?t.value:void 0)&&(this.value=t.value),this.setValue(this.value)},t.prototype.setValue=function(t){var e,i;if(this.value=t,i=this._getWidth(),e=Math.floor((this.value-this.min)/(this.max-this.min)*i),e<0&&(e=0),e>i&&(e=i),!this.dragStart)return this.position=e,this.vertical?this.dragger.style.bottom=this.position+"px":this.dragger.style.left=this.position+"px"},t.prototype._getWidth=function(){return this.vertical?this.target.offsetHeight-this.dragger.offsetHeight:this.target.offsetWidth-this.dragger.offsetWidth},t.prototype._getValue=function(t){return this.vertical,t/this._getWidth()*(this.max-this.min)+this.min},t.prototype._onDragStart=function(t){return this.dragStart=t},t.prototype._stopEventProgagation=function(t){return t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0,t.returnValue=!1},t.prototype._onDrag=function(t){var e,i,r;if(this.dragStart)return this.dragMove=t,e=this.vertical?this.dragStart.y-t.y:t.x-this.dragStart.x,i=this.position+e,i<0&&(i=0),r=this._getWidth(),i>r&&(i=r),this.vertical?this.dragger.style.bottom=i+"px":this.dragger.style.left=i+"px"},t.prototype._onDragEnd=function(t){var e,i,r,n;if(this.dragStart)return e=this.vertical?this.dragStart.y-t.y:t.x-this.dragStart.x,i=this.position+e,i<0&&(i=0),n=this._getWidth(),i>n&&(i=n),r=this._getValue(i),this.trigger("value",r),this.position=Math.floor((this.value-this.min)/(this.max-this.min)*n),this.vertical?this.dragger.style.bottom=this.position+"px":this.dragger.style.left=this.position+"px",this.dragStart=null},t}(),t.exports=n},function(t,e,i){var r,n,a;r=i(1),a=i(0),n=function(){function t(t){r.mixin(this),this.target=t,window.addEventListener("resize",function(t){return function(){return t._updateMaxHeight()}}(this))}return t.prototype.update=function(t){var e,i,r,n,s,o,l,u;if(null!=t&&t&&!a.deepEquals(t,this.presets)){this.presets=t,this.target.innerHTML="",s='<div class="hdrelay-default-presetbox-title"><span class="hdrelay-default-close2ic hdrelay-icon"><svg><use xlink:href="#close2ic"></use></svg></span>Choose a position:</div>',s+='<div class="hdrelay-default-presetbox-items"></div>',this.target.innerHTML=s,this.close=this.target.querySelector(".hdrelay-default-close2ic"),this.close.addEventListener("click",function(t){return function(){return null!=t.timer&&clearTimeout(t.timer),t.trigger("unpreview"),t.target.style.visibility="hidden"}}(this)),n=this.target.querySelector(".hdrelay-default-presetbox-items");for(i in t)u=t[i],r=document.createElement("div"),r.innerHTML=u,n.appendChild(r),e=function(t){return function(e){return function(){return null!=t.timer&&clearTimeout(t.timer),t.trigger("unpreview"),t.trigger("preset",e),t.target.style.visibility="hidden"}}}(this),r.addEventListener("click",e(i)),l=function(t){return function(e){return function(){return null!=t.timer&&clearTimeout(t.timer),t.timer=setTimeout(function(){return t.trigger("preview",e)},800)}}}(this),r.addEventListener("mouseover",l(i)),o=function(t){return function(e){return function(){return null!=t.timer&&clearTimeout(t.timer),t.trigger("unpreview",e)}}}(this),r.addEventListener("mouseout",o(i));return this._updateMaxHeight()}},t.prototype._updateMaxHeight=function(){return this.target.style.maxHeight=this.target.parentNode.parentNode.offsetHeight-47+"px"},t}(),t.exports=n},function(t,e,i){var r,n,a=function(t,e){return function(){return t.apply(e,arguments)}};n=i(4),r=function(){function t(t){this.params=t,this._unpreview=a(this._unpreview,this),this._onImageLoad=a(this._onImageLoad,this),this._preview=a(this._preview,this),this.params.presetsBox.bind("preview",this._preview),this.params.presetsBox.bind("unpreview",this._unpreview),this.loader=document.createElement("img"),this.loader.addEventListener("load",this._onImageLoad),this.params.target.style.visibility="hidden"}return t.prototype._loadPresetsImagesList=function(t){var e;return null!=this.presets?t():(this.lastCallback=t,e="//img.hdrelay.com/api/ptz/last-presets-frames?camera="+this.params.camera,n({url:e},function(t){return function(e,i,r){if(200!==e)return console.error("DEBUG failed to load presets images list",e,i);try{return t.presets=JSON.parse(i),t.lastCallback()}catch(t){return console.error(error)}}}(this)))},t.prototype._preview=function(t){return this.status="visible",this._loadPresetsImagesList(function(e){return function(){return e._show(t)}}(this))},t.prototype._onImageLoad=function(){var t;return t="//storage.hdrelay.com/presets/"+this.params.camera+"/"+this.code+"/"+this.timestamp,this.params.target.src=t,this.params.target.style.visibility=this.status},t.prototype._show=function(t){var e;if(this.timestamp=this.presets[t],null!=this.timestamp&&t!==this.code)return e="//storage.hdrelay.com/presets/"+this.params.camera+"/"+t+"/"+this.timestamp,this.loader.src=e,this.code=t},t.prototype._unpreview=function(t){if(t===this.code||null==t)return this.status="hidden",this.params.target.style.visibility=this.status,this.loader.src=""},t}(),t.exports=r},function(t,e,i){var r,n,a,s;r=i(1),s=i(0),a=i(12),n=function(){function t(t){r.mixin(this),this.target=t,window.addEventListener("resize",function(t){return function(){return t._updateMaxHeight()}}(this))}return t.prototype.update=function(t){var e,i,r,n,o,l,u,d,c;if(null!=t.votes&&(this.votes=t.votes),null!=(null!=(l=t.votes)?l.lastVotedPreset:void 0)&&(this.lastVotedPreset=t.votes.lastVotedPreset),t.presets&&!s.deepEquals(t.presets,this.presets)){this.presets=t.presets,r='<div class="hdrelay-default-vote-title"><span class="hdrelay-default-close2ic hdrelay-icon"><svg><use xlink:href="#close2ic"></use></svg></span>Choose a position:</div>',r+='<div class="hdrelay-default-vote-items"></div>',r+='<div class="hdrelay-default-vote-info"></div>',this.target.innerHTML=r,this.info=this.target.querySelector(".hdrelay-default-vote-info"),this.close=this.target.querySelector(".hdrelay-default-close2ic"),this.close.addEventListener("click",function(t){return function(){return null!=t.overtimer&&clearTimeout(t.overtimer),t.trigger("unpreview"),t.target.style.visibility="hidden"}}(this)),i=this.target.querySelector(".hdrelay-default-vote-items"),this.itens={},u=this.presets;for(e in u)o=u[e],n=new a(e,o),this.itens[e]=n,i.appendChild(n.element),n.bind("click",function(t){return function(e){return null!=t.overtimer&&clearTimeout(t.overtimer),t.trigger("unpreview"),t.myLastVote!==e?(t.myLastVote=e,t.trigger("vote",e)):(t.myLastVote=null,t.trigger("vote",null))}}(this)),n.bind("mouseover",function(t){return function(e){return null!=t.overtimer&&clearTimeout(t.overtimer),t.overtimer=setTimeout(function(){return t.trigger("preview",e)},800)}}(this)),n.bind("mouseout",function(t){return function(e){return null!=t.overtimer&&clearTimeout(t.overtimer),t.trigger("unpreview",e)}}(this))}if(null!=this.itens&&null!=this.votes){d=this.itens;for(e in d)n=d[e],c=this.votes.votes[e]?this.votes.votes[e]:0,n.setVotes(c),n.setCurrent(e===this.lastVotedPreset)}return null!=t.votes&&(null!=t.votes.time?this._setTimer(t.votes.time):(this.info.innerHTML="Administrator control",this.info.style.backgroundColor="red",null!=this.timer&&clearInterval(this.timer),this.timer=null)),this._updateMaxHeight()},t.prototype._updateMaxHeight=function(){return this.target.style.maxHeight=this.target.parentNode.offsetHeight-22+"px"},t.prototype._setTimer=function(t){return null!=this.timer&&clearInterval(this.timer),0===t?(this.next=null,this.timer=null):(this.next=Date.now()+t,this.timer=setInterval(function(t){return function(){return t._setTime()}}(this),250)),this._setTime()},t.prototype._setTime=function(){var t;if(null!=this.info)return this.info.style.backgroundColor="black",this.next?(t=Math.floor((this.next-Date.now())/1e3),t<0&&(t=0),this.info.innerHTML="Going to most voted in "+t):this.info.innerHTML="Moving immediately"},t}(),t.exports=n},function(t,e,i){var r,n,a;r=i(1),a=i(0),n=function(){function t(t,e){this.code=t,r.mixin(this),this.element=document.createElement("div"),this.element.className="hdrelay-default-vote-item",this.element.addEventListener("click",function(e){return function(){return e.trigger("click",t)}}(this)),this.element.addEventListener("mouseover",function(e){return function(){return e.trigger("mouseover",t)}}(this)),this.element.addEventListener("mouseout",function(e){return function(){return e.trigger("mouseout",t)}}(this)),this.element.innerHTML="<div class='hdrelay-default-vote-name'>"+e+"</div><div class='hdrelay-default-votes'></div>",this.votes=this.element.querySelector(".hdrelay-default-votes")}return t.prototype.setVotes=function(t){return t=0===t?"":1===t?"<span>1 vote</span>":"<span>"+t+" votes</span>",this.votes.innerHTML=t},t.prototype.setCurrent=function(t){return t?a.addClass(this.element,"hdrelay-default-selected"):a.removeClass(this.element,"hdrelay-default-selected")},t}(),t.exports=n},function(t,e,i){var r,n,a,s,o,l;r={logo:i(59),pausebt:i(60),playbt:i(61),fullscreenbt:i(62),fullscreenexitbt:i(63),sharebt:i(64),snapshotbt:i(65),playic:i(66),closeic:i(67),close2ic:i(68),goleft:i(69),goright:i(70),goup:i(71),godown:i(72),zoomin:i(73),zoomout:i(74),indicator:i(75),downic:i(76),upic:i(77),downloadbt:i(78),archivebt:i(79),sunrisebt:i(80),sunsetbt:i(81),reviewbt:i(82),fastbt:i(83)},a=document.createElement("svg"),a.style.display="none";for(n in r)s=r[n],o=document.createElement("symbol"),o.setAttribute("id",n),l=s.attributes.viewBox||"0 0 "+s.attributes.width+" "+s.attributes.height,o.setAttribute("viewbox",l),o.innerHTML=s.content,a.appendChild(o);t.exports=a},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var i=this[e];i[2]?t.push("@media "+i[2]+"{"+i[1]+"}"):t.push(i[1])}return t.join("")},t.i=function(e,i){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},n=0;n<this.length;n++){var a=this[n][0];"number"==typeof a&&(r[a]=!0)}for(n=0;n<e.length;n++){var s=e[n];"number"==typeof s[0]&&r[s[0]]||(i&&!s[2]?s[2]=i:i&&(s[2]="("+s[2]+") and ("+i+")"),t.push(s))}},t}},function(t,e,i){var r,n,a,s,o,l,u=function(t,e){return function(){return t.apply(e,arguments)}};r=i(16),o=i(37),a=i(3),l=null,s=5,n=function(){function t(){this._load=u(this._load,this),this.sessions={}}return t.getInstance=function(){return l||(l=new t)},t.prototype._createSession=function(t,e,i,n){var s;return s={token:t,camera:e,start:n,speed:i,correctedSpeed:a(i),sequence:0,playlist_index:0,playlist:[],chunklist_index:-1,chunklist:[],recordData:new r},this.sessions[s.token]=s,s},t.prototype.getSession=function(t,e,i,r){var n;return n=this.sessions[t],null==n&&null!=e&&null!=i&&null!=r&&(n=this._createSession(t,e,i,r)),n},t.prototype._updatePlaylist=function(t,e){var i;return t.loading_playlists||t.playlist.length-t.playlist_index>=3?e():(i=0===t.playlist.length?t.start:t.playlist[t.playlist.length-1].time+1,t.loading_playlists=!0,t.recordData.get(t.camera,t.speed,i,3,function(i){return function(r,n){return t.loading_playlists=!1,null!=r?e(r):(0===t.playlist.length?t.playlist=t.recordData.playlists:t.playlist=t.playlist.concat(n),0===n.length?e():0===n.length&&0===t.playlist.length?e(new Error("No record available")):t.recordData.ending?e():i._updatePlaylist(t,e))}}(this)))},t.prototype._updateChunklist=function(t,e){return t.loading_chunks||t.chunklist.length-(t.chunklist_index+1)>=s||t.playlist_index===t.playlist.length?e():(t.loading_chunks=!0,this._load(t.playlist[t.playlist_index].url,function(i){return function(r,n){var a,s,o;if(t.loading_chunks=!1,null!=r)return e(r);if(o=0,n.chunks.forEach(function(e){return null!=t.playlist[t.playlist_index].offset&&0===o&&(e.offset=t.playlist[t.playlist_index].offset),e.playlist=t.playlist[t.playlist_index].url,e.start=t.playlist[t.playlist_index].time+o,o+=1e3*e.duration}),0===t.playlist_index){for(a=0,s=0;n.chunks[0].offset>1e3*n.chunks[0].duration;)a++,s+=1e3*n.chunks[0].duration,n.chunks[1].offset=n.chunks[0].offset-1e3*n.chunks[0].duration,n.chunks.shift();a>0&&(t.playlist[0].originalTime=t.playlist[0].time,t.playlist[0].time=t.playlist[0].time+s*t.correctedSpeed,t.playlist[0].originalDuration=t.playlist[0].duration,t.playlist[0].duration=t.playlist[0].duration-s,t.playlist[0].chunks_skipped=a)}return t.playlist_index++,t.duration=n.duration,t.chunklist=t.chunklist.concat(n.chunks),t.recordData.ending&&t.playlist_index===t.playlist.length?e():i._updateChunklist(t,e)}}(this)))},t.prototype.getChunks=function(t,e){return this._updatePlaylist(t,function(i){return function(r){return null!=r?e(r):i._updateChunklist(t,function(r){var n,a,o,l,u;if(null!=r)return e(r);if(0===t.chunklist.length&&t.recordData.ending&&e(new Error("Not available")),o=t.chunklist_index+1+s<=t.chunklist.length,l=null==t.nextSequenceNotBefore||Date.now()>=t.nextSequenceNotBefore,o||t.recordData.ending&&-1===t.chunklist_index)l?(u=t.chunklist_index+1,t.chunklist_index=t.chunklist_index+1,t.sequence++,t.nextSequenceNotBefore=Date.now()+1e3*t.chunklist[u].duration):u=t.chunklist_index;else{if(!t.recordData.ending)return void setTimeout(function(){return i.getChunks(t,e)},500);u=t.chunklist_index}return a=u+s,a>t.chunklist.length&&(a=t.chunklist.length),n=t.chunklist.slice(u,a),e(null,{sequence:t.sequence,duration:t.duration,chunks:n,xhr:i.xhr,end:t.recordData.ending&&t.playlist_index===t.playlist.length&&a===t.chunklist.length})})}}(this))},t.prototype.getTimestamp=function(t,e){var i,r;return r=0,i=t.playlist.find(function(t){var i;return(i=r+t.duration)>=e||(r=i,!1)}),null==i?null:i.time+(e-r)*t.correctedSpeed},t.prototype._load=function(t,e){var i;this.xhr=new XMLHttpRequest;try{this.xhr.open("GET",t,!0)}catch(t){return i=t,e({response:{code:this.xhr.status,text:i.message},xhr:this.xhr})}return this.xhr.onreadystatechange=function(i){return function(){var r,n,a;if(4===i.xhr.readyState){if(!(i.xhr.status>=200&&i.xhr.status<300))return e({response:{code:i.xhr.status,text:i.xhr.statusText},xhr:i.xhr});if(r=o(t,i.xhr.responseText),(null!=(n=r.streams)?n.length:void 0)>0)return a=r.streams[0],i._load(a.url,e);if(null!=r.chunks)return e(null,r)}}}(this),this.xhr.send()},t}(),t.exports=n},function(t,e,i){var r,n,a;a=i(2),n=i(3),r=function(){function t(){this.playlists=[],this.timezone=new a.Timezone("Etc/UTC|UTC|0|0|"),this.ending=!1}return t._load=function(t,e){var i,r;r=new XMLHttpRequest;try{r.open("GET",t,!0)}catch(t){return i=t,e({response:{code:r.status,text:i.message},xhr:r})}return r.onreadystatechange=function(){var t;if(4===r.readyState){if(r.status>=200&&r.status<300){try{t=JSON.parse(r.responseText)}catch(t){return i=t,e(i)}return e(null,t)}return e({response:{code:r.status,text:r.statusText},xhr:r})}},r.send()},t.prototype.get=function(t,e,i,r,n){var a,s,o;return null==this.camera&&(this.camera=t),null==this.speed&&(this.speed=e),null==this.time&&(this.time=i),s=this.playlists.findIndex(function(t){return t.time>=i}),-1===s?this.ending?n(null,[]):this._updatePlaylists(function(a){return function(s){return null!=s?n(s):a.get(t,e,i,r,n)}}(this)):(a=s+r,a>this.playlists.length&&(a=this.playlists.length),o=this.playlists.slice(s,a),n(null,o))},t.prototype._updatePlaylists=function(e){var i;return i=this.playlists.length>0?"https://img.hdrelay.com/api/record/next?camera="+this.camera+"&start="+(this.playlists[this.playlists.length-1].time+1)+"&speed="+this.speed+"&count=5":"https://img.hdrelay.com/api/record/get?camera="+this.camera+"&start="+this.time+"&speed="+this.speed+"&count=5",t._load(i,function(t){return function(r,s){var o,l;return null!=r?e(r):(t.ending=s.length<5,s=s.map(function(e){var r,n;return r=a.format(new Date(e.start),"YYYYMMDDHHmmssSSS",t.timezone),1===t.speed?(n=r.substring(0,8),i="https://b9.hdrelay.com/record/_definst_/mp4:record/"+t.camera+"/"+n+"/"+t.camera+"_"+r+".mp4/playlist.m3u8"):(n=r.substring(0,6),i="https://b9.hdrelay.com/record/_definst_/mp4:record/"+t.camera+"/"+t.speed+"/"+n+"/"+t.camera+"_"+r+".mp4/playlist.m3u8"),{time:e.start,duration:e.duration,url:i}}),0===t.playlists.length&&s[0].time<t.time&&(l=n(t.speed),o=(t.time-s[0].time)/l,s[0].offset=o,o>s[0].duration&&s.shift()),t.playlists=t.playlists.concat(s),e())}}(this))},t}(),t.exports=r},function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){var r,n,a,s;n=i(16),a=i(3),s=/https:\/\/archive\/([A-Za-z0-9_-]*)\/(\d*)\/(\d*)/,r=function(){function t(t){var e;this.video=t.video,this.url=t.url,this.element=t.element,e=s.exec(this.url),this.camera=e[1],this.speed=parseInt(e[2]),this.start=parseInt(e[3]),this.loading_playlists=!1,this.playlist_index=0,this.playlist=[],this.recordData=new n,this.correctedSpeed=a(this.speed),this._updatePlaylist(function(t){return function(e){return null!=e?console.error(e):(t.element.src=t.playlist[t.playlist_index].url,t.video._lastUrl=t.playlist[t.playlist_index].url,t._onEnded=function(){return t._updatePlaylist(function(e){return t.playlist_index++,t.element.src=t.playlist[t.playlist_index].url,t.video._lastUrl=t.playlist[t.playlist_index].url,t.element.play()})},t.element.addEventListener("ended",t._onEnded),t.element.play())}}(this))}return t.prototype.getTimestamp=function(){return 0===this.playlist.length?null:this.playlist[this.playlist_index].time+Math.floor(1e3*this.element.currentTime)*this.correctedSpeed},t.prototype._updatePlaylist=function(t){var e;return this.loading_playlists||this.playlist.length-this.playlist_index>=3?t():(e=0===this.playlist.length?this.start:this.playlist[this.playlist.length-1].time+1,this.loading_playlists=!0,this.recordData.get(this.camera,this.speed,e,3,function(e){return function(i,r){return e.loading_playlists=!1,null!=i?t(i):(0===e.playlist.length?e.playlist=e.recordData.playlists:e.playlist=e.playlist.concat(r),0===r.length?t():0===r.length&&0===e.playlist.length?t(new Error("No record available")):e.recordData.ending?t():e._updatePlaylist(t))}}(this)))},t.prototype.destroy=function(){return this.element.removeEventListener("ended",this._onEnded)},t}(),t.exports=r},function(t,e){t.exports=function(t){var e,i,r,n,a,s,o,l,u,d;return d=t.state,u=t.settings,e=t.interface.elements,(d.isLoading()||d.isPlaying()||d.isLoading())&&(e.bigButtons.style.display="none"),d.isShowingAd()?(e.pauseBt.style.display="none",e.playBt.style.display="none",e.archiveBt&&(e.archiveBt.style.display="none"),e.downloadBt&&(e.downloadBt.style.display="none"),e.reviewBt&&(e.reviewBt.style.display="none"),e.fastBt&&(e.fastBt.style.display="none"),e.sunriseBt&&(e.sunriseBt.style.display="none"),e.sunsetBt&&(e.sunsetBt.style.display="none"),e.controlBt&&(e.controlBt.style.display="none"),e.panoBt&&(e.panoBt.style.display="none"),e.liveBt&&(e.liveBt.style.display="none"),e.snapshotBt&&(e.snapshotBt.style.display="none")):(d.isPlaying()?(e.pauseBt.style.display="block",e.playBt.style.display="none"):(e.pauseBt.style.display="none",e.playBt.style.display="block"),null!=e.downloadBt&&(e.downloadBt.style.display=t.settings.video.buttons.download?"block":"none"),null!=e.archiveBt&&(e.archiveBt.style.display=(null!=(i=t.settings.video.record)?i.enabled:void 0)&&t.video.supportArchive()&&!0!==t.settings.video.record.hideDatePicker?"block":"none"),e.reviewBt&&(e.reviewBt.style.display=(null!=(r=t.settings.video.record)?r.enabled:void 0)&&t.video.supportArchive()&&t.settings.video.buttons.fastReview.enabled?"block":"none"),e.fastBt&&(e.fastBt.style.display=(null!=(n=t.settings.video.record)?n.enabled:void 0)&&t.video.supportArchive()&&t.manager.hasSpeeds(t.video.state.time)?"block":"none"),e.sunriseBt&&(e.sunriseBt.style.display=(null!=(a=t.settings.video.record)?a.enabled:void 0)&&t.video.supportArchive()&&(null!=(s=t.settings.video.buttons.sunrise)?s.enabled:void 0)?"block":"none"),e.sunsetBt&&(e.sunsetBt.style.display=(null!=(o=t.settings.video.record)?o.enabled:void 0)&&t.video.supportArchive()&&(null!=(l=t.settings.video.buttons.sunset)?l.enabled:void 0)?"block":"none"),null!=e.panoBt&&(e.panoBt.style.display=t.settings.video.buttons.panorama?"block":"none"),null!=e.controlBt&&(!0===t.video.state.reviewMode?e.controlBt.style.display="block":"record"===t.video.state.mode?e.controlBt.style.display="none":null!=t.control?e.controlBt.style.display=d.isPlaying()?"block":"none":e.controlBt.style.display="none"),null!=e.liveBt&&("record"===t.video.state.mode?e.liveBt.style.display="block":e.liveBt.style.display="none"),null!=e.snapshotBt&&(u.video.buttons.snapshot?e.snapshotBt.style.display=d.isPlaying()||d.isPaused()?"block":"none":e.snapshotBt.style.display="none")),null!=e.fullscreenBt&&(u.video.buttons.fullscreen&&t.state.supportFullscreen()?(e.fullscreenBt.style.display=d.isFullscreen()?"none":"block",e.fullscreenExitBt.style.display=d.isFullscreen()?"block":"none"):(e.fullscreenBt.style.display="none",e.fullscreenExitBt.style.display="none")),d.isEnded()?(e.end.style.display="block",e.videoOver.style.display="none",e.calendar.style.display="none"):(e.end.style.display="none",e.videoOver.style.display="block",e.calendar.style.display="block"),e.loading.style.display=d.isLoading()||d.isBuffering()?"block":"none",t.interface.overlayer.update(),e.clicktoplay.style.visibility=d.isClicktoplay()?"visible":"hidden"}},function(t,e){var i,r,n,a,s,o,l,u;l=function(){return null!=document.fullscreenEnabled||null!=document.webkitFullscreenEnabled||null!=document.mozFullScreenEnabled||null!=document.oFullscreenEnabled||null!=document.msFullscreenEnabled},a=function(){return null!=document.fullscreenElement||null!=document.webkitFullscreenElement||null!=document.mozFullScreenElement||null!=document.oFullscreenElement||null!=document.msFullscreenElement},r=function(){return null!=document.exitFullscreen?document.exitFullscreen():null!=document.webkitExitFullscreen?document.webkitExitFullscreen():null!=document.mozCancelFullScreen?document.mozCancelFullScreen():null!=document.oExitFullscreen?document.oExitFullscreen():null!=target.msExitFullscreen?document.msExitFullscreen():void 0},o=function(t){return null!=t.requestFullscreen?t.requestFullscreen():null!=t.webkitRequestFullscreen?t.webkitRequestFullscreen():null!=t.mozRequestFullScreen?t.mozRequestFullScreen():null!=t.oRequestFullscreen?t.oRequestFullscreen():null!=t.msRequestFullscreen?t.msRequestFullscreen():void 0},u=function(t){return a()?r():o(t)},n=function(){return null!=document.exitFullscreen?"fullscreenchange":null!=document.webkitExitFullscreen?"webkitfullscreenchange":null!=document.mozCancelFullScreen?"mozfullscreenchange":null!=document.oExitFullscreen?"fullscreenchange":null!=document.msExitFullscreen?"MSFullscreenChange":void 0},i=function(t){var e;if(null!=(e=n()))return document.addEventListener(e,t)},s=function(t){var e;if(null!=(e=n()))return document.removeEventListener(e,t)},t.exports={supportFullScreen:l,isFullScreen:a,cancelFullScreen:r,requestFullScreen:o,toggleFullScreen:u,addEventListener:i,removeEventListener:s}},function(t,e){var i;i=function(t,e){var i,r,n,a,s,o,l,u,d,c;l={},d=!1,n=0,c=0;for(o in t)c++;s=function(t){return function(i,r){if(i){if(!d)return e(i)}else if(l[t]=r,++n===c)return e(null,l)}},u=[];for(r in t)a=t[r],i=s(r),u.push(a(i));return u},t.exports={parallel:i}},function(t,e,i){t.exports=function(t){i.e(0).then(function(e){t(i(95))}.bind(null,i)).catch(i.oe)}},function(t,e,i){t.exports=function(t){i.e(1).then(function(e){t(i(96))}.bind(null,i)).catch(i.oe)}},function(t,e,i){t.exports=function(t){i.e(2).then(function(e){t(i(97))}.bind(null,i)).catch(i.oe)}},function(t,e,i){var r,n,a,s,o,l=function(t,e){return function(){return t.apply(e,arguments)}};a=i(0).addClass,o=i(0).removeClass,r=i(7),s=i(2),n=function(){function t(e){var r,n,o,u,d,c,h,f,p,g;this.player=e,this.snapshotClose=l(this.snapshotClose,this),this.snapshotShow=l(this.snapshotShow,this),this.showInactiveTimeOut=l(this.showInactiveTimeOut,this),this.showTime=l(this.showTime,this),this._resize=l(this._resize,this),this.timezone=new s.Timezone(this.player.settings.camera.timezone),this.player.interface.element=document.createElement("div"),this.player.interface.element.className="hdrelay-default-player",n=i(13),this.player.interface.element.insertBefore(n,this.player.interface.element.childNodes[0]),h=document.createElement("style"),h.innerHTML=i(26),this.player.interface.element.appendChild(h),this.player.interface.element.innerHTML=this.player.interface.element.innerHTML+i(28)(),this.player.interface.elements={},d=t.mappings;for(o in d)p=d[o],this.player.interface.elements[o]=this.player.interface.element.querySelector(p);c=t.images;for(u in c)f=c[u],null!=(r=this.player.interface.element.querySelector(u))&&(r.style.backgroundImage="url("+f+")");a(this.player.video.element,"hdrelay-default-video-element"),this.player.interface.elements.videoHolder.appendChild(this.player.video.element),g=this.player.settings.video.aspectRatio,this.player.interface.elements.videoHolder.style.paddingBottom=100/g+"%",this.player.interface.elements.reconnectBt=this.player.interface.element.querySelector(".hdrelay-default-reconnectbt"),this.player.interface.elements.endClicker=this.player.interface.element.querySelector(".hdrelay-default-end-clicker"),window.addEventListener("resize",this._resize)}return t.mappings={playBt:".hdrelay-default-playbt",pauseBt:".hdrelay-default-pausebt",snapshotBt:".hdrelay-default-snapshotbt",snapshotCloseBt:".hdrelay-default-snapshotclose",logoBt:".hdrelay-default-logo",infoTxt:".hdrelay-default-info",snapshot:".hdrelay-default-snapshot",snapshotImg:".hdrelay-default-snapshotimg",videoHolder:".hdrelay-default-video",fullscreenBt:".hdrelay-default-fullscreenbt",fullscreenExitBt:".hdrelay-default-fullscreenexitbt",loading:".hdrelay-default-loading",end:".hdrelay-default-end",ad:".hdrelay-default-ad",clicktoplay:".hdrelay-default-clicktoplay",clicktoplayImage:".hdrelay-default-clicktoplay > img",overlayer:".hdrelay-default-overlayer",warning:".hdrelay-default-warning",warningText:".hdrelay-default-warning span",warningCloseBt:".hdrelay-default-warning .hdrelay-default-warningclose",goLeft:".hdrelay-default-goleft",goRight:".hdrelay-default-goright",goUp:".hdrelay-default-goup",goDown:".hdrelay-default-godown",zoomIn:".hdrelay-default-zoomin",zoomOut:".hdrelay-default-zoomout",panScroll:".hdrelay-default-pan .hdrelay-default-track",tiltScroll:".hdrelay-default-tilt .hdrelay-default-track",zoomScroll:".hdrelay-default-zoom .hdrelay-default-track",clicker:".hdrelay-default-clicker",controlBt:".hdrelay-default-controlbt",panoBt:".hdrelay-default-panobt",controlUI:".hdrelay-default-control-ui",presetsBt:".hdrelay-default-presetsbt",presetsBox:".hdrelay-default-presetbox",voteBox:".hdrelay-default-votebox",archiveBt:".hdrelay-default-archivebt",downloadBt:".hdrelay-default-downloadbt",liveBt:".hdrelay-default-livebt",calendar:".hdrelay-default-calendar",reviewBt:".hdrelay-default-reviewbt",fastBt:".hdrelay-default-fastbt",sunriseBt:".hdrelay-default-sunrisebt",sunsetBt:".hdrelay-default-sunsetbt",presetPreview:"img.hdrelay-default-presetpreview",inactiveTimeout:"div.hdrelay-default-inactive-timeout",inactiveTimeoutMessage:"div.hdrelay-default-inactive-timeout-message",inactiveTimeoutTimer:"div.hdrelay-default-inactive-timeout-timer",bigLive:"div.hdrelay-default-biglive",bigCustom:"div.hdrelay-default-bigcustom",bigReview:"div.hdrelay-default-bigreview",bigButtons:"div.hdrelay-default-bigbt",customButtonsArea:"div.hdrelay-default-custom-buttons-area",customButtons:"div.hdrelay-default-custom-buttons",videoOver:"div.hdrelay-default-video-over"},t.images={".hdrelay-default-reconnectbt":i(58)},t.prototype._resize=function(){var t;if((t=this.player.interface.element.offsetWidth<400)!==this.smallCss)return t?(this.smallCss=!0,a(this.player.interface.element,"hdrelay-default-small")):(o(this.player.interface.element,"hdrelay-default-small"),this.smallCss=!1)},t.prototype.bind=function(){return this.controller=new r(this.player.interface),this._resize()},t.prototype.showTime=function(t){var e,i;if(null!=t)return"live"===t?i="Live":(e="MM/DD/YYYY HH:mm:ss ZZ",i=s.format(new Date(t),e,this.timezone)),this.player.interface.elements.infoTxt.innerHTML=i},t.prototype.showInactiveTimeOut=function(t){return null==t?this.player.interface.elements.inactiveTimeout.style.display="none":(this.player.interface.elements.inactiveTimeout.style.display="block",this.player.interface.elements.inactiveTimeoutTimer.innerHTML=Math.floor(t/1e3)+"s")},t.prototype.snapshotShow=function(t){return this.controller.snapshotShow(t)},t.prototype.snapshotClose=function(){return this.controller.snapshotClose()},t.prototype.destroy=function(){return this.controller.destroy(),window.removeEventListener("resize",this._resize)},t}(),t.exports=n},function(t,e,i){e=t.exports=i(14)(),e.push([t.i,"div.hdrelay-hdrelay-default{box-sizing:content-box!important}div.hdrelay-hdrelay-default ul{line-height:normal;font-size:inherit}div.hdrelay-default-player{box-sizing:border-box!important;position:relative;font-family:Arial,sans-serif;font-size:16px;outline:none;line-height:normal;min-width:300px;width:100%;border:1px solid #000}div.hdrelay-default-player svg{width:100%;height:100%;fill:#fff}div.hdrelay-default-player div,div.hdrelay-default-player img{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}div.hdrelay-default-player div.hdrelay-default-warning{background-color:#e8e799;padding:3px 8px 4px;display:none}div.hdrelay-default-player div.hdrelay-default-warning .hdrelay-default-warningclose{position:absolute;right:1px;top:5px;color:#000;line-height:18px}div.hdrelay-default-player div.hdrelay-default-video{position:relative;width:100%;height:0;padding-bottom:56.25%;overflow:hidden}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-bigbt{position:absolute;top:0;right:0;margin:10px;z-index:300;display:none}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-bigbt div{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-style:normal;font-decoration:none;text-transform:none;vertical-align:middle;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;color:#fff;line-height:28px;height:28px;background-color:rgba(25,25,25,.8);cursor:pointer;clear:left;padding:2px 0 0;margin:5px 3px;width:146px;border-radius:14px;font-weight:700;font-size:16px;text-align:center;display:none}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-bigbt div:hover{background-color:#000}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-votebox{display:-ms-flexbox;display:flex;border:1px solid #000;-ms-flex-direction:column;flex-direction:column;visibility:hidden;width:auto;height:auto;position:absolute;z-index:22;top:10px;right:10px;max-height:90%;color:#fff;background-color:#000;font-weight:700}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-votebox div.hdrelay-default-vote-title{-ms-flex:0 0 auto;flex:0 0 auto;cursor:default;padding:5px 4px 4px 8px}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-votebox div.hdrelay-default-vote-title span.hdrelay-icon{float:right}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-votebox div.hdrelay-default-vote-title svg{fill:#fff;width:19px;height:19px}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-votebox div.hdrelay-default-vote-info{-ms-flex:0 0 auto;flex:0 0 auto;padding:3px 8px;font-weight:400;font-size:14px;text-align:right;cursor:default}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-votebox div.hdrelay-default-vote-items{-ms-flex:1 1 auto;flex:1 1 auto;overflow:auto;background-color:#fff;color:#000;font-weight:400}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-votebox div.hdrelay-default-vote-item{height:22px;padding:5px 4px 5px 8px;cursor:pointer;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-votebox div.hdrelay-default-vote-item:hover{background-color:#ddd}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-votebox div.hdrelay-default-vote-item.hdrelay-default-selected{background-color:#bbb}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-votebox div.hdrelay-default-vote-item div.hdrelay-default-vote-name{-ms-flex:0 0 auto;flex:0 0 auto;font-size:14px;padding:2px 0}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-votebox div.hdrelay-default-vote-item div.hdrelay-default-votes{-ms-flex:1 0 auto;flex:1 0 auto;min-width:60px;font-weight:400}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-votebox div.hdrelay-default-vote-item div.hdrelay-default-votes span{background-color:gray;color:#fff;border-radius:8px;padding:2px 6px;font-size:12px;margin:0 7px;top:-1px}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-control-ui{visibility:hidden}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-control-ui div.hdrelay-default-clicker{width:100%;height:100%;position:absolute;z-index:3}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-control-ui div.hdrelay-default-presetbox{display:-ms-flexbox;display:flex;border:1px solid #000;visibility:hidden;-ms-flex-direction:column;flex-direction:column;width:auto;height:auto;position:absolute;z-index:22;top:35px;right:35px;max-height:80%;color:#fff;background-color:#000;font-weight:700}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-control-ui div.hdrelay-default-presetbox div.hdrelay-default-presetbox-title{-ms-flex:0 0 auto;flex:0 0 auto;padding:5px 8px 0;cursor:default}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-control-ui div.hdrelay-default-presetbox div.hdrelay-default-presetbox-title span.hdrelay-icon{float:right}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-control-ui div.hdrelay-default-presetbox div.hdrelay-default-presetbox-title svg{fill:#fff;width:19px;height:19px}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-control-ui div.hdrelay-default-presetbox div.hdrelay-default-presetbox-items{-ms-flex:1 1 auto;flex:1 1 auto;overflow:auto}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-control-ui div.hdrelay-default-presetbox div.hdrelay-default-presetbox-items div{padding:4px 8px;cursor:pointer;font-weight:400;background-color:#fff;color:#000;font-size:14px}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-control-ui div.hdrelay-default-presetbox div.hdrelay-default-presetbox-items div:hover{background-color:#ddd}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-control-ui div.hdrelay-default-presetbox div.hdrelay-default-presetbox-items div.selected{background-color:#bbb}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-control-ui div.hdrelay-default-pan{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;position:absolute;left:25px;right:25px;top:5px;width:auto;z-index:10}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-control-ui div.hdrelay-default-pan div.hdrelay-default-goleft{-ms-flex:0 0 auto;flex:0 0 auto;color:#fff}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-control-ui div.hdrelay-default-pan div.hdrelay-default-goleft svg{width:19px;height:19px}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-control-ui div.hdrelay-default-pan div.hdrelay-default-track{background-image:url("+i(84)+");background-position:50%;background-repeat:repeat-x;-ms-flex:1 1 auto;flex:1 1 auto;height:19px}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-control-ui div.hdrelay-default-pan div.hdrelay-default-track div.hdrelay-default-indicator{color:#fff}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-control-ui div.hdrelay-default-pan div.hdrelay-default-track div.hdrelay-default-indicator svg{width:19px;height:19px}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-control-ui div.hdrelay-default-pan div.hdrelay-default-goright{-ms-flex:0 0 auto;flex:0 0 auto;color:#fff}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-control-ui div.hdrelay-default-pan div.hdrelay-default-goright svg{width:19px;height:19px}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-control-ui div.hdrelay-default-tilt{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;position:absolute;left:5px;top:25px;bottom:5px;height:auto;z-index:10}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-control-ui div.hdrelay-default-tilt div.hdrelay-default-goup{-ms-flex:0 0 auto;flex:0 0 auto;color:#fff}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-control-ui div.hdrelay-default-tilt div.hdrelay-default-goup svg{width:19px;height:19px}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-control-ui div.hdrelay-default-tilt div.hdrelay-default-track{background-image:url("+i(27)+");background-repeat:repeat-y;background-position:50%;-ms-flex:1 1 auto;flex:1 1 auto;width:19px}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-control-ui div.hdrelay-default-tilt div.hdrelay-default-track div.hdrelay-default-indicator svg{width:19px;height:19px}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-control-ui div.hdrelay-default-tilt div.hdrelay-default-godown{-ms-flex:0 0 auto;flex:0 0 auto;color:#fff}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-control-ui div.hdrelay-default-tilt div.hdrelay-default-godown svg{width:19px;height:19px}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-control-ui div.hdrelay-default-zoom{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;position:absolute;right:5px;top:25px;bottom:5px;height:auto;z-index:10}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-control-ui div.hdrelay-default-zoom div.hdrelay-default-zoomin{-ms-flex:0 0 auto;flex:0 0 auto;color:#fff}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-control-ui div.hdrelay-default-zoom div.hdrelay-default-zoomin svg{width:19px;height:19px}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-control-ui div.hdrelay-default-zoom div.hdrelay-default-track{background-image:url("+i(27)+');background-repeat:repeat-y;background-position:50%;width:19px;-ms-flex:1 1 auto;flex:1 1 auto}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-control-ui div.hdrelay-default-zoom div.hdrelay-default-track div.hdrelay-default-indicator{color:#fff;left:1px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-control-ui div.hdrelay-default-zoom div.hdrelay-default-track div.hdrelay-default-indicator svg{width:19px;height:19px}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-control-ui div.hdrelay-default-zoom div.hdrelay-default-zoomout{-ms-flex:0 0 auto;flex:0 0 auto;color:#fff}div.hdrelay-default-player div.hdrelay-default-video div.hdrelay-default-control-ui div.hdrelay-default-zoom div.hdrelay-default-zoomout svg{width:19px;height:19px}div.hdrelay-default-player div.hdrelay-default-video .hdrelay-default-snapshot{display:none}div.hdrelay-default-player div.hdrelay-default-video .hdrelay-default-snapshot,div.hdrelay-default-player div.hdrelay-default-video .hdrelay-default-video-element{position:absolute;width:100%;height:100%;top:0;left:0;bottom:0;right:0;object-fit:fill;background-color:#000;z-index:1}div.hdrelay-default-player div.hdrelay-default-video .hdrelay-default-overlayer img{position:absolute}div.hdrelay-default-player div.hdrelay-default-video .hdrelay-default-snapshot{z-index:39}div.hdrelay-default-player div.hdrelay-default-video .hdrelay-default-snapshot .hdrelay-default-snapshotimg{width:100%;height:100%}div.hdrelay-default-player div.hdrelay-default-video .hdrelay-default-snapshot .hdrelay-default-snapshotclose{position:absolute;right:10px;top:10px;color:#fff;height:22px;width:22px;border-radius:11px;background-color:#000;cursor:pointer}div.hdrelay-default-player div.hdrelay-default-video .hdrelay-default-ad{position:absolute;z-index:40;display:block;width:100%;height:100%;visibility:hidden}div.hdrelay-default-player div.hdrelay-default-video .hdrelay-default-clicktoplay{position:absolute;z-index:5;display:block;width:100%;height:100%;background-color:#000;visibility:hidden;cursor:pointer}div.hdrelay-default-player div.hdrelay-default-video .hdrelay-default-clicktoplay .hdrelay-default-playic{position:absolute;top:50%;left:50%;width:70px;height:70px;margin-left:-35px;margin-top:-35px}div.hdrelay-default-player div.hdrelay-default-video .hdrelay-default-clicktoplay .hdrelay-default-playic svg{fill:#fff;width:100%;height:100%}div.hdrelay-default-player div.hdrelay-default-video .hdrelay-default-clicktoplay img{display:block;width:100%;height:100%;top:0;left:0}div.hdrelay-default-player div.hdrelay-default-video img.hdrelay-default-presetpreview{position:absolute;z-index:21;top:0;left:0;width:100%;height:100%;visibility:hidden;display:block}div.hdrelay-default-player div.hdrelay-default-video .hdrelay-default-custom-buttons-area>div>div{z-index:19}div.hdrelay-default-player div.hdrelay-default-video .hdrelay-default-custom-buttons-area>div.custom-under2>div{z-index:18}div.hdrelay-default-player div.hdrelay-default-video .hdrelay-default-custom-buttons-area>div.custom-under3>div{z-index:17}div.hdrelay-default-player div.hdrelay-default-video .hdrelay-default-custom-buttons-area>div.custom-under4>div{z-index:16}div.hdrelay-default-player div.hdrelay-default-video .hdrelay-default-custom-buttons-area>div.custom-over1>div{z-index:23}div.hdrelay-default-player div.hdrelay-default-video .hdrelay-default-custom-buttons-area>div.custom-over2>div{z-index:24}div.hdrelay-default-player div.hdrelay-default-video .hdrelay-default-custom-buttons-area>div.custom-over3>div{z-index:25}div.hdrelay-default-player div.hdrelay-default-video .hdrelay-default-custom-buttons-area>div.custom-over4>div{z-index:26}div.hdrelay-default-player div.hdrelay-default-video .hdrelay-default-custom-buttons-area>div.custom-full>div{z-index:60}div.hdrelay-default-player div.hdrelay-default-video .hdrelay-default-overlayer{visibility:hidden}div.hdrelay-default-player div.hdrelay-default-video .hdrelay-default-overlayer>img{z-index:4;width:auto}div.hdrelay-default-player div.hdrelay-default-video .hdrelay-default-overlayer div{z-index:4}div.hdrelay-default-player div.hdrelay-default-video .hdrelay-default-overlayer div.hdrelay-default-onclicktoplay{z-index:6}div.hdrelay-default-player div.hdrelay-default-video .hdrelay-default-end{position:absolute;z-index:50;display:none;width:100%;height:100%;background-size:contain}div.hdrelay-default-player div.hdrelay-default-video .hdrelay-default-end .hdrelay-default-reconnectbt{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;position:absolute;top:50%;left:50%;width:250px;height:62px;margin-left:-125px;margin-top:-31px;background-size:contain;z-index:2}div.hdrelay-default-player div.hdrelay-default-video .hdrelay-default-end .hdrelay-default-end-clicker{position:absolute;width:100%;height:100%;top:0;left:0}div.hdrelay-default-player div.hdrelay-default-video .hdrelay-default-loading{z-index:2;margin:-3.6em;top:50%;left:50%;font-size:10px;position:absolute;text-indent:-9999em;border-top:1.1em solid hsla(0,0%,100%,.2);border-right:1.1em solid hsla(0,0%,100%,.2);border-bottom:1.1em solid hsla(0,0%,100%,.2);border-left:1.1em solid #fff;transform:translateZ(0);animation:rotate 1.1s infinite linear;border-radius:50%;width:5em;height:5em}@keyframes rotate{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}div.hdrelay-default-player div.hdrelay-default-video .hdrelay-default-inactive-timeout{z-index:19;margin:8px;padding:4px;right:0;top:0;position:absolute;width:240px;height:auto;background-color:#fff;display:none;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}div.hdrelay-default-player div.hdrelay-default-video .hdrelay-default-inactive-timeout .hdrelay-default-inactive-timeout-timer{font-weight:700;font-size:30px;float:right;margin:10px}div.hdrelay-default-player div.hdrelay-default-video .hdrelay-default-inactive-timeout .hdrelay-default-inactive-timeout-message p{font-size:16px;margin:6px;padding:0}div.hdrelay-default-player div.hdrelay-default-calendar{left:0;right:0;position:absolute;bottom:26px}div.hdrelay-default-player div.hdrelay-default-calendar div.hdrelay-default-date-picker,div.hdrelay-default-player div.hdrelay-default-calendar div.hdrelay-default-email-dialog,div.hdrelay-default-player div.hdrelay-default-calendar div.hdrelay-default-speed-picker,div.hdrelay-default-player div.hdrelay-default-calendar div.hdrelay-default-time-picker{position:absolute;background-color:#fff;bottom:5px;right:5px;z-index:61}div.hdrelay-default-player div.hdrelay-default-bar{box-sizing:content-box!important;color:#fff;background-color:#000;height:20px;padding:3px;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row}div.hdrelay-default-player div.hdrelay-default-bar div.hdrelay-default-info{-ms-flex:1 1 auto;flex:1 1 auto;cursor:default;overflow:hidden;padding-top:3px;text-align:left}div.hdrelay-default-player div.hdrelay-default-bar div.hdrelay-default-buttons{-ms-flex:0 0 auto;flex:0 0 auto;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row}div.hdrelay-default-player div.hdrelay-default-bar div.hdrelay-default-buttons div.hdrelay-default-button{-ms-flex:0 0 auto;flex:0 0 auto}div.hdrelay-default-player div.hdrelay-default-bar div.hdrelay-default-buttons div.hdrelay-default-button img,div.hdrelay-default-player div.hdrelay-default-bar div.hdrelay-default-buttons div.hdrelay-default-button svg{width:21px;height:21px;fill:#fff}div.hdrelay-default-player div.hdrelay-default-bar div.hdrelay-default-buttons div.hdrelay-default-sunrisebt svg,div.hdrelay-default-player div.hdrelay-default-bar div.hdrelay-default-buttons div.hdrelay-default-sunsetbt svg{width:30px}div.hdrelay-default-player div.hdrelay-default-bar div.hdrelay-default-buttons div.hdrelay-default-controlbt,div.hdrelay-default-player div.hdrelay-default-bar div.hdrelay-default-buttons div.hdrelay-default-panobt{-ms-flex:0 0 auto;flex:0 0 auto;background-color:#fff;color:#000;text-transform:uppercase;font-size:14px;font-weight:700;border-radius:8px;height:16px;width:90px;text-align:center;margin:3px 6px;cursor:pointer;display:none;line-height:1.4}div.hdrelay-default-player div.hdrelay-default-bar div.hdrelay-default-buttons div.hdrelay-default-panobt{width:60px}div.hdrelay-default-player div.hdrelay-default-bar div.hdrelay-default-buttons div.hdrelay-default-livebt{width:80px}div.hdrelay-default-player div.hdrelay-default-bar div.hdrelay-default-buttons div.hdrelay-default-livebt,div.hdrelay-default-player div.hdrelay-default-bar div.hdrelay-default-buttons div.hdrelay-default-presetsbt{-ms-flex:0 0 auto;flex:0 0 auto;background-color:#fff;color:#000;text-transform:uppercase;font-size:14px;font-weight:700;border-radius:8px;height:16px;text-align:center;margin:3px 6px;cursor:pointer;display:none;line-height:1.4}div.hdrelay-default-player div.hdrelay-default-bar div.hdrelay-default-buttons div.hdrelay-default-presetsbt{width:90px}div.hdrelay-default-player div.hdrelay-default-bar div.hdrelay-default-buttons .hdrelay-icon{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:block;float:left;margin:0 2px;cursor:pointer}div.hdrelay-default-player div.hdrelay-default-bar div.hdrelay-default-buttons .hdrelay-icon.hdrelay-default-logo svg{width:33px}.tooltip,[data-tooltip]{position:relative;cursor:pointer}.tooltip:after,.tooltip:before,[data-tooltip]:after,[data-tooltip]:before{position:absolute;visibility:hidden;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";filter:progid:DXImageTransform.Microsoft.Alpha(Opacity=0);opacity:0;transition:opacity .2s ease-in-out,visibility .2s ease-in-out,transform .2s cubic-bezier(.71,1.7,.77,1.24);transform:translateZ(0);pointer-events:none}.tooltip:focus:after,.tooltip:focus:before,.tooltip:hover:after,.tooltip:hover:before,[data-tooltip]:focus:after,[data-tooltip]:focus:before,[data-tooltip]:hover:after,[data-tooltip]:hover:before{visibility:visible;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";filter:progid:DXImageTransform.Microsoft.Alpha(Opacity=100);opacity:1}.tooltip:before,[data-tooltip]:before{z-index:1001;border:6px solid transparent;background:transparent;content:"";margin-right:-5px}.tooltip:after,[data-tooltip]:after{z-index:1000;padding:8px 16px;background-color:#000;color:#fff;content:attr(data-tooltip);font-size:14px;line-height:1.2;text-align:center;margin-right:-16px;white-space:nowrap}.tooltip-top:after,.tooltip-top:before,.tooltip:after,.tooltip:before,[data-tooltip]:after,[data-tooltip]:before{bottom:100%;right:50%}.tooltip-top:before,.tooltip:before,[data-tooltip]:before{margin-left:-6px;margin-bottom:-12px;border-top-color:#000}.tooltip-top:focus:after,.tooltip-top:focus:before,.tooltip-top:hover:after,.tooltip-top:hover:before,.tooltip:focus:after,.tooltip:focus:before,.tooltip:hover:after,.tooltip:hover:before,[data-tooltip]:focus:after,[data-tooltip]:focus:before,[data-tooltip]:hover:after,[data-tooltip]:hover:before{transform:translateY(-12px)}',""])},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAACCAYAAACddGYaAAAAEElEQVQI12P8////TAZsAABVEgOYG5fOwQAAAABJRU5ErkJggg=="},function(t,e,i){function r(t){var e="";return e+='<div class="hdrelay-default-warning"><span></span><div class="hdrelay-default-warningclose hdrelay-icon hdrelay-default-closeic"><svg><use xlink:href="#closeic"></use></svg></div></div><div class="hdrelay-default-video"><div class="hdrelay-default-video-over"><div class="hdrelay-default-bigbt"><div class="hdrelay-default-biglive">GO LIVE</div><div class="hdrelay-default-bigreview">LAST HOURS</div><div class="hdrelay-default-bigcustom">LAST SNOW</div></div><div class="hdrelay-default-votebox"></div><div class="hdrelay-default-control-ui"><div class="hdrelay-default-clicker"></div><div class="hdrelay-default-presetbox"></div><div class="hdrelay-default-pan"><div class="hdrelay-default-button hdrelay-icon hdrelay-default-goleft"><svg><use xlink:href="#goleft"></use></svg></div><div class="hdrelay-default-track"><div class="hdrelay-default-button hdrelay-icon hdrelay-default-indicator"><svg><use xlink:href="#indicator"></use></svg></div></div><div class="hdrelay-default-button hdrelay-icon hdrelay-default-goright"><svg><use xlink:href="#goright"></use></svg></div></div><div class="hdrelay-default-tilt"><div class="hdrelay-default-button hdrelay-icon hdrelay-default-goup"><svg><use xlink:href="#goup"></use></svg></div><div class="hdrelay-default-track"><div class="hdrelay-default-button hdrelay-icon hdrelay-default-indicator"><svg><use xlink:href="#indicator"></use></svg></div></div><div class="hdrelay-default-button hdrelay-icon hdrelay-default-godown"><svg><use xlink:href="#godown"></use></svg></div></div><div class="hdrelay-default-zoom"><div class="hdrelay-default-button hdrelay-icon hdrelay-default-zoomin"><svg><use xlink:href="#zoomin"></use></svg></div><div class="hdrelay-default-track"><div class="hdrelay-default-button hdrelay-icon hdrelay-default-indicator"><svg><use xlink:href="#indicator"></use></svg></div></div><div class="hdrelay-default-button hdrelay-icon hdrelay-default-zoomout"><svg><use xlink:href="#zoomout"></use></svg></div></div></div><div class="hdrelay-default-loading"></div><div class="hdrelay-default-inactive-timeout"><div class="hdrelay-default-inactive-timeout-timer"></div><div class="hdrelay-default-inactive-timeout-message"><p>Ending transmission.</p><p>Click here to continue.</p></div></div><div class="hdrelay-default-snapshot"><img class="hdrelay-default-snapshotimg"><div class="hdrelay-default-snapshotclose hdrelay-icon hdrelay-default-closeic"><svg><use xlink:href="#closeic"></use></svg></div></div><div class="hdrelay-default-overlayer"></div><div class="hdrelay-default-custom-buttons-area"></div><div class="hdrelay-default-ad"></div><div class="hdrelay-default-clicktoplay"><img draggable="false"><div class="hdrelay-icon hdrelay-default-playic"><svg><use xlink:href="#playic"></use></svg></div></div><img class="hdrelay-default-presetpreview"></div><div class="hdrelay-default-end"><div class="hdrelay-default-reconnectbt"><svg><use xlink:href="#reconnectbt"></use></svg></div><div class="hdrelay-default-end-clicker"></div></div></div><div class="hdrelay-default-calendar"></div><div class="hdrelay-default-bar"><div class="hdrelay-default-info">Live</div><div class="hdrelay-default-buttons"><div class="hdrelay-default-custom-buttons"></div><div class="hdrelay-default-presetsbt">Positions</div><div class="hdrelay-default-panobt">Pano</div><div class="hdrelay-default-controlbt">Control</div><div class="hdrelay-default-livebt">Go Live</div><div class="hdrelay-default-button hdrelay-icon hdrelay-default-snapshotbt" data-tooltip="Snapshot"><svg><use xlink:href="#snapshotbt"></use></svg></div><div class="hdrelay-default-button hdrelay-icon hdrelay-default-reviewbt" data-tooltip="Review last hours"><svg><use xlink:href="#reviewbt"></use></svg></div><div class="hdrelay-default-button hdrelay-icon hdrelay-default-sunrisebt" data-tooltip="Go to last sunrise"><svg><use xlink:href="#sunrisebt"></use></svg></div><div class="hdrelay-default-button hdrelay-icon hdrelay-default-sunsetbt" data-tooltip="Go to last sunset"><svg><use xlink:href="#sunsetbt"></use></svg></div><div class="hdrelay-default-button hdrelay-icon hdrelay-default-playbt" data-tooltip="Play"><svg><use xlink:href="#playbt"></use></svg></div><div class="hdrelay-default-button hdrelay-icon hdrelay-default-pausebt" data-tooltip="Pause"><svg><use xlink:href="#pausebt"></use></svg></div><div class="hdrelay-default-button hdrelay-icon hdrelay-default-fastbt" data-tooltip="Play faster"><svg><use xlink:href="#fastbt"></use></svg></div><div class="hdrelay-default-button hdrelay-icon hdrelay-default-archivebt" data-tooltip="Go to archive"><svg><use xlink:href="#archivebt"></use></svg></div><div class="hdrelay-default-button hdrelay-icon hdrelay-default-downloadbt" data-tooltip="Download"><svg><use xlink:href="#downloadbt"></use></svg></div><div class="hdrelay-default-button hdrelay-icon hdrelay-default-fullscreenbt" data-tooltip="Fullscreen"><svg><use xlink:href="#fullscreenbt"></use></svg></div><div class="hdrelay-default-button hdrelay-icon hdrelay-default-fullscreenexitbt" data-tooltip="Exit Fullscreen"><svg><use xlink:href="#fullscreenexitbt"></use></svg></div><div class="hdrelay-default-button hdrelay-icon hdrelay-default-logo" data-tooltip="HDRelay stream services"><svg><use xlink:href="#logo"></use></svg></div></div></div>'}i(29),t.exports=r},function(t,e,i){"use strict";function r(t,e){if(1===arguments.length){for(var i=t[0],n=1;n<t.length;n++)i=r(i,t[n]);return i}for(var a in e)if("class"===a){var s=t[a]||[];t[a]=(Array.isArray(s)?s:[s]).concat(e[a]||[])}else if("style"===a){var s=o(t[a]);s=s&&";"!==s[s.length-1]?s+";":s;var l=o(e[a]);l=l&&";"!==l[l.length-1]?l+";":l,t[a]=s+l}else t[a]=e[a];return t}function n(t,e){for(var i,r="",n="",a=Array.isArray(e),o=0;o<t.length;o++)(i=s(t[o]))&&(a&&e[o]&&(i=d(i)),r=r+n+i,n=" ");return r}function a(t){var e="",i="";for(var r in t)r&&t[r]&&h.call(t,r)&&(e=e+i+r,i=" ");return e}function s(t,e){return Array.isArray(t)?n(t,e):t&&"object"==typeof t?a(t):t||""}function o(t){if(!t)return"";if("object"==typeof t){var e="";for(var i in t)h.call(t,i)&&(e=e+i+":"+t[i]+";");return e}return t+""}function l(t,e,i,r){if(!1===e||null==e||!e&&("class"===t||"style"===t))return"";if(!0===e)return" "+(r?t:t+'="'+t+'"');var n=typeof e;return"object"!==n&&"function"!==n||"function"!=typeof e.toJSON||(e=e.toJSON()),"string"==typeof e||(e=JSON.stringify(e),i||-1===e.indexOf('"'))?(i&&(e=d(e))," "+t+'="'+e+'"'):" "+t+"='"+e.replace(/'/g,"&#39;")+"'"}function u(t,e){var i="";for(var r in t)if(h.call(t,r)){var n=t[r];if("class"===r){n=s(n),i=l(r,n,!1,e)+i;continue}"style"===r&&(n=o(n)),i+=l(r,n,!1,e)}return i}function d(t){var e=""+t,i=f.exec(e);if(!i)return t;var r,n,a,s="";for(r=i.index,n=0;r<e.length;r++){switch(e.charCodeAt(r)){case 34:a="&quot;";break;case 38:a="&amp;";break;case 60:a="&lt;";break;case 62:a="&gt;";break;default:continue}n!==r&&(s+=e.substring(n,r)),n=r+1,s+=a}return n!==r?s+e.substring(n,r):s}function c(t,e,r,n){if(!(t instanceof Error))throw t;if(!("undefined"==typeof window&&e||n))throw t.message+=" on line "+r,t;try{n=n||i(48).readFileSync(e,"utf8")}catch(e){c(t,null,r)}var a=3,s=n.split("\n"),o=Math.max(r-a,0),l=Math.min(s.length,r+a),a=s.slice(o,l).map(function(t,e){var i=e+o+1;return(i==r?"  > ":"    ")+i+"| "+t}).join("\n");throw t.path=e,t.message=(e||"Pug")+":"+r+"\n"+a+"\n\n"+t.message,t}var h=Object.prototype.hasOwnProperty;e.merge=r,e.classes=s,e.style=o,e.attr=l,e.attrs=u;var f=/["&<>]/;e.escape=d,e.rethrow=c},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,i){var r,n,a,s,o,l,u,d,c,h;i(32),o=i(1),i(0),c=i(33),n=i(45),a=i(51),u=i(85),s=i(86),d=i(87),r=i(88),h=i(2),l=function(){function t(t){var e,i,n,l,f;this.settings=t,console.log(this.settings),o.mixin(this),this.settings.player=this,this.video=c.create(this.settings),"control"!==(null!=(e=this.settings.video)&&null!=(i=e.control)?i.type:void 0)&&"vote"!==(null!=(n=this.settings.video)&&null!=(l=n.control)?l.type:void 0)||(this.control=new r(this.settings)),this.interface=new a(this),this.state=new u(this),this.manager=new s(this),this.timeout=new d(this),this._setInterface("default"),this.timezone=new h.Timezone(this.settings.camera.timezone),this.settings.video.warning&&this.interface.warningShow(this.settings.video.warning),(null!=(f=this.settings.video)?f.autoplay:void 0)&&this.play()}return t.prototype._setInterface=function(t){return this.interface.set(t),null!=this.controller&&this.controller.destroy(),this.controller=new n(this)},t.prototype.play=function(t,e){var i,r,n,a,s,o,l,u,d,c,f,p;return null!=(null!=(i=this.interface)?i.customButtons:void 0)&&this.interface.customButtons.hideFull(),null!=(null!=(r=this.video.state)?r.enable:void 0)&&this.video.state.enable(),this.state.firstPlay&&("archive"===(null!=(s=this.settings.video)&&null!=(o=s.onFirstPlay)?o.type:void 0)&&null==t&&(t=null!=(l=this.settings.video)&&null!=(u=l.onFirstPlay)?u.time:void 0,t<0&&(t=Date.now()+t),e=null!=(d=this.settings.video)&&null!=(c=d.onFirstPlay)?c.speed:void 0),e||null==(null!=(f=this.settings.video)?f.speed:void 0)||(e=null!=(p=this.settings.video)?p.speed:void 0)),this.state.firstPlay=!1,this.state.isPaused()&&null==t?this.video.play():(null==t&&null!=(null!=(n=this.settings.video)?n.time:void 0)&&(t=null!=(a=this.settings.video)?a.time:void 0),Array.isArray(t)?(t.sort(),void this.manager.getInfo(function(i){return function(r,n){var a,s,o,l,u,d;if(null!=(l=null!=(u=n.find(function(t){return t.speed===e}))?u.last:void 0))return a=h.format(new Date(l),"HHmmss",i.interface.player.timezone),a=parseInt(a.slice(0,2))+parseInt(a.slice(2,4))/60+parseInt(a.slice(4,6))/3600,o=t.find(function(t){return t<a}),null!=o?s=o-a:(o=t[t.length-1],s=o-a-24),d=l-l%1e3+36e5*s,i.play(d,e)}}(this))):(this.state.lastPlay={time:t,speed:e},"live"===t&&(t=null),null==e&&(e=1),t<0&&(t=Date.now()+36e5*t),this.manager.play(t,e),this.interface.overlayer._resize(),this.trigger("started",this.state)))},t.prototype.format=function(t,e){return h.format(new Date(t),e,this.timezone)},t.prototype.pause=function(){return this.video.pause()},t.prototype.snapshot=function(){return this.video.snapshot()},t.prototype.reconnect=function(){return this.interface.trigger("reconnect-click")},t}(),window.HDRelay2021=l,i(94)("HDRelay2021","js/player-2021/index.js",l,window)},function(t,e){null==Array.prototype.find&&(Array.prototype.find=function(t,e){var i,r,n,a;if(i=Object(this),"function"!=typeof t)throw new TypeError;for(r=n=0,a=i.length;0<=a?n<a:n>a;r=0<=a?++n:--n)if(i[r]&&t.call(e,i[r],r,i))return i[r]}),null==Array.prototype.findIndex&&(Array.prototype.findIndex=function(t,e){var i,r,n,a;if(i=Object(this),"function"!=typeof t)throw new TypeError;for(r=n=0,a=i.length;0<=a?n<a:n>a;r=0<=a?++n:--n)if(i[r]&&t.call(e,i[r],r,i))return r;return-1}),null==Math.log2&&(Math.log2=function(t){return Math.log(t)/Math.LN2}),null==Function.prototype.bind&&(Function.prototype.bind=function(t){var e,i,r,n;if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");return e=Array.prototype.slice.call(arguments,1),n=this,r=function(){},i=function(){var i,a;return a=this instanceof r?this:t,i=e.concat(Array.prototype.slice.call(arguments)),n.apply(a,i)},this.prototype&&(r.prototype=this.prototype),i.prototype=new r,i})},function(t,e,i){var r;r=i(0),t.exports={create:function(t){var e,n,a;return this.settings=t,a="default",n=r.isIOS(),n&&(a="ios"),"jpg"===this.settings.video.format&&(a="jpg"),e=i(34)("./"+a+"/index"),console.log("video_type",a),new e(this.settings)}}},function(t,e,i){function r(t){return i(n(t))}function n(t){var e=a[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var a={"./default/index":35,"./ios/archive/index":18,"./ios/index":41,"./jpg/index":43};r.keys=function(){return Object.keys(a)},r.resolve=n,t.exports=r,r.id=34},function(t,e,i){var r,n,a,s,o;n=i(1),o=i(36),r=i(38),a=i(39),s=i(40),function(){function e(t){this.settings=t,n.mixin(this),console.log("video settings",this.settings),this.element=this.settings.video.startedVideo||document.createElement("video"),this.state=new o(this)}e.prototype.supportArchive=function(){return!0},e.prototype.hasSpeeds=function(){return!0},e.prototype.play=function(t){return null!=this.presetPlaylistManager&&(this.presetPlaylistManager.destroy(),this.presetPlaylistManager=null),this.state.setReviewMode(!1),this._play(t)},e.prototype._play=function(t){return null!=t&&(this._lastUrl=t),this._stopped=!1,null!=t?(null!=this.hls&&(this.hls.stopLoad(),this.hls.detachMedia(this.element)),0===t.indexOf("https://archive/")?(this.token=Math.floor(1e7*Math.random()),t=t+"/"+this.token,this.hls=new r({pLoader:a}),this.hls.loadSource(t),this.hls.attachMedia(this.element),this.state.mode="record",this.element.play()):(this.hls=new r,this.hls.loadSource(t),this.hls.attachMedia(this.element),this.state.mode="live",this.element.play())):this.state.isEnded()?null!=this._lastUrl?this.play(this._lastUrl):void 0:this.element.play()},e.prototype.snapshot=function(){var t,e;return t=document.createElement("canvas"),t.width=640,t.height=480,e=t.getContext("2d"),e.drawImage(this.element,0,0,t.width,t.height),t.toDataURL("image/jpeg")},e.prototype.stop=function(){if(null!=this.hls)return this.hls.stopLoad(),this.hls.detachMedia(this.element),this.state._onEnded(!0)},e.prototype.pause=function(){return this.element.pause()},e.prototype.playLive=function(){return this.play(this.settings.server.hls+"/camera/"+this.settings.camera.id+"/relay/playlist.m3u8")},e.prototype.playArchive=function(t,e){return this.play("https://archive/"+this.settings.camera.id+"/"+e+"/"+t)},e.prototype._playArchive=function(t,e){return this._play("https://archive/"+this.settings.camera.id+"/"+e+"/"+t)},e.prototype.playPreset=function(t){return null!=this.presetPlaylistManager&&this.presetPlaylistManager.destroy(),this.presetPlaylistManager=new s({video:this,camera:this.settings.camera.id,control:this.settings.player.control}),this.presetPlaylistManager.play(t),this.state.setReviewMode(!0)},t.exports=e}()},function(t,e,i){var r,n,a=function(t,e){return function(){return t.apply(e,arguments)}};r=i(15),n=function(){function t(t){this.video=t,this._onLoadedMetadata=a(this._onLoadedMetadata,this),this._onError=a(this._onError,this),this._onEnded=a(this._onEnded,this),this._onPause=a(this._onPause,this),this._onWaiting=a(this._onWaiting,this),this._onLoadStart=a(this._onLoadStart,this),this._onPlaying=a(this._onPlaying,this),console.log(this.video.element),this.enabled=!0,this.loadstart=!1,this.reviewMode=!1,this.video.element.addEventListener("playing",this._onPlaying),this.video.element.addEventListener("loadstart",this._onLoadStart),this.video.element.addEventListener("waiting",this._onWaiting),this.video.element.addEventListener("pause",this._onPause),this.video.element.addEventListener("ended",this._onEnded),this.video.element.addEventListener("error",this._onError),this.video.element.addEventListener("loadedmetadata",this._onLoadedMetadata)}return t.prototype.setReviewMode=function(t){if(t!==this.reviewMode)return this.reviewMode=t,this.video.trigger("change",this.state)},t.prototype._onPlaying=function(t){var e;if(this.enabled)return this.state="playing",this.video.trigger(this.state,t),this.video.trigger("change",this.state),"record"===this.mode?(e=r.getInstance(),null!=this.timeTimer&&clearTimeout(this.timeTimer),this.timeTimer=setInterval(function(t){return function(){var i,r;if(i=e.getSession(t.video.token),t.video.element.played.length>0&&null!=(r=e.getTimestamp(i,1e3*t.video.element.played.end(t.video.element.played.length-1))))return t.time=Math.floor(r),t.video.trigger("time",r)}}(this),100)):(this.time="live",this.video.trigger("time","live"),null!=this.timeTimer?clearTimeout(this.timeTimer):void 0)},t.prototype._onLoadStart=function(t){if(this.enabled)return this.loadstart=!0,this.metada=null},t.prototype._onWaiting=function(t){if(this.enabled)return null!=this.timeTimer&&clearTimeout(this.timeTimer),this.loadstart?(this.state="loading",this.loadstart=!1):this.state="buffering",this.video.trigger(this.state,t),this.video.trigger("change",this.state)},t.prototype._onPause=function(t){if(this.enabled&&"ended"!==this.state)return null!=this.timeTimer&&clearTimeout(this.timeTimer),this.state="pause",this.video.trigger(this.state,t),this.video.trigger("change",this.state)},t.prototype._onEnded=function(t){var e;if(this.enabled&&"ended"!==this.state)return e=function(t){return function(){return null!=t.timeTimer&&clearTimeout(t.timeTimer),t.state="ended",t.video.trigger(t.state,t.state),t.video.trigger("change",t.state)}}(this),"live"===this.mode||!0===t?e():"record"===this.mode?(this.state="buffering",this.video.trigger(this.state,this.state),this.video.trigger("change",this.state),this.video.settings.player.manager.getSpeedsAt(this.time,function(t){return function(i,r){var n;return null!=i?(t.state="error",t.video.trigger(t.state,t.state),void t.video.trigger("change",t.state)):(n=t.getSpeed(),r=r.filter(function(t){return t!==n}),r.length>0?t.video.settings.player.play(t.time,r[r.length-1]):e())}}(this))):e()},t.prototype._onError=function(t){if(this.enabled)return this.state="error",null!=this.timeTimer&&clearTimeout(this.timeTimer),this.video.trigger(this.state,this.state),this.video.trigger("change",this.state)},t.prototype._onLoadedMetadata=function(t){if(this.enabled)return this.metada=t,this.video.trigger("metadata",this.metadata)},t.prototype.isPlaying=function(){return"playing"===this.state},t.prototype.isPaused=function(){return"pause"===this.state},t.prototype.isBuffering=function(){return"buffering"===this.state},t.prototype.isLoading=function(){return"loading"===this.state},t.prototype.isEnded=function(){return"ended"===this.state},t.prototype.isError=function(){return"error"===this.state},t.prototype.getSpeed=function(){var t,e;if(t=r.getInstance(),null!=(e=t.getSession(this.video.token)))return e.speed},t.prototype.enable=function(){return this.enabled=!0},t.prototype.disable=function(){return this.enabled=!1},t.prototype.destroy=function(){if(this.video.element.removeEventListener("playing",this._onPlaying),this.video.element.removeEventListener("loadstart",this._onLoadStart),this.video.element.removeEventListener("waiting",this._onWaiting),this.video.element.removeEventListener("pause",this._onPause),this.video.element.removeEventListener("ended",this._onEnded),this.video.element.removeEventListener("error",this._onError),this.video.element.removeEventListener("loadedmetadata",this._onLoadedMetadata),null!=this.timeTimer)return clearTimeout(this.timeTimer)},t}(),t.exports=n},function(t,e){var i,r,n,a;a=/#EXT-X-STREAM-INF:BANDWIDTH=(\d*),CODECS="(.*)",RESOLUTION=([0-9x]*)/,r=/#EXTINF:(.*),/,n=/#EXT-X-TARGETDURATION:(\d*)/,i=function(t,e){return 0===e.indexOf("http://")?e:0===e.indexOf("https://")?e:t.substring(0,t.lastIndexOf("/")+1)+e},t.exports=function(t,e){var s,o,l,u;return o={},u=null,s=null,l=e.split("\n"),l.forEach(function(e){var l;return null!=(l=a.exec(e))?u={bandwidth:parseInt(l[1]),codec:l[2],resolution:l[3]}:null!=(l=n.exec(e))?o.duration=parseFloat(l[1]):(l=r.exec(e),null!=l?s={duration:parseFloat(l[1])}:"#"!==e[0]&&""!==e&&(null!=u&&(null==o.streams&&(o.streams=[]),u.url=i(t,e),o.streams.push(u),u=null),null!=s)?(null==o.chunks&&(o.chunks=[]),s.url=i(t,e),o.chunks.push(s)):void 0)}),o}},function(t,e,i){"undefined"!=typeof window&&function(e,i){t.exports=function(){return function(t){function e(r){if(i[r])return i[r].exports;var n=i[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,r){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var n in t)e.d(r,n,function(e){return t[e]}.bind(null,n));return r},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist/",e(e.s="./src/hls.ts")}({"./node_modules/eventemitter3/index.js":/*!*********************************************!*\
  !*** ./node_modules/eventemitter3/index.js ***!
  \*********************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,i){"use strict";function r(){}function n(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function a(t,e,i,r,a){if("function"!=typeof i)throw new TypeError("The listener must be a function");var s=new n(i,r||t,a),o=u?u+e:e;return t._events[o]?t._events[o].fn?t._events[o]=[t._events[o],s]:t._events[o].push(s):(t._events[o]=s,t._eventsCount++),t}function s(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function o(){this._events=new r,this._eventsCount=0}var l=Object.prototype.hasOwnProperty,u="~";Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(u=!1)),o.prototype.eventNames=function(){var t,e,i=[];if(0===this._eventsCount)return i;for(e in t=this._events)l.call(t,e)&&i.push(u?e.slice(1):e);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},o.prototype.listeners=function(t){var e=u?u+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,n=i.length,a=new Array(n);r<n;r++)a[r]=i[r].fn;return a},o.prototype.listenerCount=function(t){var e=u?u+t:t,i=this._events[e];return i?i.fn?1:i.length:0},o.prototype.emit=function(t,e,i,r,n,a){var s=u?u+t:t;if(!this._events[s])return!1;var o,l,d=this._events[s],c=arguments.length;if(d.fn){switch(d.once&&this.removeListener(t,d.fn,void 0,!0),c){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,e),!0;case 3:return d.fn.call(d.context,e,i),!0;case 4:return d.fn.call(d.context,e,i,r),!0;case 5:return d.fn.call(d.context,e,i,r,n),!0;case 6:return d.fn.call(d.context,e,i,r,n,a),!0}for(l=1,o=new Array(c-1);l<c;l++)o[l-1]=arguments[l];d.fn.apply(d.context,o)}else{var h,f=d.length;for(l=0;l<f;l++)switch(d[l].once&&this.removeListener(t,d[l].fn,void 0,!0),c){case 1:d[l].fn.call(d[l].context);break;case 2:d[l].fn.call(d[l].context,e);break;case 3:d[l].fn.call(d[l].context,e,i);break;case 4:d[l].fn.call(d[l].context,e,i,r);break;default:if(!o)for(h=1,o=new Array(c-1);h<c;h++)o[h-1]=arguments[h];d[l].fn.apply(d[l].context,o)}}return!0},o.prototype.on=function(t,e,i){return a(this,t,e,i,!1)},o.prototype.once=function(t,e,i){return a(this,t,e,i,!0)},o.prototype.removeListener=function(t,e,i,r){var n=u?u+t:t;if(!this._events[n])return this;if(!e)return s(this,n),this;var a=this._events[n];if(a.fn)a.fn!==e||r&&!a.once||i&&a.context!==i||s(this,n);else{for(var o=0,l=[],d=a.length;o<d;o++)(a[o].fn!==e||r&&!a[o].once||i&&a[o].context!==i)&&l.push(a[o]);l.length?this._events[n]=1===l.length?l[0]:l:s(this,n)}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=u?u+t:t,this._events[e]&&s(this,e)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=u,o.EventEmitter=o,t.exports=o},"./node_modules/url-toolkit/src/url-toolkit.js":/*!*****************************************************!*\
  !*** ./node_modules/url-toolkit/src/url-toolkit.js ***!
  \*****************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,i){!function(e){var i=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#.*)?$/,r=/^([^\/?#]*)(.*)$/,n=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,s={buildAbsoluteURL:function(t,e,i){if(i=i||{},t=t.trim(),!(e=e.trim())){if(!i.alwaysNormalize)return t;var n=s.parseURL(t);if(!n)throw new Error("Error trying to parse base URL.");return n.path=s.normalizePath(n.path),s.buildURLFromParts(n)}var a=s.parseURL(e);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return i.alwaysNormalize?(a.path=s.normalizePath(a.path),s.buildURLFromParts(a)):e;var o=s.parseURL(t);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var l=r.exec(o.path);o.netLoc=l[1],o.path=l[2]}o.netLoc&&!o.path&&(o.path="/");var u={scheme:o.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(u.netLoc=o.netLoc,"/"!==a.path[0]))if(a.path){var d=o.path,c=d.substring(0,d.lastIndexOf("/")+1)+a.path;u.path=s.normalizePath(c)}else u.path=o.path,a.params||(u.params=o.params,a.query||(u.query=o.query));return null===u.path&&(u.path=i.alwaysNormalize?s.normalizePath(a.path):a.path),s.buildURLFromParts(u)},parseURL:function(t){var e=i.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(n,"");t.length!==(t=t.replace(a,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}};t.exports=s}()},"./node_modules/webworkify-webpack/index.js":/*!**************************************************!*\
  !*** ./node_modules/webworkify-webpack/index.js ***!
  \**************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,i){function r(t){function e(r){if(i[r])return i[r].exports;var n=i[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var i={};e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,r){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:r})},e.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e.oe=function(t){throw console.error(t),t};var r=e(e.s=ENTRY_MODULE);return r.default||r}function n(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function a(t){return!isNaN(1*t)}function s(t,e,r){var s={};s[r]=[];var o=e.toString(),l=o.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!l)return s;for(var c,h=l[1],f=new RegExp("(\\\\n|\\W)"+n(h)+d,"g");c=f.exec(o);)"dll-reference"!==c[3]&&s[r].push(c[3]);for(f=new RegExp("\\("+n(h)+'\\("(dll-reference\\s('+u+'))"\\)\\)'+d,"g");c=f.exec(o);)t[c[2]]||(s[r].push(c[1]),t[c[2]]=i(c[1]).m),s[c[2]]=s[c[2]]||[],s[c[2]].push(c[4]);for(var p=Object.keys(s),g=0;g<p.length;g++)for(var y=0;y<s[p[g]].length;y++)a(s[p[g]][y])&&(s[p[g]][y]=1*s[p[g]][y]);return s}function o(t){return Object.keys(t).reduce(function(e,i){return e||t[i].length>0},!1)}function l(t,e){for(var i={main:[e]},r={main:[]},n={main:{}};o(i);)for(var a=Object.keys(i),l=0;l<a.length;l++){var u=a[l],d=i[u],c=d.pop();if(n[u]=n[u]||{},!n[u][c]&&t[u][c]){n[u][c]=!0,r[u]=r[u]||[],r[u].push(c);for(var h=s(t,t[u][c],u),f=Object.keys(h),p=0;p<f.length;p++)i[f[p]]=i[f[p]]||[],i[f[p]]=i[f[p]].concat(h[f[p]])}}return r}var u="[\\.|\\-|\\+|\\w|/|@]+",d="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+u+").*?\\)";t.exports=function(t,e){e=e||{};var n={main:i.m},a=e.all?{main:Object.keys(n.main)}:l(n,t),s="";Object.keys(a).filter(function(t){return"main"!==t}).forEach(function(t){for(var e=0;a[t][e];)e++;a[t].push(e),n[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",s=s+"var "+t+" = ("+r.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+a[t].map(function(e){return JSON.stringify(e)+": "+n[t][e].toString()}).join(",")+"});\n"}),s=s+"new (("+r.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+a.main.map(function(t){return JSON.stringify(t)+": "+n.main[t].toString()}).join(",")+"}))(self);";var o=new window.Blob([s],{type:"text/javascript"});if(e.bare)return o;var u=window.URL||window.webkitURL||window.mozURL||window.msURL,d=u.createObjectURL(o),c=new window.Worker(d);return c.objectURL=d,c}},"./src/crypt/decrypter.js":/*!********************************************!*\
  !*** ./src/crypt/decrypter.js + 3 modules ***!
  \********************************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Cannot concat with ./src/errors.ts because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/events.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/get-self-scope.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/logger.js because of ./src/hls.ts */
function(t,e,i){"use strict";function r(t){var e=t.byteLength,i=e&&new DataView(t).getUint8(e-1);return i?t.slice(0,e-i):t}i.r(e);var n=function(){function t(t,e){this.subtle=t,this.aesIV=e}return t.prototype.decrypt=function(t,e){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},e,t)},t}(),a=function(){function t(t,e){this.subtle=t,this.key=e}return t.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},t}(),s=a,o=function(){function t(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}var e=t.prototype;return e.uint8ArrayToUint32Array_=function(t){for(var e=new DataView(t),i=new Uint32Array(4),r=0;r<4;r++)i[r]=e.getUint32(4*r);return i},e.initTable=function(){var t=this.sBox,e=this.invSBox,i=this.subMix,r=i[0],n=i[1],a=i[2],s=i[3],o=this.invSubMix,l=o[0],u=o[1],d=o[2],c=o[3],h=new Uint32Array(256),f=0,p=0,g=0;for(g=0;g<256;g++)h[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){var y=p^p<<1^p<<2^p<<3^p<<4;y=y>>>8^255&y^99,t[f]=y,e[y]=f;var v=h[f],m=h[v],L=h[m],w=257*h[y]^16843008*y;r[f]=w<<24|w>>>8,n[f]=w<<16|w>>>16,a[f]=w<<8|w>>>24,s[f]=w,w=16843009*L^65537*m^257*v^16843008*f,l[y]=w<<24|w>>>8,u[y]=w<<16|w>>>16,d[y]=w<<8|w>>>24,c[y]=w,f?(f=v^h[h[h[L^v]]],p^=h[h[p]]):f=p=1}},e.expandKey=function(t){for(var e=this.uint8ArrayToUint32Array_(t),i=!0,r=0;r<e.length&&i;)i=e[r]===this.key[r],r++;if(!i){this.key=e;var n=this.keySize=e.length;if(4!==n&&6!==n&&8!==n)throw new Error("Invalid aes key size="+n);var a,s,o,l,u=this.ksRows=4*(n+6+1),d=this.keySchedule=new Uint32Array(u),c=this.invKeySchedule=new Uint32Array(u),h=this.sBox,f=this.rcon,p=this.invSubMix,g=p[0],y=p[1],v=p[2],m=p[3];for(a=0;a<u;a++)a<n?o=d[a]=e[a]:(l=o,a%n==0?(l=l<<8|l>>>24,l=h[l>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l],l^=f[a/n|0]<<24):n>6&&a%n==4&&(l=h[l>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l]),d[a]=o=(d[a-n]^l)>>>0);for(s=0;s<u;s++)a=u-s,l=3&s?d[a]:d[a-4],c[s]=s<4||a<=4?l:g[h[l>>>24]]^y[h[l>>>16&255]]^v[h[l>>>8&255]]^m[h[255&l]],c[s]=c[s]>>>0}},e.networkToHostOrderSwap=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},e.decrypt=function(t,e,i,n){for(var a,s,o,l,u,d,c,h,f,p,g,y,v,m,L=this.keySize+6,w=this.invKeySchedule,T=this.invSBox,E=this.invSubMix,b=E[0],M=E[1],S=E[2],C=E[3],A=this.uint8ArrayToUint32Array_(i),_=A[0],x=A[1],k=A[2],D=A[3],R=new Int32Array(t),N=new Int32Array(R.length),I=this.networkToHostOrderSwap;e<R.length;){for(f=I(R[e]),p=I(R[e+1]),g=I(R[e+2]),y=I(R[e+3]),u=f^w[0],d=y^w[1],c=g^w[2],h=p^w[3],v=4,m=1;m<L;m++)a=b[u>>>24]^M[d>>16&255]^S[c>>8&255]^C[255&h]^w[v],s=b[d>>>24]^M[c>>16&255]^S[h>>8&255]^C[255&u]^w[v+1],o=b[c>>>24]^M[h>>16&255]^S[u>>8&255]^C[255&d]^w[v+2],l=b[h>>>24]^M[u>>16&255]^S[d>>8&255]^C[255&c]^w[v+3],u=a,d=s,c=o,h=l,v+=4;a=T[u>>>24]<<24^T[d>>16&255]<<16^T[c>>8&255]<<8^T[255&h]^w[v],s=T[d>>>24]<<24^T[c>>16&255]<<16^T[h>>8&255]<<8^T[255&u]^w[v+1],o=T[c>>>24]<<24^T[h>>16&255]<<16^T[u>>8&255]<<8^T[255&d]^w[v+2],l=T[h>>>24]<<24^T[u>>16&255]<<16^T[d>>8&255]<<8^T[255&c]^w[v+3],v+=3,N[e]=I(a^_),N[e+1]=I(l^x),N[e+2]=I(o^k),N[e+3]=I(s^D),_=f,x=p,k=g,D=y,e+=4}return n?r(N.buffer):N.buffer},e.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},t}(),l=o,u=i("./src/errors.ts"),d=i("./src/utils/logger.js"),c=i("./src/events.js"),h=i("./src/utils/get-self-scope.js"),f=Object(h.getSelfScope)(),p=function(){function t(t,e,i){var r=void 0===i?{}:i,n=r.removePKCS7Padding,a=void 0===n||n;if(this.logEnabled=!0,this.observer=t,this.config=e,this.removePKCS7Padding=a,a)try{var s=f.crypto;s&&(this.subtle=s.subtle||s.webkitSubtle)}catch(t){}this.disableWebCrypto=!this.subtle}var e=t.prototype;return e.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},e.decrypt=function(t,e,i,r){var a=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(d.logger.log("JS AES decrypt"),this.logEnabled=!1);var o=this.decryptor;o||(this.decryptor=o=new l),o.expandKey(e),r(o.decrypt(t,0,i,this.removePKCS7Padding))}else{this.logEnabled&&(d.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var u=this.subtle;this.key!==e&&(this.key=e,this.fastAesKey=new s(u,e)),this.fastAesKey.expandKey().then(function(s){new n(u,i).decrypt(t,s).catch(function(n){a.onWebCryptoError(n,t,e,i,r)}).then(function(t){r(t)})}).catch(function(n){a.onWebCryptoError(n,t,e,i,r)})}},e.onWebCryptoError=function(t,e,i,r,n){this.config.enableSoftwareAES?(d.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(e,i,r,n)):(d.logger.error("decrypting error : "+t.message),this.observer.trigger(c.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:t.message}))},e.destroy=function(){var t=this.decryptor;t&&(t.destroy(),this.decryptor=void 0)},t}();e.default=p},"./src/demux/demuxer-inline.js":/*!**************************************************!*\
  !*** ./src/demux/demuxer-inline.js + 12 modules ***!
  \**************************************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Cannot concat with ./src/crypt/decrypter.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/id3.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/mp4demuxer.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/errors.ts because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/events.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/polyfills/number.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/get-self-scope.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/logger.js because of ./src/hls.ts */
function(t,e,i){"use strict";function r(t,e,i,r){var n,a,s,o,l,u=navigator.userAgent.toLowerCase(),d=r,c=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];return n=1+((192&e[i+2])>>>6),(a=(60&e[i+2])>>>2)>c.length-1?void t.trigger(m.default.ERROR,{type:L.ErrorTypes.MEDIA_ERROR,details:L.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+a}):(o=(1&e[i+2])<<2,o|=(192&e[i+3])>>>6,E.logger.log("manifest codec:"+r+",ADTS data:type:"+n+",sampleingIndex:"+a+"["+c[a]+"Hz],channelConfig:"+o),/firefox/i.test(u)?a>=6?(n=5,l=new Array(4),s=a-3):(n=2,l=new Array(2),s=a):-1!==u.indexOf("android")?(n=2,l=new Array(2),s=a):(n=5,l=new Array(4),r&&(-1!==r.indexOf("mp4a.40.29")||-1!==r.indexOf("mp4a.40.5"))||!r&&a>=6?s=a-3:((r&&-1!==r.indexOf("mp4a.40.2")&&(a>=6&&1===o||/vivaldi/i.test(u))||!r&&1===o)&&(n=2,l=new Array(2)),s=a)),l[0]=n<<3,l[0]|=(14&a)>>1,l[1]|=(1&a)<<7,l[1]|=o<<3,5===n&&(l[1]|=(14&s)>>1,l[2]=(1&s)<<7,l[2]|=8,l[3]=0),{config:l,samplerate:c[a],channelCount:o,codec:"mp4a.40."+n,manifestCodec:d})}function n(t,e){return 255===t[e]&&240==(246&t[e+1])}function a(t,e){return 1&t[e+1]?7:9}function s(t,e){return(3&t[e+3])<<11|t[e+4]<<3|(224&t[e+5])>>>5}function o(t,e){return!!(e+1<t.length&&n(t,e))}function l(t,e){if(o(t,e)){var i=a(t,e);if(e+i>=t.length)return!1;var r=s(t,e);if(r<=i)return!1;var l=e+r;if(l===t.length||l+1<t.length&&n(t,l))return!0}return!1}function u(t,e,i,n,a){if(!t.samplerate){var s=r(e,i,n,a);t.config=s.config,t.samplerate=s.samplerate,t.channelCount=s.channelCount,t.codec=s.codec,t.manifestCodec=s.manifestCodec,E.logger.log("parsed codec:"+t.codec+",rate:"+s.samplerate+",nb channel:"+s.channelCount)}}function d(t){return 9216e4/t}function c(t,e,i,r,n){var o,l,u,d=t.length;if(o=a(t,e),l=s(t,e),(l-=o)>0&&e+o+l<=d)return u=i+r*n,{headerLength:o,frameLength:l,stamp:u}}function h(t,e,i,r,n){var a=d(t.samplerate),s=c(e,i,r,n,a);if(s){var o=s.stamp,l=s.headerLength,u=s.frameLength,h={unit:e.subarray(i+l,i+l+u),pts:o,dts:o};return t.samples.push(h),{sample:h,length:u+l}}}function f(t,e,i,r){void 0===i&&(i=1),void 0===r&&(r=!1);var n=t*e*i;return r?Math.round(n):n}function p(t,e){return void 0===e&&(e=!1),f(t,1e3,1/H,e)}function g(t,e){return void 0===e&&(e=1),f(t,H,1/e)}function y(t,e){var i;if(void 0===e)return t;for(i=e<t?-8589934592:8589934592;Math.abs(t-e)>4294967296;)t+=i;return t}i.r(e);var v,m=i("./src/events.js"),L=i("./src/errors.ts"),w=i("./src/crypt/decrypter.js"),T=i("./src/polyfills/number.js"),E=i("./src/utils/logger.js"),b=i("./src/utils/get-self-scope.js"),M=i("./src/demux/id3.js"),S=function(){function t(t,e,i){this.observer=t,this.config=i,this.remuxer=e}var e=t.prototype;return e.resetInitSegment=function(t,e,i,r){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:e,duration:r,inputTimeScale:9e4}},e.resetTimeStamp=function(){},t.probe=function(t){if(!t)return!1;for(var e=M.default.getID3Data(t,0)||[],i=e.length,r=t.length;i<r;i++)if(l(t,i))return E.logger.log("ADTS sync word found !"),!0;return!1},e.append=function(t,e,i,r){for(var n=this._audioTrack,a=M.default.getID3Data(t,0)||[],s=M.default.getTimeStamp(a),l=Object(T.isFiniteNumber)(s)?90*s:9e4*e,d=0,c=l,f=t.length,p=a.length,g=[{pts:c,dts:c,data:a}];p<f-1;)if(o(t,p)&&p+5<f){u(n,this.observer,t,p,n.manifestCodec);var y=h(n,t,p,l,d);if(!y){E.logger.log("Unable to parse AAC frame");break}p+=y.length,c=y.sample.pts,d++}else M.default.isHeader(t,p)?(a=M.default.getID3Data(t,p),g.push({pts:c,dts:c,data:a}),p+=a.length):p++;this.remuxer.remux(n,{samples:[]},{samples:g,inputTimeScale:9e4},{samples:[]},e,i,r)},e.destroy=function(){},t}(),C=S,A=i("./src/demux/mp4demuxer.js"),_={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(t,e,i,r,n){if(!(i+24>e.length)){var a=this.parseHeader(e,i);if(a&&i+a.frameLength<=e.length){var s=9e4*a.samplesPerFrame/a.sampleRate,o=r+n*s,l={unit:e.subarray(i,i+a.frameLength),pts:o,dts:o};return t.config=[],t.channelCount=a.channelCount,t.samplerate=a.sampleRate,t.samples.push(l),{sample:l,length:a.frameLength}}}},parseHeader:function(t,e){var i=t[e+1]>>3&3,r=t[e+1]>>1&3,n=t[e+2]>>4&15,a=t[e+2]>>2&3,s=t[e+2]>>1&1;if(1!==i&&0!==n&&15!==n&&3!==a){var o=3===i?3-r:3===r?3:4,l=1e3*_.BitratesMap[14*o+n-1],u=3===i?0:2===i?1:2,d=_.SamplingRateMap[3*u+a],c=t[e+3]>>6==3?1:2,h=_.SamplesCoefficients[i][r],f=_.BytesInSlot[r],p=8*h*f;return{sampleRate:d,channelCount:c,frameLength:parseInt(h*l/d+s,10)*f,samplesPerFrame:p}}},isHeaderPattern:function(t,e){return 255===t[e]&&224==(224&t[e+1])&&0!=(6&t[e+1])},isHeader:function(t,e){return!!(e+1<t.length&&this.isHeaderPattern(t,e))},probe:function(t,e){if(e+1<t.length&&this.isHeaderPattern(t,e)){var i=this.parseHeader(t,e),r=4;i&&i.frameLength&&(r=i.frameLength);var n=e+r;if(n===t.length||n+1<t.length&&this.isHeaderPattern(t,n))return!0}return!1}},x=_,k=function(){function t(t){this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}var e=t.prototype;return e.loadWord=function(){var t=this.data,e=this.bytesAvailable,i=t.byteLength-e,r=new Uint8Array(4),n=Math.min(4,e);if(0===n)throw new Error("no bytes available");r.set(t.subarray(i,i+n)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=8*n,this.bytesAvailable-=n},e.skipBits=function(t){var e;this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(t-=this.bitsAvailable,e=t>>3,t-=e>>3,this.bytesAvailable-=e,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)},e.readBits=function(t){var e=Math.min(this.bitsAvailable,t),i=this.word>>>32-e;return t>32&&E.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=e,this.bitsAvailable>0?this.word<<=e:this.bytesAvailable>0&&this.loadWord(),e=t-e,e>0&&this.bitsAvailable?i<<e|this.readBits(e):i},e.skipLZ=function(){var t;for(t=0;t<this.bitsAvailable;++t)if(0!=(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()},e.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.skipEG=function(){this.skipBits(1+this.skipLZ())},e.readUEG=function(){var t=this.skipLZ();return this.readBits(t+1)-1},e.readEG=function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)},e.readBoolean=function(){return 1===this.readBits(1)},e.readUByte=function(){return this.readBits(8)},e.readUShort=function(){return this.readBits(16)},e.readUInt=function(){return this.readBits(32)},e.skipScalingList=function(t){var e,i,r=8,n=8;for(e=0;e<t;e++)0!==n&&(i=this.readEG(),n=(r+i+256)%256),r=0===n?r:n},e.readSPS=function(){var t,e,i,r,n,a,s,o=0,l=0,u=0,d=0,c=this.readUByte.bind(this),h=this.readBits.bind(this),f=this.readUEG.bind(this),p=this.readBoolean.bind(this),g=this.skipBits.bind(this),y=this.skipEG.bind(this),v=this.skipUEG.bind(this),m=this.skipScalingList.bind(this);if(c(),t=c(),h(5),g(3),c(),v(),100===t||110===t||122===t||244===t||44===t||83===t||86===t||118===t||128===t){var L=f();if(3===L&&g(1),v(),v(),g(1),p())for(a=3!==L?8:12,s=0;s<a;s++)p()&&m(s<6?16:64)}v();var w=f();if(0===w)f();else if(1===w)for(g(1),y(),y(),e=f(),s=0;s<e;s++)y();v(),g(1),i=f(),r=f(),n=h(1),0===n&&g(1),g(1),p()&&(o=f(),l=f(),u=f(),d=f());var T=[1,1];if(p()&&p())switch(c()){case 1:T=[1,1];break;case 2:T=[12,11];break;case 3:T=[10,11];break;case 4:T=[16,11];break;case 5:T=[40,33];break;case 6:T=[24,11];break;case 7:T=[20,11];break;case 8:T=[32,11];break;case 9:T=[80,33];break;case 10:T=[18,11];break;case 11:T=[15,11];break;case 12:T=[64,33];break;case 13:T=[160,99];break;case 14:T=[4,3];break;case 15:T=[3,2];break;case 16:T=[2,1];break;case 255:T=[c()<<8|c(),c()<<8|c()]}return{width:Math.ceil(16*(i+1)-2*o-2*l),height:(2-n)*(r+1)*16-(n?2:4)*(u+d),pixelRatio:T}},e.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},t}(),D=k,R=function(){function t(t,e,i,r){this.decryptdata=i,this.discardEPB=r,this.decrypter=new w.default(t,e,{removePKCS7Padding:!1})}var e=t.prototype;return e.decryptBuffer=function(t,e){this.decrypter.decrypt(t,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,e)},e.decryptAacSample=function(t,e,i,r){var n=t[e].unit,a=n.subarray(16,n.length-n.length%16),s=a.buffer.slice(a.byteOffset,a.byteOffset+a.length),o=this;this.decryptBuffer(s,function(a){a=new Uint8Array(a),n.set(a,16),r||o.decryptAacSamples(t,e+1,i)})},e.decryptAacSamples=function(t,e,i){for(;;e++){if(e>=t.length)return void i();if(!(t[e].unit.length<32)){var r=this.decrypter.isSync();if(this.decryptAacSample(t,e,i,r),!r)return}}},e.getAvcEncryptedData=function(t){for(var e=16*Math.floor((t.length-48)/160)+16,i=new Int8Array(e),r=0,n=32;n<=t.length-16;n+=160,r+=16)i.set(t.subarray(n,n+16),r);return i},e.getAvcDecryptedUnit=function(t,e){e=new Uint8Array(e);for(var i=0,r=32;r<=t.length-16;r+=160,i+=16)t.set(e.subarray(i,i+16),r);return t},e.decryptAvcSample=function(t,e,i,r,n,a){var s=this.discardEPB(n.data),o=this.getAvcEncryptedData(s),l=this;this.decryptBuffer(o.buffer,function(o){n.data=l.getAvcDecryptedUnit(s,o),a||l.decryptAvcSamples(t,e,i+1,r)})},e.decryptAvcSamples=function(t,e,i,r){for(;;e++,i=0){if(e>=t.length)return void r();for(var n=t[e].units;!(i>=n.length);i++){var a=n[i];if(!(a.data.length<=48||1!==a.type&&5!==a.type)){var s=this.decrypter.isSync();if(this.decryptAvcSample(t,e,i,r,a,s),!s)return}}}},t}(),N=R,I={video:1,audio:2,id3:3,text:4},j=function(){function t(t,e,i,r){this.observer=t,this.config=i,this.typeSupported=r,this.remuxer=e,this.sampleAes=null,this.pmtUnknownTypes={}}var e=t.prototype;return e.setDecryptData=function(t){null!=t&&null!=t.key&&"SAMPLE-AES"===t.method?this.sampleAes=new N(this.observer,this.config,t,this.discardEPB):this.sampleAes=null},t.probe=function(e){var i=t._syncOffset(e);return!(i<0||(i&&E.logger.warn("MPEG2-TS detected but first sync word found @ offset "+i+", junk ahead ?"),0))},t._syncOffset=function(t){for(var e=Math.min(1e3,t.length-564),i=0;i<e;){if(71===t[i]&&71===t[i+188]&&71===t[i+376])return i;i++}return-1},t.createTrack=function(t,e){return{container:"video"===t||"audio"===t?"video/mp2t":void 0,type:t,id:I[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:"video"===t?0:void 0,isAAC:"audio"===t||void 0,duration:"audio"===t?e:void 0}},e.resetInitSegment=function(e,i,r,n){this.pmtParsed=!1,this._pmtId=-1,this.pmtUnknownTypes={},this._avcTrack=t.createTrack("video",n),this._audioTrack=t.createTrack("audio",n),this._id3Track=t.createTrack("id3",n),this._txtTrack=t.createTrack("text",n),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=i,this.videoCodec=r,this._duration=n},e.resetTimeStamp=function(){},e.append=function(e,i,r,n){var a,s,o,l,u,d=e.length,c=!1;this.pmtUnknownTypes={},this.contiguous=r;var h=this.pmtParsed,f=this._avcTrack,p=this._audioTrack,g=this._id3Track,y=f.pid,v=p.pid,w=g.pid,T=this._pmtId,b=f.pesData,M=p.pesData,S=g.pesData,C=this._parsePAT,A=this._parsePMT.bind(this),_=this._parsePES,x=this._parseAVCPES.bind(this),k=this._parseAACPES.bind(this),D=this._parseMPEGPES.bind(this),R=this._parseID3PES.bind(this),N=t._syncOffset(e);for(d-=(d+N)%188,a=N;a<d;a+=188)if(71===e[a]){if(s=!!(64&e[a+1]),o=((31&e[a+1])<<8)+e[a+2],(48&e[a+3])>>4>1){if((l=a+5+e[a+4])===a+188)continue}else l=a+4;switch(o){case y:s&&(b&&(u=_(b))&&x(u,!1),b={data:[],size:0}),b&&(b.data.push(e.subarray(l,a+188)),b.size+=a+188-l);break;case v:s&&(M&&(u=_(M))&&(p.isAAC?k(u):D(u)),M={data:[],size:0}),M&&(M.data.push(e.subarray(l,a+188)),M.size+=a+188-l);break;case w:s&&(S&&(u=_(S))&&R(u),S={data:[],size:0}),S&&(S.data.push(e.subarray(l,a+188)),S.size+=a+188-l);break;case 0:s&&(l+=e[l]+1),T=this._pmtId=C(e,l);break;case T:s&&(l+=e[l]+1);var I=A(e,l,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);y=I.avc,y>0&&(f.pid=y),v=I.audio,v>0&&(p.pid=v,p.isAAC=I.isAAC),w=I.id3,w>0&&(g.pid=w),c&&!h&&(E.logger.log("reparse from beginning"),c=!1,a=N-188),h=this.pmtParsed=!0;break;case 17:case 8191:break;default:c=!0}}else this.observer.trigger(m.default.ERROR,{type:L.ErrorTypes.MEDIA_ERROR,details:L.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});b&&(u=_(b))?(x(u,!0),f.pesData=null):f.pesData=b,M&&(u=_(M))?(p.isAAC?k(u):D(u),p.pesData=null):(M&&M.size&&E.logger.log("last AAC PES packet truncated,might overlap between fragments"),p.pesData=M),S&&(u=_(S))?(R(u),g.pesData=null):g.pesData=S,null==this.sampleAes?this.remuxer.remux(p,f,g,this._txtTrack,i,r,n):this.decryptAndRemux(p,f,g,this._txtTrack,i,r,n)},e.decryptAndRemux=function(t,e,i,r,n,a,s){if(t.samples&&t.isAAC){var o=this;this.sampleAes.decryptAacSamples(t.samples,0,function(){o.decryptAndRemuxAvc(t,e,i,r,n,a,s)})}else this.decryptAndRemuxAvc(t,e,i,r,n,a,s)},e.decryptAndRemuxAvc=function(t,e,i,r,n,a,s){if(e.samples){var o=this;this.sampleAes.decryptAvcSamples(e.samples,0,0,function(){o.remuxer.remux(t,e,i,r,n,a,s)})}else this.remuxer.remux(t,e,i,r,n,a,s)},e.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},e._parsePAT=function(t,e){return(31&t[e+10])<<8|t[e+11]},e._trackUnknownPmt=function(t,e,i){var r=this.pmtUnknownTypes[t]||0;return 0===r&&(this.pmtUnknownTypes[t]=0,e.call(E.logger,i)),this.pmtUnknownTypes[t]++,r},e._parsePMT=function(t,e,i,r){var n,a,s,o,l={audio:-1,avc:-1,id3:-1,isAAC:!0};for(n=(15&t[e+1])<<8|t[e+2],a=e+3+n-4,s=(15&t[e+10])<<8|t[e+11],e+=12+s;e<a;){switch(o=(31&t[e+1])<<8|t[e+2],t[e]){case 207:if(!r){this._trackUnknownPmt(t[e],E.logger.warn,"ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===l.audio&&(l.audio=o);break;case 21:-1===l.id3&&(l.id3=o);break;case 219:if(!r){this._trackUnknownPmt(t[e],E.logger.warn,"H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===l.avc&&(l.avc=o);break;case 3:case 4:i?-1===l.audio&&(l.audio=o,l.isAAC=!1):this._trackUnknownPmt(t[e],E.logger.warn,"MPEG audio found, not supported in this browser");break;case 36:this._trackUnknownPmt(t[e],E.logger.warn,"Unsupported HEVC stream type found");break;default:this._trackUnknownPmt(t[e],E.logger.log,"Unknown stream type:"+t[e])}e+=5+((15&t[e+3])<<8|t[e+4])}return l},e._parsePES=function(t){var e,i,r,n,a,s,o,l,u=0,d=t.data;if(!t||0===t.size)return null;for(;d[0].length<19&&d.length>1;){var c=new Uint8Array(d[0].length+d[1].length);c.set(d[0]),c.set(d[1],d[0].length),d[0]=c,d.splice(1,1)}if(e=d[0],1===(e[0]<<16)+(e[1]<<8)+e[2]){if((r=(e[4]<<8)+e[5])&&r>t.size-6)return null;if(i=e[7],192&i&&(s=536870912*(14&e[9])+4194304*(255&e[10])+16384*(254&e[11])+128*(255&e[12])+(254&e[13])/2,64&i?(o=536870912*(14&e[14])+4194304*(255&e[15])+16384*(254&e[16])+128*(255&e[17])+(254&e[18])/2,s-o>54e5&&(E.logger.warn(Math.round((s-o)/9e4)+"s delta between PTS and DTS, align them"),s=o)):o=s),n=e[8],l=n+9,t.size<=l)return null;t.size-=l,a=new Uint8Array(t.size);for(var h=0,f=d.length;h<f;h++){e=d[h];var p=e.byteLength;if(l){if(l>p){l-=p;continue}e=e.subarray(l),p-=l,l=0}a.set(e,u),u+=p}return r&&(r-=n+3),{data:a,pts:s,dts:o,len:r}}return null},e.pushAccesUnit=function(t,e){if(t.units.length&&t.frame){var i=e.samples,r=i.length;if(isNaN(t.pts)){if(!r)return void e.dropped++;var n=i[r-1];t.pts=n.pts,t.dts=n.dts}!this.config.forceKeyFrameOnDiscontinuity||!0===t.key||e.sps&&(r||this.contiguous)?(t.id=r,i.push(t)):e.dropped++}t.debug.length&&E.logger.log(t.pts+"/"+t.dts+":"+t.debug)},e._parseAVCPES=function(t,e){var i,r,n,a=this,s=this._avcTrack,o=this._parseAVCNALu(t.data),l=this.avcSample,u=!1,d=this.pushAccesUnit.bind(this),c=function(t,e,i,r){return{key:t,pts:e,dts:i,units:[],debug:r}};t.data=null,l&&o.length&&!s.audFound&&(d(l,s),l=this.avcSample=c(!1,t.pts,t.dts,"")),o.forEach(function(e){switch(e.type){case 1:r=!0,l||(l=a.avcSample=c(!0,t.pts,t.dts,"")),l.frame=!0;var o=e.data;if(u&&o.length>4){var h=new D(o).readSliceType();2!==h&&4!==h&&7!==h&&9!==h||(l.key=!0)}break;case 5:r=!0,l||(l=a.avcSample=c(!0,t.pts,t.dts,"")),l.key=!0,l.frame=!0;break;case 6:r=!0,i=new D(a.discardEPB(e.data)),i.readUByte();for(var f=0,p=0,g=!1,y=0;!g&&i.bytesAvailable>1;){f=0;do{y=i.readUByte(),f+=y}while(255===y);p=0;do{y=i.readUByte(),p+=y}while(255===y);if(4===f&&0!==i.bytesAvailable){if(g=!0,181===i.readUByte()&&49===i.readUShort()&&1195456820===i.readUInt()&&3===i.readUByte()){var v=i.readUByte(),m=i.readUByte(),L=31&v,w=[v,m];for(n=0;n<L;n++)w.push(i.readUByte()),w.push(i.readUByte()),w.push(i.readUByte());a._insertSampleInOrder(a._txtTrack.samples,{type:3,pts:t.pts,bytes:w})}}else if(5===f&&0!==i.bytesAvailable){if(g=!0,p>16){var T=[];for(n=0;n<16;n++)T.push(i.readUByte().toString(16)),3!==n&&5!==n&&7!==n&&9!==n||T.push("-");var E=p-16,b=new Uint8Array(E);for(n=0;n<E;n++)b[n]=i.readUByte();a._insertSampleInOrder(a._txtTrack.samples,{pts:t.pts,payloadType:f,uuid:T.join(""),userDataBytes:b,userData:Object(M.utf8ArrayToStr)(b.buffer)})}}else if(p<i.bytesAvailable)for(n=0;n<p;n++)i.readUByte()}break;case 7:if(r=!0,u=!0,!s.sps){i=new D(e.data);var S=i.readSPS();s.width=S.width,s.height=S.height,s.pixelRatio=S.pixelRatio,s.sps=[e.data],s.duration=a._duration;var C=e.data.subarray(1,4),A="avc1.";for(n=0;n<3;n++){var _=C[n].toString(16);_.length<2&&(_="0"+_),A+=_}s.codec=A}break;case 8:r=!0,s.pps||(s.pps=[e.data]);break;case 9:r=!1,s.audFound=!0,l&&d(l,s),l=a.avcSample=c(!1,t.pts,t.dts,"");break;case 12:r=!1;break;default:r=!1,l&&(l.debug+="unknown NAL "+e.type+" ")}l&&r&&l.units.push(e)}),e&&l&&(d(l,s),this.avcSample=null)},e._insertSampleInOrder=function(t,e){var i=t.length;if(i>0){if(e.pts>=t[i-1].pts)t.push(e);else for(var r=i-1;r>=0;r--)if(e.pts<t[r].pts){t.splice(r,0,e);break}}else t.push(e)},e._getLastNalUnit=function(){var t,e=this.avcSample;if(!e||0===e.units.length){var i=this._avcTrack,r=i.samples;e=r[r.length-1]}if(e){var n=e.units;t=n[n.length-1]}return t},e._parseAVCNALu=function(t){var e,i,r,n,a,s=0,o=t.byteLength,l=this._avcTrack,u=l.naluState||0,d=u,c=[],h=-1;for(-1===u&&(h=0,a=31&t[0],u=0,s=1);s<o;)if(e=t[s++],u)if(1!==u)if(e)if(1===e){if(h>=0)r={data:t.subarray(h,s-u-1),type:a},c.push(r);else{var f=this._getLastNalUnit();if(f&&(d&&s<=4-d&&f.state&&(f.data=f.data.subarray(0,f.data.byteLength-d)),(i=s-u-1)>0)){var p=new Uint8Array(f.data.byteLength+i);p.set(f.data,0),p.set(t.subarray(0,i),f.data.byteLength),f.data=p}}s<o?(n=31&t[s],h=s,a=n,u=0):u=-1}else u=0;else u=3;else u=e?0:2;else u=e?0:1;if(h>=0&&u>=0&&(r={data:t.subarray(h,o),type:a,state:u},c.push(r)),0===c.length){var g=this._getLastNalUnit();if(g){var y=new Uint8Array(g.data.byteLength+t.byteLength);y.set(g.data,0),y.set(t,g.data.byteLength),g.data=y}}return l.naluState=u,c},e.discardEPB=function(t){for(var e,i,r=t.byteLength,n=[],a=1;a<r-2;)0===t[a]&&0===t[a+1]&&3===t[a+2]?(n.push(a+2),a+=2):a++;if(0===n.length)return t;e=r-n.length,i=new Uint8Array(e);var s=0;for(a=0;a<e;s++,a++)s===n[0]&&(s++,n.shift()),i[a]=t[s];return i},e._parseAACPES=function(t){var e,i,r,n,a,s=this._audioTrack,l=t.data,c=t.pts,f=this.aacOverFlow,p=this.aacLastPTS;if(f){var g=new Uint8Array(f.byteLength+l.byteLength);g.set(f,0),g.set(l,f.byteLength),l=g}for(r=0,a=l.length;r<a-1&&!o(l,r);r++);if(r){var y,v;if(r<a-1?(y="AAC PES did not start with ADTS header,offset:"+r,v=!1):(y="no ADTS header found in AAC PES",v=!0),E.logger.warn("parsing error:"+y),this.observer.trigger(m.default.ERROR,{type:L.ErrorTypes.MEDIA_ERROR,details:L.ErrorDetails.FRAG_PARSING_ERROR,fatal:v,reason:y}),v)return}if(u(s,this.observer,l,r,this.audioCodec),i=0,e=d(s.samplerate),f&&p){var w=p+e;Math.abs(w-c)>1&&(E.logger.log("AAC: align PTS for overlapping frames by "+Math.round((w-c)/90)),c=w)}for(;r<a;){if(o(l,r)){if(r+5<a){var T=h(s,l,r,c,i);if(T){r+=T.length,n=T.sample.pts,i++;continue}}break}r++}f=r<a?l.subarray(r,a):null,this.aacOverFlow=f,this.aacLastPTS=n},e._parseMPEGPES=function(t){for(var e=t.data,i=e.length,r=0,n=0,a=t.pts;n<i;)if(x.isHeader(e,n)){var s=x.appendFrame(this._audioTrack,e,n,a,r);if(!s)break;n+=s.length,r++}else n++},e._parseID3PES=function(t){this._id3Track.samples.push(t)},t}(),O=j,P=function(){function t(t,e,i){this.observer=t,this.config=i,this.remuxer=e}var e=t.prototype;return e.resetInitSegment=function(t,e,i,r){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:e,duration:r,inputTimeScale:9e4}},e.resetTimeStamp=function(){},t.probe=function(t){var e,i,r=M.default.getID3Data(t,0);if(r&&void 0!==M.default.getTimeStamp(r))for(e=r.length,i=Math.min(t.length-1,e+100);e<i;e++)if(x.probe(t,e))return E.logger.log("MPEG Audio sync word found !"),!0;return!1},e.append=function(t,e,i,r){for(var n=M.default.getID3Data(t,0)||[],a=M.default.getTimeStamp(n),s=void 0!==a?90*a:9e4*e,o=n.length,l=t.length,u=0,d=0,c=this._audioTrack,h=[{pts:s,dts:s,data:n}];o<l;)if(x.isHeader(t,o)){var f=x.appendFrame(c,t,o,s,u);if(!f)break;o+=f.length,d=f.sample.pts,u++}else M.default.isHeader(t,o)?(n=M.default.getID3Data(t,o),h.push({pts:d,dts:d,data:n}),o+=n.length):o++;this.remuxer.remux(c,{samples:[]},{samples:h,inputTimeScale:9e4},{samples:[]},e,i,r)},e.destroy=function(){},t}(),F=P,U=function(){function t(){}return t.getSilentFrame=function(t,e){switch(t){case"mp4a.40.2":if(1===e)return new Uint8Array([0,200,0,128,35,128]);if(2===e)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===e)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},t}(),B=U,z=Math.pow(2,32)-1,Y=function(){function t(){}return t.init=function(){t.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var e;for(e in t.types)t.types.hasOwnProperty(e)&&(t.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var i=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);t.HDLR_TYPES={video:i,audio:r};var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);t.STTS=t.STSC=t.STCO=a,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var s=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);t.FTYP=t.box(t.types.ftyp,s,l,s,o),t.DINF=t.box(t.types.dinf,t.box(t.types.dref,n))},t.box=function(t){for(var e,i=Array.prototype.slice.call(arguments,1),r=8,n=i.length,a=n;n--;)r+=i[n].byteLength;for(e=new Uint8Array(r),e[0]=r>>24&255,e[1]=r>>16&255,e[2]=r>>8&255,e[3]=255&r,e.set(t,4),n=0,r=8;n<a;n++)e.set(i[n],r),r+=i[n].byteLength;return e},t.hdlr=function(e){return t.box(t.types.hdlr,t.HDLR_TYPES[e])},t.mdat=function(e){return t.box(t.types.mdat,e)},t.mdhd=function(e,i){i*=e;var r=Math.floor(i/(z+1)),n=Math.floor(i%(z+1));return t.box(t.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,r>>24,r>>16&255,r>>8&255,255&r,n>>24,n>>16&255,n>>8&255,255&n,85,196,0,0]))},t.mdia=function(e){return t.box(t.types.mdia,t.mdhd(e.timescale,e.duration),t.hdlr(e.type),t.minf(e))},t.mfhd=function(e){return t.box(t.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},t.minf=function(e){return"audio"===e.type?t.box(t.types.minf,t.box(t.types.smhd,t.SMHD),t.DINF,t.stbl(e)):t.box(t.types.minf,t.box(t.types.vmhd,t.VMHD),t.DINF,t.stbl(e))},t.moof=function(e,i,r){return t.box(t.types.moof,t.mfhd(e),t.traf(r,i))},t.moov=function(e){for(var i=e.length,r=[];i--;)r[i]=t.trak(e[i]);return t.box.apply(null,[t.types.moov,t.mvhd(e[0].timescale,e[0].duration)].concat(r).concat(t.mvex(e)))},t.mvex=function(e){for(var i=e.length,r=[];i--;)r[i]=t.trex(e[i]);return t.box.apply(null,[t.types.mvex].concat(r))},t.mvhd=function(e,i){i*=e;var r=Math.floor(i/(z+1)),n=Math.floor(i%(z+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,r>>24,r>>16&255,r>>8&255,255&r,n>>24,n>>16&255,n>>8&255,255&n,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t.box(t.types.mvhd,a)},t.sdtp=function(e){var i,r,n=e.samples||[],a=new Uint8Array(4+n.length);for(r=0;r<n.length;r++)i=n[r].flags,a[r+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return t.box(t.types.sdtp,a)},t.stbl=function(e){return t.box(t.types.stbl,t.stsd(e),t.box(t.types.stts,t.STTS),t.box(t.types.stsc,t.STSC),t.box(t.types.stsz,t.STSZ),t.box(t.types.stco,t.STCO))},t.avc1=function(e){var i,r,n,a=[],s=[];for(i=0;i<e.sps.length;i++)r=e.sps[i],n=r.byteLength,a.push(n>>>8&255),a.push(255&n),a=a.concat(Array.prototype.slice.call(r));for(i=0;i<e.pps.length;i++)r=e.pps[i],n=r.byteLength,s.push(n>>>8&255),s.push(255&n),s=s.concat(Array.prototype.slice.call(r));var o=t.box(t.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|e.sps.length].concat(a).concat([e.pps.length]).concat(s))),l=e.width,u=e.height,d=e.pixelRatio[0],c=e.pixelRatio[1];return t.box(t.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),t.box(t.types.pasp,new Uint8Array([d>>24,d>>16&255,d>>8&255,255&d,c>>24,c>>16&255,c>>8&255,255&c])))},t.esds=function(t){var e=t.config.length;return new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([e]).concat(t.config).concat([6,1,2]))},t.mp4a=function(e){var i=e.samplerate;return t.box(t.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,i>>8&255,255&i,0,0]),t.box(t.types.esds,t.esds(e)))},t.mp3=function(e){var i=e.samplerate;return t.box(t.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,i>>8&255,255&i,0,0]))},t.stsd=function(e){return"audio"===e.type?e.isAAC||"mp3"!==e.codec?t.box(t.types.stsd,t.STSD,t.mp4a(e)):t.box(t.types.stsd,t.STSD,t.mp3(e)):t.box(t.types.stsd,t.STSD,t.avc1(e))},t.tkhd=function(e){var i=e.id,r=e.duration*e.timescale,n=e.width,a=e.height,s=Math.floor(r/(z+1)),o=Math.floor(r%(z+1));return t.box(t.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,i>>24&255,i>>16&255,i>>8&255,255&i,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,o>>24,o>>16&255,o>>8&255,255&o,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>8&255,255&n,0,0,a>>8&255,255&a,0,0]))},t.traf=function(e,i){var r=t.sdtp(e),n=e.id,a=Math.floor(i/(z+1)),s=Math.floor(i%(z+1));return t.box(t.types.traf,t.box(t.types.tfhd,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n])),t.box(t.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,s>>24,s>>16&255,s>>8&255,255&s])),t.trun(e,r.length+16+20+8+16+8+8),r)},t.trak=function(e){return e.duration=e.duration||4294967295,t.box(t.types.trak,t.tkhd(e),t.mdia(e))},t.trex=function(e){var i=e.id;return t.box(t.types.trex,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},t.trun=function(e,i){var r,n,a,s,o,l,u=e.samples||[],d=u.length,c=12+16*d,h=new Uint8Array(c);for(i+=8+c,h.set([0,0,15,1,d>>>24&255,d>>>16&255,d>>>8&255,255&d,i>>>24&255,i>>>16&255,i>>>8&255,255&i],0),r=0;r<d;r++)n=u[r],a=n.duration,s=n.size,o=n.flags,l=n.cts,h.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,s>>>24&255,s>>>16&255,s>>>8&255,255&s,o.isLeading<<2|o.dependsOn,o.isDependedOn<<6|o.hasRedundancy<<4|o.paddingValue<<1|o.isNonSync,61440&o.degradPrio,15&o.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*r);return t.box(t.types.trun,h)},t.initSegment=function(e){t.types||t.init();var i,r=t.moov(e);return i=new Uint8Array(t.FTYP.byteLength+r.byteLength),i.set(t.FTYP),i.set(r,t.FTYP.byteLength),i},t}(),G=Y,H=9e4,K=g(10),V=g(.2),W=null,q=function(){function t(t,e,i,r){if(this.observer=t,this.config=e,this.typeSupported=i,this.ISGenerated=!1,null===W){var n=navigator.userAgent.match(/Chrome\/(\d+)/i);W=n?parseInt(n[1]):0}}var e=t.prototype;return e.destroy=function(){},e.resetTimeStamp=function(t){this._initPTS=this._initDTS=t},e.resetInitSegment=function(){this.ISGenerated=!1},e.getVideoStartPts=function(t){var e=!1,i=t.reduce(function(t,i){var r=i.pts-t;return r<-4294967296?(e=!0,y(t,i.pts)):r>0?t:i.pts},t[0].pts);return e&&E.logger.debug("PTS rollover detected"),i},e.remux=function(t,e,i,r,n,a,s){if(this.ISGenerated||this.generateIS(t,e,n),this.ISGenerated){var o=t.samples.length,l=e.samples.length,u=n,d=n;if(o&&l){var c=this.getVideoStartPts(e.samples),h=y(t.samples[0].pts,c)-c,f=h/e.inputTimeScale;u+=Math.max(0,f),d+=Math.max(0,-f)}if(o){t.timescale||(E.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(t,e,n));var p=this.remuxAudio(t,u,a,s);if(l){var g;p&&(g=p.endPTS-p.startPTS),e.timescale||(E.logger.warn("regenerate InitSegment as video detected"),this.generateIS(t,e,n)),this.remuxVideo(e,d,a,g)}}else if(l){var v=this.remuxVideo(e,d,a,0,s);v&&t.codec&&this.remuxEmptyAudio(t,u,a,v)}}i.samples.length&&this.remuxID3(i,n),r.samples.length&&this.remuxText(r,n),this.observer.trigger(m.default.FRAG_PARSED)},e.generateIS=function(t,e,i){var r,n,a=this.observer,s=t.samples,o=e.samples,l=this.typeSupported,u="audio/mp4",d={},c={tracks:d},h=void 0===this._initPTS;if(h&&(r=n=1/0),t.config&&s.length&&(t.timescale=t.samplerate,E.logger.log("audio sampling rate : "+t.samplerate),t.isAAC||(l.mpeg?(u="audio/mpeg",t.codec=""):l.mp3&&(t.codec="mp3")),d.audio={container:u,codec:t.codec,initSegment:!t.isAAC&&l.mpeg?new Uint8Array:G.initSegment([t]),metadata:{channelCount:t.channelCount}},h&&(r=n=s[0].pts-Math.round(t.inputTimeScale*i))),e.sps&&e.pps&&o.length){var f=e.inputTimeScale;if(e.timescale=f,d.video={container:"video/mp4",codec:e.codec,initSegment:G.initSegment([e]),metadata:{width:e.width,height:e.height}},h){var p=this.getVideoStartPts(o),g=Math.round(f*i);n=Math.min(n,y(o[0].dts,p)-g),r=Math.min(r,p-g),this.observer.trigger(m.default.INIT_PTS_FOUND,{initPTS:r})}}else h&&d.audio&&this.observer.trigger(m.default.INIT_PTS_FOUND,{initPTS:r});Object.keys(d).length?(a.trigger(m.default.FRAG_PARSING_INIT_SEGMENT,c),this.ISGenerated=!0,h&&(this._initPTS=r,this._initDTS=n)):a.trigger(m.default.ERROR,{type:L.ErrorTypes.MEDIA_ERROR,details:L.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},e.remuxVideo=function(t,e,i,r){var n,a,s,o,l,u=t.timescale,d=t.samples,c=[],h=d.length,f=this._initPTS,g=8,v=Number.POSITIVE_INFINITY,w=Number.NEGATIVE_INFINITY,T=0,b=!1,M=this.nextAvcDts;if(0!==h){i||(M=e*u-(d[0].pts-y(d[0].dts,d[0].pts)));for(var S=0;S<h;S++){var C=d[S];C.pts=y(C.pts-f,M),C.dts=y(C.dts-f,M),C.dts>C.pts&&(T=Math.max(Math.min(T,C.pts-C.dts),-1*V)),C.dts<d[S>0?S-1:S].dts&&(b=!0)}b&&d.sort(function(t,e){var i=t.dts-e.dts,r=t.pts-e.pts;return i||r||t.id-e.id}),o=d[0].dts,l=d[h-1].dts;var A=Math.round((l-o)/(h-1));if(T<0){if(T<-2*A){E.logger.warn("PTS < DTS detected in video samples, offsetting DTS from PTS by "+p(-A,!0)+" ms");for(var _=T,x=0;x<h;x++)d[x].dts=_=Math.max(_,d[x].pts-A),d[x].pts=Math.max(_,d[x].pts)}else{E.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+p(T,!0)+" ms to overcome this issue");for(var k=0;k<h;k++)d[k].dts=d[k].dts+T}o=d[0].dts,l=d[h-1].dts}if(i){var D=o-M,R=D>A,N=D<-1;if(R||N){R?E.logger.warn("AVC: "+p(D,!0)+" ms ("+D+"dts) hole between fragments detected, filling it"):E.logger.warn("AVC: "+p(-D,!0)+" ms ("+D+"dts) overlapping between fragments detected"),o=M;var I=d[0].pts-D;d[0].dts=o,d[0].pts=I,E.logger.log("Video: First PTS/DTS adjusted: "+p(I,!0)+"/"+p(o,!0)+", delta: "+p(D,!0)+" ms")}}W&&W<75&&(o=Math.max(0,o));for(var j=0,O=0,P=0;P<h;P++){for(var F=d[P],U=F.units,B=U.length,z=0,Y=0;Y<B;Y++)z+=U[Y].data.length;O+=z,j+=B,F.length=z,F.dts=Math.max(F.dts,o),F.pts=Math.max(F.pts,F.dts,0),v=Math.min(F.pts,v),w=Math.max(F.pts,w)}l=d[h-1].dts;var H=O+4*j+8;try{a=new Uint8Array(H)}catch(t){return void this.observer.trigger(m.default.ERROR,{type:L.ErrorTypes.MUX_ERROR,details:L.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:H,reason:"fail allocating video mdat "+H})}var K=new DataView(a.buffer);K.setUint32(0,H),a.set(G.types.mdat,4);for(var q=0;q<h;q++){for(var Q=d[q],X=Q.units,J=0,Z=void 0,$=0,tt=X.length;$<tt;$++){var et=X[$],it=et.data,rt=et.data.byteLength;K.setUint32(g,rt),g+=4,a.set(it,g),g+=rt,J+=4+rt}if(q<h-1)n=d[q+1].dts-Q.dts;else{var nt=this.config,at=Q.dts-d[q>0?q-1:q].dts;if(nt.stretchShortVideoTrack){var st=nt.maxBufferHole,ot=Math.floor(st*u),lt=(r?v+r*u:this.nextAudioPts)-Q.pts;lt>ot?(n=lt-at,n<0&&(n=at),E.logger.log("It is approximately "+p(lt,!1)+" ms to the next segment; using duration "+p(n,!1)+" ms for the last video frame.")):n=at}else n=at}Z=Math.round(Q.pts-Q.dts),c.push({size:J,duration:n,cts:Z,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:Q.key?2:1,isNonSync:Q.key?0:1}})}this.nextAvcDts=l+n;var ut=t.dropped;if(t.nbNalu=0,t.dropped=0,c.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var dt=c[0].flags;dt.dependsOn=2,dt.isNonSync=0}t.samples=c,s=G.moof(t.sequenceNumber++,o,t),t.samples=[];var ct={data1:s,data2:a,startPTS:v/u,endPTS:(w+n)/u,startDTS:o/u,endDTS:this.nextAvcDts/u,type:"video",hasAudio:!1,hasVideo:!0,nb:c.length,dropped:ut};return this.observer.trigger(m.default.FRAG_PARSING_DATA,ct),ct}},e.remuxAudio=function(t,e,i,r){var n,a,s,o,l,u,d=t.inputTimeScale,c=t.timescale,h=d/c,f=t.isAAC?1024:1152,g=f*h,v=this._initPTS,w=!t.isAAC&&this.typeSupported.mpeg,T=w?0:8,b=t.samples,M=[],S=this.nextAudioPts;if(i|=b.length&&S&&(r&&Math.abs(e-S/d)<.1||Math.abs(b[0].pts-S-v)<20*g),b.forEach(function(t){t.pts=t.dts=y(t.pts-v,e*d)}),b=b.filter(function(t){return t.pts>=0}),0!==b.length){if(i||(S=r?Math.max(0,e*d):b[0].pts),t.isAAC)for(var C=this.config.maxAudioFramesDrift,A=0,_=S;A<b.length;){var x=b[A],k=x.pts,D=k-_;if(D<=-C*g)i||A>0?(E.logger.warn("Dropping 1 audio frame @ "+p(_,!0)/1e3+"s due to "+p(D,!0)+" ms overlap."),b.splice(A,1)):(E.logger.warn("Audio frame @ "+p(k,!0)/1e3+"s overlaps nextAudioPts by "+p(D,!0)+" ms."),_=k+g,A++);else if(D>=C*g&&D<K&&_){var R=Math.round(D/g);E.logger.warn("Injecting "+R+" audio frames @ "+p(_,!0)/1e3+"s due to "+p(D,!0)+" ms gap.");for(var N=0;N<R;N++){var I=Math.max(_,0);a=B.getSilentFrame(t.manifestCodec||t.codec,t.channelCount),a||(E.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),a=x.unit.subarray()),b.splice(A,0,{unit:a,pts:I,dts:I}),_+=g,A++}x.pts=x.dts=_,_+=g,A++}else Math.abs(D),x.pts=x.dts=_,_+=g,A++}for(var j=b.length,O=0;j--;)O+=b[j].unit.byteLength;for(var P=0,F=b.length;P<F;P++){var U=b[P],z=U.unit,Y=U.pts;if(void 0!==u&&n)n.duration=Math.round((Y-u)/h);else{var H=Y-S,V=0;if(i&&t.isAAC&&H){if(H>0&&H<K)V=Math.round((Y-S)/g),E.logger.log(p(H,!0)+" ms hole between AAC samples detected,filling it"),V>0&&(a=B.getSilentFrame(t.manifestCodec||t.codec,t.channelCount),a||(a=z.subarray()),O+=V*a.length);else if(H<-12){E.logger.log("drop overlapping AAC sample, expected/parsed/delta: "+p(S,!0)+" ms / "+p(Y,!0)+" ms / "+p(-H,!0)+" ms"),O-=z.byteLength;continue}Y=S}if(l=Y,!(O>0))return;O+=T;try{s=new Uint8Array(O)}catch(t){return void this.observer.trigger(m.default.ERROR,{type:L.ErrorTypes.MUX_ERROR,details:L.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:O,reason:"fail allocating audio mdat "+O})}w||(new DataView(s.buffer).setUint32(0,O),s.set(G.types.mdat,4));for(var W=0;W<V;W++)a=B.getSilentFrame(t.manifestCodec||t.codec,t.channelCount),a||(E.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),a=z.subarray()),s.set(a,T),T+=a.byteLength,n={size:a.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},M.push(n)}s.set(z,T);var q=z.byteLength;T+=q,n={size:q,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},M.push(n),u=Y}var Q=0;if(j=M.length,j>=2&&(Q=M[j-2].duration,n.duration=Q),j){this.nextAudioPts=S=u+h*Q,t.samples=M,o=w?new Uint8Array:G.moof(t.sequenceNumber++,l/h,t),t.samples=[];var X=l/d,J=S/d,Z={data1:o,data2:s,startPTS:X,endPTS:J,startDTS:X,endDTS:J,type:"audio",hasAudio:!0,hasVideo:!1,nb:j};return this.observer.trigger(m.default.FRAG_PARSING_DATA,Z),Z}return null}},e.remuxEmptyAudio=function(t,e,i,r){var n=t.inputTimeScale,a=t.samplerate?t.samplerate:n,s=n/a,o=this.nextAudioPts,l=(void 0!==o?o:r.startDTS*n)+this._initDTS,u=r.endDTS*n+this._initDTS,d=1024*s,c=Math.ceil((u-l)/d),h=B.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(E.logger.warn("remux empty Audio"),!h)return void E.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!");for(var f=[],p=0;p<c;p++){var g=l+p*d;f.push({unit:h,pts:g,dts:g})}t.samples=f,this.remuxAudio(t,e,i)},e.remuxID3=function(t,e){var i=t.samples.length;if(i){for(var r=t.inputTimeScale,n=this._initPTS,a=this._initDTS,s=0;s<i;s++){var o=t.samples[s];o.pts=y(o.pts-n,e*r)/r,o.dts=y(o.dts-a,e*r)/r}this.observer.trigger(m.default.FRAG_PARSING_METADATA,{samples:t.samples}),t.samples=[]}},e.remuxText=function(t,e){var i=t.samples.length,r=t.inputTimeScale,n=this._initPTS;if(i){for(var a=0;a<i;a++){var s=t.samples[a];s.pts=y(s.pts-n,e*r)/r}t.samples.sort(function(t,e){return t.pts-e.pts}),this.observer.trigger(m.default.FRAG_PARSING_USERDATA,{samples:t.samples})}t.samples=[]},t}(),Q=q,X=function(){function t(t){this.observer=t}var e=t.prototype;return e.destroy=function(){},e.resetTimeStamp=function(){},e.resetInitSegment=function(){},e.remux=function(t,e,i,r,n,a,s,o){var l=this.observer,u="";t&&(u+="audio"),e&&(u+="video"),l.trigger(m.default.FRAG_PARSING_DATA,{data1:o,startPTS:n,startDTS:n,type:u,hasAudio:!!t,hasVideo:!!e,nb:1,dropped:0}),l.trigger(m.default.FRAG_PARSED)},t}(),J=X,Z=Object(b.getSelfScope)();try{v=Z.performance.now.bind(Z.performance)}catch(t){E.logger.debug("Unable to use Performance API on this environment"),v=Z.Date.now}var $=function(){function t(t,e,i,r){this.observer=t,this.typeSupported=e,this.config=i,this.vendor=r}var e=t.prototype;return e.destroy=function(){var t=this.demuxer;t&&t.destroy()},e.push=function(t,e,i,r,n,a,s,o,l,u,d,c){var h=this;if(t.byteLength>0&&null!=e&&null!=e.key&&"AES-128"===e.method){var f=this.decrypter;null==f&&(f=this.decrypter=new w.default(this.observer,this.config));var p=v();f.decrypt(t,e.key.buffer,e.iv.buffer,function(t){var f=v();h.observer.trigger(m.default.FRAG_DECRYPTED,{stats:{tstart:p,tdecrypt:f}}),h.pushDecrypted(new Uint8Array(t),e,new Uint8Array(i),r,n,a,s,o,l,u,d,c)})}else this.pushDecrypted(new Uint8Array(t),e,new Uint8Array(i),r,n,a,s,o,l,u,d,c)},e.pushDecrypted=function(t,e,i,r,n,a,s,o,l,u,d,c){var h=this.demuxer,f=this.remuxer;if(!h||s||o){for(var p,g=this.observer,y=this.typeSupported,v=this.config,w=[{demux:O,remux:Q},{demux:A.default,remux:J},{demux:C,remux:Q},{demux:F,remux:Q}],T=0,E=w.length;T<E&&(p=w[T],!p.demux.probe(t));T++);if(!p)return void g.trigger(m.default.ERROR,{type:L.ErrorTypes.MEDIA_ERROR,details:L.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});f&&f instanceof p.remux||(f=new p.remux(g,v,y,this.vendor)),h&&h instanceof p.demux||(h=new p.demux(g,f,v,y),this.probe=p.demux.probe),this.demuxer=h,this.remuxer=f}(s||o)&&(h.resetInitSegment(i,r,n,u),f.resetInitSegment()),s&&(h.resetTimeStamp(c),f.resetTimeStamp(c)),"function"==typeof h.setDecryptData&&h.setDecryptData(e),h.append(t,a,l,d)},t}();e.default=$},"./src/demux/demuxer-worker.js":/*!*************************************!*\
  !*** ./src/demux/demuxer-worker.js ***!
  \*************************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Module is referenced from these modules with unsupported syntax: ./src/demux/demuxer.js (referenced with require.resolve) */
function(t,e,i){"use strict";i.r(e);var r=i(/*! ../demux/demuxer-inline */"./src/demux/demuxer-inline.js"),n=i(/*! ../events */"./src/events.js"),a=i(/*! ../utils/logger */"./src/utils/logger.js"),s=i(/*! eventemitter3 */"./node_modules/eventemitter3/index.js"),o=function(t){var e=new s.EventEmitter;e.trigger=function(t){for(var i=arguments.length,r=new Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];e.emit.apply(e,[t,t].concat(r))},e.off=function(t){for(var i=arguments.length,r=new Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];e.removeListener.apply(e,[t].concat(r))};var i=function(e,i){t.postMessage({event:e,data:i})};t.addEventListener("message",function(n){var s=n.data;switch(s.cmd){case"init":var o=JSON.parse(s.config);t.demuxer=new r.default(e,s.typeSupported,o,s.vendor),Object(a.enableLogs)(o.debug),i("init",null);break;case"demux":t.demuxer.push(s.data,s.decryptdata,s.initSegment,s.audioCodec,s.videoCodec,s.timeOffset,s.discontinuity,s.trackSwitch,s.contiguous,s.duration,s.accurateTimeOffset,s.defaultInitPTS)}}),e.on(n.default.FRAG_DECRYPTED,i),e.on(n.default.FRAG_PARSING_INIT_SEGMENT,i),e.on(n.default.FRAG_PARSED,i),e.on(n.default.ERROR,i),e.on(n.default.FRAG_PARSING_METADATA,i),e.on(n.default.FRAG_PARSING_USERDATA,i),e.on(n.default.INIT_PTS_FOUND,i),e.on(n.default.FRAG_PARSING_DATA,function(e,i){var r=[],n={event:e,data:i};i.data1&&(n.data1=i.data1.buffer,r.push(i.data1.buffer),delete i.data1),i.data2&&(n.data2=i.data2.buffer,r.push(i.data2.buffer),delete i.data2),t.postMessage(n,r)})};e.default=o},"./src/demux/id3.js":/*!**************************!*\
  !*** ./src/demux/id3.js ***!
  \**************************/
/*! exports provided: default, utf8ArrayToStr */
function(t,e,i){"use strict";function r(){var t=Object(a.getSelfScope)();return n||void 0===t.TextDecoder||(n=new t.TextDecoder("utf-8")),n}i.r(e),i.d(e,"utf8ArrayToStr",function(){return o});var n,a=i(/*! ../utils/get-self-scope */"./src/utils/get-self-scope.js"),s=function(){function t(){}return t.isHeader=function(t,e){return e+10<=t.length&&73===t[e]&&68===t[e+1]&&51===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},t.isFooter=function(t,e){return e+10<=t.length&&51===t[e]&&68===t[e+1]&&73===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},t.getID3Data=function(e,i){for(var r=i,n=0;t.isHeader(e,i);)n+=10,n+=t._readSize(e,i+6),t.isFooter(e,i+10)&&(n+=10),i+=n;if(n>0)return e.subarray(r,r+n)},t._readSize=function(t,e){var i=0;return i=(127&t[e])<<21,i|=(127&t[e+1])<<14,i|=(127&t[e+2])<<7,i|=127&t[e+3]},t.getTimeStamp=function(e){for(var i=t.getID3Frames(e),r=0;r<i.length;r++){var n=i[r];if(t.isTimeStampFrame(n))return t._readTimeStamp(n)}},t.isTimeStampFrame=function(t){return t&&"PRIV"===t.key&&"com.apple.streaming.transportStreamTimestamp"===t.info},t._getFrameData=function(e){var i=String.fromCharCode(e[0],e[1],e[2],e[3]),r=t._readSize(e,4);return{type:i,size:r,data:e.subarray(10,10+r)}},t.getID3Frames=function(e){for(var i=0,r=[];t.isHeader(e,i);){var n=t._readSize(e,i+6);i+=10;for(var a=i+n;i+8<a;){var s=t._getFrameData(e.subarray(i)),o=t._decodeFrame(s);o&&r.push(o),i+=s.size+10}t.isFooter(e,i)&&(i+=10)}return r},t._decodeFrame=function(e){return"PRIV"===e.type?t._decodePrivFrame(e):"T"===e.type[0]?t._decodeTextFrame(e):"W"===e.type[0]?t._decodeURLFrame(e):void 0},t._readTimeStamp=function(t){if(8===t.data.byteLength){var e=new Uint8Array(t.data),i=1&e[3],r=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return r/=45,i&&(r+=47721858.84),Math.round(r)}},t._decodePrivFrame=function(e){if(!(e.size<2)){var i=t._utf8ArrayToStr(e.data,!0),r=new Uint8Array(e.data.subarray(i.length+1));return{key:e.type,info:i,data:r.buffer}}},t._decodeTextFrame=function(e){if(!(e.size<2)){if("TXXX"===e.type){var i=1,r=t._utf8ArrayToStr(e.data.subarray(i),!0);i+=r.length+1;var n=t._utf8ArrayToStr(e.data.subarray(i));return{key:e.type,info:r,data:n}}var a=t._utf8ArrayToStr(e.data.subarray(1));return{key:e.type,data:a}}},t._decodeURLFrame=function(e){if("WXXX"===e.type){if(e.size<2)return;var i=1,r=t._utf8ArrayToStr(e.data.subarray(i),!0);i+=r.length+1;var n=t._utf8ArrayToStr(e.data.subarray(i));return{key:e.type,info:r,data:n}}var a=t._utf8ArrayToStr(e.data);return{key:e.type,data:a}},t._utf8ArrayToStr=function(t,e){void 0===e&&(e=!1);var i=r();if(i){var n=i.decode(t);if(e){var a=n.indexOf("\0");return-1!==a?n.substring(0,a):n}return n.replace(/\0/g,"")}for(var s,o,l,u=t.length,d="",c=0;c<u;){if(0===(s=t[c++])&&e)return d;if(0!==s&&3!==s)switch(s>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:d+=String.fromCharCode(s);break;case 12:case 13:o=t[c++],d+=String.fromCharCode((31&s)<<6|63&o);break;case 14:o=t[c++],l=t[c++],d+=String.fromCharCode((15&s)<<12|(63&o)<<6|(63&l)<<0)}}return d},t}(),o=s._utf8ArrayToStr;e.default=s},"./src/demux/mp4demuxer.js":/*!*********************************!*\
  !*** ./src/demux/mp4demuxer.js ***!
  \*********************************/
/*! exports provided: default */
function(t,e,i){"use strict";i.r(e);var r=i(/*! ../utils/logger */"./src/utils/logger.js"),n=i(/*! ../events */"./src/events.js"),a=Math.pow(2,32)-1,s=function(){function t(t,e){this.observer=t,this.remuxer=e}var e=t.prototype;return e.resetTimeStamp=function(t){this.initPTS=t},e.resetInitSegment=function(e,i,r,a){if(e&&e.byteLength){var s=this.initData=t.parseInitSegment(e);null==i&&(i="mp4a.40.5"),null==r&&(r="avc1.42e01e");var o={};s.audio&&s.video?o.audiovideo={container:"video/mp4",codec:i+","+r,initSegment:a?e:null}:(s.audio&&(o.audio={container:"audio/mp4",codec:i,initSegment:a?e:null}),s.video&&(o.video={container:"video/mp4",codec:r,initSegment:a?e:null})),this.observer.trigger(n.default.FRAG_PARSING_INIT_SEGMENT,{tracks:o})}else i&&(this.audioCodec=i),r&&(this.videoCodec=r)},t.probe=function(e){return t.findBox({data:e,start:0,end:Math.min(e.length,16384)},["moof"]).length>0},t.bin2str=function(t){return String.fromCharCode.apply(null,t)},t.readUint16=function(t,e){t.data&&(e+=t.start,t=t.data);var i=t[e]<<8|t[e+1];return i<0?65536+i:i},t.readUint32=function(t,e){t.data&&(e+=t.start,t=t.data);var i=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3];return i<0?4294967296+i:i},t.writeUint32=function(t,e,i){t.data&&(e+=t.start,t=t.data),t[e]=i>>24,t[e+1]=i>>16&255,t[e+2]=i>>8&255,t[e+3]=255&i},t.findBox=function(e,i){var r,n,a,s,o,l,u,d=[];if(e.data?(l=e.start,s=e.end,e=e.data):(l=0,s=e.byteLength),!i.length)return null;for(r=l;r<s;)n=t.readUint32(e,r),a=t.bin2str(e.subarray(r+4,r+8)),u=n>1?r+n:s,a===i[0]&&(1===i.length?d.push({data:e,start:r+8,end:u}):(o=t.findBox({data:e,start:r+8,end:u},i.slice(1)),o.length&&(d=d.concat(o)))),r=u;return d},t.parseSegmentIndex=function(e){var i,r=t.findBox(e,["moov"])[0],n=r?r.end:null,a=0,s=t.findBox(e,["sidx"]);if(!s||!s[0])return null;i=[],s=s[0];var o=s.data[0];a=0===o?8:16;var l=t.readUint32(s,a);a+=4,a+=0===o?8:16,a+=2;var u=s.end+0,d=t.readUint16(s,a);a+=2;for(var c=0;c<d;c++){var h=a,f=t.readUint32(s,h);h+=4;var p=2147483647&f;if(1==(2147483648&f)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");var g=t.readUint32(s,h);h+=4,i.push({referenceSize:p,subsegmentDuration:g,info:{duration:g/l,start:u,end:u+p-1}}),u+=p,h+=4,a=h}return{earliestPresentationTime:0,timescale:l,version:o,referencesCount:d,references:i,moovEndOffset:n}},t.parseInitSegment=function(e){var i=[];return t.findBox(e,["moov","trak"]).forEach(function(e){var n=t.findBox(e,["tkhd"])[0];if(n){var a=n.data[n.start],s=0===a?12:20,o=t.readUint32(n,s),l=t.findBox(e,["mdia","mdhd"])[0];if(l){a=l.data[l.start],s=0===a?12:20;var u=t.readUint32(l,s),d=t.findBox(e,["mdia","hdlr"])[0];if(d){var c=t.bin2str(d.data.subarray(d.start+8,d.start+12)),h={soun:"audio",vide:"video"}[c];if(h){var f=t.findBox(e,["mdia","minf","stbl","stsd"]);if(f.length){f=f[0];var p=t.bin2str(f.data.subarray(f.start+12,f.start+16));r.logger.log("MP4Demuxer:"+h+":"+p+" found")}i[o]={timescale:u,type:h},i[h]={timescale:u,id:o}}}}}}),i},t.getStartDTS=function(e,i){var r,n,a;return r=t.findBox(i,["moof","traf"]),n=[].concat.apply([],r.map(function(i){return t.findBox(i,["tfhd"]).map(function(r){var n,a;return n=t.readUint32(r,4),a=e[n].timescale||9e4,t.findBox(i,["tfdt"]).map(function(e){var i,r;return i=e.data[e.start],r=t.readUint32(e,4),1===i&&(r*=Math.pow(2,32),r+=t.readUint32(e,8)),r})[0]/a})})),a=Math.min.apply(null,n),isFinite(a)?a:0},t.offsetStartDTS=function(e,i,r){t.findBox(i,["moof","traf"]).map(function(i){return t.findBox(i,["tfhd"]).map(function(n){var s=t.readUint32(n,4),o=e[s].timescale||9e4;t.findBox(i,["tfdt"]).map(function(e){var i=e.data[e.start],n=t.readUint32(e,4);if(0===i)t.writeUint32(e,4,n-r*o);else{n*=Math.pow(2,32),n+=t.readUint32(e,8),n-=r*o,n=Math.max(n,0);var s=Math.floor(n/(a+1)),l=Math.floor(n%(a+1));t.writeUint32(e,4,s),t.writeUint32(e,8,l)}})})})},e.append=function(e,i,r,a){var s=this.initData;s||(this.resetInitSegment(e,this.audioCodec,this.videoCodec,!1),s=this.initData);var o,l=this.initPTS;if(void 0===l){var u=t.getStartDTS(s,e);this.initPTS=l=u-i,this.observer.trigger(n.default.INIT_PTS_FOUND,{initPTS:l})}t.offsetStartDTS(s,e,l),o=t.getStartDTS(s,e),this.remuxer.remux(s.audio,s.video,null,null,o,r,a,e)},e.destroy=function(){},t}();e.default=s},"./src/errors.ts":/*!***********************!*\
  !*** ./src/errors.ts ***!
  \***********************/
/*! exports provided: ErrorTypes, ErrorDetails */
function(t,e,i){"use strict";i.r(e),i.d(e,"ErrorTypes",function(){return r}),i.d(e,"ErrorDetails",function(){return n});var r;!function(t){t.NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError"}(r||(r={}));var n;!function(t){t.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_EMPTY_ERROR="levelEmptyError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.INTERNAL_EXCEPTION="internalException"}(n||(n={}))},"./src/events.js":/*!***********************!*\
  !*** ./src/events.js ***!
  \***********************/
/*! exports provided: default */
function(t,e,i){"use strict";i.r(e);var r={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",LEVELS_UPDATED:"hlsLevelsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",CUES_PARSED:"hlsCuesParsed",NON_NATIVE_TEXT_TRACKS_FOUND:"hlsNonNativeTextTracksFound",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition",LIVE_BACK_BUFFER_REACHED:"hlsLiveBackBufferReached"};e.default=r},"./src/hls.ts":/*!*********************************!*\
  !*** ./src/hls.ts + 50 modules ***!
  \*********************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Cannot concat with ./src/crypt/decrypter.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/demuxer-inline.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/id3.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/mp4demuxer.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/errors.ts because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/events.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/polyfills/number.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/get-self-scope.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/logger.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/eventemitter3/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/url-toolkit/src/url-toolkit.js (<- Module is not an ECMAScript module) */
function(t,e,i){"use strict";function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}function a(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,i){return e&&a(t.prototype,e),i&&a(t,i),t}function o(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),t}function u(t,e){var i=ge[e];return!!i&&!0===i[t.slice(0,4)]}function d(t,e){return MediaSource.isTypeSupported((e||"video")+'/mp4;codecs="'+t+'"')}function c(t,e){for(var i=t[e],r=e-1;r>=0;r--){var n=t[r];n.programDateTime=i.programDateTime-1e3*n.duration,i=n}}function h(t,e){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):(null===e||void 0===e?void 0:e.programDateTime)&&(t.programDateTime=e.endProgramDateTime),Object(Zt.isFiniteNumber)(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}function f(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function p(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function g(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function y(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function v(){return window.MediaSource||window.WebKitMediaSource}function m(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function L(t,e,i){switch(e){case"audio":t.audioGroupIds||(t.audioGroupIds=[]),t.audioGroupIds.push(i);break;case"text":t.textGroupIds||(t.textGroupIds=[]),t.textGroupIds.push(i)}}function w(t,e,i){var r=t[e],n=t[i],a=n.startPTS;if(Object(Zt.isFiniteNumber)(a))i>e?(r.duration=a-r.start,r.duration<0&&te.logger.warn("negative duration computed for frag "+r.sn+",level "+r.level+", there should be some duration drift between playlist and fragment!")):(n.duration=r.start-a,n.duration<0&&te.logger.warn("negative duration computed for frag "+n.sn+",level "+n.level+", there should be some duration drift between playlist and fragment!"));else if(i>e){var s=r.cc===n.cc;n.start=r.start+(s&&r.minEndPTS?r.minEndPTS-r.start:r.duration)}else n.start=Math.max(r.start-n.duration,0)}function T(t,e,i,r,n,a){var s=i,o=r;if(Object(Zt.isFiniteNumber)(e.startPTS)){var l=Math.abs(e.startPTS-i);Object(Zt.isFiniteNumber)(e.deltaPTS)?e.deltaPTS=Math.max(l,e.deltaPTS):e.deltaPTS=l,s=Math.max(i,e.startPTS),i=Math.min(i,e.startPTS),o=Math.min(r,e.endPTS),r=Math.max(r,e.endPTS),n=Math.min(n,e.startDTS),a=Math.max(a,e.endDTS)}var u=i-e.start;e.start=e.startPTS=i,e.maxStartPTS=s,e.endPTS=r,e.minEndPTS=o,e.startDTS=n,e.endDTS=a,e.duration=r-i;var d=e.sn;if(!t||d<t.startSN||d>t.endSN)return 0;var c,h,f;for(c=d-t.startSN,h=t.fragments,h[c]=e,f=c;f>0;f--)w(h,f,f-1);for(f=c;f<h.length-1;f++)w(h,f,f+1);return t.PTSKnown=!0,u}function E(t,e){e.initSegment&&t.initSegment&&(e.initSegment=t.initSegment);var i,r=0;if(M(t,e,function(t,n){r=t.cc-n.cc,Object(Zt.isFiniteNumber)(t.startPTS)&&(n.start=n.startPTS=t.startPTS,n.endPTS=t.endPTS,n.duration=t.duration,n.backtracked=t.backtracked,n.dropped=t.dropped,i=n),e.PTSKnown=!0}),e.PTSKnown){if(r){te.logger.log("discontinuity sliding from playlist, take drift into account");for(var n=e.fragments,a=0;a<n.length;a++)n[a].cc+=r}i?T(e,i,i.startPTS,i.endPTS,i.startDTS,i.endDTS):S(t,e),e.PTSKnown=t.PTSKnown}}function b(t,e,i){void 0===i&&(i=0);var r=-1;M(t,e,function(t,e,i){e.start=t.start,r=i});var n=e.fragments;if(r<0)return void n.forEach(function(t){t.start+=i});for(var a=r+1;a<n.length;a++)n[a].start=n[a-1].start+n[a-1].duration}function M(t,e,i){if(t&&e)for(var r=Math.max(t.startSN,e.startSN)-e.startSN,n=Math.min(t.endSN,e.endSN)-e.startSN,a=e.startSN-t.startSN,s=r;s<=n;s++){var o=t.fragments[a+s],l=e.fragments[s];if(!o||!l)break;i(o,l,s)}}function S(t,e){var i=e.startSN-t.startSN,r=t.fragments,n=e.fragments;if(!(i<0||i>r.length))for(var a=0;a<n.length;a++)n[a].start+=r[i].start}function C(t,e,i){var r=1e3*(e.averagetargetduration?e.averagetargetduration:e.targetduration),n=r/2;return t&&e.endSN===t.endSN&&(r=n),i&&(r=Math.max(n,r-(window.performance.now()-i))),Math.round(r)}function A(t,e){for(var i=null,r=0;r<t.length;r+=1){var n=t[r];if(n&&n.cc===e){i=n;break}}return i}function _(t,e){return Ne.search(t,function(t){return t.cc<e?1:t.cc>e?-1:0})}function x(t,e,i){var r=!1;return e&&e.details&&i&&(i.endCC>i.startCC||t&&t.cc<i.startCC)&&(r=!0),r}function k(t,e){var i=t.fragments,r=e.fragments;if(!r.length||!i.length)return void te.logger.log("No fragments to align");var n=A(i,r[0].cc);return!n||n&&!n.startPTS?void te.logger.log("No frag in previous level to align on"):n}function D(t,e){e.fragments.forEach(function(e){if(e){var i=e.start+t;e.start=e.startPTS=i,e.endPTS=i+e.duration}}),e.PTSKnown=!0}function R(t,e,i){N(t,i,e),!i.PTSKnown&&e&&I(i,e.details)}function N(t,e,i){if(x(t,i,e)){var r=k(i.details,e);r&&(te.logger.log("Adjusting PTS using last level due to CC increase within current level"),D(r.start,e))}}function I(t,e){if(e&&e.fragments.length){if(!t.hasProgramDateTime||!e.hasProgramDateTime)return;var i=e.fragments[0].programDateTime,r=t.fragments[0].programDateTime,n=(r-i)/1e3+e.fragments[0].start;Object(Zt.isFiniteNumber)(n)&&(te.logger.log("adjusting PTS using programDateTime delta, sliding:"+n.toFixed(3)),D(n,t))}}function j(t,e,i){if(null===e||!Array.isArray(t)||!t.length||!Object(Zt.isFiniteNumber)(e))return null;if(e<(t[0].programDateTime||0))return null;if(e>=(t[t.length-1].endProgramDateTime||0))return null;i=i||0;for(var r=0;r<t.length;++r){var n=t[r];if(F(e,i,n))return n}return null}function O(t,e,i,r){void 0===i&&(i=0),void 0===r&&(r=0);var n=null;return t?n=e[t.sn-e[0].sn+1]:0===i&&0===e[0].start&&(n=e[0]),n&&0===P(i,r,n)?n:Ne.search(e,P.bind(null,i,r))||n}function P(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0);var r=Math.min(e,i.duration+(i.deltaPTS?i.deltaPTS:0));return i.start+i.duration-r<=t?1:i.start-r>t&&i.start?-1:0}function F(t,e,i){var r=1e3*Math.min(e,i.duration+(i.deltaPTS?i.deltaPTS:0));return(i.endProgramDateTime||0)-r>t}function U(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function B(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function z(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Y(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function G(t,e,i){return e&&Y(t.prototype,e),i&&Y(t,i),t}function H(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function K(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function V(t,e,i){return e&&K(t.prototype,e),i&&K(t,i),t}function W(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function q(t,e){var i;try{i=new Event("addtrack")}catch(t){i=document.createEvent("Event"),i.initEvent("addtrack",!1,!1)}i.track=t,e.dispatchEvent(i)}function Q(t){if(null===t||void 0===t?void 0:t.cues)for(;t.cues.length>0;)t.removeCue(t.cues[0])}function X(t,e){if(e<t[0].endTime)return t[0];if(e>t[t.length-1].endTime)return t[t.length-1];for(var i=0,r=t.length-1;i<=r;){var n=Math.floor((r+i)/2);if(e<t[n].endTime)r=n-1;else{if(!(e>t[n].endTime))return t[n];i=n+1}}return t[i].endTime-e<e-t[r].endTime?t[i]:t[r]}function J(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Z(){var t=v();if(!t)return!1;var e=self.SourceBuffer||self.WebKitSourceBuffer,i=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),r=!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove;return!!i&&!!r}function $(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function tt(t,e,i){return e&&$(t.prototype,e),i&&$(t,i),t}function et(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function it(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function rt(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function nt(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function at(t,e,i){return e&&nt(t.prototype,e),i&&nt(t,i),t}function st(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function ot(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function lt(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ut(t,e,i){return e&&lt(t.prototype,e),i&&lt(t,i),t}function dt(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function ct(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ht(t,e,i){return e&&ct(t.prototype,e),i&&ct(t,i),t}function ft(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function pt(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new _i,this.regionList=[]}function gt(t){function e(t,e,i,r){return 3600*(0|t)+60*(0|e)+(0|i)+(0|r)/1e3}var i=t.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return i?i[3]?e(i[1],i[2],i[3].replace(":",""),i[4]):i[1]>59?e(i[1],i[2],0,i[4]):e(0,i[1],i[2],i[4]):null}function yt(){this.values=Object.create(null)}function vt(t,e,i,r){var n=r?t.split(r):[t];for(var a in n)if("string"==typeof n[a]){var s=n[a].split(i);if(2===s.length){var o=s[0],l=s[1];e(o,l)}}}function mt(t,e,i){function r(){var e=gt(t);if(null===e)throw new Error("Malformed timestamp: "+a);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function n(){t=t.replace(/^\s+/,"")}var a=t;if(n(),e.startTime=r(),n(),"--\x3e"!==t.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+a);t=t.substr(3),n(),e.endTime=r(),n(),function(t,e){var r=new yt;vt(t,function(t,e){switch(t){case"region":for(var n=i.length-1;n>=0;n--)if(i[n].id===e){r.set(t,i[n].region);break}break;case"vertical":r.alt(t,e,["rl","lr"]);break;case"line":var a=e.split(","),s=a[0];r.integer(t,s),r.percent(t,s)&&r.set("snapToLines",!1),r.alt(t,s,["auto"]),2===a.length&&r.alt("lineAlign",a[1],["start",ki,"end"]);break;case"position":a=e.split(","),r.percent(t,a[0]),2===a.length&&r.alt("positionAlign",a[1],["start",ki,"end","line-left","line-right","auto"]);break;case"size":r.percent(t,e);break;case"align":r.alt(t,e,["start",ki,"end","left","right"])}},/:/,/\s/),e.region=r.get("region",null),e.vertical=r.get("vertical","");var n=r.get("line","auto");"auto"===n&&-1===xi.line&&(n=-1),e.line=n,e.lineAlign=r.get("lineAlign","start"),e.snapToLines=r.get("snapToLines",!0),e.size=r.get("size",100),e.align=r.get("align",ki);var a=r.get("position","auto");"auto"===a&&50===xi.position&&(a="start"===e.align||"left"===e.align?0:"end"===e.align||"right"===e.align?100:50),e.position=a}(t,e)}function Lt(t){return t.replace(/<br(?: \/)?>/gi,"\n")}function wt(t,e,i,r){for(var n,a,s,o,l,u=[],d=window.VTTCue||TextTrackCue,c=0;c<r.rows.length;c++)if(n=r.rows[c],s=!0,o=0,l="",!n.isEmpty()){for(var h=0;h<n.chars.length;h++)n.chars[h].uchar.match(/\s/)&&s?o++:(l+=n.chars[h].uchar,s=!1);n.cueStartTime=e,e===i&&(i+=1e-4),a=new d(e,i,Lt(l.trim())),o>=16?o--:o++,navigator.userAgent.match(/Firefox\//)?a.line=c+1:a.line=c>7?c-2:c+1,a.align="left",a.position=Math.max(0,Math.min(100,o/32*100)),u.push(a),t&&t.addCue(a)}return u}function Tt(t,e,i){i.a=t,i.b=e}function Et(t,e,i){return i.a===t&&i.b===e}function bt(){return{a:null,b:null}}function Mt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function St(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Ct(t,e){return t&&t.label===e.name&&!(t.textTrack1||t.textTrack2)}function At(t,e,i,r){return Math.min(e,r)-Math.max(t,i)}function _t(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}}}function xt(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function kt(t,e,i){return e&&xt(t.prototype,e),i&&xt(t,i),t}function Dt(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Rt(t){for(var e=[],i=0;i<t.length;i++){var r=t[i];"subtitles"===r.kind&&r.label&&e.push(t[i])}return e}function Nt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function It(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function jt(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ot(t,e,i){return e&&jt(t.prototype,e),i&&jt(t,i),t}function Pt(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Ft(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)}return i}function Ut(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ft(Object(i),!0).forEach(function(e){Bt(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ft(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function Bt(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function zt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)}return i}function Yt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?zt(Object(i),!0).forEach(function(e){Gt(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):zt(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function Gt(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Ht(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kt(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Vt(t,e,i){return e&&Kt(t.prototype,e),i&&Kt(t,i),t}function Wt(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}i.r(e),i.d(e,"default",function(){return Lr});var qt={};i.r(qt),i.d(qt,"newCue",function(){return wt});var Qt,Xt=i("./node_modules/url-toolkit/src/url-toolkit.js"),Jt=i("./src/errors.ts"),Zt=i("./src/polyfills/number.js"),$t=i("./src/events.js"),te=i("./src/utils/logger.js"),ee={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},ie=function(){function t(t){this.hls=void 0,this.handledEvents=void 0,this.useGenericHandler=void 0,this.hls=t,this.onEvent=this.onEvent.bind(this);for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];this.handledEvents=i,this.useGenericHandler=!0,this.registerListeners()}var e=t.prototype;return e.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},e.onHandlerDestroying=function(){},e.onHandlerDestroyed=function(){},e.isEventHandler=function(){return"object"==typeof this.handledEvents&&this.handledEvents.length&&"function"==typeof this.onEvent},e.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){if(ee[t])throw new Error("Forbidden event-name: "+t);this.hls.on(t,this.onEvent)},this)},e.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){this.hls.off(t,this.onEvent)},this)},e.onEvent=function(t,e){this.onEventGeneric(t,e)},e.onEventGeneric=function(t,e){var i=function(t,e){var i="on"+t.replace("hls","");if("function"!=typeof this[i])throw new Error("Event "+t+" has no generic handler in this "+this.constructor.name+" class (tried "+i+")");return this[i].bind(this,e)};try{i.call(this,t,e).call()}catch(e){te.logger.error("An internal error happened while handling event "+t+'. Error message: "'+e.message+'". Here is a stacktrace:',e),this.hls.trigger($t.default.ERROR,{type:Jt.ErrorTypes.OTHER_ERROR,details:Jt.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:t,err:e})}},t}(),re=ie;!function(t){t.MANIFEST="manifest",t.LEVEL="level",t.AUDIO_TRACK="audioTrack",t.SUBTITLE_TRACK="subtitleTrack"}(Qt||(Qt={}));var ne;!function(t){t.MAIN="main",t.AUDIO="audio",t.SUBTITLE="subtitle"}(ne||(ne={}));var ae,se=i("./src/demux/mp4demuxer.js"),oe=function(){function t(t,e){this._uri=null,this.baseuri=void 0,this.reluri=void 0,this.method=null,this.key=null,this.iv=null,this.baseuri=t,this.reluri=e}return n(t,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=Object(Xt.buildAbsoluteURL)(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),t}();!function(t){t.AUDIO="audio",t.VIDEO="video"}(ae||(ae={}));var le,ue=function(){function t(){var t;this._url=null,this._byteRange=null,this._decryptdata=null,this._elementaryStreams=(t={},t[ae.AUDIO]=!1,t[ae.VIDEO]=!1,t),this.deltaPTS=0,this.rawProgramDateTime=null,this.programDateTime=null,this.title=null,this.tagList=[],this.cc=void 0,this.type=void 0,this.relurl=void 0,this.baseurl=void 0,this.duration=void 0,this.start=void 0,this.sn=0,this.urlId=0,this.level=0,this.levelkey=void 0,this.loader=void 0}var e=t.prototype;return e.setByteRange=function(t,e){var i=t.split("@",2),r=[];1===i.length?r[0]=e?e.byteRangeEndOffset:0:r[0]=parseInt(i[1]),r[1]=parseInt(i[0])+r[0],this._byteRange=r},e.addElementaryStream=function(t){this._elementaryStreams[t]=!0},e.hasElementaryStream=function(t){return!0===this._elementaryStreams[t]},e.createInitializationVector=function(t){for(var e=new Uint8Array(16),i=12;i<16;i++)e[i]=t>>8*(15-i)&255;return e},e.setDecryptDataFromLevelKey=function(t,e){var i=t;return(null===t||void 0===t?void 0:t.method)&&t.uri&&!t.iv&&(i=new oe(t.baseuri,t.reluri),i.method=t.method,i.iv=this.createInitializationVector(e)),i},s(t,[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=Object(Xt.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(t){this._url=t}},{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var t=this.sn;"number"!=typeof t&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&te.logger.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),t=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,t)}return this._decryptdata}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!Object(Zt.isFiniteNumber)(this.programDateTime))return null;var t=Object(Zt.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+1e3*t}},{key:"encrypted",get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)}}]),t}(),de=function(){function t(t){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=t,this.version=null}return l(t,[{key:"hasProgramDateTime",get:function(){return!(!this.fragments[0]||!Object(Zt.isFiniteNumber)(this.fragments[0].programDateTime))}}]),t}(),ce=/^(\d+)x(\d+)$/,he=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,fe=function(){function t(e){"string"==typeof e&&(e=t.parseAttrList(e));for(var i in e)e.hasOwnProperty(i)&&(this[i]=e[i])}var e=t.prototype;return e.decimalInteger=function(t){var e=parseInt(this[t],10);return e>Number.MAX_SAFE_INTEGER?1/0:e},e.hexadecimalInteger=function(t){if(this[t]){var e=(this[t]||"0x").slice(2);e=(1&e.length?"0":"")+e;for(var i=new Uint8Array(e.length/2),r=0;r<e.length/2;r++)i[r]=parseInt(e.slice(2*r,2*r+2),16);return i}return null},e.hexadecimalIntegerAsNumber=function(t){var e=parseInt(this[t],16);return e>Number.MAX_SAFE_INTEGER?1/0:e},e.decimalFloatingPoint=function(t){return parseFloat(this[t])},e.enumeratedString=function(t){return this[t]},e.decimalResolution=function(t){var e=ce.exec(this[t]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},t.parseAttrList=function(t){var e,i={};for(he.lastIndex=0;null!==(e=he.exec(t));){var r=e[2];0===r.indexOf('"')&&r.lastIndexOf('"')===r.length-1&&(r=r.slice(1,-1)),i[e[1]]=r}return i},t}(),pe=fe,ge={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}},ye=/(?:#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)|#EXT-X-SESSION-DATA:([^\n\r]*)[\r\n]+)/g,ve=/#EXT-X-MEDIA:(.*)/g,me=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),Le=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,we=/\.(mp4|m4s|m4v|m4a)$/i,Te=function(){function t(){}return t.findGroup=function(t,e){for(var i=0;i<t.length;i++){var r=t[i];if(r.id===e)return r}},t.convertAVC1ToAVCOTI=function(t){var e,i=t.split(".");return i.length>2?(e=i.shift()+".",e+=parseInt(i.shift()).toString(16),e+=("000"+parseInt(i.shift()).toString(16)).substr(-4)):e=t,e},t.resolve=function(t,e){return Xt.buildAbsoluteURL(e,t,{alwaysNormalize:!0})},t.parseMasterPlaylist=function(e,i){var r=[],n={},a=!1;ye.lastIndex=0;for(var s;null!=(s=ye.exec(e));)if(s[1]){var o={},l=o.attrs=new pe(s[1]);o.url=t.resolve(s[2],i);var d=l.decimalResolution("RESOLUTION");d&&(o.width=d.width,o.height=d.height),o.bitrate=l.decimalInteger("AVERAGE-BANDWIDTH")||l.decimalInteger("BANDWIDTH"),o.name=l.NAME,function(t,e){["video","audio"].forEach(function(i){var r=t.filter(function(t){return u(t,i)});if(r.length){var n=r.filter(function(t){return 0===t.lastIndexOf("avc1",0)||0===t.lastIndexOf("mp4a",0)});e[i+"Codec"]=n.length>0?n[0]:r[0],t=t.filter(function(t){return-1===r.indexOf(t)})}}),e.unknownCodecs=t}([].concat((l.CODECS||"").split(/[ ,]+/)),o),o.videoCodec&&-1!==o.videoCodec.indexOf("avc1")&&(o.videoCodec=t.convertAVC1ToAVCOTI(o.videoCodec)),r.push(o)}else if(s[3]){var c=new pe(s[3]);c["DATA-ID"]&&(a=!0,n[c["DATA-ID"]]=c)}return{levels:r,sessionData:a?n:null}},t.parseMasterPlaylistMedia=function(e,i,r,n){void 0===n&&(n=[]);var a,s=[],o=0;for(ve.lastIndex=0;null!==(a=ve.exec(e));){var l=new pe(a[1]);if(l.TYPE===r){var u={attrs:l,id:o++,groupId:l["GROUP-ID"],instreamId:l["INSTREAM-ID"],name:l.NAME||l.LANGUAGE,type:r,default:"YES"===l.DEFAULT,autoselect:"YES"===l.AUTOSELECT,forced:"YES"===l.FORCED,lang:l.LANGUAGE};if(l.URI&&(u.url=t.resolve(l.URI,i)),n.length){var d=t.findGroup(n,u.groupId);u.audioCodec=d?d.codec:n[0].codec}s.push(u)}}return s},t.parseLevelPlaylist=function(t,e,i,r,n){var a,s,o,l=0,u=0,d=new de(e),f=0,p=null,g=new ue,y=null;for(me.lastIndex=0;null!==(a=me.exec(t));){var v=a[1];if(v){g.duration=parseFloat(v);var m=(" "+a[2]).slice(1);g.title=m||null,g.tagList.push(m?["INF",v,m]:["INF",v])}else if(a[3]){if(Object(Zt.isFiniteNumber)(g.duration)){var L=l++;g.type=r,g.start=u,o&&(g.levelkey=o),g.sn=L,g.level=i,g.cc=f,g.urlId=n,g.baseurl=e,g.relurl=(" "+a[3]).slice(1),h(g,p),d.fragments.push(g),p=g,u+=g.duration,g=new ue}}else if(a[4]){var w=(" "+a[4]).slice(1);p?g.setByteRange(w,p):g.setByteRange(w)}else if(a[5])g.rawProgramDateTime=(" "+a[5]).slice(1),g.tagList.push(["PROGRAM-DATE-TIME",g.rawProgramDateTime]),null===y&&(y=d.fragments.length);else{if(!(a=a[0].match(Le))){te.logger.warn("No matches on slow regex match for level playlist!");continue}for(s=1;s<a.length&&void 0===a[s];s++);var T=(" "+a[s+1]).slice(1),E=(" "+a[s+2]).slice(1);switch(a[s]){case"#":g.tagList.push(E?[T,E]:[T]);break;case"PLAYLIST-TYPE":d.type=T.toUpperCase();break;case"MEDIA-SEQUENCE":l=d.startSN=parseInt(T);break;case"TARGETDURATION":d.targetduration=parseFloat(T);break;case"VERSION":d.version=parseInt(T);break;case"EXTM3U":break;case"ENDLIST":d.live=!1;break;case"DIS":f++,g.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":f=parseInt(T);break;case"KEY":var b=T,M=new pe(b),S=M.enumeratedString("METHOD"),C=M.URI,A=M.hexadecimalInteger("IV"),_=M.KEYFORMAT||"identity";if("com.apple.streamingkeydelivery"===_){te.logger.warn("Keyformat com.apple.streamingkeydelivery is not supported");continue}S&&(o=new oe(e,C),C&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(S)>=0&&(o.method=S,o.key=null,o.iv=A));break;case"START":var x=new pe(T),k=x.decimalFloatingPoint("TIME-OFFSET");Object(Zt.isFiniteNumber)(k)&&(d.startTimeOffset=k);break;case"MAP":var D=new pe(T);g.relurl=D.URI,D.BYTERANGE&&g.setByteRange(D.BYTERANGE),g.baseurl=e,g.level=i,g.type=r,g.sn="initSegment",d.initSegment=g,g=new ue,g.rawProgramDateTime=d.initSegment.rawProgramDateTime;break;default:te.logger.warn("line parsed but not handled: "+a)}}}return g=p,g&&!g.relurl&&(d.fragments.pop(),u-=g.duration),d.totalduration=u,d.averagetargetduration=u/d.fragments.length,d.endSN=l-1,d.startCC=d.fragments[0]?d.fragments[0].cc:0,d.endCC=f,!d.initSegment&&d.fragments.length&&d.fragments.every(function(t){return we.test(t.relurl)})&&(te.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),g=new ue,g.relurl=d.fragments[0].relurl,g.baseurl=e,g.level=i,g.type=r,g.sn="initSegment",d.initSegment=g,d.needSidxRanges=!0),y&&c(d.fragments,y),d},t}(),Ee=window,be=Ee.performance,Me=function(t){function e(e){var i;return i=t.call(this,e,$t.default.MANIFEST_LOADING,$t.default.LEVEL_LOADING,$t.default.AUDIO_TRACK_LOADING,$t.default.SUBTITLE_TRACK_LOADING)||this,i.loaders={},i}f(e,t),e.canHaveQualityLevels=function(t){return t!==Qt.AUDIO_TRACK&&t!==Qt.SUBTITLE_TRACK},e.mapContextToLevelType=function(t){switch(t.type){case Qt.AUDIO_TRACK:return ne.AUDIO;case Qt.SUBTITLE_TRACK:return ne.SUBTITLE;default:return ne.MAIN}},e.getResponseUrl=function(t,e){var i=t.url;return void 0!==i&&0!==i.indexOf("data:")||(i=e.url),i};var i=e.prototype;return i.createInternalLoader=function(t){var e=this.hls.config,i=e.pLoader,r=e.loader,n=i||r,a=new n(e);return t.loader=a,this.loaders[t.type]=a,a},i.getInternalLoader=function(t){return this.loaders[t.type]},i.resetInternalLoader=function(t){this.loaders[t]&&delete this.loaders[t]},i.destroyInternalLoaders=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy(),this.resetInternalLoader(t)}},i.destroy=function(){this.destroyInternalLoaders(),t.prototype.destroy.call(this)},i.onManifestLoading=function(t){this.load({url:t.url,type:Qt.MANIFEST,level:0,id:null,responseType:"text"})},i.onLevelLoading=function(t){this.load({url:t.url,type:Qt.LEVEL,level:t.level,id:t.id,responseType:"text"})},i.onAudioTrackLoading=function(t){this.load({url:t.url,type:Qt.AUDIO_TRACK,level:null,id:t.id,responseType:"text"})},i.onSubtitleTrackLoading=function(t){this.load({url:t.url,type:Qt.SUBTITLE_TRACK,level:null,id:t.id,responseType:"text"})},i.load=function(t){var e=this.hls.config;te.logger.debug("Loading playlist of type "+t.type+", level: "+t.level+", id: "+t.id);var i=this.getInternalLoader(t);if(i){var r=i.context;if(r&&r.url===t.url)return te.logger.trace("playlist request ongoing"),!1;te.logger.warn("aborting previous loader for type: "+t.type),i.abort()}var n,a,s,o;switch(t.type){case Qt.MANIFEST:n=e.manifestLoadingMaxRetry,a=e.manifestLoadingTimeOut,s=e.manifestLoadingRetryDelay,o=e.manifestLoadingMaxRetryTimeout;break;case Qt.LEVEL:n=0,o=0,s=0,a=e.levelLoadingTimeOut;break;default:n=e.levelLoadingMaxRetry,a=e.levelLoadingTimeOut,s=e.levelLoadingRetryDelay,o=e.levelLoadingMaxRetryTimeout}i=this.createInternalLoader(t);var l={timeout:a,maxRetry:n,retryDelay:s,maxRetryDelay:o},u={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return te.logger.debug("Calling internal loader delegate for URL: "+t.url),i.load(t,l,u),!0},i.loadsuccess=function(t,e,i,r){if(void 0===r&&(r=null),i.isSidxRequest)return this._handleSidxRequest(t,i),void this._handlePlaylistLoaded(t,e,i,r);if(this.resetInternalLoader(i.type),"string"!=typeof t.data)throw new Error('expected responseType of "text" for PlaylistLoader');var n=t.data;if(e.tload=be.now(),0!==n.indexOf("#EXTM3U"))return void this._handleManifestParsingError(t,i,"no EXTM3U delimiter",r);n.indexOf("#EXTINF:")>0||n.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(t,e,i,r):this._handleMasterPlaylist(t,e,i,r)},i.loaderror=function(t,e,i){void 0===i&&(i=null),this._handleNetworkError(e,i,!1,t)},i.loadtimeout=function(t,e,i){void 0===i&&(i=null),this._handleNetworkError(e,i,!0)},i._handleMasterPlaylist=function(t,i,r,n){var a=this.hls,s=t.data,o=e.getResponseUrl(t,r),l=Te.parseMasterPlaylist(s,o),u=l.levels,d=l.sessionData;if(!u.length)return void this._handleManifestParsingError(t,r,"no level found in manifest",n);var c=u.map(function(t){return{id:t.attrs.AUDIO,codec:t.audioCodec}}),h=Te.parseMasterPlaylistMedia(s,o,"AUDIO",c),f=Te.parseMasterPlaylistMedia(s,o,"SUBTITLES"),p=Te.parseMasterPlaylistMedia(s,o,"CLOSED-CAPTIONS");if(h.length){var g=!1;h.forEach(function(t){t.url||(g=!0)}),!1===g&&u[0].audioCodec&&!u[0].attrs.AUDIO&&(te.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),h.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:{},url:""}))}a.trigger($t.default.MANIFEST_LOADED,{levels:u,audioTracks:h,subtitles:f,captions:p,url:o,stats:i,networkDetails:n,sessionData:d})},i._handleTrackOrLevelPlaylist=function(t,i,r,n){var a=this.hls,s=r.id,o=r.level,l=r.type,u=e.getResponseUrl(t,r),d=Object(Zt.isFiniteNumber)(s)?s:0,c=Object(Zt.isFiniteNumber)(o)?o:d,h=e.mapContextToLevelType(r),f=Te.parseLevelPlaylist(t.data,u,c,h,d);if(f.tload=i.tload,!f.fragments.length)return void a.trigger($t.default.ERROR,{type:Jt.ErrorTypes.NETWORK_ERROR,details:Jt.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:u,reason:"no fragments found in level",level:"number"==typeof r.level?r.level:void 0});if(l===Qt.MANIFEST){var p={url:u,details:f};a.trigger($t.default.MANIFEST_LOADED,{levels:[p],audioTracks:[],url:u,stats:i,networkDetails:n,sessionData:null})}if(i.tparsed=be.now(),f.needSidxRanges){var g=f.initSegment.url;return void this.load({url:g,isSidxRequest:!0,type:l,level:o,levelDetails:f,id:s,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}r.levelDetails=f,this._handlePlaylistLoaded(t,i,r,n)},i._handleSidxRequest=function(t,e){if("string"==typeof t.data)throw new Error("sidx request must be made with responseType of array buffer");var i=se.default.parseSegmentIndex(new Uint8Array(t.data));if(i){var r=i.references,n=e.levelDetails;r.forEach(function(t,e){var i=t.info;if(n){var r=n.fragments[e];0===r.byteRange.length&&r.setByteRange(String(1+i.end-i.start)+"@"+String(i.start))}}),n&&n.initSegment.setByteRange(String(i.moovEndOffset)+"@0")}},i._handleManifestParsingError=function(t,e,i,r){this.hls.trigger($t.default.ERROR,{type:Jt.ErrorTypes.NETWORK_ERROR,details:Jt.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:t.url,reason:i,networkDetails:r})},i._handleNetworkError=function(t,e,i,r){void 0===i&&(i=!1),void 0===r&&(r=null),te.logger.info("A network error occured while loading a "+t.type+"-type playlist");var n,a,s=this.getInternalLoader(t);switch(t.type){case Qt.MANIFEST:n=i?Jt.ErrorDetails.MANIFEST_LOAD_TIMEOUT:Jt.ErrorDetails.MANIFEST_LOAD_ERROR,a=!0;break;case Qt.LEVEL:n=i?Jt.ErrorDetails.LEVEL_LOAD_TIMEOUT:Jt.ErrorDetails.LEVEL_LOAD_ERROR,a=!1;break;case Qt.AUDIO_TRACK:n=i?Jt.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:Jt.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,a=!1;break;default:a=!1}s&&(s.abort(),this.resetInternalLoader(t.type));var o={type:Jt.ErrorTypes.NETWORK_ERROR,details:n,fatal:a,url:t.url,loader:s,context:t,networkDetails:e};r&&(o.response=r),this.hls.trigger($t.default.ERROR,o)},i._handlePlaylistLoaded=function(t,i,r,n){var a=r.type,s=r.level,o=r.id,l=r.levelDetails;if(!l||!l.targetduration)return void this._handleManifestParsingError(t,r,"invalid target duration",n);if(e.canHaveQualityLevels(r.type))this.hls.trigger($t.default.LEVEL_LOADED,{details:l,level:s||0,id:o||0,stats:i,networkDetails:n});else switch(a){case Qt.AUDIO_TRACK:this.hls.trigger($t.default.AUDIO_TRACK_LOADED,{details:l,id:o,stats:i,networkDetails:n});break;case Qt.SUBTITLE_TRACK:this.hls.trigger($t.default.SUBTITLE_TRACK_LOADED,{details:l,id:o,stats:i,networkDetails:n})}},e}(re),Se=Me,Ce=function(t){function e(e){var i;return i=t.call(this,e,$t.default.FRAG_LOADING)||this,i.loaders={},i}p(e,t);var i=e.prototype;return i.destroy=function(){var e=this.loaders;for(var i in e){var r=e[i];r&&r.destroy()}this.loaders={},t.prototype.destroy.call(this)},i.onFragLoading=function(t){var e=t.frag,i=e.type,r=this.loaders,n=this.hls.config,a=n.fLoader,s=n.loader;e.loaded=0;var o=r[i];o&&(te.logger.warn("abort previous fragment loader for type: "+i),o.abort()),o=r[i]=e.loader=n.fLoader?new a(n):new s(n);var l,u,d;l={url:e.url,frag:e,responseType:"arraybuffer",progressData:!1};var c=e.byteRangeStartOffset,h=e.byteRangeEndOffset;Object(Zt.isFiniteNumber)(c)&&Object(Zt.isFiniteNumber)(h)&&(l.rangeStart=c,l.rangeEnd=h),u={timeout:n.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:n.fragLoadingMaxRetryTimeout},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},o.load(l,u,d)},i.loadsuccess=function(t,e,i,r){void 0===r&&(r=null);var n=t.data,a=i.frag;a.loader=void 0,this.loaders[a.type]=void 0,this.hls.trigger($t.default.FRAG_LOADED,{payload:n,frag:a,stats:e,networkDetails:r})},i.loaderror=function(t,e,i){void 0===i&&(i=null);var r=e.frag,n=r.loader;n&&n.abort(),this.loaders[r.type]=void 0,this.hls.trigger($t.default.ERROR,{type:Jt.ErrorTypes.NETWORK_ERROR,details:Jt.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:e.frag,response:t,networkDetails:i})},i.loadtimeout=function(t,e,i){void 0===i&&(i=null);var r=e.frag,n=r.loader;n&&n.abort(),this.loaders[r.type]=void 0,this.hls.trigger($t.default.ERROR,{type:Jt.ErrorTypes.NETWORK_ERROR,details:Jt.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e.frag,networkDetails:i})},i.loadprogress=function(t,e,i,r){void 0===r&&(r=null);var n=e.frag;n.loaded=t.loaded,this.hls.trigger($t.default.FRAG_LOAD_PROGRESS,{frag:n,stats:t,networkDetails:r})},e}(re),Ae=Ce,_e=function(t){function e(e){var i;return i=t.call(this,e,$t.default.KEY_LOADING)||this,i.loaders={},i.decryptkey=null,i.decrypturl=null,i}g(e,t);var i=e.prototype;return i.destroy=function(){for(var e in this.loaders){var i=this.loaders[e];i&&i.destroy()}this.loaders={},t.prototype.destroy.call(this)},i.onKeyLoading=function(t){var e=t.frag,i=e.type,r=this.loaders[i];if(!e.decryptdata)return void te.logger.warn("Missing decryption data on fragment in onKeyLoading");var n=e.decryptdata.uri;if(n!==this.decrypturl||null===this.decryptkey){var a=this.hls.config;if(r&&(te.logger.warn("abort previous key loader for type:"+i),r.abort()),!n)return void te.logger.warn("key uri is falsy");e.loader=this.loaders[i]=new a.loader(a),this.decrypturl=n,this.decryptkey=null;var s={url:n,frag:e,responseType:"arraybuffer"},o={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:a.fragLoadingRetryDelay,maxRetryDelay:a.fragLoadingMaxRetryTimeout},l={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};e.loader.load(s,o,l)}else this.decryptkey&&(e.decryptdata.key=this.decryptkey,this.hls.trigger($t.default.KEY_LOADED,{frag:e}))},i.loadsuccess=function(t,e,i){var r=i.frag;if(!r.decryptdata)return void te.logger.error("after key load, decryptdata unset");this.decryptkey=r.decryptdata.key=new Uint8Array(t.data),r.loader=void 0,delete this.loaders[r.type],this.hls.trigger($t.default.KEY_LOADED,{frag:r})},i.loaderror=function(t,e){var i=e.frag,r=i.loader;r&&r.abort(),delete this.loaders[i.type],this.hls.trigger($t.default.ERROR,{type:Jt.ErrorTypes.NETWORK_ERROR,details:Jt.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:i,response:t})},i.loadtimeout=function(t,e){var i=e.frag,r=i.loader;r&&r.abort(),delete this.loaders[i.type],this.hls.trigger($t.default.ERROR,{type:Jt.ErrorTypes.NETWORK_ERROR,details:Jt.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:i})},e}(re),xe=_e,ke={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"},De=function(t){function e(e){var i;return i=t.call(this,e,$t.default.BUFFER_APPENDED,$t.default.FRAG_BUFFERED,$t.default.FRAG_LOADED)||this,i.bufferPadding=.2,i.fragments=Object.create(null),i.timeRanges=Object.create(null),i.config=e.config,i}y(e,t);var i=e.prototype;return i.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,re.prototype.destroy.call(this),t.prototype.destroy.call(this)},i.getBufferedFrag=function(t,e){var i=this.fragments,r=Object.keys(i).filter(function(r){var n=i[r];if(n.body.type!==e)return!1;if(!n.buffered)return!1;var a=n.body;return a.startPTS<=t&&t<=a.endPTS});if(0===r.length)return null;var n=r.pop();return i[n].body},i.detectEvictedFragments=function(t,e){var i=this;Object.keys(this.fragments).forEach(function(r){var n=i.fragments[r];if(n&&n.buffered){var a=n.range[t];if(a)for(var s=a.time,o=0;o<s.length;o++){var l=s[o];if(!i.isTimeBuffered(l.startPTS,l.endPTS,e)){i.removeFragment(n.body);break}}}})},i.detectPartialFragments=function(t){var e=this,i=this.getFragmentKey(t),r=this.fragments[i];r&&(r.buffered=!0,Object.keys(this.timeRanges).forEach(function(i){if(t.hasElementaryStream(i)){var n=e.timeRanges[i];r.range[i]=e.getBufferedTimes(t.startPTS,t.endPTS,n)}}))},i.getBufferedTimes=function(t,e,i){for(var r,n,a=[],s=!1,o=0;o<i.length;o++){if(r=i.start(o)-this.bufferPadding,n=i.end(o)+this.bufferPadding,t>=r&&e<=n){a.push({startPTS:Math.max(t,i.start(o)),endPTS:Math.min(e,i.end(o))});break}if(t<n&&e>r)a.push({startPTS:Math.max(t,i.start(o)),endPTS:Math.min(e,i.end(o))}),s=!0;else if(e<=r)break}return{time:a,partial:s}},i.getFragmentKey=function(t){return t.type+"_"+t.level+"_"+t.urlId+"_"+t.sn},i.getPartialFragment=function(t){var e,i,r,n=this,a=null,s=0;return Object.keys(this.fragments).forEach(function(o){var l=n.fragments[o];n.isPartial(l)&&(i=l.body.startPTS-n.bufferPadding,r=l.body.endPTS+n.bufferPadding,t>=i&&t<=r&&(e=Math.min(t-i,r-t),s<=e&&(a=l.body,s=e)))}),a},i.getState=function(t){var e=this.getFragmentKey(t),i=this.fragments[e],r=ke.NOT_LOADED;return void 0!==i&&(r=i.buffered?!0===this.isPartial(i)?ke.PARTIAL:ke.OK:ke.APPENDING),r},i.isPartial=function(t){return!0===t.buffered&&(void 0!==t.range.video&&!0===t.range.video.partial||void 0!==t.range.audio&&!0===t.range.audio.partial)},i.isTimeBuffered=function(t,e,i){for(var r,n,a=0;a<i.length;a++){if(r=i.start(a)-this.bufferPadding,n=i.end(a)+this.bufferPadding,t>=r&&e<=n)return!0;if(e<=r)return!1}return!1},i.onFragLoaded=function(t){var e=t.frag;Object(Zt.isFiniteNumber)(e.sn)&&!e.bitrateTest&&(this.fragments[this.getFragmentKey(e)]={body:e,range:Object.create(null),buffered:!1})},i.onBufferAppended=function(t){var e=this;this.timeRanges=t.timeRanges,Object.keys(this.timeRanges).forEach(function(t){var i=e.timeRanges[t];e.detectEvictedFragments(t,i)})},i.onFragBuffered=function(t){this.detectPartialFragments(t.frag)},i.hasFragment=function(t){var e=this.getFragmentKey(t);return void 0!==this.fragments[e]},i.removeFragment=function(t){var e=this.getFragmentKey(t);delete this.fragments[e]},i.removeAllFragments=function(){this.fragments=Object.create(null)},e}(re),Re={search:function(t,e){for(var i=0,r=t.length-1,n=null,a=null;i<=r;){n=(i+r)/2|0,a=t[n];var s=e(a);if(s>0)i=n+1;else{if(!(s<0))return a;r=n-1}}return null}},Ne=Re,Ie=function(){function t(){}return t.isBuffered=function(t,e){try{if(t)for(var i=t.buffered,r=0;r<i.length;r++)if(e>=i.start(r)&&e<=i.end(r))return!0}catch(t){}return!1},t.bufferInfo=function(t,e,i){try{if(t){var r,n=t.buffered,a=[];for(r=0;r<n.length;r++)a.push({start:n.start(r),end:n.end(r)});return this.bufferedInfo(a,e,i)}}catch(t){}return{len:0,start:e,end:e,nextStart:void 0}},t.bufferedInfo=function(t,e,i){t.sort(function(t,e){return t.start-e.start||e.end-t.end});var r=[];if(i)for(var n=0;n<t.length;n++){var a=r.length;if(a){var s=r[a-1].end;t[n].start-s<i?t[n].end>s&&(r[a-1].end=t[n].end):r.push(t[n])}else r.push(t[n])}else r=t;for(var o,l=0,u=e,d=e,c=0;c<r.length;c++){var h=r[c].start,f=r[c].end;if(e+i>=h&&e<f)u=h,d=f,l=d-e;else if(e+i<h){o=h;break}}return{len:l,start:u,end:d,nextStart:o}},t}(),je=i("./node_modules/eventemitter3/index.js"),Oe=i("./node_modules/webworkify-webpack/index.js"),Pe=i("./src/demux/demuxer-inline.js"),Fe=i("./src/utils/get-self-scope.js"),Ue=function(t){function e(){return t.apply(this,arguments)||this}return m(e,t),e.prototype.trigger=function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];this.emit.apply(this,[t,t].concat(i))},e}(je.EventEmitter),Be=Object(Fe.getSelfScope)(),ze=v()||{isTypeSupported:function(){return!1}},Ye=function(){function t(t,e){var i=this;this.hls=t,this.id=e;var r=this.observer=new Ue,n=t.config,a=function(e,r){r=r||{},r.frag=i.frag,r.id=i.id,t.trigger(e,r)};r.on($t.default.FRAG_DECRYPTED,a),r.on($t.default.FRAG_PARSING_INIT_SEGMENT,a),r.on($t.default.FRAG_PARSING_DATA,a),r.on($t.default.FRAG_PARSED,a),r.on($t.default.ERROR,a),r.on($t.default.FRAG_PARSING_METADATA,a),r.on($t.default.FRAG_PARSING_USERDATA,a),r.on($t.default.INIT_PTS_FOUND,a);var s={mp4:ze.isTypeSupported("video/mp4"),mpeg:ze.isTypeSupported("audio/mpeg"),mp3:ze.isTypeSupported('audio/mp4; codecs="mp3"')},o=navigator.vendor;if(n.enableWorker&&"undefined"!=typeof Worker){te.logger.log("demuxing in webworker");var l;try{l=this.w=Oe("./src/demux/demuxer-worker.js"),this.onwmsg=this.onWorkerMessage.bind(this),l.addEventListener("message",this.onwmsg),l.onerror=function(e){t.trigger($t.default.ERROR,{type:Jt.ErrorTypes.OTHER_ERROR,details:Jt.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:e.message+" ("+e.filename+":"+e.lineno+")"}})},l.postMessage({cmd:"init",typeSupported:s,vendor:o,id:e,config:JSON.stringify(n)})}catch(t){te.logger.warn("Error in worker:",t),te.logger.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),l&&Be.URL.revokeObjectURL(l.objectURL),this.demuxer=new Pe.default(r,s,n,o),this.w=void 0}}else this.demuxer=new Pe.default(r,s,n,o)}var e=t.prototype;return e.destroy=function(){var t=this.w;if(t)t.removeEventListener("message",this.onwmsg),t.terminate(),this.w=null;else{var e=this.demuxer;e&&(e.destroy(),this.demuxer=null)}var i=this.observer;i&&(i.removeAllListeners(),this.observer=null)},e.push=function(t,e,i,r,n,a,s,o){var l=this.w,u=Object(Zt.isFiniteNumber)(n.startPTS)?n.startPTS:n.start,d=n.decryptdata,c=this.frag,h=!(c&&n.cc===c.cc),f=!(c&&n.level===c.level),p=c&&n.sn===c.sn+1,g=!f&&p;if(h&&te.logger.log(this.id+":discontinuity detected"),f&&te.logger.log(this.id+":switch detected"),this.frag=n,l)l.postMessage({cmd:"demux",data:t,decryptdata:d,initSegment:e,audioCodec:i,videoCodec:r,timeOffset:u,discontinuity:h,trackSwitch:f,contiguous:g,duration:a,accurateTimeOffset:s,defaultInitPTS:o},t instanceof ArrayBuffer?[t]:[]);else{var y=this.demuxer;y&&y.push(t,d,e,i,r,u,h,f,g,a,s,o)}},e.onWorkerMessage=function(t){var e=t.data,i=this.hls;switch(e.event){case"init":Be.URL.revokeObjectURL(this.w.objectURL);break;case $t.default.FRAG_PARSING_DATA:e.data.data1=new Uint8Array(e.data1),e.data2&&(e.data.data2=new Uint8Array(e.data2));default:e.data=e.data||{},e.data.frag=this.frag,e.data.id=this.id,i.trigger(e.event,e.data)}},t}(),Ge=Ye,He={toString:function(t){for(var e="",i=t.length,r=0;r<i;r++)e+="["+t.start(r).toFixed(3)+","+t.end(r).toFixed(3)+"]";return e}},Ke=He,Ve=function(){function t(t,e,i,r){this.config=t,this.media=e,this.fragmentTracker=i,this.hls=r,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1}var e=t.prototype;return e.poll=function(t){var e=this.config,i=this.media,r=this.stalled,n=i.currentTime,a=i.seeking,s=this.seeking&&!a,o=!this.seeking&&a;if(this.seeking=a,n===t){if((o||s)&&(this.stalled=null),!i.paused&&!i.ended&&0!==i.playbackRate&&i.buffered.length){var l=Ie.bufferInfo(i,n,0),u=l.len>0,d=l.nextStart||0;if(u||d){if(a){var c=l.len>2,h=!d||d-n>2&&!this.fragmentTracker.getPartialFragment(n);if(c||h)return;this.moved=!1}if(!this.moved&&this.stalled){var f=Math.max(d,l.start||0)-n;if(f>0&&f<=2)return void this._trySkipBufferHole(null)}var p=self.performance.now();if(null===r)return void(this.stalled=p);var g=p-r;!a&&g>=250&&this._reportStall(l.len);var y=Ie.bufferInfo(i,n,e.maxBufferHole);this._tryFixBufferStall(y,g)}}}else if(this.moved=!0,null!==r){if(this.stallReported){var v=self.performance.now()-r;te.logger.warn("playback not stuck anymore @"+n+", after "+Math.round(v)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},e._tryFixBufferStall=function(t,e){var i=this.config,r=this.fragmentTracker,n=this.media,a=n.currentTime,s=r.getPartialFragment(a);s&&this._trySkipBufferHole(s)||t.len>i.maxBufferHole&&e>1e3*i.highBufferWatchdogPeriod&&(te.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},e._reportStall=function(t){var e=this.hls,i=this.media;this.stallReported||(this.stallReported=!0,te.logger.warn("Playback stalling at @"+i.currentTime+" due to low buffer (buffer="+t+")"),e.trigger($t.default.ERROR,{type:Jt.ErrorTypes.MEDIA_ERROR,details:Jt.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:t}))},e._trySkipBufferHole=function(t){for(var e=this.config,i=this.hls,r=this.media,n=r.currentTime,a=0,s=0;s<r.buffered.length;s++){var o=r.buffered.start(s);if(n+e.maxBufferHole>=a&&n<o){var l=Math.max(o+.05,r.currentTime+.1);return te.logger.warn("skipping hole, adjusting currentTime from "+n+" to "+l),this.moved=!0,this.stalled=null,r.currentTime=l,t&&i.trigger($t.default.ERROR,{type:Jt.ErrorTypes.MEDIA_ERROR,details:Jt.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+n+" to "+l,frag:t}),l}a=r.buffered.end(s)}return 0},e._tryNudgeBuffer=function(){var t=this.config,e=this.hls,i=this.media,r=i.currentTime,n=(this.nudgeRetry||0)+1;if(this.nudgeRetry=n,n<t.nudgeMaxRetry){var a=r+n*t.nudgeOffset;te.logger.warn("Nudging 'currentTime' from "+r+" to "+a),i.currentTime=a,e.trigger($t.default.ERROR,{type:Jt.ErrorTypes.MEDIA_ERROR,details:Jt.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else te.logger.error("Playhead still not moving while enough data buffered @"+r+" after "+t.nudgeMaxRetry+" nudges"),e.trigger($t.default.ERROR,{type:Jt.ErrorTypes.MEDIA_ERROR,details:Jt.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},t}(),We=function(t){function e(e){for(var i,r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return i=t.call.apply(t,[this,e].concat(n))||this,i._boundTick=void 0,i._tickTimer=null,i._tickInterval=null,i._tickCallCount=0,i._boundTick=i.tick.bind(U(i)),i}B(e,t);var i=e.prototype;return i.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},i.hasInterval=function(){return!!this._tickInterval},i.hasNextTick=function(){return!!this._tickTimer},i.setInterval=function(t){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,t),!0)},i.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},i.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},i.tick=function(){1==++this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)),this._tickCallCount=0)},i.doTick=function(){},e}(re),qe={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},Qe=function(t){function e(){return t.apply(this,arguments)||this}z(e,t);var i=e.prototype;return i.doTick=function(){},i.startLoad=function(){},i.stopLoad=function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragmentTracker.removeFragment(t)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=qe.STOPPED},i._streamEnded=function(t,e){var i=this.fragCurrent,r=this.fragmentTracker;if(!e.live&&i&&!i.backtracked&&i.sn===e.endSN&&!t.nextStart){var n=r.getState(i);return n===ke.PARTIAL||n===ke.OK}return!1},i.onMediaSeeking=function(){var t=this.config,e=this.media,i=this.mediaBuffer,r=this.state,n=e?e.currentTime:null,a=Ie.bufferInfo(i||e,n,this.config.maxBufferHole);if(te.logger.log("media seeking to "+(Object(Zt.isFiniteNumber)(n)?n.toFixed(3):n)),r===qe.FRAG_LOADING){var s=this.fragCurrent;if(0===a.len&&s){var o=t.maxFragLookUpTolerance,l=s.start-o,u=s.start+s.duration+o;n<l||n>u?(s.loader&&(te.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),s.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=qe.IDLE):te.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else r===qe.ENDED&&(0===a.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=qe.IDLE);e&&(this.lastCurrentTime=n),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=n),this.tick()},i.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},i.onHandlerDestroying=function(){this.stopLoad(),t.prototype.onHandlerDestroying.call(this)},i.onHandlerDestroyed=function(){this.state=qe.STOPPED,this.fragmentTracker=null},i.computeLivePosition=function(t,e){var i=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*e.targetduration;return t+Math.max(0,e.totalduration-i)},e}(We),Xe=function(t){function e(e,i){var r;return r=t.call(this,e,$t.default.MEDIA_ATTACHED,$t.default.MEDIA_DETACHING,$t.default.MANIFEST_LOADING,$t.default.MANIFEST_PARSED,$t.default.LEVEL_LOADED,$t.default.LEVELS_UPDATED,$t.default.KEY_LOADED,$t.default.FRAG_LOADED,$t.default.FRAG_LOAD_EMERGENCY_ABORTED,$t.default.FRAG_PARSING_INIT_SEGMENT,$t.default.FRAG_PARSING_DATA,$t.default.FRAG_PARSED,$t.default.ERROR,$t.default.AUDIO_TRACK_SWITCHING,$t.default.AUDIO_TRACK_SWITCHED,$t.default.BUFFER_CREATED,$t.default.BUFFER_APPENDED,$t.default.BUFFER_FLUSHED)||this,r.fragmentTracker=i,r.config=e.config,r.audioCodecSwap=!1,r._state=qe.STOPPED,r.stallReported=!1,r.gapController=null,r.altAudio=!1,r.audioOnly=!1,r.bitrateTest=!1,r}H(e,t);var i=e.prototype;return i.startLoad=function(t){if(this.levels){var e=this.lastCurrentTime,i=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var r=i.startLevel;-1===r&&(i.config.testBandwidth?(r=0,this.bitrateTest=!0):r=i.nextAutoLevel),this.level=i.nextLoadLevel=r,this.loadedmetadata=!1}e>0&&-1===t&&(te.logger.log("override startPosition with lastCurrentTime @"+e.toFixed(3)),t=e),this.state=qe.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this.forceStartLoad=!0,this.state=qe.STOPPED},i.stopLoad=function(){this.forceStartLoad=!1,t.prototype.stopLoad.call(this)},i.doTick=function(){switch(this.state){case qe.BUFFER_FLUSHING:this.fragLoadError=0;break;case qe.IDLE:this._doTickIdle();break;case qe.WAITING_LEVEL:var t=this.levels[this.level];t&&t.details&&(this.state=qe.IDLE);break;case qe.FRAG_LOADING_WAITING_RETRY:var e=window.performance.now(),i=this.retryDate;(!i||e>=i||this.media&&this.media.seeking)&&(te.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=qe.IDLE);break;case qe.ERROR:case qe.STOPPED:case qe.FRAG_LOADING:case qe.PARSING:case qe.PARSED:case qe.ENDED:}this._checkBuffer(),this._checkFragmentChanged()},i._doTickIdle=function(){var t=this.hls,e=t.config,i=this.media;if(void 0!==this.levelLastLoaded&&(i||!this.startFragRequested&&e.startFragPrefetch)){if(this.altAudio&&this.audioOnly)return void(this.demuxer.frag=null);var r;r=this.loadedmetadata?i.currentTime:this.nextLoadPosition;var n=t.nextLoadLevel,a=this.levels[n];if(a){var s,o=a.bitrate;s=o?Math.max(8*e.maxBufferSize/o,e.maxBufferLength):e.maxBufferLength,s=Math.min(s,e.maxMaxBufferLength);var l=r<e.maxBufferHole?Math.max(2,e.maxBufferHole):e.maxBufferHole,u=Ie.bufferInfo(this.mediaBuffer?this.mediaBuffer:i,r,l),d=u.len;if(!(d>=s)){te.logger.trace("buffer length of "+d.toFixed(3)+" is below max of "+s.toFixed(3)+". checking for more payload ..."),this.level=t.nextLoadLevel=n;var c=a.details;if(!c||c.live&&this.levelLastLoaded!==n)return void(this.state=qe.WAITING_LEVEL);if(this._streamEnded(u,c)){var h={};return this.altAudio&&(h.type="video"),this.hls.trigger($t.default.BUFFER_EOS,h),void(this.state=qe.ENDED)}this._fetchPayloadOrEos(r,u,c)}}}},i._fetchPayloadOrEos=function(t,e,i){var r=this.fragPrevious,n=(this.level,i.fragments),a=n.length;if(0!==a){var s,o=n[0].start,l=n[a-1].start+n[a-1].duration,u=e.end;if(i.initSegment&&!i.initSegment.data)s=i.initSegment;else if(i.live){var d=this.config.initialLiveManifestSize;if(a<d)return void te.logger.warn("Can not start playback of a level, reason: not enough fragments "+a+" < "+d);if(null===(s=this._ensureFragmentAtLivePoint(i,u,o,l,r,n)))return}else u<o&&(s=n[0]);s||(s=this._findFragment(o,r,a,n,u,l,i)),s&&(s.encrypted?this._loadKey(s,i):this._loadFragment(s,i,t,u))}},i._ensureFragmentAtLivePoint=function(t,e,i,r,n,a){var s,o=this.hls.config,l=this.media,u=1/0;if(void 0!==o.liveMaxLatencyDuration?u=o.liveMaxLatencyDuration:Object(Zt.isFiniteNumber)(o.liveMaxLatencyDurationCount)&&(u=o.liveMaxLatencyDurationCount*t.targetduration),e<Math.max(i-o.maxFragLookUpTolerance,r-u)){var d=this.liveSyncPosition=this.computeLivePosition(i,t);e=d,l&&!l.paused&&l.readyState&&l.duration>d&&d>l.currentTime&&(te.logger.log("buffer end: "+e.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+d.toFixed(3)),l.currentTime=d),this.nextLoadPosition=d}if(t.PTSKnown&&e>r&&l&&l.readyState)return null;if(this.startFragRequested&&!t.PTSKnown&&n)if(t.hasProgramDateTime)te.logger.log("live playlist, switching playlist, load frag with same PDT: "+n.programDateTime),s=j(a,n.endProgramDateTime,o.maxFragLookUpTolerance);else{var c=n.sn+1;if(c>=t.startSN&&c<=t.endSN){var h=a[c-t.startSN];n.cc===h.cc&&(s=h,te.logger.log("live playlist, switching playlist, load frag with next SN: "+s.sn))}s||(s=Ne.search(a,function(t){return n.cc-t.cc}))&&te.logger.log("live playlist, switching playlist, load frag with same CC: "+s.sn)}return s},i._findFragment=function(t,e,i,r,n,a,s){var o,l=this.hls.config;if(o=n<a?O(e,r,n,n>a-l.maxFragLookUpTolerance?0:l.maxFragLookUpTolerance):r[i-1]){var u=o.sn-s.startSN,d=e&&o.level===e.level,c=r[u-1],h=r[u+1];if(e&&o.sn===e.sn)if(d&&!o.backtracked)if(o.sn<s.endSN){var f=e.deltaPTS;f&&f>l.maxBufferHole&&e.dropped&&u?(o=c,te.logger.warn("Previous fragment was dropped with large PTS gap between audio and video. Maybe fragment is not starting with a keyframe? Loading previous one to try to overcome this")):(o=h,this.fragmentTracker.getState(o)!==ke.OK&&te.logger.log("Re-loading fragment with SN: "+o.sn))}else o=null;else o.backtracked&&(h&&h.backtracked?(te.logger.warn("Already backtracked from fragment "+h.sn+", will not backtrack to fragment "+o.sn+". Loading fragment "+h.sn),o=h):(te.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),o.dropped=0,c?(o=c,o.backtracked=!0):u&&(o=null)))}return o},i._loadKey=function(t,e){te.logger.log("Loading key for "+t.sn+" of ["+e.startSN+"-"+e.endSN+"], level "+this.level),this.state=qe.KEY_LOADING,this.hls.trigger($t.default.KEY_LOADING,{frag:t})},i._loadFragment=function(t,e,i,r){var n=this.fragmentTracker.getState(t);this.fragCurrent=t,"initSegment"!==t.sn&&(this.startFragRequested=!0),Object(Zt.isFiniteNumber)(t.sn)&&!t.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),t.backtracked||n===ke.NOT_LOADED||n===ke.PARTIAL?(t.autoLevel=this.hls.autoLevelEnabled,t.bitrateTest=this.bitrateTest,te.logger.log("Loading "+t.sn+" of ["+e.startSN+"-"+e.endSN+"], level "+this.level+", "+(this.loadedmetadata?"currentTime":"nextLoadPosition")+": "+parseFloat(i.toFixed(3))+", bufferEnd: "+parseFloat(r.toFixed(3))),this.hls.trigger($t.default.FRAG_LOADING,{frag:t}),this.demuxer||(this.demuxer=new Ge(this.hls,"main")),this.state=qe.FRAG_LOADING):n===ke.APPENDING&&this._reduceMaxBufferLength(t.duration)&&this.fragmentTracker.removeFragment(t)},i.getBufferedFrag=function(t){return this.fragmentTracker.getBufferedFrag(t,ne.MAIN)},i.followingBufferedFrag=function(t){return t?this.getBufferedFrag(t.endPTS+.5):null},i._checkFragmentChanged=function(){var t,e,i=this.media;if(i&&i.readyState&&!1===i.seeking&&(e=i.currentTime,e>this.lastCurrentTime&&(this.lastCurrentTime=e),Ie.isBuffered(i,e)?t=this.getBufferedFrag(e):Ie.isBuffered(i,e+.1)&&(t=this.getBufferedFrag(e+.1)),t)){var r=t;if(r!==this.fragPlaying){this.hls.trigger($t.default.FRAG_CHANGED,{frag:r});var n=r.level;this.fragPlaying&&this.fragPlaying.level===n||this.hls.trigger($t.default.LEVEL_SWITCHED,{level:n}),this.fragPlaying=r}}},i.immediateLevelSwitch=function(){if(te.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var t,e=this.media;e?(t=e.paused)||e.pause():t=!0,this.previouslyPaused=t}var i=this.fragCurrent;i&&i.loader&&i.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},i.immediateLevelSwitchEnd=function(){var t=this.media;t&&t.buffered.length&&(this.immediateSwitch=!1,t.currentTime>0&&Ie.isBuffered(t,t.currentTime)&&(t.currentTime-=1e-4),this.previouslyPaused||t.play())},i.nextLevelSwitch=function(){var t=this.media;if(t&&t.readyState){var e,i=this.getBufferedFrag(t.currentTime);if(i&&i.startPTS>1&&this.flushMainBuffer(0,i.startPTS-1),t.paused)e=0;else{var r=this.hls.nextLoadLevel,n=this.levels[r],a=this.fragLastKbps;e=a&&this.fragCurrent?this.fragCurrent.duration*n.bitrate/(1e3*a)+1:0}var s=this.getBufferedFrag(t.currentTime+e);if(s){var o=this.followingBufferedFrag(s);if(o){var l=this.fragCurrent;l&&l.loader&&l.loader.abort(),this.fragCurrent=null;var u=Math.max(s.endPTS,o.maxStartPTS+Math.min(this.config.maxFragLookUpTolerance,o.duration));this.flushMainBuffer(u,Number.POSITIVE_INFINITY)}}}},i.flushMainBuffer=function(t,e){this.state=qe.BUFFER_FLUSHING;var i={startOffset:t,endOffset:e};this.altAudio&&(i.type="video"),this.hls.trigger($t.default.BUFFER_FLUSHING,i)},i.onMediaAttached=function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("seeked",this.onvseeked),e.addEventListener("ended",this.onvended);var i=this.config;this.levels&&i.autoStartLoad&&this.hls.startLoad(i.startPosition),this.gapController=new Ve(i,e,this.fragmentTracker,this.hls)},i.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(te.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var e=this.levels;e&&e.forEach(function(t){t.details&&t.details.fragments.forEach(function(t){t.backtracked=void 0})}),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("seeked",this.onvseeked),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.fragmentTracker.removeAllFragments(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},i.onMediaSeeked=function(){var t=this.media,e=t?t.currentTime:void 0;Object(Zt.isFiniteNumber)(e)&&te.logger.log("media seeked to "+e.toFixed(3)),this.tick()},i.onManifestLoading=function(){te.logger.log("trigger BUFFER_RESET"),this.hls.trigger($t.default.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},i.onManifestParsed=function(t){var e,i=!1,r=!1;t.levels.forEach(function(t){(e=t.audioCodec)&&(-1!==e.indexOf("mp4a.40.2")&&(i=!0),-1!==e.indexOf("mp4a.40.5")&&(r=!0))}),this.audioCodecSwitch=i&&r,this.audioCodecSwitch&&te.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.altAudio=t.altAudio,this.levels=t.levels,this.startFragRequested=!1;var n=this.config;(n.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(n.startPosition)},i.onLevelLoaded=function(t){var e=t.details,i=t.level,r=this.levels[this.levelLastLoaded],n=this.levels[i],a=e.totalduration,s=0;if(te.logger.log("level "+i+" loaded ["+e.startSN+","+e.endSN+"],duration:"+a),e.live||n.details&&n.details.live){var o=n.details;o&&e.fragments.length>0?(E(o,e),s=e.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(s,o),e.PTSKnown&&Object(Zt.isFiniteNumber)(s)?te.logger.log("live playlist sliding:"+s.toFixed(3)):(te.logger.log("live playlist - outdated PTS, unknown sliding"),R(this.fragPrevious,r,e))):(te.logger.log("live playlist - first load, unknown sliding"),e.PTSKnown=!1,R(this.fragPrevious,r,e))}else e.PTSKnown=!1;if(n.details=e,this.levelLastLoaded=i,this.hls.trigger($t.default.LEVEL_UPDATED,{details:e,level:i}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var l=e.startTimeOffset;Object(Zt.isFiniteNumber)(l)?(l<0&&(te.logger.log("negative start time offset "+l+", count from end of last fragment"),l=s+a+l),te.logger.log("start time offset found in playlist, adjust startPosition to "+l),this.startPosition=l):e.live?(this.startPosition=this.computeLivePosition(s,e),te.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===qe.WAITING_LEVEL&&(this.state=qe.IDLE),this.tick()},i.onKeyLoaded=function(){this.state===qe.KEY_LOADING&&(this.state=qe.IDLE,this.tick())},i.onFragLoaded=function(t){var e=this.fragCurrent,i=this.hls,r=this.levels,n=this.media,a=t.frag;if(this.state===qe.FRAG_LOADING&&e&&"main"===a.type&&a.level===e.level&&a.sn===e.sn){var s=t.stats,o=r[e.level],l=o.details;if(this.bitrateTest=!1,this.stats=s,te.logger.log("Loaded "+e.sn+" of ["+l.startSN+" ,"+l.endSN+"],level "+e.level),a.bitrateTest&&i.nextLoadLevel)this.state=qe.IDLE,this.startFragRequested=!1,s.tparsed=s.tbuffered=window.performance.now(),i.trigger($t.default.FRAG_BUFFERED,{stats:s,frag:e,id:"main"}),this.tick();else if("initSegment"===a.sn)this.state=qe.IDLE,s.tparsed=s.tbuffered=window.performance.now(),l.initSegment.data=t.payload,i.trigger($t.default.FRAG_BUFFERED,{stats:s,frag:e,id:"main"}),this.tick();else{te.logger.log("Parsing "+e.sn+" of ["+l.startSN+" ,"+l.endSN+"],level "+e.level+", cc "+e.cc),this.state=qe.PARSING,this.pendingBuffering=!0,this.appended=!1,a.bitrateTest&&(a.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:a}));var u=!(n&&n.seeking)&&(l.PTSKnown||!l.live),d=l.initSegment?l.initSegment.data:[],c=this._getAudioCodec(o),h=this.demuxer=this.demuxer||new Ge(this.hls,"main");h.push(t.payload,d,c,o.videoCodec,e,l.totalduration,u)}}this.fragLoadError=0},i.onFragParsingInitSegment=function(t){var e=this.fragCurrent,i=t.frag;if(e&&"main"===t.id&&i.sn===e.sn&&i.level===e.level&&this.state===qe.PARSING){var r,n,a=t.tracks;if(this.audioOnly=a.audio&&!a.video,this.altAudio&&!this.audioOnly&&delete a.audio,n=a.audio){var s=this.levels[this.level].audioCodec,o=navigator.userAgent.toLowerCase();s&&this.audioCodecSwap&&(te.logger.log("swapping playlist audio codec"),s=-1!==s.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==n.metadata.channelCount&&-1===o.indexOf("firefox")&&(s="mp4a.40.5"),-1!==o.indexOf("android")&&"audio/mpeg"!==n.container&&(s="mp4a.40.2",te.logger.log("Android: force audio codec to "+s)),n.levelCodec=s,n.id=t.id}n=a.video,n&&(n.levelCodec=this.levels[this.level].videoCodec,n.id=t.id),this.hls.trigger($t.default.BUFFER_CODECS,a);for(r in a){n=a[r],te.logger.log("main track:"+r+",container:"+n.container+",codecs[level/parsed]=["+n.levelCodec+"/"+n.codec+"]");var l=n.initSegment;l&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger($t.default.BUFFER_APPENDING,{type:r,data:l,parent:"main",content:"initSegment"}))}this.tick()}},i.onFragParsingData=function(t){var e=this,i=this.fragCurrent,r=t.frag;if(i&&"main"===t.id&&r.sn===i.sn&&r.level===i.level&&("audio"!==t.type||!this.altAudio)&&this.state===qe.PARSING){var n=this.levels[this.level],a=i;if(Object(Zt.isFiniteNumber)(t.endPTS)||(t.endPTS=t.startPTS+i.duration,t.endDTS=t.startDTS+i.duration),!0===t.hasAudio&&a.addElementaryStream(ae.AUDIO),!0===t.hasVideo&&a.addElementaryStream(ae.VIDEO),te.logger.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0)),"video"===t.type)if(a.dropped=t.dropped,a.dropped)if(a.backtracked)te.logger.warn("Already backtracked on this fragment, appending with the gap",a.sn);else{var s=n.details;if(!s||a.sn!==s.startSN)return te.logger.warn("missing video frame(s), backtracking fragment",a.sn),this.fragmentTracker.removeFragment(a),a.backtracked=!0,this.nextLoadPosition=t.startPTS,this.state=qe.IDLE,this.fragPrevious=a,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),void this.tick();te.logger.warn("missing video frame(s) on first frag, appending with gap",a.sn)}else a.backtracked=!1;var o=T(n.details,a,t.startPTS,t.endPTS,t.startDTS,t.endDTS),l=this.hls;l.trigger($t.default.LEVEL_PTS_UPDATED,{details:n.details,level:this.level,drift:o,type:t.type,start:t.startPTS,end:t.endPTS}),[t.data1,t.data2].forEach(function(i){i&&i.length&&e.state===qe.PARSING&&(e.appended=!0,e.pendingBuffering=!0,l.trigger($t.default.BUFFER_APPENDING,{type:t.type,data:i,parent:"main",content:"data"}))}),this.tick()}},i.onFragParsed=function(t){var e=this.fragCurrent,i=t.frag;e&&"main"===t.id&&i.sn===e.sn&&i.level===e.level&&this.state===qe.PARSING&&(this.stats.tparsed=window.performance.now(),this.state=qe.PARSED,this._checkAppendedParsed())},i.onAudioTrackSwitching=function(t){var e=this.altAudio,i=!!t.url,r=t.id;if(!i){if(this.mediaBuffer!==this.media){te.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var n=this.fragCurrent;n.loader&&(te.logger.log("switching to main audio track, cancel main fragment load"),n.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=qe.IDLE}var a=this.hls;e&&a.trigger($t.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),a.trigger($t.default.AUDIO_TRACK_SWITCHED,{id:r})}},i.onAudioTrackSwitched=function(t){var e=t.id,i=!!this.hls.audioTracks[e].url;if(i){var r=this.videoBuffer;r&&this.mediaBuffer!==r&&(te.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=r)}this.altAudio=i,this.tick()},i.onBufferCreated=function(t){var e,i,r=t.tracks,n=!1;for(var a in r){var s=r[a];"main"===s.id?(i=a,e=s,"video"===a&&(this.videoBuffer=r[a].buffer)):n=!0}n&&e?(te.logger.log("alternate track found, use "+i+".buffered to schedule main fragment loading"),this.mediaBuffer=e.buffer):this.mediaBuffer=this.media},i.onBufferAppended=function(t){if("main"===t.parent){var e=this.state;e!==qe.PARSING&&e!==qe.PARSED||(this.pendingBuffering=t.pending>0,this._checkAppendedParsed())}},i._checkAppendedParsed=function(){if(!(this.state!==qe.PARSED||this.appended&&this.pendingBuffering)){var t=this.fragCurrent;if(t){var e=this.mediaBuffer?this.mediaBuffer:this.media;te.logger.log("main buffered : "+Ke.toString(e.buffered)),this.fragPrevious=t;var i=this.stats;i.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*i.total/(i.tbuffered-i.tfirst)),this.hls.trigger($t.default.FRAG_BUFFERED,{stats:i,frag:t,id:"main"}),this.state=qe.IDLE}(this.loadedmetadata||this.startPosition<=0)&&this.tick()}},i.onError=function(t){var e=t.frag||this.fragCurrent;if(!e||"main"===e.type){var i=!!this.media&&Ie.isBuffered(this.media,this.media.currentTime)&&Ie.isBuffered(this.media,this.media.currentTime+.5);switch(t.details){case Jt.ErrorDetails.FRAG_LOAD_ERROR:case Jt.ErrorDetails.FRAG_LOAD_TIMEOUT:case Jt.ErrorDetails.KEY_LOAD_ERROR:case Jt.ErrorDetails.KEY_LOAD_TIMEOUT:if(!t.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var r=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);te.logger.warn("mediaController: frag loading failed, retry in "+r+" ms"),this.retryDate=window.performance.now()+r,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=qe.FRAG_LOADING_WAITING_RETRY}else te.logger.error("mediaController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=qe.ERROR;break;case Jt.ErrorDetails.LEVEL_LOAD_ERROR:case Jt.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==qe.ERROR&&(t.fatal?(this.state=qe.ERROR,te.logger.warn("streamController: "+t.details+",switch to "+this.state+" state ...")):t.levelRetry||this.state!==qe.WAITING_LEVEL||(this.state=qe.IDLE));break;case Jt.ErrorDetails.BUFFER_FULL_ERROR:"main"!==t.parent||this.state!==qe.PARSING&&this.state!==qe.PARSED||(i?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=qe.IDLE):(te.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},i._reduceMaxBufferLength=function(t){var e=this.config;return e.maxMaxBufferLength>=t&&(e.maxMaxBufferLength/=2,te.logger.warn("main:reduce max buffer length to "+e.maxMaxBufferLength+"s"),!0)},i._checkBuffer=function(){var t=this.media;if(t&&0!==t.readyState){var e=this.mediaBuffer?this.mediaBuffer:t,i=e.buffered;!this.loadedmetadata&&i.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,i)}},i.onFragLoadEmergencyAborted=function(){this.state=qe.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},i.onBufferFlushed=function(){var t=this.mediaBuffer?this.mediaBuffer:this.media;if(t){var e=this.audioOnly?ae.AUDIO:ae.VIDEO;this.fragmentTracker.detectEvictedFragments(e,t.buffered)}this.state=qe.IDLE,this.fragPrevious=null},i.onLevelsUpdated=function(t){this.levels=t.levels},i.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},i._seekToStartPos=function(){var t=this.media,e=t.currentTime,i=this.startPosition;if(e!==i&&i>=0){if(t.seeking)return void te.logger.log("could not seek to "+i+", already seeking at "+e);var r=t.buffered.length?t.buffered.start(0):0,n=r-i;n>0&&n<this.config.maxBufferHole&&(te.logger.log("adjusting start position by "+n+" to match buffer start"),i+=n,this.startPosition=i),te.logger.log("seek to target start position "+i+" from current time "+e+". ready state "+t.readyState),t.currentTime=i}},i._getAudioCodec=function(t){var e=this.config.defaultAudioCodec||t.audioCodec;return this.audioCodecSwap&&(te.logger.log("swapping playlist audio codec"),e&&(e=-1!==e.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),e},G(e,[{key:"state",set:function(t){if(this.state!==t){var e=this.state;this._state=t,te.logger.log("main stream-controller: "+e+"->"+t),this.hls.trigger($t.default.STREAM_STATE_TRANSITION,{previousState:e,nextState:t})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var t=this.media;if(t){var e=this.getBufferedFrag(t.currentTime);if(e)return e.level}return-1}},{key:"nextBufferedFrag",get:function(){var t=this.media;return t?this.followingBufferedFrag(this.getBufferedFrag(t.currentTime)):null}},{key:"nextLevel",get:function(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(t){this._liveSyncPosition=t}}]),e}(Qe),Je=Xe,Ze=function(t){function e(e){var i;return i=t.call(this,e,$t.default.MANIFEST_LOADED,$t.default.LEVEL_LOADED,$t.default.AUDIO_TRACK_SWITCHED,$t.default.FRAG_LOADED,$t.default.ERROR)||this,i.canload=!1,i.currentLevelIndex=null,i.manualLevelIndex=-1,i.timer=null,le=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),i}W(e,t);var i=e.prototype;return i.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},i.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},i.startLoad=function(){var t=this._levels;this.canload=!0,this.levelRetryCount=0,t&&t.forEach(function(t){t.loadError=0;var e=t.details;e&&e.live&&(t.details=void 0)}),null!==this.timer&&this.loadLevel()},i.stopLoad=function(){this.canload=!1},i.onManifestLoaded=function(t){var e,i=[],r=[],n={},a=null,s=!1,o=!1;if(t.levels.forEach(function(t){var e=t.attrs;t.loadError=0,t.fragmentError=!1,s=s||!!t.videoCodec,o=o||!!t.audioCodec,le&&t.audioCodec&&-1!==t.audioCodec.indexOf("mp4a.40.34")&&(t.audioCodec=void 0),a=n[t.bitrate],a?a.url.push(t.url):(t.url=[t.url],t.urlId=0,n[t.bitrate]=t,i.push(t)),e&&(e.AUDIO&&L(a||t,"audio",e.AUDIO),e.SUBTITLES&&L(a||t,"text",e.SUBTITLES))}),s&&o&&(i=i.filter(function(t){return!!t.videoCodec})),i=i.filter(function(t){var e=t.audioCodec,i=t.videoCodec;return(!e||d(e,"audio"))&&(!i||d(i,"video"))}),t.audioTracks&&(r=t.audioTracks.filter(function(t){return!t.audioCodec||d(t.audioCodec,"audio")}),r.forEach(function(t,e){t.id=e})),i.length>0){e=i[0].bitrate,i.sort(function(t,e){return t.bitrate-e.bitrate}),this._levels=i;for(var l=0;l<i.length;l++)if(i[l].bitrate===e){this._firstLevel=l,te.logger.log("manifest loaded,"+i.length+" level(s) found, first bitrate:"+e);break}var u=o&&!s;this.hls.trigger($t.default.MANIFEST_PARSED,{levels:i,audioTracks:r,firstLevel:this._firstLevel,stats:t.stats,audio:o,video:s,altAudio:!u&&r.some(function(t){return!!t.url})})}else this.hls.trigger($t.default.ERROR,{type:Jt.ErrorTypes.MEDIA_ERROR,details:Jt.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},i.setLevelInternal=function(t){var e=this._levels,i=this.hls;if(t>=0&&t<e.length){if(this.clearTimer(),this.currentLevelIndex!==t){te.logger.log("switching to level "+t),this.currentLevelIndex=t;var r=e[t];r.level=t,i.trigger($t.default.LEVEL_SWITCHING,r)}var n=e[t],a=n.details;if(!a||a.live){var s=n.urlId;i.trigger($t.default.LEVEL_LOADING,{url:n.url[s],level:t,id:s})}}else i.trigger($t.default.ERROR,{type:Jt.ErrorTypes.OTHER_ERROR,details:Jt.ErrorDetails.LEVEL_SWITCH_ERROR,level:t,fatal:!1,reason:"invalid level idx"})},i.onError=function(t){if(t.fatal)return void(t.type===Jt.ErrorTypes.NETWORK_ERROR&&this.clearTimer());var e,i=!1,r=!1;switch(t.details){case Jt.ErrorDetails.FRAG_LOAD_ERROR:case Jt.ErrorDetails.FRAG_LOAD_TIMEOUT:case Jt.ErrorDetails.KEY_LOAD_ERROR:case Jt.ErrorDetails.KEY_LOAD_TIMEOUT:e=t.frag.level,r=!0;break;case Jt.ErrorDetails.LEVEL_LOAD_ERROR:case Jt.ErrorDetails.LEVEL_LOAD_TIMEOUT:e=t.context.level,i=!0;break;case Jt.ErrorDetails.REMUX_ALLOC_ERROR:e=t.level,i=!0}void 0!==e&&this.recoverLevel(t,e,i,r)},i.recoverLevel=function(t,e,i,r){var n,a,s,o=this,l=this.hls.config,u=t.details,d=this._levels[e];if(d.loadError++,d.fragmentError=r,i){if(!(this.levelRetryCount+1<=l.levelLoadingMaxRetry))return te.logger.error("level controller, cannot recover from "+u+" error"),this.currentLevelIndex=null,this.clearTimer(),void(t.fatal=!0);a=Math.min(Math.pow(2,this.levelRetryCount)*l.levelLoadingRetryDelay,l.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return o.loadLevel()},a),t.levelRetry=!0,this.levelRetryCount++,te.logger.warn("level controller, "+u+", retry in "+a+" ms, current retry count is "+this.levelRetryCount)}(i||r)&&(n=d.url.length,n>1&&d.loadError<n?(d.urlId=(d.urlId+1)%n,d.details=void 0,te.logger.warn("level controller, "+u+" for level "+e+": switching to redundant URL-id "+d.urlId)):-1===this.manualLevelIndex?(s=0===e?this._levels.length-1:e-1,te.logger.warn("level controller, "+u+": switch to "+s),this.hls.nextAutoLevel=this.currentLevelIndex=s):r&&(te.logger.warn("level controller, "+u+": reload a fragment"),this.currentLevelIndex=null))},i.onFragLoaded=function(t){var e=t.frag;if(void 0!==e&&"main"===e.type){var i=this._levels[e.level];void 0!==i&&(i.fragmentError=!1,i.loadError=0,this.levelRetryCount=0)}},i.onLevelLoaded=function(t){var e=this,i=t.level,r=t.details;if(i===this.currentLevelIndex){var n=this._levels[i];if(n.fragmentError||(n.loadError=0,this.levelRetryCount=0),r.live){var a=C(n.details,r,t.stats.trequest);te.logger.log("live playlist, reload in "+Math.round(a)+" ms"),this.timer=setTimeout(function(){return e.loadLevel()},a)}else this.clearTimer()}},i.onAudioTrackSwitched=function(t){var e=this.hls.audioTracks[t.id].groupId,i=this.hls.levels[this.currentLevelIndex];if(i&&i.audioGroupIds){for(var r=-1,n=0;n<i.audioGroupIds.length;n++)if(i.audioGroupIds[n]===e){r=n;break}r!==i.urlId&&(i.urlId=r,this.startLoad())}},i.loadLevel=function(){if(te.logger.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var t=this._levels[this.currentLevelIndex];if("object"==typeof t&&t.url.length>0){var e=this.currentLevelIndex,i=t.urlId,r=t.url[i];te.logger.log("Attempt loading level index "+e+" with URL-id "+i),this.hls.trigger($t.default.LEVEL_LOADING,{url:r,level:e,id:i})}}},i.removeLevel=function(t,e){var i=this.levels.filter(function(i,r){return r!==t||i.url.length>1&&void 0!==e&&(i.url=i.url.filter(function(t,i){return i!==e}),i.urlId=0,!0)}).map(function(t,e){var i=t.details;return i&&i.fragments&&i.fragments.forEach(function(t){t.level=e}),t});this._levels=i,this.hls.trigger($t.default.LEVELS_UPDATED,{levels:i})},V(e,[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(t){var e=this._levels;e&&(t=Math.min(t,e.length-1),this.currentLevelIndex===t&&e[t].details||this.setLevelInternal(t))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(t){this.manualLevelIndex=t,void 0===this._startLevel&&(this._startLevel=t),-1!==t&&(this.level=t)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(t){this._firstLevel=t}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var t=this.hls.config.startLevel;return void 0!==t?t:this._firstLevel}return this._startLevel},set:function(t){this._startLevel=t}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(t){this.level=t,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=t)}}]),e}(re),$e=i("./src/demux/id3.js"),ti=function(t){function e(e){var i;return i=t.call(this,e,$t.default.MEDIA_ATTACHED,$t.default.MEDIA_DETACHING,$t.default.FRAG_PARSING_METADATA,$t.default.LIVE_BACK_BUFFER_REACHED)||this,i.id3Track=void 0,i.media=void 0,i}J(e,t);var i=e.prototype;return i.destroy=function(){re.prototype.destroy.call(this)},i.onMediaAttached=function(t){this.media=t.media,this.media},i.onMediaDetaching=function(){Q(this.id3Track),this.id3Track=void 0,this.media=void 0},i.getID3Track=function(t){for(var e=0;e<t.length;e++){var i=t[e];if("metadata"===i.kind&&"id3"===i.label)return q(i,this.media),i}return this.media.addTextTrack("metadata","id3")},i.onFragParsingMetadata=function(t){var e=t.frag,i=t.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var r=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,n=0;n<i.length;n++){var a=$e.default.getID3Frames(i[n].data);if(a){var s=Math.max(i[n].pts,0),o=n<i.length-1?i[n+1].pts:e.endPTS;o||(o=e.start+e.duration),o-s<=0&&(o=s+.25);for(var l=0;l<a.length;l++){var u=a[l];if(!$e.default.isTimeStampFrame(u)){var d=new r(s,o,"");d.value=u,this.id3Track.addCue(d)}}}}},i.onLiveBackBufferReached=function(t){var e=t.bufferEnd,i=this.id3Track;if(i&&i.cues&&i.cues.length){var r=X(i.cues,e);if(r)for(;i.cues[0]!==r;)i.removeCue(i.cues[0])}},e}(re),ei=ti,ii=function(){function t(t){this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=0,this.totalWeight_=0}var e=t.prototype;return e.sample=function(t,e){var i=Math.pow(this.alpha_,t);this.estimate_=e*(1-i)+i*this.estimate_,this.totalWeight_+=t},e.getTotalWeight=function(){return this.totalWeight_},e.getEstimate=function(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/t}return this.estimate_},t}(),ri=ii,ni=function(){function t(t,e,i,r){this.hls=void 0,this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.hls=t,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new ri(e),this.fast_=new ri(i)}var e=t.prototype;return e.sample=function(t,e){t=Math.max(t,this.minDelayMs_);var i=8*e,r=t/1e3,n=i/r;this.fast_.sample(r,n),this.slow_.sample(r,n)},e.canEstimate=function(){var t=this.fast_;return t&&t.getTotalWeight()>=this.minWeight_},e.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},e.destroy=function(){},t}(),ai=ni,si=window,oi=si.performance,li=function(t){function e(e){var i;return i=t.call(this,e,$t.default.FRAG_LOADING,$t.default.FRAG_LOADED,$t.default.FRAG_BUFFERED,$t.default.ERROR)||this,i.lastLoadedFragLevel=0,i._nextAutoLevel=-1,i.hls=e,i.timer=null,i._bwEstimator=null,i.onCheck=i._abandonRulesCheck.bind(et(i)),i}it(e,t);var i=e.prototype;return i.destroy=function(){this.clearTimer(),re.prototype.destroy.call(this)},i.onFragLoading=function(t){var e=t.frag;if("main"===e.type&&(this.timer||(this.fragCurrent=e,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var i,r,n=this.hls,a=n.config,s=e.level;n.levels[s].details.live?(i=a.abrEwmaFastLive,r=a.abrEwmaSlowLive):(i=a.abrEwmaFastVoD,r=a.abrEwmaSlowVoD),this._bwEstimator=new ai(n,r,i,a.abrEwmaDefaultEstimate)}},i._abandonRulesCheck=function(){var t=this.hls,e=t.media,i=this.fragCurrent;if(i){var r=i.loader;if(!r||r.stats&&r.stats.aborted)return te.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var n=r.stats;if(e&&n&&(!e.paused&&0!==e.playbackRate||!e.readyState)&&i.autoLevel&&i.level){var a=oi.now()-n.trequest,s=Math.abs(e.playbackRate);if(a>500*i.duration/s){var o=t.levels,l=Math.max(1,n.bw?n.bw/8:1e3*n.loaded/a),u=o[i.level];if(!u)return;var d=u.realBitrate?Math.max(u.realBitrate,u.bitrate):u.bitrate,c=n.total?n.total:Math.max(n.loaded,Math.round(i.duration*d/8)),h=e.currentTime,f=(c-n.loaded)/l,p=(Ie.bufferInfo(e,h,t.config.maxBufferHole).end-h)/s;if(p<2*i.duration/s&&f>p){var g,y,v=t.minAutoLevel;for(y=i.level-1;y>v;y--){var m=o[y].realBitrate?Math.max(o[y].realBitrate,o[y].bitrate):o[y].bitrate;if(i.duration*m/(6.4*l)<p)break}g<f&&(te.logger.warn("loading too slow, abort fragment loading and switch to level "+y+":fragLoadedDelay["+y+"]<fragLoadedDelay["+(i.level-1)+"];bufferStarvationDelay:"+g.toFixed(1)+"<"+f.toFixed(1)+":"+p.toFixed(1)),t.nextLoadLevel=y,this._bwEstimator.sample(a,n.loaded),r.abort(),this.clearTimer(),t.trigger($t.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:i,stats:n}))}}}}},i.onFragLoaded=function(t){var e=t.frag;if("main"===e.type&&Object(Zt.isFiniteNumber)(e.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=e.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var i=this.hls.levels[e.level],r=(i.loaded?i.loaded.bytes:0)+t.stats.loaded,n=(i.loaded?i.loaded.duration:0)+t.frag.duration;i.loaded={bytes:r,duration:n},i.realBitrate=Math.round(8*r/n)}if(t.frag.bitrateTest){var a=t.stats;a.tparsed=a.tbuffered=a.tload,this.onFragBuffered(t)}}},i.onFragBuffered=function(t){var e=t.stats,i=t.frag;if(!0!==e.aborted&&"main"===i.type&&Object(Zt.isFiniteNumber)(i.sn)&&(!i.bitrateTest||e.tload===e.tbuffered)){var r=e.tparsed-e.trequest;te.logger.log("latency/loading/parsing/append/kbps:"+Math.round(e.tfirst-e.trequest)+"/"+Math.round(e.tload-e.tfirst)+"/"+Math.round(e.tparsed-e.tload)+"/"+Math.round(e.tbuffered-e.tparsed)+"/"+Math.round(8*e.loaded/(e.tbuffered-e.trequest))),this._bwEstimator.sample(r,e.loaded),e.bwEstimate=this._bwEstimator.getEstimate(),i.bitrateTest?this.bitrateTestDelay=r/1e3:this.bitrateTestDelay=0}},i.onError=function(t){switch(t.details){case Jt.ErrorDetails.FRAG_LOAD_ERROR:case Jt.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},i.clearTimer=function(){clearInterval(this.timer),this.timer=null},i._findBestLevel=function(t,e,i,r,n,a,s,o,l){for(var u=n;u>=r;u--){var d=l[u];if(d){var c=d.details,h=c?c.totalduration/c.fragments.length:e,f=!!c&&c.live,p=void 0;p=u<=t?s*i:o*i;var g=l[u].realBitrate?Math.max(l[u].realBitrate,l[u].bitrate):l[u].bitrate,y=g*h/p;if(te.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+u+"/"+Math.round(p)+"/"+g+"/"+h+"/"+a+"/"+y),p>g&&(!y||f&&!this.bitrateTestDelay||y<a))return u}}return-1},tt(e,[{key:"nextAutoLevel",get:function(){var t=this._nextAutoLevel,e=this._bwEstimator;if(!(-1===t||e&&e.canEstimate()))return t;var i=this._nextABRAutoLevel;return-1!==t&&(i=Math.min(t,i)),i},set:function(t){this._nextAutoLevel=t}},{key:"_nextABRAutoLevel",get:function(){var t=this.hls,e=t.maxAutoLevel,i=t.levels,r=t.config,n=t.minAutoLevel,a=t.media,s=this.lastLoadedFragLevel,o=this.fragCurrent?this.fragCurrent.duration:0,l=a?a.currentTime:0,u=a&&0!==a.playbackRate?Math.abs(a.playbackRate):1,d=this._bwEstimator?this._bwEstimator.getEstimate():r.abrEwmaDefaultEstimate,c=(Ie.bufferInfo(a,l,r.maxBufferHole).end-l)/u,h=this._findBestLevel(s,o,d,n,e,c,r.abrBandWidthFactor,r.abrBandWidthUpFactor,i);if(h>=0)return h;te.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var f=o?Math.min(o,r.maxStarvationDelay):r.maxStarvationDelay,p=r.abrBandWidthFactor,g=r.abrBandWidthUpFactor;if(0===c){var y=this.bitrateTestDelay;y&&(f=(o?Math.min(o,r.maxLoadingDelay):r.maxLoadingDelay)-y,te.logger.trace("bitrate test took "+Math.round(1e3*y)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*f)+" ms"),p=g=1)}return h=this._findBestLevel(s,o,d,n,e,c+f,p,g,i),Math.max(h,0)}}]),e}(re),ui=li,di=v(),ci=function(t){function e(e){var i;return i=t.call(this,e,$t.default.MEDIA_ATTACHING,$t.default.MEDIA_DETACHING,$t.default.MANIFEST_PARSED,$t.default.BUFFER_RESET,$t.default.BUFFER_APPENDING,$t.default.BUFFER_CODECS,$t.default.BUFFER_EOS,$t.default.BUFFER_FLUSHING,$t.default.LEVEL_PTS_UPDATED,$t.default.LEVEL_UPDATED)||this,i._msDuration=null,i._levelDuration=null,i._levelTargetDuration=10,i._live=null,i._objectUrl=null,i._needsFlush=!1,i._needsEos=!1,i.config=void 0,i.audioTimestampOffset=void 0,i.bufferCodecEventsExpected=0,i._bufferCodecEventsTotal=0,i.media=null,i.mediaSource=null,i.segments=[],i.parent=void 0,i.appending=!1,i.appended=0,i.appendError=0,i.flushBufferCounter=0,i.tracks={},i.pendingTracks={},i.sourceBuffer={},i.flushRange=[],i._onMediaSourceOpen=function(){te.logger.log("media source opened"),i.hls.trigger($t.default.MEDIA_ATTACHED,{media:i.media});var t=i.mediaSource;t&&t.removeEventListener("sourceopen",i._onMediaSourceOpen),i.checkPendingTracks()},i._onMediaSourceClose=function(){te.logger.log("media source closed")},i._onMediaSourceEnded=function(){te.logger.log("media source ended")},i._onSBUpdateEnd=function(){if(i.audioTimestampOffset&&i.sourceBuffer.audio){var t=i.sourceBuffer.audio;te.logger.warn("change mpeg audio timestamp offset from "+t.timestampOffset+" to "+i.audioTimestampOffset),t.timestampOffset=i.audioTimestampOffset,delete i.audioTimestampOffset}i._needsFlush&&i.doFlush(),i._needsEos&&i.checkEos(),i.appending=!1;var e=i.parent,r=i.segments.reduce(function(t,i){return i.parent===e?t+1:t},0),n={},a=i.sourceBuffer;for(var s in a){var o=a[s];if(!o)throw Error("handling source buffer update end error: source buffer for "+s+" uninitilized and unable to update buffered TimeRanges.");n[s]=o.buffered}i.hls.trigger($t.default.BUFFER_APPENDED,{parent:e,pending:r,timeRanges:n}),i._needsFlush||i.doAppending(),i.updateMediaElementDuration(),0===r&&i.flushLiveBackBuffer()},i._onSBUpdateError=function(t){te.logger.error("sourceBuffer error:",t),i.hls.trigger($t.default.ERROR,{type:Jt.ErrorTypes.MEDIA_ERROR,details:Jt.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},i.config=e.config,i}rt(e,t);var i=e.prototype;return i.destroy=function(){re.prototype.destroy.call(this)},i.onLevelPtsUpdated=function(t){var e=t.type,i=this.tracks.audio;if("audio"===e&&i&&"audio/mpeg"===i.container){var r=this.sourceBuffer.audio;if(!r)throw Error("Level PTS Updated and source buffer for audio uninitalized");if(Math.abs(r.timestampOffset-t.start)>.1){var n=r.updating;try{r.abort()}catch(t){te.logger.warn("can not abort audio buffer: "+t)}n?this.audioTimestampOffset=t.start:(te.logger.warn("change mpeg audio timestamp offset from "+r.timestampOffset+" to "+t.start),r.timestampOffset=t.start)}}},i.onManifestParsed=function(t){var e=2;(t.audio&&!t.video||!t.altAudio)&&(e=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=e,te.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},i.onMediaAttaching=function(t){var e=this.media=t.media;if(e&&di){var i=this.mediaSource=new di;i.addEventListener("sourceopen",this._onMediaSourceOpen),i.addEventListener("sourceended",this._onMediaSourceEnded),i.addEventListener("sourceclose",this._onMediaSourceClose),e.src=window.URL.createObjectURL(i),this._objectUrl=e.src}},i.onMediaDetaching=function(){te.logger.log("media source detaching");var t=this.mediaSource;if(t){if("open"===t.readyState)try{t.endOfStream()}catch(t){te.logger.warn("onMediaDetaching:"+t.message+" while calling endOfStream")}t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),this.media&&(this._objectUrl&&window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):te.logger.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.hls.trigger($t.default.MEDIA_DETACHED)},i.checkPendingTracks=function(){var t=this.bufferCodecEventsExpected,e=this.pendingTracks,i=Object.keys(e).length;(i&&!t||2===i)&&(this.createSourceBuffers(e),this.pendingTracks={},this.doAppending())},i.onBufferReset=function(){var t=this.sourceBuffer;for(var e in t){var i=t[e];try{i&&(this.mediaSource&&this.mediaSource.removeSourceBuffer(i),i.removeEventListener("updateend",this._onSBUpdateEnd),i.removeEventListener("error",this._onSBUpdateError))}catch(t){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},i.onBufferCodecs=function(t){var e=this;Object.keys(this.sourceBuffer).length||(Object.keys(t).forEach(function(i){e.pendingTracks[i]=t[i]}),this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},i.createSourceBuffers=function(t){var e=this.sourceBuffer,i=this.mediaSource;if(!i)throw Error("createSourceBuffers called when mediaSource was null");for(var r in t)if(!e[r]){var n=t[r];if(!n)throw Error("source buffer exists for track "+r+", however track does not");var a=n.levelCodec||n.codec,s=n.container+";codecs="+a;te.logger.log("creating sourceBuffer("+s+")");try{var o=e[r]=i.addSourceBuffer(s);o.addEventListener("updateend",this._onSBUpdateEnd),o.addEventListener("error",this._onSBUpdateError),this.tracks[r]={buffer:o,codec:a,id:n.id,container:n.container,levelCodec:n.levelCodec}}catch(t){te.logger.error("error while trying to add sourceBuffer:"+t.message),this.hls.trigger($t.default.ERROR,{type:Jt.ErrorTypes.MEDIA_ERROR,details:Jt.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:t,mimeType:s})}}this.hls.trigger($t.default.BUFFER_CREATED,{tracks:this.tracks})},i.onBufferAppending=function(t){this._needsFlush||(this.segments?this.segments.push(t):this.segments=[t],this.doAppending())},i.onBufferEos=function(t){for(var e in this.sourceBuffer)if(!t.type||t.type===e){var i=this.sourceBuffer[e];i&&!i.ended&&(i.ended=!0,te.logger.log(e+" sourceBuffer now EOS"))}this.checkEos()},i.checkEos=function(){var t=this.sourceBuffer,e=this.mediaSource;if(!e||"open"!==e.readyState)return void(this._needsEos=!1);for(var i in t){var r=t[i];if(r){if(!r.ended)return;if(r.updating)return void(this._needsEos=!0)}}te.logger.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{e.endOfStream()}catch(t){te.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1},i.onBufferFlushing=function(t){t.type?this.flushRange.push({start:t.startOffset,end:t.endOffset,type:t.type}):(this.flushRange.push({start:t.startOffset,end:t.endOffset,type:"video"}),this.flushRange.push({start:t.startOffset,end:t.endOffset,type:"audio"})),this.flushBufferCounter=0,this.doFlush()},i.flushLiveBackBuffer=function(){if(this._live){var t=this.config.liveBackBufferLength;if(isFinite(t)&&!(t<0)){if(!this.media)return void te.logger.error("flushLiveBackBuffer called without attaching media");for(var e=this.media.currentTime,i=this.sourceBuffer,r=Object.keys(i),n=e-Math.max(t,this._levelTargetDuration),a=r.length-1;a>=0;a--){var s=r[a],o=i[s];if(o){var l=o.buffered;l.length>0&&n>l.start(0)&&this.removeBufferRange(s,o,0,n)&&this.hls.trigger($t.default.LIVE_BACK_BUFFER_REACHED,{bufferEnd:n})}}}}},i.onLevelUpdated=function(t){var e=t.details;e.fragments.length>0&&(this._levelDuration=e.totalduration+e.fragments[0].start,this._levelTargetDuration=e.averagetargetduration||e.targetduration||10,this._live=e.live,this.updateMediaElementDuration())},i.updateMediaElementDuration=function(){var t,e=this.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var i in this.sourceBuffer){var r=this.sourceBuffer[i];if(r&&!0===r.updating)return}t=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===e.liveDurationInfinity?(te.logger.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>t||!Object(Zt.isFiniteNumber)(t))&&(te.logger.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},i.doFlush=function(){for(;this.flushRange.length;){var t=this.flushRange[0];if(!this.flushBuffer(t.start,t.end,t.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var e=0,i=this.sourceBuffer;try{for(var r in i){var n=i[r];n&&(e+=n.buffered.length)}}catch(t){te.logger.error("error while accessing sourceBuffer.buffered")}this.appended=e,this.hls.trigger($t.default.BUFFER_FLUSHED)}},i.doAppending=function(){var t=this.config,e=this.hls,i=this.segments,r=this.sourceBuffer;if(Object.keys(r).length){if(!this.media||this.media.error)return this.segments=[],void te.logger.error("trying to append although a media error occured, flush segment and abort");if(!this.appending){var n=i.shift();if(n)try{var a=r[n.type];if(!a)return void this._onSBUpdateEnd();if(a.updating)return void i.unshift(n);a.ended=!1,this.parent=n.parent,a.appendBuffer(n.data),this.appendError=0,this.appended++,this.appending=!0}catch(r){te.logger.error("error while trying to append buffer:"+r.message),i.unshift(n);var s={type:Jt.ErrorTypes.MEDIA_ERROR,parent:n.parent,details:"",fatal:!1};22===r.code?(this.segments=[],s.details=Jt.ErrorDetails.BUFFER_FULL_ERROR):(this.appendError++,s.details=Jt.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>t.appendErrorMaxRetry&&(te.logger.log("fail "+t.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],s.fatal=!0)),e.trigger($t.default.ERROR,s)}}}},i.flushBuffer=function(t,e,i){var r=this.sourceBuffer;if(!Object.keys(r).length)return!0;var n="null";if(this.media&&(n=this.media.currentTime.toFixed(3)),te.logger.log("flushBuffer,pos/start/end: "+n+"/"+t+"/"+e),this.flushBufferCounter>=this.appended)return te.logger.warn("abort flushing too many retries"),!0;var a=r[i];if(a){if(a.ended=!1,a.updating)return te.logger.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(i,a,t,e))return this.flushBufferCounter++,!1}return te.logger.log("buffer flushed"),!0},i.removeBufferRange=function(t,e,i,r){try{for(var n=0;n<e.buffered.length;n++){var a=e.buffered.start(n),s=e.buffered.end(n),o=Math.max(a,i),l=Math.min(s,r);if(Math.min(l,s)-o>.5){var u="null";return this.media&&(u=this.media.currentTime.toString()),te.logger.log("sb remove "+t+" ["+o+","+l+"], of ["+a+","+s+"], pos:"+u),e.remove(o,l),!0}}}catch(t){te.logger.warn("removeBufferRange failed",t)}return!1},e}(re),hi=ci,fi=function(t){function e(e){var i;return i=t.call(this,e,$t.default.FPS_DROP_LEVEL_CAPPING,$t.default.MEDIA_ATTACHING,$t.default.MANIFEST_PARSED,$t.default.LEVELS_UPDATED,$t.default.BUFFER_CODECS,$t.default.MEDIA_DETACHING)||this,i.autoLevelCapping=Number.POSITIVE_INFINITY,i.firstLevel=null,i.levels=[],i.media=null,i.restrictedLevels=[],i.timer=null,i.clientRect=null,i}st(e,t);var i=e.prototype;return i.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this.clientRect=null,this.stopCapping())},i.onFpsDropLevelCapping=function(t){e.isLevelAllowed(t.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(t.droppedLevel)},i.onMediaAttaching=function(t){this.media=t.media instanceof window.HTMLVideoElement?t.media:null},i.onManifestParsed=function(t){var e=this.hls;this.restrictedLevels=[],this.levels=t.levels,this.firstLevel=t.firstLevel,e.config.capLevelToPlayerSize&&t.video&&this.startCapping()},i.onBufferCodecs=function(t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()},i.onLevelsUpdated=function(t){this.levels=t.levels},i.onMediaDetaching=function(){this.stopCapping()},i.detectPlayerSize=function(){if(this.media){var t=this.levels?this.levels.length:0;if(t){var e=this.hls;e.autoLevelCapping=this.getMaxLevel(t-1),e.autoLevelCapping>this.autoLevelCapping&&e.streamController.nextLevelSwitch(),this.autoLevelCapping=e.autoLevelCapping}}},i.getMaxLevel=function(t){var i=this;if(!this.levels)return-1;var r=this.levels.filter(function(r,n){return e.isLevelAllowed(n,i.restrictedLevels)&&n<=t});return this.clientRect=null,e.getMaxLevelByMediaSize(r,this.mediaWidth,this.mediaHeight)},i.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},i.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},i.getDimensions=function(){if(this.clientRect)return this.clientRect;var t=this.media,e={width:0,height:0};if(t){var i=t.getBoundingClientRect();e.width=i.width,e.height=i.height,e.width||e.height||(e.width=i.right-i.left||t.width||0,e.height=i.bottom-i.top||t.height||0)}return this.clientRect=e,e},e.isLevelAllowed=function(t,e){return void 0===e&&(e=[]),-1===e.indexOf(t)},e.getMaxLevelByMediaSize=function(t,e,i){if(!t||t&&!t.length)return-1;for(var r=t.length-1,n=0;n<t.length;n+=1){var a=t[n];if((a.width>=e||a.height>=i)&&function(t,e){return!e||t.width!==e.width||t.height!==e.height}(a,t[n+1])){r=n;break}}return r},at(e,[{key:"mediaWidth",get:function(){return this.getDimensions().width*e.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*e.contentScaleFactor}}],[{key:"contentScaleFactor",get:function(){var t=1;try{t=window.devicePixelRatio}catch(t){}return t}}]),e}(re),pi=fi,gi=window,yi=gi.performance,vi=function(t){function e(e){return t.call(this,e,$t.default.MEDIA_ATTACHING)||this}ot(e,t);var i=e.prototype;return i.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},i.onMediaAttaching=function(t){var e=this.hls.config;e.capLevelOnFPSDrop&&("function"==typeof(this.video=t.media instanceof window.HTMLVideoElement?t.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),e.fpsDroppedMonitoringPeriod))},i.checkFPS=function(t,e,i){var r=yi.now();if(e){if(this.lastTime){var n=r-this.lastTime,a=i-this.lastDroppedFrames,s=e-this.lastDecodedFrames,o=1e3*a/n,l=this.hls;if(l.trigger($t.default.FPS_DROP,{currentDropped:a,currentDecoded:s,totalDroppedFrames:i}),o>0&&a>l.config.fpsDroppedMonitoringThreshold*s){var u=l.currentLevel;te.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+u),u>0&&(-1===l.autoLevelCapping||l.autoLevelCapping>=u)&&(u-=1,l.trigger($t.default.FPS_DROP_LEVEL_CAPPING,{level:u,droppedLevel:l.currentLevel}),l.autoLevelCapping=u,l.streamController.nextLevelSwitch())}}this.lastTime=r,this.lastDroppedFrames=i,this.lastDecodedFrames=e}},i.checkFPSInterval=function(){var t=this.video;if(t)if(this.isVideoPlaybackQualityAvailable){var e=t.getVideoPlaybackQuality();this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)},e}(re),mi=vi,Li=function(){function t(t){t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}var e=t.prototype;return e.destroy=function(){this.abort(),this.loader=null},e.abort=function(){var t=this.loader;t&&4!==t.readyState&&(this.stats.aborted=!0,t.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},e.load=function(t,e,i){this.context=t,this.config=e,this.callbacks=i,this.stats={trequest:window.performance.now(),retry:0},this.retryDelay=e.retryDelay,this.loadInternal()},e.loadInternal=function(){var t,e=this.context;t=this.loader=new window.XMLHttpRequest;var i=this.stats;i.tfirst=0,i.loaded=0;var r=this.xhrSetup;try{if(r)try{r(t,e.url)}catch(i){t.open("GET",e.url,!0),r(t,e.url)}t.readyState||t.open("GET",e.url,!0)}catch(i){return void this.callbacks.onError({code:t.status,text:i.message},e,t)}e.rangeEnd&&t.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=e.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),t.send()},e.readystatechange=function(t){var e=t.currentTarget,i=e.readyState,r=this.stats,n=this.context,a=this.config;if(!r.aborted&&i>=2)if(window.clearTimeout(this.requestTimeout),0===r.tfirst&&(r.tfirst=Math.max(window.performance.now(),r.trequest)),4===i){var s=e.status;if(s>=200&&s<300){r.tload=Math.max(r.tfirst,window.performance.now());var o,l;"arraybuffer"===n.responseType?(o=e.response,l=o.byteLength):(o=e.responseText,l=o.length),r.loaded=r.total=l;var u={url:e.responseURL,data:o};this.callbacks.onSuccess(u,r,n,e)}else r.retry>=a.maxRetry||s>=400&&s<499?(te.logger.error(s+" while loading "+n.url),this.callbacks.onError({code:s,text:e.statusText},n,e)):(te.logger.warn(s+" while loading "+n.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),r.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),a.timeout)},e.loadtimeout=function(){te.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},e.loadprogress=function(t){var e=t.currentTarget,i=this.stats;i.loaded=t.loaded,t.lengthComputable&&(i.total=t.total);var r=this.callbacks.onProgress;r&&r(i,this.context,null,e)},t}(),wi=Li,Ti=function(t){function e(e){var i;return i=t.call(this,e,$t.default.MANIFEST_LOADING,$t.default.MANIFEST_PARSED,$t.default.AUDIO_TRACK_LOADED,$t.default.AUDIO_TRACK_SWITCHED,$t.default.LEVEL_LOADED,$t.default.ERROR)||this,i._trackId=-1,i._selectDefaultTrack=!0,i.tracks=[],i.trackIdBlacklist=Object.create(null),i.audioGroupId=null,i}dt(e,t);var i=e.prototype;return i.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},i.onManifestParsed=function(t){var e=this.tracks=t.audioTracks||[];this.hls.trigger($t.default.AUDIO_TRACKS_UPDATED,{audioTracks:e}),this._selectAudioGroup(this.hls.nextLoadLevel)},i.onAudioTrackLoaded=function(t){if(t.id>=this.tracks.length)return void te.logger.warn("Invalid audio track id:",t.id);if(te.logger.log("audioTrack "+t.id+" loaded"),this.tracks[t.id].details=t.details,t.details.live&&!this.hasInterval()){var e=1e3*t.details.targetduration;this.setInterval(e)}!t.details.live&&this.hasInterval()&&this.clearInterval()},i.onAudioTrackSwitched=function(t){var e=this.tracks[t.id].groupId;e&&this.audioGroupId!==e&&(this.audioGroupId=e)},i.onLevelLoaded=function(t){this._selectAudioGroup(t.level)},i.onError=function(t){t.type===Jt.ErrorTypes.NETWORK_ERROR&&(t.fatal&&this.clearInterval(),t.details===Jt.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&(te.logger.warn("Network failure on audio-track id:",t.context.id),this._handleLoadError()))},i._setAudioTrack=function(t){if(this._trackId===t&&this.tracks[this._trackId].details)return void te.logger.debug("Same id as current audio-track passed, and track details available -> no-op");if(t<0||t>=this.tracks.length)return void te.logger.warn("Invalid id passed to audio-track controller");var e=this.tracks[t];te.logger.log("Now switching to audio-track index "+t),this.clearInterval(),this._trackId=t;var i=e.url,r=e.type,n=e.id;this.hls.trigger($t.default.AUDIO_TRACK_SWITCHING,{id:n,type:r,url:i}),this._loadTrackDetailsIfNeeded(e)},i.doTick=function(){this._updateTrack(this._trackId)},i._selectAudioGroup=function(t){var e=this.hls.levels[t];if(e&&e.audioGroupIds){var i=e.audioGroupIds[e.urlId];this.audioGroupId!==i&&(this.audioGroupId=i,this._selectInitialAudioTrack())}},i._selectInitialAudioTrack=function(){var t=this,e=this.tracks;if(e.length){var i=this.tracks[this._trackId],r=null;if(i&&(r=i.name),this._selectDefaultTrack){var n=e.filter(function(t){return t.default});n.length?e=n:te.logger.warn("No default audio tracks defined")}var a=!1,s=function(){e.forEach(function(e){a||t.audioGroupId&&e.groupId!==t.audioGroupId||r&&r!==e.name||(t._setAudioTrack(e.id),a=!0)})};s(),a||(r=null,s()),a||(te.logger.error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger($t.default.ERROR,{type:Jt.ErrorTypes.MEDIA_ERROR,details:Jt.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))}},i._needsTrackLoading=function(t){var e=t.details,i=t.url;return!(e&&!e.live||!i)},i._loadTrackDetailsIfNeeded=function(t){if(this._needsTrackLoading(t)){var e=t.url,i=t.id;te.logger.log("loading audio-track playlist for id: "+i),this.hls.trigger($t.default.AUDIO_TRACK_LOADING,{url:e,id:i})}},i._updateTrack=function(t){if(!(t<0||t>=this.tracks.length)){this.clearInterval(),this._trackId=t,te.logger.log("trying to update audio-track "+t);var e=this.tracks[t];this._loadTrackDetailsIfNeeded(e)}},i._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var t=this._trackId,e=this.tracks[t],i=e.name,r=e.language,n=e.groupId;te.logger.warn("Loading failed on audio track id: "+t+", group-id: "+n+', name/language: "'+i+'" / "'+r+'"');for(var a=t,s=0;s<this.tracks.length;s++)if(!this.trackIdBlacklist[s]){var o=this.tracks[s];if(o.name===i){a=s;break}}if(a===t)return void te.logger.warn('No fallback audio-track found for name/language: "'+i+'" / "'+r+'"');te.logger.log("Attempting audio-track fallback id:",a,"group-id:",this.tracks[a].groupId),this._setAudioTrack(a)},ut(e,[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this._trackId},set:function(t){this._setAudioTrack(t),this._selectDefaultTrack=!1}}]),e}(We),Ei=Ti,bi=window,Mi=bi.performance,Si=function(t){function e(e,i){var r;return r=t.call(this,e,$t.default.MEDIA_ATTACHED,$t.default.MEDIA_DETACHING,$t.default.AUDIO_TRACKS_UPDATED,$t.default.AUDIO_TRACK_SWITCHING,$t.default.AUDIO_TRACK_LOADED,$t.default.KEY_LOADED,$t.default.FRAG_LOADED,$t.default.FRAG_PARSING_INIT_SEGMENT,$t.default.FRAG_PARSING_DATA,$t.default.FRAG_PARSED,$t.default.ERROR,$t.default.BUFFER_RESET,$t.default.BUFFER_CREATED,$t.default.BUFFER_APPENDED,$t.default.BUFFER_FLUSHED,$t.default.INIT_PTS_FOUND)||this,r.fragmentTracker=i,r.config=e.config,r.audioCodecSwap=!1,r._state=qe.STOPPED,r.initPTS=[],r.waitingFragment=null,r.videoTrackCC=null,r.waitingVideoCC=null,r}ft(e,t);var i=e.prototype;return i.onInitPtsFound=function(t){var e=t.id,i=t.frag.cc,r=t.initPTS;"main"===e&&(this.initPTS[i]=r,this.videoTrackCC=i,te.logger.log("InitPTS for cc: "+i+" found from main: "+r),this.state===qe.WAITING_INIT_PTS&&this.tick())},i.startLoad=function(t){if(this.tracks){var e=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,e>0&&-1===t?(te.logger.log("audio:override startPosition with lastCurrentTime @"+e.toFixed(3)),this.state=qe.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:t,this.state=qe.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=t,this.state=qe.STOPPED},i.doTick=function(){var t,e,i,r=this.hls,n=r.config;switch(this.state){case qe.ERROR:case qe.PAUSED:case qe.BUFFER_FLUSHING:break;case qe.STARTING:this.state=qe.WAITING_TRACK,this.loadedmetadata=!1;break;case qe.IDLE:var a=this.tracks;if(!a)break;if(!this.media&&(this.startFragRequested||!n.startFragPrefetch))break;if(this.loadedmetadata)t=this.media.currentTime;else if(void 0===(t=this.nextLoadPosition))break;var s=this.mediaBuffer?this.mediaBuffer:this.media,o=this.videoBuffer?this.videoBuffer:this.media,l=t<n.maxBufferHole?Math.max(2,n.maxBufferHole):n.maxBufferHole,u=Ie.bufferInfo(s,t,l),d=Ie.bufferInfo(o,t,l),c=u.len,h=u.end,f=this.fragPrevious,p=Math.min(n.maxBufferLength,n.maxMaxBufferLength),g=Math.max(p,d.len),y=this.audioSwitch,v=this.trackId;if((c<g||y)&&v<a.length){if(void 0===(i=a[v].details)){this.state=qe.WAITING_TRACK;break}if(!y&&this._streamEnded(u,i))return this.hls.trigger($t.default.BUFFER_EOS,{type:"audio"}),void(this.state=qe.ENDED);var m,L=i.fragments,w=L.length,T=L[0].start,E=L[w-1].start+L[w-1].duration;if(y)if(i.live&&!i.PTSKnown)te.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),h=0;else if(h=t,i.PTSKnown&&t<T){if(!(u.end>T||u.nextStart))return;te.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=T+.05}if(i.initSegment&&!i.initSegment.data)m=i.initSegment;else if(h<=T){if(m=L[0],null!==this.videoTrackCC&&m.cc!==this.videoTrackCC&&(m=_(L,this.videoTrackCC)),i.live&&m.loadIdx&&m.loadIdx===this.fragLoadIdx){var b=u.nextStart?u.nextStart:T;return te.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(b+.05)),void(this.media.currentTime=b+.05)}}else{var M,S=n.maxFragLookUpTolerance,C=f?L[f.sn-L[0].sn+1]:void 0;h<E?(h>E-S&&(S=0),M=C&&!P(h,S,C)?C:Ne.search(L,function(t){return P(h,S,t)})):M=L[w-1],M&&(m=M,T=M.start,f&&m.level===f.level&&m.sn===f.sn&&(m.sn<i.endSN?(m=L[m.sn+1-i.startSN],this.fragmentTracker.getState(m)!==ke.OK&&te.logger.log("SN just loaded, load next one: "+m.sn)):m=null))}m&&(m.encrypted?(te.logger.log("Loading key for "+m.sn+" of ["+i.startSN+" ,"+i.endSN+"],track "+v),this.state=qe.KEY_LOADING,r.trigger($t.default.KEY_LOADING,{frag:m})):(this.fragCurrent=m,(y||this.fragmentTracker.getState(m)===ke.NOT_LOADED)&&(te.logger.log("Loading "+m.sn+", cc: "+m.cc+" of ["+i.startSN+" ,"+i.endSN+"],track "+v+", "+(this.loadedmetadata?"currentTime":"nextLoadPosition")+": "+t+", bufferEnd: "+h.toFixed(3)),"initSegment"!==m.sn&&(this.startFragRequested=!0),Object(Zt.isFiniteNumber)(m.sn)&&(this.nextLoadPosition=m.start+m.duration),r.trigger($t.default.FRAG_LOADING,{frag:m}),this.state=qe.FRAG_LOADING)))}break;case qe.WAITING_TRACK:(e=this.tracks[this.trackId])&&e.details&&(this.state=qe.IDLE);break;case qe.FRAG_LOADING_WAITING_RETRY:var A=Mi.now(),x=this.retryDate;s=this.media;var k=s&&s.seeking;(!x||A>=x||k)&&(te.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=qe.IDLE);break;case qe.WAITING_INIT_PTS:var D=this.waitingFragment;if(D){var R=D.frag.cc;if(void 0!==this.initPTS[R])this.waitingFragment=null,this.state=qe.FRAG_LOADING,this.onFragLoaded(D);else if(this.videoTrackCC!==this.waitingVideoCC)te.logger.log("Waiting fragment cc ("+R+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var N=Ie.bufferInfo(this.mediaBuffer,this.media.currentTime,n.maxBufferHole),I=P(N.end,n.maxFragLookUpTolerance,D.frag);I<0&&(te.logger.log("Waiting fragment cc ("+R+") @ "+D.frag.start+" cancelled because another fragment at "+N.end+" is needed"),this.clearWaitingFragment())}}else this.state=qe.IDLE;break;case qe.STOPPED:case qe.FRAG_LOADING:case qe.PARSING:case qe.PARSED:case qe.ENDED:}},i.clearWaitingFragment=function(){var t=this.waitingFragment;t&&(this.fragmentTracker.removeFragment(t.frag),this.waitingFragment=null,this.waitingVideoCC=null,this.state=qe.IDLE)},i.onMediaAttached=function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("ended",this.onvended);var i=this.config;this.tracks&&i.autoStartLoad&&this.startLoad(i.startPosition)},i.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(te.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},i.onAudioTracksUpdated=function(t){te.logger.log("audio tracks updated"),this.tracks=t.audioTracks},i.onAudioTrackSwitching=function(t){var e=!!t.url;this.trackId=t.id,this.fragCurrent=null,this.clearWaitingFragment(),this.state=qe.PAUSED,e?this.setInterval(100):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),e&&(this.audioSwitch=!0,this.state=qe.IDLE),this.tick()},i.onAudioTrackLoaded=function(t){var e=t.details,i=t.id,r=this.tracks[i],n=r.details,a=e.totalduration,s=0;if(te.logger.log("track "+i+" loaded ["+e.startSN+","+e.endSN+"],duration:"+a),e.live||n&&n.live?n&&e.fragments.length>0?(E(n,e),s=e.fragments[0].start,e.PTSKnown?te.logger.log("live audio playlist sliding:"+s.toFixed(3)):te.logger.log("live audio playlist - outdated PTS, unknown sliding")):(e.PTSKnown=!1,te.logger.log("live audio playlist - first load, unknown sliding")):e.PTSKnown=!1,r.details=e,!this.startFragRequested){if(-1===this.startPosition){var o=e.startTimeOffset;Object(Zt.isFiniteNumber)(o)?(te.logger.log("start time offset found in playlist, adjust startPosition to "+o),this.startPosition=o):e.live?(this.startPosition=this.computeLivePosition(s,e),te.logger.log("compute startPosition for audio-track to "+this.startPosition)):this.startPosition=0}this.nextLoadPosition=this.startPosition}this.state===qe.WAITING_TRACK&&(this.state=qe.IDLE),this.tick()},i.onKeyLoaded=function(){this.state===qe.KEY_LOADING&&(this.state=qe.IDLE,this.tick())},i.onFragLoaded=function(t){var e=this.fragCurrent,i=t.frag;if(this.state===qe.FRAG_LOADING&&e&&"audio"===i.type&&i.level===e.level&&i.sn===e.sn){var r=this.tracks[this.trackId],n=r.details,a=n.totalduration,s=e.level,o=e.sn,l=e.cc,u=this.config.defaultAudioCodec||r.audioCodec||"mp4a.40.2",d=this.stats=t.stats;if("initSegment"===o)this.state=qe.IDLE,d.tparsed=d.tbuffered=Mi.now(),n.initSegment.data=t.payload,this.hls.trigger($t.default.FRAG_BUFFERED,{stats:d,frag:e,id:"audio"}),this.tick();else{this.state=qe.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new Ge(this.hls,"audio"));var c=this.initPTS[l],h=n.initSegment?n.initSegment.data:[];void 0!==c?(this.pendingBuffering=!0,te.logger.log("Demuxing "+o+" of ["+n.startSN+" ,"+n.endSN+"],track "+s),this.demuxer.push(t.payload,h,u,null,e,a,!1,c)):(te.logger.log("Unknown video PTS for cc "+l+", waiting for video PTS before demuxing audio frag "+o+" of ["+n.startSN+" ,"+n.endSN+"],track "+s),this.waitingFragment=t,this.waitingVideoCC=this.videoTrackCC,this.state=qe.WAITING_INIT_PTS)}}this.fragLoadError=0},i.onFragParsingInitSegment=function(t){var e=this.fragCurrent,i=t.frag;if(e&&"audio"===t.id&&i.sn===e.sn&&i.level===e.level&&this.state===qe.PARSING){var r,n=t.tracks;if(n.video&&delete n.video,r=n.audio){r.levelCodec=r.codec,r.id=t.id,this.hls.trigger($t.default.BUFFER_CODECS,n),te.logger.log("audio track:audio,container:"+r.container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]");var a=r.initSegment;if(a){var s={type:"audio",data:a,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[s]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger($t.default.BUFFER_APPENDING,s))}this.tick()}}},i.onFragParsingData=function(t){var e=this,i=this.fragCurrent,r=t.frag;if(i&&"audio"===t.id&&"audio"===t.type&&r.sn===i.sn&&r.level===i.level&&this.state===qe.PARSING){var n=this.trackId,a=this.tracks[n],s=this.hls;Object(Zt.isFiniteNumber)(t.endPTS)||(t.endPTS=t.startPTS+i.duration,t.endDTS=t.startDTS+i.duration),i.addElementaryStream(ae.AUDIO),te.logger.log("parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb),T(a.details,i,t.startPTS,t.endPTS);var o=this.media,l=!1;if(this.audioSwitch)if(o&&o.readyState){var u=o.currentTime;te.logger.log("switching audio track : currentTime:"+u),u>=t.startPTS&&(te.logger.log("switching audio track : flushing all audio"),this.state=qe.BUFFER_FLUSHING,s.trigger($t.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),l=!0,this.audioSwitch=!1,s.trigger($t.default.AUDIO_TRACK_SWITCHED,{id:n}))}else this.audioSwitch=!1,s.trigger($t.default.AUDIO_TRACK_SWITCHED,{id:n});var d=this.pendingData;if(!d)return te.logger.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void s.trigger($t.default.ERROR,{type:Jt.ErrorTypes.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([t.data1,t.data2].forEach(function(e){e&&e.length&&d.push({type:t.type,data:e,parent:"audio",content:"data"})}),!l&&d.length&&(d.forEach(function(t){e.state===qe.PARSING&&(e.pendingBuffering=!0,e.hls.trigger($t.default.BUFFER_APPENDING,t))}),this.pendingData=[],this.appended=!0)),this.tick()}},i.onFragParsed=function(t){var e=this.fragCurrent,i=t.frag;e&&"audio"===t.id&&i.sn===e.sn&&i.level===e.level&&this.state===qe.PARSING&&(this.stats.tparsed=Mi.now(),this.state=qe.PARSED,this._checkAppendedParsed())},i.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},i.onBufferCreated=function(t){var e=t.tracks.audio;e&&(this.mediaBuffer=e.buffer,this.loadedmetadata=!0),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer)},i.onBufferAppended=function(t){if("audio"===t.parent){var e=this.state;e!==qe.PARSING&&e!==qe.PARSED||(this.pendingBuffering=t.pending>0,this._checkAppendedParsed())}},i._checkAppendedParsed=function(){if(!(this.state!==qe.PARSED||this.appended&&this.pendingBuffering)){var t=this.fragCurrent,e=this.stats,i=this.hls;if(t){this.fragPrevious=t,e.tbuffered=Mi.now(),i.trigger($t.default.FRAG_BUFFERED,{stats:e,frag:t,id:"audio"});var r=this.mediaBuffer?this.mediaBuffer:this.media;r&&te.logger.log("audio buffered : "+Ke.toString(r.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,i.trigger($t.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=qe.IDLE}this.tick()}},i.onError=function(t){var e=t.frag;if(!e||"audio"===e.type)switch(t.details){case Jt.ErrorDetails.FRAG_LOAD_ERROR:case Jt.ErrorDetails.FRAG_LOAD_TIMEOUT:var i=t.frag;if(i&&"audio"!==i.type)break;if(!t.fatal){var r=this.fragLoadError;r?r++:r=1;var n=this.config;if(r<=n.fragLoadingMaxRetry){this.fragLoadError=r;var a=Math.min(Math.pow(2,r-1)*n.fragLoadingRetryDelay,n.fragLoadingMaxRetryTimeout);te.logger.warn("AudioStreamController: frag loading failed, retry in "+a+" ms"),this.retryDate=Mi.now()+a,this.state=qe.FRAG_LOADING_WAITING_RETRY}else te.logger.error("AudioStreamController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=qe.ERROR}break;case Jt.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case Jt.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case Jt.ErrorDetails.KEY_LOAD_ERROR:case Jt.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==qe.ERROR&&(this.state=t.fatal?qe.ERROR:qe.IDLE,te.logger.warn("AudioStreamController: "+t.details+" while loading frag, now switching to "+this.state+" state ..."));break;case Jt.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===t.parent&&(this.state===qe.PARSING||this.state===qe.PARSED)){var s=this.mediaBuffer,o=this.media.currentTime;if(s&&Ie.isBuffered(s,o)&&Ie.isBuffered(s,o+.5)){var l=this.config;l.maxMaxBufferLength>=l.maxBufferLength&&(l.maxMaxBufferLength/=2,te.logger.warn("AudioStreamController: reduce max buffer length to "+l.maxMaxBufferLength+"s")),this.state=qe.IDLE}else te.logger.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=qe.BUFFER_FLUSHING,this.hls.trigger($t.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}},i.onBufferFlushed=function(){var t=this,e=this.pendingData;e&&e.length?(te.logger.log("AudioStreamController: appending pending audio data after buffer flushed"),e.forEach(function(e){t.hls.trigger($t.default.BUFFER_APPENDING,e)}),this.appended=!0,this.pendingData=[],this.state=qe.PARSED):(this.state=qe.IDLE,this.fragPrevious=null,this.tick())},ht(e,[{key:"state",set:function(t){if(this.state!==t){var e=this.state;this._state=t,te.logger.log("audio stream:"+e+"->"+t)}},get:function(){return this._state}}]),e}(Qe),Ci=Si,Ai=function(){function t(t){return"string"==typeof t&&!!a[t.toLowerCase()]&&t.toLowerCase()}function e(t){return"string"==typeof t&&!!s[t.toLowerCase()]&&t.toLowerCase()}function i(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)t[r]=i[r]}return t}function r(r,a,s){var o=this,l={};l.enumerable=!0,o.hasBeenReset=!1;var u="",d=!1,c=r,h=a,f=s,p=null,g="",y=!0,v="auto",m="start",L=50,w="middle",T=50,E="middle";Object.defineProperty(o,"id",i({},l,{get:function(){return u},set:function(t){u=""+t}})),Object.defineProperty(o,"pauseOnExit",i({},l,{get:function(){return d},set:function(t){d=!!t}})),Object.defineProperty(o,"startTime",i({},l,{get:function(){return c},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");c=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"endTime",i({},l,{get:function(){return h},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");h=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"text",i({},l,{get:function(){return f},set:function(t){f=""+t,this.hasBeenReset=!0}})),Object.defineProperty(o,"region",i({},l,{get:function(){return p},set:function(t){p=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"vertical",i({},l,{get:function(){return g},set:function(e){var i=t(e);if(!1===i)throw new SyntaxError("An invalid or illegal string was specified.");g=i,this.hasBeenReset=!0}})),Object.defineProperty(o,"snapToLines",i({},l,{get:function(){return y},set:function(t){y=!!t,this.hasBeenReset=!0}})),Object.defineProperty(o,"line",i({},l,{get:function(){return v},set:function(t){if("number"!=typeof t&&t!==n)throw new SyntaxError("An invalid number or illegal string was specified.");v=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"lineAlign",i({},l,{get:function(){return m},set:function(t){var i=e(t);if(!i)throw new SyntaxError("An invalid or illegal string was specified.");m=i,this.hasBeenReset=!0}})),Object.defineProperty(o,"position",i({},l,{get:function(){return L},set:function(t){if(t<0||t>100)throw new Error("Position must be between 0 and 100.");L=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"positionAlign",i({},l,{get:function(){return w},set:function(t){var i=e(t);if(!i)throw new SyntaxError("An invalid or illegal string was specified.");w=i,this.hasBeenReset=!0}})),Object.defineProperty(o,"size",i({},l,{get:function(){return T},set:function(t){if(t<0||t>100)throw new Error("Size must be between 0 and 100.");T=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"align",i({},l,{get:function(){return E},set:function(t){var i=e(t);if(!i)throw new SyntaxError("An invalid or illegal string was specified.");E=i,this.hasBeenReset=!0}})),o.displayState=void 0}if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var n="auto",a={"":!0,lr:!0,rl:!0},s={start:!0,middle:!0,end:!0,left:!0,right:!0};return r.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},r}(),_i=function(){return{decode:function(t){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}};yt.prototype={set:function(t,e){this.get(t)||""===e||(this.values[t]=e)},get:function(t,e,i){return i?this.has(t)?this.values[t]:e[i]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,i){for(var r=0;r<i.length;++r)if(e===i[r]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return!!(e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(e=parseFloat(e))>=0&&e<=100)&&(this.set(t,e),!0)}};var xi=new Ai(0,0,0),ki="middle"===xi.align?"middle":"center";pt.prototype={parse:function(t){function e(){var t=i.buffer,e=0;for(t=Lt(t);e<t.length&&"\r"!==t[e]&&"\n"!==t[e];)++e;var r=t.substr(0,e);return"\r"===t[e]&&++e,"\n"===t[e]&&++e,i.buffer=t.substr(e),r}var i=this;t&&(i.buffer+=i.decoder.decode(t,{stream:!0}));try{var r;if("INITIAL"===i.state){if(!/\r\n|\n/.test(i.buffer))return this;r=e();var n=r.match(/^()?WEBVTT([ \t].*)?$/);if(!n||!n[0])throw new Error("Malformed WebVTT signature.");i.state="HEADER"}for(var a=!1;i.buffer;){if(!/\r\n|\n/.test(i.buffer))return this;switch(a?a=!1:r=e(),i.state){case"HEADER":/:/.test(r)?function(t){vt(t,function(t,e){},/:/)}(r):r||(i.state="ID");continue;case"NOTE":r||(i.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){i.state="NOTE";break}if(!r)continue;if(i.cue=new Ai(0,0,""),i.state="CUE",-1===r.indexOf("--\x3e")){i.cue.id=r;continue}case"CUE":try{mt(r,i.cue,i.regionList)}catch(t){i.cue=null,i.state="BADCUE";continue}i.state="CUETEXT";continue;case"CUETEXT":var s=-1!==r.indexOf("--\x3e");if(!r||s&&(a=!0)){i.oncue&&i.oncue(i.cue),i.cue=null,i.state="ID";continue}i.cue.text&&(i.cue.text+="\n"),i.cue.text+=r;continue;case"BADCUE":r||(i.state="ID");continue}}}catch(t){"CUETEXT"===i.state&&i.cue&&i.oncue&&i.oncue(i.cue),i.cue=null,i.state="INITIAL"===i.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),(t.cue||"HEADER"===t.state)&&(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state)throw new Error("Malformed WebVTT signature.")}catch(t){throw t}return t.onflush&&t.onflush(),this}};var Di,Ri=pt,Ni={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Ii=function(t){var e=t;return Ni.hasOwnProperty(t)&&(e=Ni[t]),String.fromCharCode(e)},ji=15,Oi=100,Pi={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Fi={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Ui={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Bi={25:2,26:4,29:6,30:8,31:10,27:13,28:15},zi=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];!function(t){t[t.ERROR=0]="ERROR",t[t.TEXT=1]="TEXT",t[t.WARNING=2]="WARNING",t[t.INFO=2]="INFO",t[t.DEBUG=3]="DEBUG",t[t.DATA=3]="DATA"}(Di||(Di={}));var Yi,Gi=function(){function t(){this.time=null,this.verboseLevel=Di.ERROR}return t.prototype.log=function(t,e){this.verboseLevel>=t&&te.logger.log(this.time+" ["+t+"] "+e)},t}(),Hi=function(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i].toString(16));return e},Ki=function(){function t(t,e,i,r,n){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=t||"white",this.underline=e||!1,this.italics=i||!1,this.background=r||"black",this.flash=n||!1}var e=t.prototype;return e.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},e.setStyles=function(t){for(var e=["foreground","underline","italics","background","flash"],i=0;i<e.length;i++){var r=e[i];t.hasOwnProperty(r)&&(this[r]=t[r])}},e.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},e.equals=function(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash},e.copy=function(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash},e.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},t}(),Vi=function(){function t(t,e,i,r,n,a){this.uchar=void 0,this.penState=void 0,this.uchar=t||" ",this.penState=new Ki(e,i,r,n,a)}var e=t.prototype;return e.reset=function(){this.uchar=" ",this.penState.reset()},e.setChar=function(t,e){this.uchar=t,this.penState.copy(e)},e.setPenState=function(t){this.penState.copy(t)},e.equals=function(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)},e.copy=function(t){this.uchar=t.uchar,this.penState.copy(t.penState)},e.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},t}(),Wi=function(){function t(t){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var e=0;e<Oi;e++)this.chars.push(new Vi);this.logger=t,this.pos=0,this.currPenState=new Ki}var e=t.prototype;return e.equals=function(t){for(var e=!0,i=0;i<Oi;i++)if(!this.chars[i].equals(t.chars[i])){e=!1;break}return e},e.copy=function(t){for(var e=0;e<Oi;e++)this.chars[e].copy(t.chars[e])},e.isEmpty=function(){for(var t=!0,e=0;e<Oi;e++)if(!this.chars[e].isEmpty()){t=!1;break}return t},e.setCursor=function(t){this.pos!==t&&(this.pos=t),this.pos<0?(this.logger.log(Di.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>Oi&&(this.logger.log(Di.DEBUG,"Too large cursor position "+this.pos),this.pos=Oi)},e.moveCursor=function(t){var e=this.pos+t;if(t>1)for(var i=this.pos+1;i<e+1;i++)this.chars[i].setPenState(this.currPenState);this.setCursor(e)},e.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},e.insertChar=function(t){t>=144&&this.backSpace();var e=Ii(t);if(this.pos>=Oi)return void this.logger.log(Di.ERROR,"Cannot insert "+t.toString(16)+" ("+e+") at position "+this.pos+". Skipping it!");this.chars[this.pos].setChar(e,this.currPenState),this.moveCursor(1)},e.clearFromPos=function(t){var e;for(e=t;e<Oi;e++)this.chars[e].reset()},e.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},e.clearToEndOfRow=function(){this.clearFromPos(this.pos)},e.getTextString=function(){for(var t=[],e=!0,i=0;i<Oi;i++){var r=this.chars[i].uchar;" "!==r&&(e=!1),t.push(r)}return e?"":t.join("")},e.setPenStyles=function(t){this.currPenState.setStyles(t),this.chars[this.pos].setPenState(this.currPenState)},t}(),qi=function(){function t(t){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var e=0;e<ji;e++)this.rows.push(new Wi(t));this.logger=t,this.currRow=ji-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var e=t.prototype;return e.reset=function(){for(var t=0;t<ji;t++)this.rows[t].clear();this.currRow=ji-1},e.equals=function(t){for(var e=!0,i=0;i<ji;i++)if(!this.rows[i].equals(t.rows[i])){e=!1;break}return e},e.copy=function(t){for(var e=0;e<ji;e++)this.rows[e].copy(t.rows[e])},e.isEmpty=function(){for(var t=!0,e=0;e<ji;e++)if(!this.rows[e].isEmpty()){t=!1;break}return t},e.backSpace=function(){this.rows[this.currRow].backSpace()},e.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},e.insertChar=function(t){this.rows[this.currRow].insertChar(t)},e.setPen=function(t){this.rows[this.currRow].setPenStyles(t)},e.moveCursor=function(t){this.rows[this.currRow].moveCursor(t)},e.setCursor=function(t){this.logger.log(Di.INFO,"setCursor: "+t),this.rows[this.currRow].setCursor(t)},e.setPAC=function(t){this.logger.log(Di.INFO,"pacData = "+JSON.stringify(t));var e=t.row-1;if(this.nrRollUpRows&&e<this.nrRollUpRows-1&&(e=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==e){for(var i=0;i<ji;i++)this.rows[i].clear();var r=this.currRow+1-this.nrRollUpRows,n=this.lastOutputScreen;if(n){var a=n.rows[r].cueStartTime,s=this.logger.time;if(a&&null!==s&&a<s)for(var o=0;o<this.nrRollUpRows;o++)this.rows[e-this.nrRollUpRows+o+1].copy(n.rows[r+o])}}this.currRow=e;var l=this.rows[this.currRow];if(null!==t.indent){var u=t.indent,d=Math.max(u-1,0);l.setCursor(t.indent),t.color=l.chars[d].penState.foreground}var c={foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1};this.setPen(c)},e.setBkgData=function(t){this.logger.log(Di.INFO,"bkgData = "+JSON.stringify(t)),this.backSpace(),this.setPen(t),this.insertChar(32)},e.setRollUpRows=function(t){this.nrRollUpRows=t},e.rollUp=function(){if(null===this.nrRollUpRows)return void this.logger.log(Di.DEBUG,"roll_up but nrRollUpRows not set yet");this.logger.log(Di.TEXT,this.getDisplayText());var t=this.currRow+1-this.nrRollUpRows,e=this.rows.splice(t,1)[0];e.clear(),this.rows.splice(this.currRow,0,e),this.logger.log(Di.INFO,"Rolling up")},e.getDisplayText=function(t){t=t||!1;for(var e=[],i="",r=-1,n=0;n<ji;n++){var a=this.rows[n].getTextString();a&&(r=n+1,t?e.push("Row "+r+": '"+a+"'"):e.push(a.trim()))}return e.length>0&&(i=t?"["+e.join(" | ")+"]":e.join("\n")),i},e.getTextAndFormat=function(){return this.rows},t}(),Qi=function(){function t(t,e,i){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=t,this.outputFilter=e,this.mode=null,this.verbose=0,this.displayedMemory=new qi(i),this.nonDisplayedMemory=new qi(i),this.lastOutputScreen=new qi(i),this.currRollUpRow=this.displayedMemory.rows[ji-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=i}var e=t.prototype;return e.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[ji-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},e.getHandler=function(){return this.outputFilter},e.setHandler=function(t){this.outputFilter=t},e.setPAC=function(t){this.writeScreen.setPAC(t)},e.setBkgData=function(t){this.writeScreen.setBkgData(t)},e.setMode=function(t){t!==this.mode&&(this.mode=t,this.logger.log(Di.INFO,"MODE="+t),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)},e.insertChars=function(t){for(var e=0;e<t.length;e++)this.writeScreen.insertChar(t[e]);var i=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(Di.INFO,i+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(Di.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},e.ccRCL=function(){this.logger.log(Di.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},e.ccBS=function(){this.logger.log(Di.INFO,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},e.ccAOF=function(){},e.ccAON=function(){},e.ccDER=function(){this.logger.log(Di.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},e.ccRU=function(t){this.logger.log(Di.INFO,"RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)},e.ccFON=function(){this.logger.log(Di.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},e.ccRDC=function(){this.logger.log(Di.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},e.ccTR=function(){this.logger.log(Di.INFO,"TR"),this.setMode("MODE_TEXT")},e.ccRTD=function(){this.logger.log(Di.INFO,"RTD"),this.setMode("MODE_TEXT")},e.ccEDM=function(){this.logger.log(Di.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},e.ccCR=function(){this.logger.log(Di.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},e.ccENM=function(){this.logger.log(Di.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},e.ccEOC=function(){if(this.logger.log(Di.INFO,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,this.logger.log(Di.TEXT,"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},e.ccTO=function(t){this.logger.log(Di.INFO,"TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)},e.ccMIDROW=function(t){var e={flash:!1};if(e.underline=t%2==1,e.italics=t>=46,e.italics)e.foreground="white";else{var i=Math.floor(t/2)-16,r=["white","green","blue","cyan","red","yellow","magenta"];e.foreground=r[i]}this.logger.log(Di.INFO,"MIDROW: "+JSON.stringify(e)),this.writeScreen.setPen(e)},e.outputDataUpdate=function(t){void 0===t&&(t=!1);var e=this.logger.time;null!==e&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),t&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},e.cueSplitAtTime=function(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))},t}(),Xi=function(){function t(t,e,i){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var r=new Gi;this.channels=[null,new Qi(t,e,r),new Qi(t+1,i,r)],this.cmdHistory=bt(),this.logger=r}var e=t.prototype;return e.getHandler=function(t){return this.channels[t].getHandler()},e.setHandler=function(t,e){this.channels[t].setHandler(e)},e.addData=function(t,e){var i,r,n,a=!1;this.logger.time=t;for(var s=0;s<e.length;s+=2)if(r=127&e[s],n=127&e[s+1],0!==r||0!==n){if(this.logger.log(Di.DATA,"["+Hi([e[s],e[s+1]])+"] -> ("+Hi([r,n])+")"),i=this.parseCmd(r,n),i||(i=this.parseMidrow(r,n)),i||(i=this.parsePAC(r,n)),i||(i=this.parseBackgroundAttributes(r,n)),!i&&(a=this.parseChars(r,n))){var o=this.currentChannel;if(o&&o>0){var l=this.channels[o];l.insertChars(a)}else this.logger.log(Di.WARNING,"No channel found yet. TEXT-MODE?")}i||a||this.logger.log(Di.WARNING,"Couldn't parse cleaned data "+Hi([r,n])+" orig: "+Hi([e[s],e[s+1]]))}},e.parseCmd=function(t,e){var i=this.cmdHistory,r=(20===t||28===t||21===t||29===t)&&e>=32&&e<=47,n=(23===t||31===t)&&e>=33&&e<=35;if(!r&&!n)return!1;if(Et(t,e,i))return Tt(null,null,i),this.logger.log(Di.DEBUG,"Repeated command ("+Hi([t,e])+") is dropped"),!0;var a=20===t||21===t||23===t?1:2,s=this.channels[a];return 20===t||21===t||28===t||29===t?32===e?s.ccRCL():33===e?s.ccBS():34===e?s.ccAOF():35===e?s.ccAON():36===e?s.ccDER():37===e?s.ccRU(2):38===e?s.ccRU(3):39===e?s.ccRU(4):40===e?s.ccFON():41===e?s.ccRDC():42===e?s.ccTR():43===e?s.ccRTD():44===e?s.ccEDM():45===e?s.ccCR():46===e?s.ccENM():47===e&&s.ccEOC():s.ccTO(e-32),Tt(t,e,i),this.currentChannel=a,!0},e.parseMidrow=function(t,e){var i=0;if((17===t||25===t)&&e>=32&&e<=47){if((i=17===t?1:2)!==this.currentChannel)return this.logger.log(Di.ERROR,"Mismatch channel in midrow parsing"),!1;var r=this.channels[i];return!!r&&(r.ccMIDROW(e),this.logger.log(Di.DEBUG,"MIDROW ("+Hi([t,e])+")"),!0)}return!1},e.parsePAC=function(t,e){var i,r=this.cmdHistory,n=(t>=17&&t<=23||t>=25&&t<=31)&&e>=64&&e<=127,a=(16===t||24===t)&&e>=64&&e<=95;if(!n&&!a)return!1;if(Et(t,e,r))return Tt(null,null,r),!0;var s=t<=23?1:2;i=e>=64&&e<=95?1===s?Pi[t]:Ui[t]:1===s?Fi[t]:Bi[t];var o=this.channels[s];return!!o&&(o.setPAC(this.interpretPAC(i,e)),Tt(t,e,r),this.currentChannel=s,!0)},e.interpretPAC=function(t,e){var i=e,r={color:null,italics:!1,indent:null,underline:!1,row:t};return i=e>95?e-96:e-64,r.underline=1==(1&i),i<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(i/2)]:i<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((i-16)/2),r},e.parseChars=function(t,e){var i,r=null,n=null;if(t>=25?(i=2,n=t-8):(i=1,n=t),n>=17&&n<=19){var a=e;a=17===n?e+80:18===n?e+112:e+144,this.logger.log(Di.INFO,"Special char '"+Ii(a)+"' in channel "+i),r=[a]}else t>=32&&t<=127&&(r=0===e?[t]:[t,e]);if(r){var s=Hi(r);this.logger.log(Di.DEBUG,"Char codes =  "+s.join(",")),Tt(t,e,this.cmdHistory)}return r},e.parseBackgroundAttributes=function(t,e){var i=(16===t||24===t)&&e>=32&&e<=47,r=(23===t||31===t)&&e>=45&&e<=47;if(!i&&!r)return!1;var n,a={};16===t||24===t?(n=Math.floor((e-32)/2),a.background=zi[n],e%2==1&&(a.background=a.background+"_semi")):45===e?a.background="transparent":(a.foreground="black",47===e&&(a.underline=!0));var s=t<=23?1:2;return this.channels[s].setBkgData(a),Tt(t,e,this.cmdHistory),!0},e.reset=function(){for(var t=0;t<Object.keys(this.channels).length;t++){var e=this.channels[t];e&&e.reset()}this.cmdHistory=bt()},e.cueSplitAtTime=function(t){for(var e=0;e<this.channels.length;e++){var i=this.channels[e];i&&i.cueSplitAtTime(t)}},t}(),Ji=Xi,Zi=function(){function t(t,e){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=t,this.trackName=e}var e=t.prototype;return e.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},e.newCue=function(t,e,i){(null===this.startTime||this.startTime>t)&&(this.startTime=t),this.endTime=e,this.screen=i,this.timelineController.createCaptionsTrack(this.trackName)},e.reset=function(){this.cueRanges=[]},t}(),$i=function(t,e,i){return t.substr(i||0,e.length)===e},tr=function(t){var e=parseInt(t.substr(-3)),i=parseInt(t.substr(-6,2)),r=parseInt(t.substr(-9,2)),n=t.length>9?parseInt(t.substr(0,t.indexOf(":"))):0;if(!(Object(Zt.isFiniteNumber)(e)&&Object(Zt.isFiniteNumber)(i)&&Object(Zt.isFiniteNumber)(r)&&Object(Zt.isFiniteNumber)(n)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+t);return e+=1e3*i,e+=6e4*r,e+=36e5*n},er=function(t){for(var e=5381,i=t.length;i;)e=33*e^t.charCodeAt(--i);return(e>>>0).toString()},ir=function(t,e,i){var r=t[e],n=t[r.prevCC];if(!n||!n.new&&r.new)return t.ccOffset=t.presentationOffset=r.start,void(r.new=!1);for(;n&&n.new;)t.ccOffset+=r.start-n.start,r.new=!1,r=n,n=t[r.prevCC];t.presentationOffset=i},rr={parse:function(t,e,i,r,n,a){var s,o=/\r\n|\n\r|\n|\r/g,l=Object($e.utf8ArrayToStr)(new Uint8Array(t)).trim().replace(o,"\n").split("\n"),u="00:00.000",d=0,c=0,h=0,f=[],p=!0,g=!1,y=new Ri;y.oncue=function(t){var e=i[r],n=i.ccOffset;e&&e.new&&(void 0!==c?n=i.ccOffset=e.start:ir(i,r,h)),h&&(n=h-i.presentationOffset),g&&(t.startTime+=n-c,t.endTime+=n-c),t.id=er(t.startTime.toString())+er(t.endTime.toString())+er(t.text),t.text=decodeURIComponent(encodeURIComponent(t.text)),t.endTime>0&&f.push(t)},y.onparsingerror=function(t){s=t},y.onflush=function(){if(s&&a)return void a(s);n(f)},l.forEach(function(t){if(p){if($i(t,"X-TIMESTAMP-MAP=")){p=!1,g=!0,t.substr(16).split(",").forEach(function(t){$i(t,"LOCAL:")?u=t.substr(6):$i(t,"MPEGTS:")&&(d=parseInt(t.substr(7)))});try{e+(9e4*i[r].start||0)<0&&(e+=8589934592),d-=e,c=tr(u)/1e3,h=d/9e4}catch(t){g=!1,s=t}return}""===t&&(p=!1)}y.parse(t+"\n")}),y.flush()}},nr=rr,ar=function(t){function e(e){var i;if(i=t.call(this,e,$t.default.MEDIA_ATTACHING,$t.default.MEDIA_DETACHING,$t.default.FRAG_PARSING_USERDATA,$t.default.FRAG_DECRYPTED,$t.default.MANIFEST_LOADING,$t.default.MANIFEST_LOADED,$t.default.FRAG_LOADED,$t.default.INIT_PTS_FOUND)||this,i.media=null,i.config=void 0,i.enabled=!0,i.Cues=void 0,i.textTracks=[],i.tracks=[],i.initPTS=[],i.unparsedVttFrags=[],i.captionsTracks={},i.nonNativeCaptionsTracks={},i.captionsProperties=void 0,i.cea608Parser1=void 0,i.cea608Parser2=void 0,i.lastSn=-1,i.prevCC=-1,i.vttCCs=_t(),i.hls=e,i.config=e.config,i.Cues=e.config.cueHandler,i.captionsProperties={textTrack1:{label:i.config.captionsTextTrack1Label,languageCode:i.config.captionsTextTrack1LanguageCode},textTrack2:{label:i.config.captionsTextTrack2Label,languageCode:i.config.captionsTextTrack2LanguageCode},textTrack3:{label:i.config.captionsTextTrack3Label,languageCode:i.config.captionsTextTrack3LanguageCode},textTrack4:{label:i.config.captionsTextTrack4Label,languageCode:i.config.captionsTextTrack4LanguageCode}},i.config.enableCEA708Captions){var r=new Zi(Mt(i),"textTrack1"),n=new Zi(Mt(i),"textTrack2"),a=new Zi(Mt(i),"textTrack3"),s=new Zi(Mt(i),"textTrack4");i.cea608Parser1=new Ji(1,r,n),i.cea608Parser2=new Ji(3,a,s)}return i}St(e,t);var i=e.prototype;return i.addCues=function(t,e,i,r,n){for(var a=!1,s=n.length;s--;){var o=n[s],l=At(o[0],o[1],e,i);if(l>=0&&(o[0]=Math.min(o[0],e),o[1]=Math.max(o[1],i),a=!0,l/(i-e)>.5))return}if(a||n.push([e,i]),this.config.renderTextTracksNatively)this.Cues.newCue(this.captionsTracks[t],e,i,r);else{var u=this.Cues.newCue(null,e,i,r);this.hls.trigger($t.default.CUES_PARSED,{type:"captions",cues:u,track:t})}},i.onInitPtsFound=function(t){var e=this,i=t.frag,r=t.id,n=t.initPTS,a=this.unparsedVttFrags;"main"===r&&(this.initPTS[i.cc]=n),a.length&&(this.unparsedVttFrags=[],a.forEach(function(t){e.onFragLoaded(t)}))},i.getExistingTrack=function(t){var e=this.media;if(e)for(var i=0;i<e.textTracks.length;i++){var r=e.textTracks[i];if(r[t])return r}return null},i.createCaptionsTrack=function(t){this.config.renderTextTracksNatively?this.createNativeTrack(t):this.createNonNativeTrack(t)},i.createNativeTrack=function(t){if(!this.captionsTracks[t]){var e=this.captionsProperties,i=this.captionsTracks,r=this.media,n=e[t],a=n.label,s=n.languageCode,o=this.getExistingTrack(t);if(o)i[t]=o,Q(i[t]),q(i[t],r);else{var l=this.createTextTrack("captions",a,s);l&&(l[t]=!0,i[t]=l)}}},i.createNonNativeTrack=function(t){if(!this.nonNativeCaptionsTracks[t]){var e=this.captionsProperties[t];if(e){var i=e.label,r={_id:t,label:i,kind:"captions",default:!!e.media&&!!e.media.default,closedCaptions:e.media};this.nonNativeCaptionsTracks[t]=r,this.hls.trigger($t.default.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[r]})}}},i.createTextTrack=function(t,e,i){var r=this.media;if(r)return r.addTextTrack(t,e,i)},i.destroy=function(){t.prototype.destroy.call(this)},i.onMediaAttaching=function(t){this.media=t.media,this._cleanTracks()},i.onMediaDetaching=function(){var t=this.captionsTracks;Object.keys(t).forEach(function(e){Q(t[e]),delete t[e]}),this.nonNativeCaptionsTracks={}},i.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs=_t(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={}},i._cleanTracks=function(){var t=this.media;if(t){var e=t.textTracks;if(e)for(var i=0;i<e.length;i++)Q(e[i])}},i.onManifestLoaded=function(t){var e=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset()),this.config.enableWebVTT){var i=t.subtitles||[],r=this.tracks&&i&&this.tracks.length===i.length;if(this.tracks=t.subtitles||[],this.config.renderTextTracksNatively){var n=this.media?this.media.textTracks:[];this.tracks.forEach(function(t,i){var r;if(i<n.length){for(var a=null,s=0;s<n.length;s++)if(Ct(n[s],t)){a=n[s];break}a&&(r=a)}r||(r=e.createTextTrack("subtitles",t.name,t.lang)),t.default?r.mode=e.hls.subtitleDisplay?"showing":"hidden":r.mode="disabled",e.textTracks.push(r)})}else if(!r&&this.tracks&&this.tracks.length){var a=this.tracks.map(function(t){return{label:t.name,kind:t.type.toLowerCase(),default:t.default,subtitleTrack:t}});this.hls.trigger($t.default.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:a})}}this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(function(t){var i=/(?:CC|SERVICE)([1-4])/.exec(t.instreamId);if(i){var r="textTrack"+i[1],n=e.captionsProperties[r];n&&(n.label=t.name,t.lang&&(n.languageCode=t.lang),n.media=t)}})},i.onFragLoaded=function(t){var e=t.frag,i=t.payload,r=this.cea608Parser1,n=this.cea608Parser2,a=this.initPTS,s=this.lastSn,o=this.unparsedVttFrags;if("main"===e.type){var l=e.sn;e.sn!==s+1&&r&&n&&(r.reset(),n.reset()),this.lastSn=l}else if("subtitle"===e.type)if(i.byteLength){if(!Object(Zt.isFiniteNumber)(a[e.cc]))return o.push(t),void(a.length&&this.hls.trigger($t.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e}));var u=e.decryptdata;null!=u&&null!=u.key&&"AES-128"===u.method||this._parseVTTs(e,i)}else this.hls.trigger($t.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})},i._parseVTTs=function(t,e){var i=this,r=this.hls,n=this.prevCC,a=this.textTracks,s=this.vttCCs;s[t.cc]||(s[t.cc]={start:t.start,prevCC:n,new:!0},this.prevCC=t.cc),nr.parse(e,this.initPTS[t.cc],s,t.cc,function(e){if(i.config.renderTextTracksNatively){var n=a[t.level];if("disabled"===n.mode)return void r.trigger($t.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t});e.forEach(function(t){if(!n.cues.getCueById(t.id))try{if(n.addCue(t),!n.cues.getCueById(t.id))throw new Error("addCue is failed for: "+t)}catch(i){te.logger.debug("Failed occurred on adding cues: "+i);var e=new window.TextTrackCue(t.startTime,t.endTime,t.text);e.id=t.id,n.addCue(e)}})}else{var s=i.tracks[t.level].default?"default":"subtitles"+t.level;r.trigger($t.default.CUES_PARSED,{type:"subtitles",cues:e,track:s})}r.trigger($t.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})},function(e){te.logger.log("Failed to parse VTT cue: "+e),r.trigger($t.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})})},i.onFragDecrypted=function(t){var e=t.frag,i=t.payload;if("subtitle"===e.type){if(!Object(Zt.isFiniteNumber)(this.initPTS[e.cc]))return void this.unparsedVttFrags.push(t);this._parseVTTs(e,i)}},i.onFragParsingUserdata=function(t){var e=this.cea608Parser1,i=this.cea608Parser2;if(this.enabled&&e&&i)for(var r=0;r<t.samples.length;r++){var n=t.samples[r].bytes;if(n){var a=this.extractCea608Data(n);e.addData(t.samples[r].pts,a[0]),i.addData(t.samples[r].pts,a[1])}}},i.extractCea608Data=function(t){for(var e=31&t[0],i=2,r=[[],[]],n=0;n<e;n++){var a=t[i++],s=127&t[i++],o=127&t[i++],l=0!=(4&a),u=3&a;0===s&&0===o||l&&(0!==u&&1!==u||(r[u].push(s),r[u].push(o)))}return r},e}(re),sr=ar,or=function(t){function e(e){var i;return i=t.call(this,e,$t.default.MEDIA_ATTACHED,$t.default.MEDIA_DETACHING,$t.default.MANIFEST_LOADED,$t.default.SUBTITLE_TRACK_LOADED)||this,i.tracks=[],i.trackId=-1,i.media=null,i.stopped=!0,i.subtitleDisplay=!0,i.queuedDefaultTrack=null,i}Dt(e,t);var i=e.prototype;return i.destroy=function(){re.prototype.destroy.call(this)},i.onMediaAttached=function(t){var e=this;this.media=t.media,this.media&&(Object(Zt.isFiniteNumber)(this.queuedDefaultTrack)&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=null),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval(function(){e.trackChangeListener()},500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},i.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),Object(Zt.isFiniteNumber)(this.subtitleTrack)&&(this.queuedDefaultTrack=this.subtitleTrack),Rt(this.media.textTracks).forEach(function(t){Q(t)}),this.subtitleTrack=-1,this.media=null)},i.onManifestLoaded=function(t){var e=this,i=t.subtitles||[];this.tracks=i,this.hls.trigger($t.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:i}),i.forEach(function(t){t.default&&(e.media?e.subtitleTrack=t.id:e.queuedDefaultTrack=t.id)})},i.onSubtitleTrackLoaded=function(t){var e=this,i=t.id,r=t.details,n=this.trackId,a=this.tracks,s=a[n];if(i>=a.length||i!==n||!s||this.stopped)return void this._clearReloadTimer();if(te.logger.log("subtitle track "+i+" loaded"),r.live){var o=C(s.details,r,t.stats.trequest);te.logger.log("Reloading live subtitle playlist in "+o+"ms"),this.timer=setTimeout(function(){e._loadCurrentTrack()},o)}else this._clearReloadTimer()},i.startLoad=function(){this.stopped=!1,this._loadCurrentTrack()},i.stopLoad=function(){this.stopped=!0,this._clearReloadTimer()},i._clearReloadTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},i._loadCurrentTrack=function(){var t=this.trackId,e=this.tracks,i=this.hls,r=e[t];t<0||!r||r.details&&!r.details.live||(te.logger.log("Loading subtitle track "+t),i.trigger($t.default.SUBTITLE_TRACK_LOADING,{url:r.url,id:t}))},i._toggleTrackModes=function(t){var e=this.media,i=this.subtitleDisplay,r=this.trackId;if(e){var n=Rt(e.textTracks);if(-1===t)[].slice.call(n).forEach(function(t){t.mode="disabled"});else{var a=n[r];a&&(a.mode="disabled")}var s=n[t];s&&(s.mode=i?"showing":"hidden")}},i._setSubtitleTrackInternal=function(t){var e=this.hls,i=this.tracks;!Object(Zt.isFiniteNumber)(t)||t<-1||t>=i.length||(this.trackId=t,te.logger.log("Switching to subtitle track "+t),e.trigger($t.default.SUBTITLE_TRACK_SWITCH,{id:t}),this._loadCurrentTrack())},i._onTextTracksChanged=function(){if(this.media&&this.hls.config.renderTextTracksNatively){for(var t=-1,e=Rt(this.media.textTracks),i=0;i<e.length;i++)if("hidden"===e[i].mode)t=i;else if("showing"===e[i].mode){t=i;break}this.subtitleTrack=t}},kt(e,[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(t){this.trackId!==t&&(this._toggleTrackModes(t),this._setSubtitleTrackInternal(t))}}]),e}(re),lr=or,ur=i("./src/crypt/decrypter.js"),dr=window,cr=dr.performance,hr=function(t){function e(e,i){var r;return r=t.call(this,e,$t.default.MEDIA_ATTACHED,$t.default.MEDIA_DETACHING,$t.default.ERROR,$t.default.KEY_LOADED,$t.default.FRAG_LOADED,$t.default.SUBTITLE_TRACKS_UPDATED,$t.default.SUBTITLE_TRACK_SWITCH,$t.default.SUBTITLE_TRACK_LOADED,$t.default.SUBTITLE_FRAG_PROCESSED,$t.default.LEVEL_UPDATED)||this,r.fragmentTracker=i,r.config=e.config,r.state=qe.STOPPED,r.tracks=[],r.tracksBuffered=[],r.currentTrackId=-1,r.decrypter=new ur.default(e,e.config),r.lastAVStart=0,r._onMediaSeeking=r.onMediaSeeking.bind(Nt(r)),r}It(e,t);var i=e.prototype;return i.startLoad=function(){this.stopLoad(),this.state=qe.IDLE;var t=this.tracks[this.currentTrackId];t&&t.details&&(this.setInterval(500),this.tick())},i.onSubtitleFragProcessed=function(t){var e=t.frag,i=t.success;if(this.fragPrevious=e,this.state=qe.IDLE,i){var r=this.tracksBuffered[this.currentTrackId];if(r){for(var n,a=e.start,s=0;s<r.length;s++)if(a>=r[s].start&&a<=r[s].end){n=r[s];break}var o=e.start+e.duration;n?n.end=o:(n={start:a,end:o},r.push(n))}}},i.onMediaAttached=function(t){var e=t.media;this.media=e,e.addEventListener("seeking",this._onMediaSeeking),this.state=qe.IDLE},i.onMediaDetaching=function(){var t=this;this.media&&(this.media.removeEventListener("seeking",this._onMediaSeeking),this.fragmentTracker.removeAllFragments(),this.currentTrackId=-1,this.tracks.forEach(function(e){t.tracksBuffered[e.id]=[]}),this.media=null,this.state=qe.STOPPED)},i.onError=function(t){var e=t.frag;e&&"subtitle"===e.type&&(this.fragCurrent&&this.fragCurrent.loader&&this.fragCurrent.loader.abort(),this.state=qe.IDLE)},i.onSubtitleTracksUpdated=function(t){var e=this;te.logger.log("subtitle tracks updated"),this.tracksBuffered=[],this.tracks=t.subtitleTracks,this.tracks.forEach(function(t){e.tracksBuffered[t.id]=[]})},i.onSubtitleTrackSwitch=function(t){if(this.currentTrackId=t.id,!this.tracks||!this.tracks.length||-1===this.currentTrackId)return void this.clearInterval();var e=this.tracks[this.currentTrackId];e&&e.details&&this.setInterval(500)},i.onSubtitleTrackLoaded=function(t){var e=t.id,i=t.details,r=this.currentTrackId,n=this.tracks,a=n[r];e>=n.length||e!==r||!a||(i.live&&b(a.details,i,this.lastAVStart),a.details=i,this.setInterval(500))},i.onKeyLoaded=function(){this.state===qe.KEY_LOADING&&(this.state=qe.IDLE)},i.onFragLoaded=function(t){var e=this.fragCurrent,i=t.frag.decryptdata,r=t.frag,n=this.hls;if(this.state===qe.FRAG_LOADING&&e&&"subtitle"===t.frag.type&&e.sn===t.frag.sn&&t.payload.byteLength>0&&i&&i.key&&"AES-128"===i.method){var a=cr.now();this.decrypter.decrypt(t.payload,i.key.buffer,i.iv.buffer,function(t){var e=cr.now();n.trigger($t.default.FRAG_DECRYPTED,{frag:r,payload:t,stats:{tstart:a,tdecrypt:e}})})}},i.onLevelUpdated=function(t){var e=t.details,i=e.fragments;this.lastAVStart=i.length?i[0].start:0},i.doTick=function(){if(!this.media)return void(this.state=qe.IDLE);switch(this.state){case qe.IDLE:var t=this.config,e=this.currentTrackId,i=this.fragmentTracker,r=this.media,n=this.tracks;if(!n||!n[e]||!n[e].details)break;var a=t.maxBufferHole,s=t.maxFragLookUpTolerance,o=Math.min(t.maxBufferLength,t.maxMaxBufferLength),l=Ie.bufferedInfo(this._getBuffered(),r.currentTime,a),u=l.end,d=l.len,c=n[e].details,h=c.fragments,f=h.length,p=h[f-1].start+h[f-1].duration;if(d>o)return;var g,y=this.fragPrevious;u<p?(y&&c.hasProgramDateTime&&(g=j(h,y.endProgramDateTime,s)),g||(g=O(y,h,u,s))):g=h[f-1],g&&g.encrypted?(te.logger.log("Loading key for "+g.sn),this.state=qe.KEY_LOADING,this.hls.trigger($t.default.KEY_LOADING,{frag:g})):g&&i.getState(g)===ke.NOT_LOADED&&(this.fragCurrent=g,this.state=qe.FRAG_LOADING,this.hls.trigger($t.default.FRAG_LOADING,{frag:g}))}},i.stopLoad=function(){this.lastAVStart=0,this.fragPrevious=null,t.prototype.stopLoad.call(this)},i._getBuffered=function(){return this.tracksBuffered[this.currentTrackId]||[]},i.onMediaSeeking=function(){if(this.fragCurrent){var t=this.media?this.media.currentTime:0,e=this.config.maxFragLookUpTolerance,i=this.fragCurrent.start-e,r=this.fragCurrent.start+this.fragCurrent.duration+e;(t<i||t>r)&&(this.fragCurrent.loader&&this.fragCurrent.loader.abort(),this.fragmentTracker.removeFragment(this.fragCurrent),this.fragCurrent=null,this.fragPrevious=null,this.state=qe.IDLE,this.tick())}},e}(Qe);!function(t){t.WIDEVINE="com.widevine.alpha",t.PLAYREADY="com.microsoft.playready"}(Yi||(Yi={}));var fr=function(){return"undefined"!=typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null}(),pr=function(t,e,i){var r={audioCapabilities:[],videoCapabilities:[]};return t.forEach(function(t){r.audioCapabilities.push({contentType:'audio/mp4; codecs="'+t+'"',robustness:i.audioRobustness||""})}),e.forEach(function(t){r.videoCapabilities.push({contentType:'video/mp4; codecs="'+t+'"',robustness:i.videoRobustness||""})}),[r]},gr=function(t,e,i,r){switch(t){case Yi.WIDEVINE:return pr(e,i,r);default:throw new Error("Unknown key-system: "+t)}},yr=function(t){function e(e){var i;return i=t.call(this,e,$t.default.MEDIA_ATTACHED,$t.default.MEDIA_DETACHED,$t.default.MANIFEST_PARSED)||this,i._widevineLicenseUrl=void 0,i._licenseXhrSetup=void 0,i._emeEnabled=void 0,i._requestMediaKeySystemAccess=void 0,i._drmSystemOptions=void 0,i._config=void 0,i._mediaKeysList=[],i._media=null,i._hasSetMediaKeys=!1,i._requestLicenseFailureCount=0,i.mediaKeysPromise=null,i._onMediaEncrypted=function(t){if(te.logger.log('Media is encrypted using "'+t.initDataType+'" init data type'),!i.mediaKeysPromise)return te.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),void i.hls.trigger($t.default.ERROR,{type:Jt.ErrorTypes.KEY_SYSTEM_ERROR,details:Jt.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});var e=function(e){i._media&&(i._attemptSetMediaKeys(e),i._generateRequestWithPreferredKeySession(t.initDataType,t.initData))};i.mediaKeysPromise.then(e).catch(e)},i._config=e.config,i._widevineLicenseUrl=i._config.widevineLicenseUrl,i._licenseXhrSetup=i._config.licenseXhrSetup,i._emeEnabled=i._config.emeEnabled,i._requestMediaKeySystemAccess=i._config.requestMediaKeySystemAccessFunc,i._drmSystemOptions=e.config.drmSystemOptions,i}Pt(e,t);var i=e.prototype;return i.getLicenseServerUrl=function(t){switch(t){case Yi.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+t+'"')},i._attemptKeySystemAccess=function(t,e,i){var r=this,n=gr(t,e,i,this._drmSystemOptions);te.logger.log("Requesting encrypted media key-system access");var a=this.requestMediaKeySystemAccess(t,n);this.mediaKeysPromise=a.then(function(e){return r._onMediaKeySystemAccessObtained(t,e)}),a.catch(function(e){te.logger.error('Failed to obtain key-system "'+t+'" access:',e)})},i._onMediaKeySystemAccessObtained=function(t,e){var i=this;te.logger.log('Access for key-system "'+t+'" obtained');var r={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:e,mediaKeySystemDomain:t};this._mediaKeysList.push(r);var n=Promise.resolve().then(function(){return e.createMediaKeys()}).then(function(e){return r.mediaKeys=e,te.logger.log('Media-keys created for key-system "'+t+'"'),i._onMediaKeysCreated(),e});return n.catch(function(t){te.logger.error("Failed to create media-keys:",t)}),n},i._onMediaKeysCreated=function(){var t=this;this._mediaKeysList.forEach(function(e){e.mediaKeysSession||(e.mediaKeysSession=e.mediaKeys.createSession(),t._onNewMediaKeySession(e.mediaKeysSession))})},i._onNewMediaKeySession=function(t){var e=this;te.logger.log("New key-system session "+t.sessionId),t.addEventListener("message",function(i){e._onKeySessionMessage(t,i.message)},!1)},i._onKeySessionMessage=function(t,e){te.logger.log("Got EME message event, creating license request"),this._requestLicense(e,function(e){te.logger.log("Received license data (length: "+(e?e.byteLength:e)+"), updating key-session"),t.update(e)})},i._attemptSetMediaKeys=function(t){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var e=this._mediaKeysList[0];if(!e||!e.mediaKeys)return te.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger($t.default.ERROR,{type:Jt.ErrorTypes.KEY_SYSTEM_ERROR,details:Jt.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});te.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(e.mediaKeys),this._hasSetMediaKeys=!0}},i._generateRequestWithPreferredKeySession=function(t,e){var i=this,r=this._mediaKeysList[0];if(!r)return te.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger($t.default.ERROR,{type:Jt.ErrorTypes.KEY_SYSTEM_ERROR,details:Jt.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(r.mediaKeysSessionInitialized)return void te.logger.warn("Key-Session already initialized but requested again");var n=r.mediaKeysSession;return n?e?(te.logger.log('Generating key-session request for "'+t+'" init data type'),r.mediaKeysSessionInitialized=!0,void n.generateRequest(t,e).then(function(){te.logger.debug("Key-session generation succeeded")}).catch(function(t){te.logger.error("Error generating key-session request:",t),i.hls.trigger($t.default.ERROR,{type:Jt.ErrorTypes.KEY_SYSTEM_ERROR,details:Jt.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})})):(te.logger.warn("Fatal: initData required for generating a key session is null"),void this.hls.trigger($t.default.ERROR,{type:Jt.ErrorTypes.KEY_SYSTEM_ERROR,details:Jt.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0})):(te.logger.error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger($t.default.ERROR,{type:Jt.ErrorTypes.KEY_SYSTEM_ERROR,details:Jt.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0}))},i._createLicenseXhr=function(t,e,i){var r=new XMLHttpRequest,n=this._licenseXhrSetup;try{if(n)try{n(r,t)}catch(e){r.open("POST",t,!0),n(r,t)}r.readyState||r.open("POST",t,!0)}catch(t){throw new Error("issue setting up KeySystem license XHR "+t)}return r.responseType="arraybuffer",r.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,r,t,e,i),r},i._onLicenseRequestReadyStageChange=function(t,e,i,r){switch(t.readyState){case 4:if(200===t.status)this._requestLicenseFailureCount=0,te.logger.log("License request succeeded"),"arraybuffer"!==t.responseType&&te.logger.warn("xhr response type was not set to the expected arraybuffer for license request"),r(t.response);else{if(te.logger.error("License Request XHR failed ("+e+"). Status: "+t.status+" ("+t.statusText+")"),++this._requestLicenseFailureCount>3)return void this.hls.trigger($t.default.ERROR,{type:Jt.ErrorTypes.KEY_SYSTEM_ERROR,details:Jt.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});var n=3-this._requestLicenseFailureCount+1;te.logger.warn("Retrying license request, "+n+" attempts left"),this._requestLicense(i,r)}}},i._generateLicenseRequestChallenge=function(t,e){switch(t.mediaKeySystemDomain){case Yi.WIDEVINE:return e}throw new Error("unsupported key-system: "+t.mediaKeySystemDomain)},i._requestLicense=function(t,e){te.logger.log("Requesting content license for key-system");var i=this._mediaKeysList[0];if(!i)return te.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger($t.default.ERROR,{type:Jt.ErrorTypes.KEY_SYSTEM_ERROR,details:Jt.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var r=this.getLicenseServerUrl(i.mediaKeySystemDomain),n=this._createLicenseXhr(r,t,e);te.logger.log("Sending license request to URL: "+r);var a=this._generateLicenseRequestChallenge(i,t);n.send(a)}catch(t){te.logger.error("Failure requesting DRM license: "+t),this.hls.trigger($t.default.ERROR,{type:Jt.ErrorTypes.KEY_SYSTEM_ERROR,details:Jt.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},i.onMediaAttached=function(t){if(this._emeEnabled){var e=t.media;this._media=e,e.addEventListener("encrypted",this._onMediaEncrypted)}},i.onMediaDetached=function(){var t=this._media,e=this._mediaKeysList;t&&(t.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(e.map(function(t){if(t.mediaKeysSession)return t.mediaKeysSession.close().catch(function(){})})).then(function(){return t.setMediaKeys(null)}).catch(function(){}))},i.onManifestParsed=function(t){if(this._emeEnabled){var e=t.levels.map(function(t){return t.audioCodec}),i=t.levels.map(function(t){return t.videoCodec});this._attemptKeySystemAccess(Yi.WIDEVINE,e,i)}},Ot(e,[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}]),e}(re),vr=yr,mr=Ut(Ut({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:wi,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:ui,bufferController:hi,capLevelController:pi,fpsController:mi,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:fr,testBandwidth:!0},function(){return{cueHandler:qt,enableCEA708Captions:!0,enableWebVTT:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}()),{},{subtitleStreamController:hr,subtitleTrackController:lr,timelineController:sr,audioStreamController:Ci,audioTrackController:Ei,emeController:vr}),Lr=function(t){function e(i){var r;void 0===i&&(i={}),r=t.call(this)||this,r.config=void 0,r._autoLevelCapping=void 0,r.abrController=void 0,r.capLevelController=void 0,r.levelController=void 0,r.streamController=void 0,r.networkControllers=void 0,r.audioTrackController=void 0,r.subtitleTrackController=void 0,r.emeController=void 0,r.coreComponents=void 0,r.media=null,r.url=null;var n=e.DefaultConfig;if((i.liveSyncDurationCount||i.liveMaxLatencyDurationCount)&&(i.liveSyncDuration||i.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");r.config=Yt(Yt({},n),i);var a=Ht(r),s=a.config;if(void 0!==s.liveMaxLatencyDurationCount&&s.liveMaxLatencyDurationCount<=s.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==s.liveMaxLatencyDuration&&(void 0===s.liveSyncDuration||s.liveMaxLatencyDuration<=s.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(te.enableLogs)(s.debug),r._autoLevelCapping=-1;var o=r.abrController=new s.abrController(Ht(r)),l=new s.bufferController(Ht(r)),u=r.capLevelController=new s.capLevelController(Ht(r)),d=new s.fpsController(Ht(r)),c=new Se(Ht(r)),h=new Ae(Ht(r)),f=new xe(Ht(r)),p=new ei(Ht(r)),g=r.levelController=new Ze(Ht(r)),y=new De(Ht(r)),v=r.streamController=new Je(Ht(r),y),m=[g,v],L=s.audioStreamController;L&&m.push(new L(Ht(r),y)),r.networkControllers=m;var w=[c,h,f,o,l,u,d,p,y];if(L=s.audioTrackController){var T=new L(Ht(r));r.audioTrackController=T,w.push(T)}if(L=s.subtitleTrackController){var E=new L(Ht(r));r.subtitleTrackController=E,m.push(E)}if(L=s.emeController){var b=new L(Ht(r));r.emeController=b,w.push(b)}return L=s.subtitleStreamController,L&&m.push(new L(Ht(r),y)),L=s.timelineController,L&&w.push(new L(Ht(r))),r.coreComponents=w,r}Wt(e,t),e.isSupported=function(){return Z()},Vt(e,null,[{key:"version",get:function(){return"0.14.16"}},{key:"Events",get:function(){return $t.default}},{key:"ErrorTypes",get:function(){return Jt.ErrorTypes}},{key:"ErrorDetails",get:function(){return Jt.ErrorDetails}},{key:"DefaultConfig",get:function(){return e.defaultConfig?e.defaultConfig:mr},set:function(t){e.defaultConfig=t}}]);var i=e.prototype;return i.destroy=function(){te.logger.log("destroy"),this.trigger($t.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(t){t.destroy()}),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},i.attachMedia=function(t){te.logger.log("attachMedia"),this.media=t,this.trigger($t.default.MEDIA_ATTACHING,{media:t})},i.detachMedia=function(){te.logger.log("detachMedia"),this.trigger($t.default.MEDIA_DETACHING),this.media=null},i.loadSource=function(t){t=Xt.buildAbsoluteURL(window.location.href,t,{alwaysNormalize:!0}),te.logger.log("loadSource:"+t),this.url=t,this.trigger($t.default.MANIFEST_LOADING,{url:t})},i.startLoad=function(t){void 0===t&&(t=-1),te.logger.log("startLoad("+t+")"),this.networkControllers.forEach(function(e){e.startLoad(t)})},i.stopLoad=function(){te.logger.log("stopLoad"),this.networkControllers.forEach(function(t){t.stopLoad()})},i.swapAudioCodec=function(){te.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},i.recoverMediaError=function(){te.logger.log("recoverMediaError");var t=this.media;this.detachMedia(),t&&this.attachMedia(t)},i.removeLevel=function(t,e){void 0===e&&(e=0),this.levelController.removeLevel(t,e)},Vt(e,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(t){te.logger.log("set currentLevel:"+t),this.loadLevel=t,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(t){te.logger.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(t){te.logger.log("set loadLevel:"+t),this.levelController.manualLevel=t}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(t){this.levelController.nextLoadLevel=t}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(t){te.logger.log("set firstLevel:"+t),this.levelController.firstLevel=t}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(t){te.logger.log("set startLevel:"+t),-1!==t&&(t=Math.max(t,this.minAutoLevel)),this.levelController.startLevel=t}},{key:"capLevelToPlayerSize",set:function(t){var e=!!t;e!==this.config.capLevelToPlayerSize&&(e?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=e)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(t){te.logger.log("set autoLevelCapping:"+t),this._autoLevelCapping=t}},{key:"bandwidthEstimate",get:function(){var t=this.abrController._bwEstimator;return t?t.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var t=this.levels,e=this.config.minAutoBitrate,i=t?t.length:0,r=0;r<i;r++)if((t[r].realBitrate?Math.max(t[r].realBitrate,t[r].bitrate):t[r].bitrate)>e)return r;return 0}},{key:"maxAutoLevel",get:function(){var t=this.levels,e=this.autoLevelCapping;return-1===e&&t&&t.length?t.length-1:e}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(t){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,t)}},{key:"audioTracks",get:function(){var t=this.audioTrackController;return t?t.audioTracks:[]}},{key:"audioTrack",get:function(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function(t){var e=this.audioTrackController;e&&(e.audioTrack=t)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleTrack=t)}},{key:"subtitleDisplay",get:function(){var t=this.subtitleTrackController;return!!t&&t.subtitleDisplay},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleDisplay=t)}}]),e}(Ue);Lr.defaultConfig=void 0},"./src/polyfills/number.js":/*!*********************************!*\
  !*** ./src/polyfills/number.js ***!
  \*********************************/
/*! exports provided: isFiniteNumber, MAX_SAFE_INTEGER */
function(t,e,i){"use strict";i.r(e),i.d(e,"isFiniteNumber",function(){return r}),i.d(e,"MAX_SAFE_INTEGER",function(){return n});var r=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},n=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/utils/get-self-scope.js":/*!*************************************!*\
  !*** ./src/utils/get-self-scope.js ***!
  \*************************************/
/*! exports provided: getSelfScope */
function(t,e,i){"use strict";function r(){return"undefined"==typeof window?self:window}i.r(e),i.d(e,"getSelfScope",function(){return r})},"./src/utils/logger.js":/*!*****************************!*\
  !*** ./src/utils/logger.js ***!
  \*****************************/
/*! exports provided: enableLogs, logger */
function(t,e,i){"use strict";function r(){}function n(t,e){return e="["+t+"] > "+e}function a(t){var e=d.console[t];return e?function(){for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];r[0]&&(r[0]=n(t,r[0])),e.apply(d.console,r)}:r}function s(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];i.forEach(function(e){u[e]=t[e]?t[e].bind(t):a(e)})}i.r(e),i.d(e,"enableLogs",function(){return c}),i.d(e,"logger",function(){return h});var o=i(/*! ./get-self-scope */"./src/utils/get-self-scope.js"),l={trace:r,debug:r,log:r,warn:r,info:r,error:r},u=l,d=Object(o.getSelfScope)(),c=function(t){if(d.console&&!0===t||"object"==typeof t){s(t,"debug","log","info","warn","error");try{u.log()}catch(t){u=l}}else u=l},h=u}}).default}()}()},function(t,e,i){var r,n,a;n=i(15),a=/https:\/\/archive\/([A-Za-z0-9_-]*)\/(\d*)\/(\d*)\/(.*)/,r=function(){function t(t){this.manager=n.getInstance()}return t.prototype.destroy=function(){return this.abort()},t.prototype.abort=function(){},t.prototype.load=function(t,e,i){var r,n,s;return r=a.exec(t.url),null!=r?(n=this.manager.getSession(r[4],r[1],parseInt(r[2]),parseInt(r[3])),s={trequest:performance.now(),retry:0},this.manager.getChunks(n,function(e,r){var n,a,o;return null!=e?i.onError(e.response,t,e.xhr):(0===s.tfirst&&(s.tfirst=Math.max(performance.now(),s.trequest)),s.tload=Math.max(s.tfirst,performance.now()),n="#EXTM3U\n#EXT-X-VERSION:15\n#EXT-X-TARGETDURATION:"+Math.ceil(r.duration)+"\n#EXT-X-MEDIA-SEQUENCE:"+r.sequence+"\n",a=null,r.chunks.forEach(function(t){return null!=t.offset&&(n=n+"#EXT-X-START:TIME-OFFSET="+Math.floor(t.offset/100)/10+",PRECISE=YES\n"),null!==a&&t.playlist!==a&&(n+="#EXT-X-DISCONTINUITY\n"),n=n+"#EXTINF:"+Math.ceil(t.duration)+",\n"+t.url+"\n",a=t.playlist}),r.end&&(n+="#EXT-X-ENDLIST\n"),s.loaded=n.length,s.total=n.length,o={url:t.url,data:n},i.onSuccess(o,s,t,r.xhr))})):i.onError({text:"Invalid url "+this.context.url},this.context,null)},t}(),t.exports=r},function(t,e,i){var r,n,a=function(t,e){return function(){return t.apply(e,arguments)}};n=i(4),r=function(){function t(t){this.params=t,this._onTime=a(this._onTime,this),this._onVote=a(this._onVote,this),this.playlist=[],this.current=-1,this.ended=!1}return t.prototype.play=function(t){return this.current=0,this.preset=t,this.updatePlaylist(function(t){return function(){return t.params.video._playArchive(t.playlist[t.current].start,1),t.params.video.bind("time",t._onTime),t.params.control.bind("votes",t._onVote)}}(this))},t.prototype._onVote=function(t){if((null!=t?t.lastVotedPreset:void 0)===this.preset)return setTimeout(function(t){return function(){return t.params.video.playLive()}}(this),2e3)},t.prototype._onTime=function(t){if(t>this.playlist[this.current].end)return this.current++,this.params.video._playArchive(this.playlist[this.current].start,1),this.updatePlaylist(function(){})},t.prototype.updatePlaylist=function(t){var e,i;return this.current<this.playlist.length-2||this.ended?t():(e=Date.now(),this.playlist.length>0&&(e=this.playlist[this.playlist.length-1].start),i="http://img.hdrelay.com/api/record/previous-presets?camera="+this.params.camera+"&preset="+this.preset+"&count=15&time="+e,n({url:i},function(e){return function(i,r,n){var a,s;if(200!==i)return console.error(i,r);try{return s=JSON.parse('{ "list": '+r+"}"),s=s.list,s=s.map(function(t){return{start:t.start+3e3,end:t.end-3e3}}),s=s.filter(function(t){return t.end-t.start>1e4}),s.reverse(),0===s.length?e.ended=!0:(e.playlist=e.playlist.concat(s),s.forEach(function(t,i){return console.log("playlist",i,e.playlist.length,new Date(t.start),(t.end-t.start)/1e3)})),t()}catch(t){return a=t,console.error(a)}}}(this)))},t.prototype.destroy=function(){return this.params.video.unbind("time",this._onTime),this.params.control.unbind("votes",this._onVote)},t}(),t.exports=r},function(t,e,i){var r,n,a;r=i(1),a=i(42),n=i(18),function(){function e(t){this.settings=t,r.mixin(this),this.element=this.settings.video.startedVideo||document.createElement("video"),this.element.setAttribute("playsinline",""),this.state=new a(this)}e.prototype.supportArchive=function(){return!0},e.prototype.preparePlay=function(){return this.element.play(),this.element.pause()},e.prototype.play=function(t){return null!=t&&(this._lastUrl=t),this._stopped=!1,null!=t?0===t.indexOf("https://archive/")?(this.state.mode="record",this.playlistPlayer=new n({url:t,element:this.element,video:this}),this.state.mode="record",this.element.play()):(this.element.src=t,this.element.play(),this.state.mode="live"):this.state.isEnded()?this.play(this._lastUrl):this.element.play()},e.prototype.snapshot=function(){var t,e;return t=document.createElement("canvas"),t.width=640,t.height=480,e=t.getContext("2d"),e.drawImage(this.element,0,0,t.width,t.height),t.toDataURL("image/jpeg")},e.prototype.stop=function(){return this.element.src="",this.state._onEnded()},e.prototype.pause=function(){return this.element.pause()},t.exports=e}()},function(t,e){var i,r=function(t,e){return function(){return t.apply(e,arguments)}};i=function(){function t(t){this.video=t,this._onLoadedMetadata=r(this._onLoadedMetadata,this),this._onError=r(this._onError,this),this._onEnded=r(this._onEnded,this),this._onPause=r(this._onPause,this),this._onWaiting=r(this._onWaiting,this),this._onLoadStart=r(this._onLoadStart,this),this._onPlaying=r(this._onPlaying,this),this.enabled=!0,this.loadstart=!1,this.video.element.addEventListener("canplay",this._onPlaying),this.video.element.addEventListener("playing",this._onPlaying),this.video.element.addEventListener("loadstart",this._onLoadStart),this.video.element.addEventListener("waiting",this._onWaiting),this.video.element.addEventListener("pause",this._onPause),this.video.element.addEventListener("ended",this._onEnded),this.video.element.addEventListener("error",this._onError),this.video.element.addEventListener("loadedmetadata",this._onLoadedMetadata),this.video.element.addEventListener("progress",function(t){}),this.video.element.addEventListener("suspend",function(t){}),this.video.element.addEventListener("abort",function(t){}),this.video.element.addEventListener("emptied",function(t){}),this.video.element.addEventListener("stalled",function(t){}),this.video.element.addEventListener("loadeddata",function(t){}),this.video.element.addEventListener("canplaythrough",function(t){}),this.video.element.addEventListener("seeking",function(t){}),this.video.element.addEventListener("seeked",function(t){}),this.video.element.addEventListener("durationchange",function(t){}),this.video.element.addEventListener("play",function(t){}),this.video.element.addEventListener("ratechange",function(t){}),this.video.element.addEventListener("resize",function(t){}),this.video.element.addEventListener("volumechange",function(t){})}return t.prototype._onPlaying=function(t){var e,i;if(this.enabled&&-1!==(null!=t&&null!=(e=t.target)&&null!=(i=e.src)?i.indexOf(this.video._lastUrl):void 0))return this.state="playing",this.video.trigger(this.state,t),this.video.trigger("change",this.state),"record"===this.mode?(null!=this.timeTimer&&clearTimeout(this.timeTimer),this.timeTimer=setInterval(function(t){return function(){var e;if(t.video.element.played.length>0&&null!=(e=t.video.playlistPlayer.getTimestamp()))return t.time=Math.floor(e),t.video.trigger("time",e)}}(this),100)):(this.time="live",this.video.trigger("time","live"),null!=this.timeTimer?clearTimeout(this.timeTimer):void 0)},t.prototype._onLoadStart=function(t){var e,i;if(this.enabled&&-1!==(null!=t&&null!=(e=t.target)&&null!=(i=e.src)?i.indexOf(this.video._lastUrl):void 0))return this.loadstart=!0,this.metada=null},t.prototype._onWaiting=function(t){var e,i;if(this.enabled&&-1!==(null!=t&&null!=(e=t.target)&&null!=(i=e.src)?i.indexOf(this.video._lastUrl):void 0))return this.loadstart?(this.state="loading",this.loadstart=!1):this.state="buffering",this.video.trigger(this.state,t),this.video.trigger("change",this.state),null!=this.timeTimer?clearTimeout(this.timeTimer):void 0},t.prototype._onPause=function(t){var e,i;if(this.enabled&&(null!=this.timeTimer&&clearTimeout(this.timeTimer),-1!==(null!=t&&null!=(e=t.target)&&null!=(i=e.src)?i.indexOf(this.video._lastUrl):void 0)))return this.state="pause",this.video.trigger(this.state,t),this.video.trigger("change",this.state)},t.prototype._onEnded=function(t){var e,i;if(this.enabled&&(null!=this.timeTimer&&clearTimeout(this.timeTimer),"live"===this.mode||"record"===this.mode&&this.video.playlistPlayer.ended)){if(-1===(null!=t&&null!=(e=t.target)&&null!=(i=e.src)?i.indexOf(this.video._lastUrl):void 0))return;return this.state="ended",this.video.trigger(this.state,this.state),this.video.trigger("change",this.state)}},t.prototype._onError=function(t){var e,i,r,n,a;if(this.enabled&&(null!=this.timeTimer&&clearTimeout(this.timeTimer),console.log(":error",t,this.state,this.video._lastUrl,null!=t&&null!=(e=t.target)?e.src:void 0,-1===(null!=t&&null!=(i=t.target)&&null!=(r=i.src)?r.indexOf(this.video._lastUrl):void 0)),-1!==(null!=t&&null!=(n=t.target)&&null!=(a=n.src)?a.indexOf(this.video._lastUrl):void 0)))return this.state="error",this.video.trigger(this.state,this.state),this.video.trigger("change",this.state)},t.prototype._onLoadedMetadata=function(t){var e,i;if(this.enabled&&-1!==(null!=t&&null!=(e=t.target)&&null!=(i=e.src)?i.indexOf(this.video._lastUrl):void 0))return this.metada=t,this.video.trigger("metadata",this.metadata)},t.prototype.isPlaying=function(){return"playing"===this.state},t.prototype.isPaused=function(){return"pause"===this.state},t.prototype.isBuffering=function(){return"buffering"===this.state},t.prototype.isLoading=function(){return"loading"===this.state},t.prototype.isEnded=function(){return"ended"===this.state},t.prototype.isError=function(){return"error"===this.state},t.prototype.enable=function(){return this.enabled=!0},t.prototype.disable=function(){return this.enabled=!1},t.prototype.destroy=function(){return this.video.element.removeEventListener("canplay",this._onPlaying),this.video.element.removeEventListener("playing",this._onPlaying),this.video.element.removeEventListener("loadstart",this._onLoadStart),this.video.element.removeEventListener("waiting",this._onWaiting),this.video.element.removeEventListener("pause",this._onPause),this.video.element.removeEventListener("ended",this._onEnded),this.video.element.removeEventListener("error",this._onError),this.video.element.removeEventListener("loadedmetadata",this._onLoadedMetadata)},t}(),t.exports=i},function(t,e,i){var r,n,a;a=i(4),r=i(1),n=i(44),function(){function e(t){this.settings=t,r.mixin(this),this.state=new n(this),this.element=document.createElement("div"),this.element.style.width="100%",this.element.style.height="100%",this._img1=document.createElement("img"),this._img2=document.createElement("img"),this.element.appendChild(this._img1),this.element.appendChild(this._img2),this._img1.onload=function(t){return function(e){return"undefined"!=typeof err&&null!==err?t.state.error():t.state.isPaused()||t.state.isEnded()?void 0:(t._count++,t.state.playing(),t._current=t._img1,t._img1.style.visibility="visible",t._getNextImage())}}(this),this._img2.onload=function(t){return function(e){return"undefined"!=typeof err&&null!==err?t.state.error():t.state.isPaused()||t.state.isEnded()?void 0:(t._count++,t.state.playing(),t._current=t._img2,t._img2.style.visibility="visible",t._getNextImage())}}(this),this._img1.style.visibility="hidden",this._img1.style.position="absolute",this._img1.style.left="0",this._img1.style.top="0",this._img1.style.width="100%",this._img1.style.height="100%",this._img2.style.visibility="hidden",this._img2.style.position="absolute",this._img2.style.left="0",this._img2.style.top="0",this._img2.style.width="100%",this._img2.style.height="100%",this._current=this._img1,this._count=0}e.prototype._getConnectionId=function(t){var e,i;return i=this.settings.video.width||800,e=Math.floor(i/this.settings.video.aspectRatio),a({url:this.url+"OpenCameraServer?image_size="+i+"x"+e},function(e,i){return 200!==e?t(new Error):0!==i.indexOf("connection_id=")?t(new Error):t(null,i.substring(i.indexOf("=")+1))})},e.prototype._getNextImage=function(){var t,e,i;if(this.state.isPlaying()||this.state.isLoading())return i=this.settings.video.width||800,t=Math.floor(i/this.settings.video.aspectRatio),e=this._current===this._img1?this._img2:this._img1,e.style.visibility="hidden",e.src=this.url+"GetLiveImage?connection_id="+this._connection_id+"&seq="+this._count+"&size="+i+"x"+t},e.prototype.play=function(t){return null!=t&&(this.url=t),this._connection_id?(this.state.playing(),this._getNextImage()):(this.state.connecting(),this._getConnectionId(function(t){return function(e,i){return null!=e?void t.state.error():(t._connection_id=i,t._getNextImage())}}(this)))},e.prototype.pause=function(){return this.state.pausing()},e.prototype.stop=function(){return this.state.end()},t.exports=e}()},function(t,e){var i;i=function(){function t(t){this.video=t}return t.prototype.connecting=function(){return this.state="loading",this.video.trigger(this.state),this.video.trigger("change",this.state)},t.prototype.error=function(){return this.state="error",this.video.trigger(this.state),this.video.trigger("change",this.state)},t.prototype.playing=function(){if("playing"!==this.state)return this.state="playing",this.video.trigger(this.state),this.video.trigger("change",this.state)},t.prototype.pausing=function(){return this.state="pause",this.video.trigger(this.state),this.video.trigger("change",this.state)},t.prototype.end=function(){return this.state="ended",this.video.trigger(this.state),this.video.trigger("change",this.state)},t.prototype.isPlaying=function(){return"playing"===this.state},t.prototype.isPaused=function(){return"pause"===this.state},t.prototype.isBuffering=function(){return"buffering"===this.state},t.prototype.isLoading=function(){return"loading"===this.state},t.prototype.isEnded=function(){return"ended"===this.state},t.prototype.isError=function(){return"error"===this.state},t.prototype.destroy=function(){},t}(),t.exports=i},function(t,e,i){var r,n,a,s,o,l,u=function(t,e){return function(){return t.apply(e,arguments)}};n=i(46),l=i(19),o=i(20),a=i(47),s=i(49),r=function(){function t(t){this.player=t,this._onReviewClick=u(this._onReviewClick,this),this._onFastClick=u(this._onFastClick,this),this._onSunsetClick=u(this._onSunsetClick,this),this._onSunriseClick=u(this._onSunriseClick,this),this._onDownloadClick=u(this._onDownloadClick,this),this._onLiveClick=u(this._onLiveClick,this),this._onArchiveClick=u(this._onArchiveClick,this),this._onChange=u(this._onChange,this),this._onSnapshotCloseClick=u(this._onSnapshotCloseClick,this),this._onSnapshotClick=u(this._onSnapshotClick,this),this._onFullscreenExitClick=u(this._onFullscreenExitClick,this),this._onFullscreenClick=u(this._onFullscreenClick,this),this._onPauseClick=u(this._onPauseClick,this),this._onReconnectClick=u(this._onReconnectClick,this),this._onPlayClick=u(this._onPlayClick,this),this._onTimeUpdate=u(this._onTimeUpdate,this),this._onVideoEnd=u(this._onVideoEnd,this),this.player.interface.bind("play-click",this._onPlayClick),this.player.interface.bind("reconnect-click",this._onReconnectClick),this.player.interface.bind("pause-click",this._onPauseClick),this.player.interface.bind("logo-click",this._onLogoClick),this.player.interface.bind("snapshot-click",this._onSnapshotClick),this.player.interface.bind("snapshot-close-click",this._onSnapshotCloseClick),this.player.interface.bind("fullscreen-click",this._onFullscreenClick),this.player.interface.bind("fullscreen-exit-click",this._onFullscreenExitClick),this.player.interface.bind("download-click",this._onDownloadClick),this.player.interface.bind("archive-click",this._onArchiveClick),this.player.interface.bind("live-click",this._onLiveClick),this.player.interface.bind("sunrise-click",this._onSunriseClick),this.player.interface.bind("sunset-click",this._onSunsetClick),this.player.interface.bind("fast-click",this._onFastClick),this.player.interface.bind("review-click",this._onReviewClick),this.player.video.bind("time",this._onTimeUpdate),o.addEventListener(function(t){return function(e){if(!o.isFullScreen())return t.player.interface.element.style.padding="0"}}(this)),this.player.bind("change",this._onChange)}return t.prototype._onVideoEnd=function(t){var e;if(null!=(e=this.player.video.state.time)&&"live"!==e)return this.player.manager.getSpeedsAt(e,function(t){return function(i,r){var n;if(n=t.player.video.state.getSpeed(),r=r.filter(function(t){return n!==t}),r.length>0)return t.player.play(e,r[r.length-1])}}(this))},t.prototype._onTimeUpdate=function(t){return this.player.interface.showTime(t)},t.prototype._onPlayClick=function(t){return this.player.trigger("interaction"),this.player.play()},t.prototype._onReconnectClick=function(t){return this.player.trigger("interaction"),this.player.play(this.player.state.lastPlay.time,this.player.state.lastPlay.speed)},t.prototype._onPauseClick=function(t){return this.player.trigger("interaction"),this.player.pause()},t.prototype._onLogoClick=function(t){return this.player.trigger("interaction"),window.open("http://www.hdrelay.com","_blank")},t.prototype._onFullscreenClick=function(t){var e,i,r,n,a,s;return this.player.trigger("interaction"),r=this.player.interface.element.querySelector(".hdrelay-default-video"),a=this.player.interface.element.offsetWidth-r.offsetWidth,s=this.player.interface.element.offsetHeight-r.offsetHeight,i=(this.player.interface.element.offsetWidth-a)/(this.player.interface.element.offsetHeight-s),n=(screen.width-a)/(screen.height-s),e=n>i?"0 "+Math.floor((screen.width-a-(screen.height-s)*i)/2)+"px":n<i?Math.floor((screen.height-s-(screen.width-a)/i)/2)+"px 0":"0",this.player.interface.element.style.padding=e,this.player.interface.element.style.backgroundColor="black",o.requestFullScreen(this.player.interface.element)},t.prototype._onFullscreenExitClick=function(t){return this.player.trigger("interaction"),this.player.interface.element.style.padding="0",o.cancelFullScreen(this.player.interface.element)},t.prototype._onSnapshotClick=function(t){if(this.player.trigger("interaction"),this.player.state.isPlaying()||this.player.state.isPaused()||this.player.state.isBuffering())return this.player.interface.snapshotShow({url:this.player.video.snapshot()})},t.prototype._onSnapshotCloseClick=function(t){return this.player.trigger("interaction"),this.player.interface.snapshotClose()},t.prototype._onChange=function(t){return l(this.player)},t.prototype._onArchiveClick=function(t){var e;return this.player.trigger("interaction"),a({target:this.player.interface.elements.calendar,initial:Date.now(),tz:this.player.settings.camera.timezone,speeds:(null!=(e=this.player.settings.video.record)?e.speeds:void 0)||[1],getInterval:function(t){return function(e){return t.player.manager.getInfo(function(t,i){var r,n,a,s;return null!=t?console.error(t):(a=i.find(function(t){return 1===t.speed}),n=Date.now(),r=i.reduce(function(t,e){return e.first<t?e.first:t},n),r===n&&(r=0),s=null!=a?a.last:n,e(null,{from:r,to:s,intervals:i}))})}}(this),cb:function(t){return function(e){var i;return null==e?t.player.play("live"):(i=e.speed||1,t.player.play(e.time,i))}}(this)})},t.prototype._onLiveClick=function(t){return this.player.trigger("interaction"),this.player.play("live")},t.prototype._onDownloadClick=function(t){var e;return this.player.trigger("interaction"),s({target:this.player.interface.elements.calendar,initial:Date.now(),tz:this.player.settings.camera.timezone,speeds:(null!=(e=this.player.settings.video.record)?e.speeds:void 0)||[1],getInterval:function(t){return function(e){return t.player.manager.getInfo(function(t,i){var r,n,a,s;return null!=t?console.error(t):(a=i.find(function(t){return 1===t.speed}),n=Date.now(),r=i.reduce(function(t,e){return e.first<t?e.first:t},n),r===n&&(r=0),s=null!=a?a.last:n,e(null,{from:r,to:s,intervals:i}))})}}(this),cb:function(t){return function(e){if(null!=e)return t.player.manager.download(t.player.settings.camera.id,e.speed,e.start,e.end,e.email,function(t){if(null!=t)return console.error(t)})}}(this)})},t.prototype._onSunriseClick=function(t){var e,i;return null!=this.player.video.preparePlay&&this.player.video.preparePlay(),i=this.player.video.state.time,null!=i&&"live"!==i||(i=Date.now()),null!=this.lastSunriseClick&&Date.now()-this.lastSunriseClick<1e3&&(i=i-864e5+1),this.lastSunriseClick=Date.now(),e=n.previousSunrise(this.player.settings.camera.latitude,this.player.settings.camera.longitude,this.player.settings.camera.timezone,i),i=Math.floor(e+6e4*this.player.settings.video.buttons.sunrise.offset),this.player.manager.getSpeedsAt(i,function(t){return function(e,r){var n;if(null!=r&&0!==r.length)return n=r.find(function(e){return e>=t.player.settings.video.buttons.sunrise.speed}),n||(n=r[0]),t.player.play(i,n)}}(this))},t.prototype._onSunsetClick=function(t){var e,i;return null!=this.player.video.preparePlay&&this.player.video.preparePlay(),i=this.player.video.state.time,null!=i&&"live"!==i||(i=Date.now()),null!=this.lastSunsetClick&&Date.now()-this.lastSunsetClick<1e3&&(i=i-864e5+1),this.lastSunsetClick=Date.now(),e=n.previousSunset(this.player.settings.camera.latitude,this.player.settings.camera.longitude,this.player.settings.camera.timezone,i),i=Math.floor(e+6e4*this.player.settings.video.buttons.sunset.offset),this.player.manager.getSpeedsAt(i,function(t){return function(e,r){var n;if(null!=r&&0!==r.length)return n=r.find(function(e){return e>=t.player.settings.video.buttons.sunset.speed}),null==n&&(n=r[0]),t.player.play(i,n)}}(this))},t.prototype._onFastClick=function(t){var e;if(null!=(e=this.player.video.state.time)&&"live"!==e)return this.player.manager.getSpeedsAt(e,function(t){return function(i,r){var n;return n=t.player.video.state.speed,n=r.find(function(t){return t>n}),t.player.play(e,n)}}(this))},t.prototype._onReviewClick=function(t){var e;return null!=this.player.video.preparePlay&&this.player.video.preparePlay(),e=this.player.video.state.time,null!=e&&"live"!==e||(e=Date.now()),e-=36e5*this.player.settings.video.buttons.fastReview.hours,this.player.manager.getSpeedsAt(e,function(t){return function(i,r){var n;return null!=i?console.error(i):0===r.length?console.error("Not Available"):(n=r[r.length-1],t.player.play(e,n))}}(this))},t.prototype.destroy=function(){return this.player.interface.unbind("play-click",this._onPlayClick),this.player.interface.unbind("pause-click",this._onPauseClick),this.player.interface.unbind("logo-click",this._onLogoClick),this.player.interface.unbind("snapshot-click",this._onSnapshotClick),this.player.interface.unbind("snapshot-close-click",this._onSnapshotCloseClick),this.player.interface.unbind("fullscreen-click",this._onFullscreenClick),this.player.interface.unbind("fullscreen-exit-click",this._onFullscreenExitClick),this.player.interface.unbind("archive-click",this._onArchiveClick),this.player.interface.unbind("download-click",this._onDownloadClick),this.player.interface.unbind("live-click",this._onLiveClick),this.player.interface.unbind("review-click",this._onReviewClick),this.player.interface.unbind("fast-click",this._onFastClick),this.player.interface.unbind("sunrise-click",this._onSunriseClick),this.player.interface.unbind("sunset-click",this._onSunsetClick),this.player.video.unbind("time",this._onTimeUpdate),this.player.unbind("change",this._onChange)},t}(),t.exports=r},function(t,e,i){var r,n,a,s;a=i(2),s=function(t){return t/180*Math.PI},n=function(t){return t/Math.PI*180},r=function(){function t(){}return t.sun=function(t,e,i,r){var o,l,u,d,c,h,f,p,g,y,v,m,L,w,T,E,b;return p={},i=new a.Timezone(i),E=6e4*-i.offset(r),T=(r+22089888e5+E)/24/36e5+2,h=T+2415018.5-E/36e5/24,c=(h-2451545)/36525,d=(280.46646+c*(36000.76983+3032e-7*c))%360,u=357.52911+c*(35999.05029-1537e-7*c),o=.016708634-c*(42037e-9+1.267e-7*c),m=Math.sin(s(u))*(1.914602-c*(.004817+14e-6*c))+Math.sin(s(2*u))*(.019993-101e-6*c)+289e-6*Math.sin(s(3*u)),w=d+m,L=u+m,Math.cos(s(L)),y=w-.00569-.00478*Math.sin(s(125.04-1934.136*c)),f=23+(26+(21.448-c*(46.815+c*(59e-5-.001813*c)))/60)/60,g=f+.00256*Math.cos(s(125.04-1934.136*c)),n(Math.atan2(Math.cos(s(y)),Math.cos(s(g))*Math.sin(s(y)))),v=n(Math.asin(Math.sin(s(g))*Math.sin(s(y)))),b=Math.tan(s(g/2))*Math.tan(s(g/2)),l=4*n(b*Math.sin(2*s(d))-2*o*Math.sin(s(u))+4*o*b*Math.sin(s(u))*Math.cos(2*s(d))-.5*b*b*Math.sin(4*s(d))-1.25*o*o*Math.sin(2*s(u))),p.haSunrise=n(Math.acos(Math.cos(s(90.833))/(Math.cos(s(t))*Math.cos(s(v)))-Math.tan(s(t))*Math.tan(s(v)))),p.solarNoon=(720-4*e-l+E/36e5*60)/1440*24,p},t.sunrise=function(e,i,r,n){var a;return a=t.sun(e,i,r,n),24*(a.solarNoon/24-4*a.haSunrise/1440)},t.previousSunrise=function(e,i,r,n){var s,o,l,u,d,c;return d=t.sunrise(e,i,r,n),c=new a.Timezone(r),u=6e4*-c.offset(n),s=new Date(n+u),l=s.getUTCHours()+s.getUTCMinutes()/60+s.getUTCSeconds()/3600+s.getUTCMilliseconds()/36e5,o=l-d,o<0&&(o+=24),n-36e5*o},t.sunset=function(e,i,r,n){var a;return a=t.sun(e,i,r,n),24*(a.solarNoon/24+4*a.haSunrise/1440)},t.previousSunset=function(e,i,r,n){var s,o,l,u,d,c;return d=t.sunset(e,i,r,n),c=new a.Timezone(r),u=6e4*-c.offset(n),s=new Date(n+u),l=s.getUTCHours()+s.getUTCMinutes()/60+s.getUTCSeconds()/3600+s.getUTCMilliseconds()/36e5,o=l-d,o<0&&(o+=24),n-36e5*o},t}(),t.exports=r},function(t,e,i){var r,n,a,s,o,l,u,d,c,h;s=i(21),h=i(2),o=i(3),r=null,a=null,n=null,l=function(t){var e,i,s,l,u;if(l=t.tz||"Etc/UTC|UTC|0|0|",l=new h.Timezone(l),i=new Date(t.from),i=new Date(t.from+6e4*i.getTimezoneOffset()-6e4*l.offset(t.from)),u=new Date(t.to),u=new Date(t.to+6e4*u.getTimezoneOffset()-6e4*l.offset(t.to)),s=new Date(t.initial),s=new Date(t.initial+6e4*s.getTimezoneOffset()-6e4*l.offset(t.initial)),null!=(e=r.getDate({defaultDate:s,setDefaultDate:s,minDate:i,maxDate:u,cb:function(e){var i;return t.target.innerHTML="",null==e?void(null!=t.cb&&t.cb()):(i=a.getTime({hour:0,cb:function(i){var r,a,s,u;return t.target.innerHTML="",null==i?void(null!=t.cb&&t.cb()):(u=e.getTime()-6e4*e.getTimezoneOffset(),r=l.offset(u),u+=6e4*r,u+=36e5*i,s=t.speeds||[1],t.intervals&&(s=s.filter(function(e){var i,r;return!(null==(i=t.intervals.find(function(t){return t.speed===e}))||u<i.first||(o(e),r=i.last+i.lastDuration*o,u>r))})),a=n.getSpeed({speeds:s,cb:function(e){var i,r;return t.target.innerHTML="",null!=t.intervals&&(i=t.intervals.find(function(t){return t.speed===e}),o(e),r=i.last+i.lastDuration*o,!i||u>r)?void(null!=t.cb&&t.cb()):null==e?void(null!=t.cb&&t.cb()):null!=t.cb?t.cb({time:u,speed:e}):void 0}}),null!=a?(t.target.innerHTML="",t.target.appendChild(a)):void 0)}}),null!=i?(t.target.innerHTML="",t.target.appendChild(i)):void 0)}})))return t.target.innerHTML="",t.target.appendChild(e)},u=function(t){return i(22)(function(e){return r=e,t(null,e)})},c=function(t){return i(23)(function(e){return a=e,t(null,e)})},d=function(t){return i(24)(function(e){return n=e,t(null,e)})},t.exports=function(t){var e;return e={},r||(e.DatePicker=u),a||(e.TimePicker=c),n||(e.SpeedPicker=d),t.getInterval&&(e.interval=t.getInterval),0===Object.keys(e).length?l(t):s.parallel(e,function(e,i){return i.interval&&(t.from=i.interval.from,t.to=i.interval.to,null!=i.interval.intervals&&(t.intervals=i.interval.intervals)),l(t)})}},function(t,e){},function(t,e,i){var r,n,a,s,o,l,u,d,c,h,f;o=i(21),f=i(2),r=null,s=null,a=null,n=null,l=function(t){var e,i,o,l,u;if(l=t.tz||"Etc/UTC|UTC|0|0|",l=new f.Timezone(l),i=new Date(t.from),i=new Date(t.from+6e4*i.getTimezoneOffset()-6e4*l.offset(t.from)),u=new Date(t.to),u=new Date(t.to+6e4*u.getTimezoneOffset()-6e4*l.offset(t.to)),o=new Date(t.initial),o=new Date(t.initial+6e4*o.getTimezoneOffset()-6e4*l.offset(t.initial)),null!=(e=r.getDate({title:"Select start date",defaultDate:o,setDefaultDate:o,minDate:i,maxDate:u,cb:function(o){var d;return t.target.innerHTML="",null==o?void(null!=t.cb&&t.cb()):(d=s.getTime({title:"Select start hour",hour:0,cb:function(c){var h,f,p,g;return t.target.innerHTML="",null==c?void(null!=t.cb&&t.cb()):(g=o.getTime()-6e4*o.getTimezoneOffset(),h=l.offset(g),g+=6e4*h,g+=36e5*c,p=t.speeds||[1],t.intervals&&(p=p.filter(function(e){var i;return!(null==(i=t.intervals.find(function(t){return t.speed===e}))||g<i.first||g>i.last)})),f=a.getSpeed({speeds:p,cb:function(a){var o;return t.target.innerHTML="",null==a?void(null!=t.cb&&t.cb()):(i=new Date(g),i=new Date(g+6e4*i.getTimezoneOffset()-6e4*l.offset(g)),o=Math.min(t.to,g+216e5*a),u=new Date(o),u=new Date(o+6e4*u.getTimezoneOffset()-6e4*l.offset(o)),e=r.getDate({title:"Select end date",defaultDate:i,setDefaultDate:i,minDate:i,maxDate:new Date(o),cb:function(e){return t.target.innerHTML="",null==e?void(null!=t.cb&&t.cb()):(d=s.getTime({title:"Select end hour",hour:c,cb:function(i){var r,s;return t.target.innerHTML="",null==i?void(null!=t.cb&&t.cb()):(s=e.getTime()-6e4*e.getTimezoneOffset(),s+=6e4*h,s+=36e5*i,s>o&&(s=o),s<g?void(null!=t.cb&&t.cb()):(r=n.getEmail({cb:function(e){return t.target.innerHTML="",null==e?void(null!=t.cb&&t.cb()):null!=t.cb?t.cb({start:g,end:s,speed:a,email:e}):void 0}}),null!=r?(t.target.innerHTML="",t.target.appendChild(r)):void 0))}}),d&&(t.target.innerHTML="",null!=d)?t.target.appendChild(d):void 0)}}),null!=e?(t.target.innerHTML="",t.target.appendChild(e)):void 0)}}),null!=f?(t.target.innerHTML="",t.target.appendChild(f)):void 0)}}),null!=d?(t.target.innerHTML="",t.target.appendChild(d)):void 0)}})))return t.target.innerHTML="",t.target.appendChild(e)},u=function(t){return i(22)(function(e){return r=e,t(null,e)})},h=function(t){return i(23)(function(e){return s=e,t(null,e)})},c=function(t){return i(24)(function(e){return a=e,t(null,e)})},d=function(t){return i(50)(function(e){return n=e,t(null,e)})},t.exports=function(t){var e;return e={},r||(e.DatePicker=u),s||(e.TimePicker=h),a||(e.SpeedPicker=c),n||(e.EmailDialog=d),t.getInterval&&(e.interval=t.getInterval),0===Object.keys(e).length?l(t):o.parallel(e,function(e,i){return i.interval&&(t.from=i.interval.from,t.to=i.interval.to,null!=i.interval.intervals&&(t.intervals=i.interval.intervals)),l(t)})}},function(t,e,i){t.exports=function(t){i.e(3).then(function(e){t(i(98))}.bind(null,i)).catch(i.oe)}},function(t,e,i){var r,n,a,s,o,l,u,d,c,h=function(t,e){return function(){return t.apply(e,arguments)}};s=i(1),d=i(0),c=i(19),o=i(52),r=i(53),n=i(55),u=/^([^\?]*\.js)\??(.*)?$/,l=i(5),a=function(){function t(t){var e,i;this.player=t,this.snapshotClose=h(this.snapshotClose,this),this.snapshotShow=h(this.snapshotShow,this),this.showInactiveTimeOut=h(this.showInactiveTimeOut,this),this.showTime=h(this.showTime,this),this.warningShow=h(this.warningShow,this),s.mixin(this),this.target=d.getTarget(this.player.settings.target),null==(null!=(e=this.player.settings.video.intro)?e.url:void 0)&&null==(null!=(i=this.player.settings.video.intro)?i.vast:void 0)||(this.ad=new r(this.player))}return t.prototype.set=function(t){var e,r,a,s,l,u,d,h,f;return null!=this.current&&this.current.destroy(),e=i(56)("./"+t),this.current=new e(this.player),this.player.settings.video.autoplay||(this.elements.clicktoplayImage.src=this.player.manager.getPreviewUrl()),this.setEnd(this.player.settings.video.end),null!=this.customButtons&&this.customButtons.clear(),this.customButtons=new n(this.elements.customButtonsArea,this.elements.customButtons,this.player),this.overlayer=new o(this.elements.overlayer,this.player),this.overlayer.clear(),this.overlayer.add(this.player.settings.video.overlays.customs),c(this.player),this.target.innerHTML="",null!=this.target.attachShadow?(f=this.target.attachShadow({mode:"open"}),f.appendChild(this.element)):(u=document.createElement("iframe"),this.target.appendChild(u),u.src="about:blank",u.setAttribute("frameborder","0"),u.setAttribute("scrolling","no"),u.setAttribute("allowfullscreen","allowfullscreen"),u.style.width="100%",u.style.overflow="hidden",u.style.border="0",a=u.contentWindow||(null!=(h=u.contentDocument)?h.document:void 0)||u.contentDocument,l=document.createElement("html"),s=document.createElement("head"),l.appendChild(s),r=document.createElement("body"),l.appendChild(r),r.style.overflow="hidden",r.style.width="100%",r.style.height="100%",r.style.margin="0",r.style.padding="0",r.appendChild(this.element),null!=a?(a.document.open(),a.document.appendChild(l),a.document.close(),d=Math.floor((this.element.offsetWidth-2)/this.player.settings.video.aspectRatio+28),u.style.height=d+"px",window.addEventListener("resize",function(t){return function(){return d=Math.floor((t.element.offsetWidth-2)/t.player.settings.video.aspectRatio+28),u.style.height=d+"px"}}(this))):(this.target.innerHTML="",this.target.appendChild(l))),this.current.bind()},t.prototype.setEnd=function(t){var e,i,r,n,a,s,o,d,c;if(null!=(r=u.exec(t.image))){if(this.elements.end.innerHTML="",a={},null!=r[2])for(s=r[2].split("&"),e=0,i=s.length;e<i;e++)n=s[e],n=n.split("="),n.length>1&&(a[n[0]]=n[1]);return c=new l(this.player,r[1],a),this.player.video.bind("ended",function(t){return function(e){var i;return null!=(null!=(i=t.player.video.state)?i.disable:void 0)&&t.player.video.state.disable(),c.started=!1,c.start()}}(this)),this.elements.end.appendChild(c.element),c.element.style.position="absolute",window.addEventListener("resize",function(t){return function(){return c.resize(t.elements.end.parentNode.offsetWidth,t.elements.end.parentNode.offsetHeight)}}(this))}if(this.elements.end.style.backgroundImage=null!=t.image?"url('"+t.image+"')":"none",null!=t.link?(null!=this._onEndClick&&this.elements.endClicker.removeListener("click",this._onEndClick),this._onEndClick=function(e){return window.open(t.link,"_blank")},this.elements.endClicker.addEventListener("click",this._onEndClick),this.elements.endClicker.style.cursor="pointer"):(null!=this._onEndClick&&this.elements.endClicker.removeListener("click",this._onEndClick),this.elements.endClicker.style.cursor="auto"),null!=(null!=(o=t.reconnect)?o.x:void 0)&&null!=(null!=(d=t.reconnect)?d.y:void 0))return this.elements.reconnectBt.style.top="auto",this.elements.reconnectBt.style.left="auto",this.elements.reconnectBt.style.marginLeft="0",this.elements.reconnectBt.style.marginRight="0",this.elements.reconnectBt.style.marginTop="0",this.elements.reconnectBt.style.marginBottom="0",t.reconnect.x>=0?this.elements.reconnectBt.style.left=t.reconnect.x+"px":this.elements.reconnectBt.style.right=-t.reconnect.x-250+"px",t.reconnect.y>=0?this.elements.reconnectBt.style.top=t.reconnect.y+"px":this.elements.reconnectBt.style.bottom=-t.reconnect.y-62+"px",this.elements.reconnectBt.style.position="absolute"},t.prototype.warningShow=function(t){return this.elements.warningText.innerHTML=t,this.elements.warning.style.display="block"},t.prototype.warningClose=function(){return this.elements.warning.style.display="none"},t.prototype.showTime=function(t){if(null!=this.current.showTime)return this.current.showTime(t)},t.prototype.showInactiveTimeOut=function(t){if(null!=this.current.showInactiveTimeOut)return this.current.showInactiveTimeOut(t)},t.prototype.snapshotShow=function(t){if(null!=this.current.snapshotShow)return this.current.snapshotShow(t)},t.prototype.snapshotClose=function(){if(null!=this.current.snapshotClose)return this.current.snapshotClose()},t}(),t.exports=a},function(t,e,i){var r,n,a,s;s=i(0),n=i(5),a=/^([^\?]*\.js)\??(.*)?$/,r=function(){function t(t,e){this.target=t,this.player=e,this.items=[],window.addEventListener("resize",function(t){return function(){return t._resize()}}(this))}return t.prototype.clear=function(){return this.target.innerHTML="",this.items=[]},t.prototype._resize=function(){var t,e,i,r,n,a,s,o;for(o=this.target.parentNode.offsetWidth,a=this.items,t=0,r=a.length;t<r;t++)if(e=a[t],s=e.resize_at||800,null!=e.img){if(null==e.width)return;e.fit||(n=o/s,n>1&&(n=1),i=e.width*n,e.height,e.x>=0?e.img.style.left=e.x+"px":e.img.style.right=-e.x+"px",e.y>=0?e.img.style.top=e.y+"px":e.img.style.bottom=-e.y+"px",e.img.style.width=i+"px")}else null!=e.vpaid?e.vpaid.resize(this.target.parentNode.offsetWidth,this.target.parentNode.offsetHeight):e.element.style.display=o>s?"block":"none"},t.prototype.update=function(){return this.target.style.visibility=this.player.state.isPaused()||this.player.state.isBuffering()||this.player.state.isPlaying()||this.player.state.isClicktoplay()&&this.hasClicktoplay()?"visible":"hidden",this.items.forEach(function(t){return function(e){return t.player.state.isClicktoplay()?e.element.style.visibility=e.clicktoplay?"visible":"hidden":e.element.style.visibility="visible"}}(this))},t.prototype.hasClicktoplay=function(){return null!=this.items.find(function(t){return!0===t.clicktoplay})},t.prototype.add=function(t){var e;return e=this.target,t.forEach(function(t){return function(i){var r,o,l,u,d,c,h,f,p;if(null!=(d=a.exec(i.url))){if(d[1],h={},null!=i.x&&(h.x=i.x),null!=i.y&&(h.y=i.y),null!=i.opacity&&(h.opacity=i.opacity),null!=i.link&&(h.link=i.link),null!=d[2])for(f=d[2].split("&"),o=0,u=f.length;o<u;o++)c=f[o],c=c.split("="),c.length>1&&(h[c[0]]=c[1]);return p=new n(t.player,d[1],h),p.start(),e.appendChild(p.element),p.element.style.position="absolute",i.clicktoplay&&s.addClass(p.element,"hdrelay-default-onclicktoplay"),i.element=p.element,i.vpaid=p,t.items.push(i)}return l=document.createElement("img"),l.draggable=!1,r=function(n){return i.width=l.width,i.height=l.height,i.fit&&(l.style.width="100%"),t._resize(),null!=i.link&&(l.addEventListener("click",function(t){return window.open(i.link,"_blank")}),l.style.cursor="pointer"),i.clicktoplay&&s.addClass(l,"hdrelay-default-onclicktoplay"),e.appendChild(l),l.removeEventListener("load",r)},l.addEventListener("load",r),l.src=i.url,l.style.opacity=i.opacity/100,i.img=l,i.element=l,t.items.push(i)}}(this)),this._resize()},t}(),t.exports=r},function(t,e,i){var r,n,a,s,o=function(t,e){return function(){return t.apply(e,arguments)}};a=i(54),s=i(0),n=i(1),r=function(){function t(t){this.player=t,this.destroy=o(this.destroy,this),this._onContentResumeRequested=o(this._onContentResumeRequested,this),this._onContentPauseRequested=o(this._onContentPauseRequested,this),this._onAdError=o(this._onAdError,this),this._onAdEvent=o(this._onAdEvent,this),this._onAdsManagerLoaded=o(this._onAdsManagerLoaded,this),this._requestAds=o(this._requestAds,this),this._createAdDisplayContainer=o(this._createAdDisplayContainer,this),this._onStartVideo=o(this._onStartVideo,this),n.mixin(this),this.player.bind("started",this._onStartVideo),a("https://imasdk.googleapis.com/js/sdkloader/ima3.js",function(t){return function(){if(t.load=!0,t.videoStarted)return t._requestAds()}}(this))}return t.prototype._onStartVideo=function(t){return this.load?this._requestAds():this.videoStarted=!0},t.prototype._createAdDisplayContainer=function(){return this.player.interface.elements.ad.innerHTML="",this._adDisplayContainer=new google.ima.AdDisplayContainer(this.player.interface.elements.ad,this.player.video.element)},t.prototype._requestAds=function(){var t;return this._createAdDisplayContainer(),this._adDisplayContainer.initialize(),this._adsLoader=new google.ima.AdsLoader(this._adDisplayContainer),this._adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this._onAdsManagerLoaded,!1),this._adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this._onAdError,!1),this._adsRequest=new google.ima.AdsRequest,t=this.player.settings.video.intro.vast||"//manage.hdrelay.com/vast/"+this.player.settings.id,this._adsRequest.adTagUrl=t,this._adsRequest.linearAdSlotWidth=this.player.interface.elements.videoHolder.offsetWidth||640,this._adsRequest.linearAdSlotHeight=this.player.interface.elements.videoHolder.offsetHeight||400,this._adsRequest.nonLinearAdSlotWidth=640,this._adsRequest.nonLinearAdSlotHeight=150,this._adsLoader.requestAds(this._adsRequest)},t.prototype._onAdsManagerLoaded=function(t){var e,i;this._adsRenderingSettings=new google.ima.AdsRenderingSettings,this._adsRenderingSettings.restoreCustomPlaybackStateOnAdBreakComplete=!0,this._adsManager=t.getAdsManager(this.player.video.element,this._adsRenderingSettings),this._adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this._onAdError),this._adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this._onContentPauseRequested),this._adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this._onContentResumeRequested),this._adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,this._onAdEvent),this._adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,this._onAdEvent),this._adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,this._onAdEvent),this._adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,this._onAdEvent);try{return i=this.player.video.element.parentElement,this._adsManager.init(i.offsetWidth,i.offsetHeight,google.ima.ViewMode.NORMAL),window.addEventListener("resize",function(t){return function(){return t._adsManager.resize(i.offsetWidth,i.offsetHeight,google.ima.ViewMode.NORMAL)}}(this)),this._adsManager.start()}catch(t){return e=t,console.error("_onAdsManagerLoaded error",e),this.player.video.element.play(),this.player.interface.elements.ad.style.visibility="hidden",this.player.interface.elements.ad.innerHTML=""}},t.prototype._onAdEvent=function(t){var e;switch(this._ad=t.getAd(),t.type){case google.ima.AdEvent.Type.LOADED:if(this._ad.getTraffickingParametersString())return e=s.parametersToJSON(this._ad.getTraffickingParametersString()),null!=e.end_url&&this.player.interface.setEnd({image:e.end_url,link:e.end_link}),this.player.interface.overlayer.add(s.getOverlayers(e));break;case google.ima.AdEvent.Type.STARTED:return this._ad.isLinear()?(this.trigger("start"),this._intervalTimer=setInterval(function(t){return function(){return t.remainingTime=t._adsManager.getRemainingTime()}}(this),300)):this.player.video.element.play();case google.ima.AdEvent.Type.COMPLETE:if(this._ad.isLinear())return this.trigger("end"),clearInterval(this._intervalTimer);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:return this.player.interface.elements.ad.style.visibility="hidden",this.player.interface.elements.ad.innerHTML="",this.player.video.element.play()}},t.prototype._onAdError=function(t){return console.error(t.getError()),clearInterval(this._intervalTimer),null!=this._adsManager&&this._adsManager.destroy(),this.player.video.element.play(),this.player.interface.elements.ad.style.visibility="hidden",this.player.interface.elements.ad.innerHTML=""},t.prototype._onContentPauseRequested=function(){return this.player.video.element.pause(),this.player.interface.elements.ad.style.visibility="visible"},t.prototype._onContentResumeRequested=function(){if(this.player.video.element.play(),this.player.interface.elements.ad.style.visibility="hidden",this.player.interface.elements.ad.innerHTML="",this._ad.isLinear())return this.trigger("end"),clearInterval(this._intervalTimer)},t.prototype.destroy=function(){return this.player.unbind("started",this._onStartVideo)},t}(),t.exports=r},function(t,e,i){var r,n;/*!
  * $script.js JS loader & dependency manager
  * https://github.com/ded/script.js
  * (c) Dustin Diaz 2014 | License MIT
  */
!function(a,s){void 0!==t&&t.exports?t.exports=s():(r=s,void 0!==(n="function"==typeof r?r.call(e,i,e,t):r)&&(t.exports=n))}(0,function(){function t(t,e){for(var i=0,r=t.length;i<r;++i)if(!e(t[i]))return l;return 1}function e(e,i){t(e,function(t){return!i(t)})}function i(a,s,o){function l(t){return t.call?t():h[t]}function d(){if(!--m){h[v]=1,y&&y();for(var i in p)t(i.split("|"),l)&&!e(p[i],l)&&(p[i]=[])}}a=a[u]?a:[a];var c=s&&s.call,y=c?s:o,v=c?a.join(""):s,m=a.length;return setTimeout(function(){e(a,function t(e,i){return null===e?d():(i||/^https?:\/\//.test(e)||!n||(e=-1===e.indexOf(".js")?n+e+".js":n+e),g[e]?(v&&(f[v]=1),2==g[e]?d():setTimeout(function(){t(e,!0)},0)):(g[e]=1,v&&(f[v]=1),void r(e,d)))})},0),i}function r(t,e){var i,r=s.createElement("script");r.onload=r.onerror=r[c]=function(){r[d]&&!/^c|loade/.test(r[d])||i||(r.onload=r[c]=null,i=1,g[t]=2,e())},r.async=1,r.src=a?t+(-1===t.indexOf("?")?"?":"&")+a:t,o.insertBefore(r,o.lastChild)}var n,a,s=document,o=s.getElementsByTagName("head")[0],l=!1,u="push",d="readyState",c="onreadystatechange",h={},f={},p={},g={};return i.get=r,i.order=function(t,e,r){!function n(a){a=t.shift(),t.length?i(a,n):i(a,e,r)}()},i.path=function(t){n=t},i.urlArgs=function(t){a=t},i.ready=function(r,n,a){r=r[u]?r:[r];var s=[];return!e(r,function(t){h[t]||s[u](t)})&&t(r,function(t){return h[t]})?n():function(t){p[t]=p[t]||[],p[t][u](n),a&&a(s)}(r.join("|")),i},i.done=function(t){i([null],t)},i})},function(t,e,i){var r,n,a,s;n=i(5),s=i(0),a=/^([^\?]*\.js)\??(.*)?$/,r=function(){function t(t,e,i){var r,n,a,o,l,u;if(this.viewArea=t,this.buttonArea=e,this.player=i,this.buttons=[],window.addEventListener("resize",function(t){return function(){return t._resize()}}(this)),n=this.player.settings.video.buttons.customs,Array.isArray(n)||(n=[n]),this.lastAutoHides={},s.isSafari())for(a=0,l=n.length;a<l;a++)r=n[a],r.preload=0;for(o=0,u=n.length;o<u;o++)r=n[o],this._add(r)}return t.prototype.hideFull=function(){var t,e,i,r,n;for(r=this.buttons,n=[],e=0,i=r.length;e<i;e++)t=r[e],"full"===t.layer?n.push(t.holder.style.visibility="hidden"):n.push(void 0);return n},t.prototype._resize=function(){var t,e,i,r,n;for(r=this.buttons,n=[],e=0,i=r.length;e<i;e++)t=r[e],n.push(t.vpaid.resize(this.viewArea.parentNode.offsetWidth,this.viewArea.parentNode.offsetHeight));return n},t.prototype._add=function(t){var e,i,r,s,o,l,u,d,c,h,f,p,g;if(null!=t&&(d=a.exec(t.url),e={params:t},null!=d)){if(d[1],h={},null!=d[2])for(p=d[2].split("&"),s=0,l=p.length;s<l;s++)c=p[s],c=c.split("="),c.length>1&&(h[c[0]]=c[1]);g=new n(this.player,d[1],h);try{f=parseInt(t.preload)}catch(t){f=1}return 1===f&&g.prepare(),2===f&&g.load(),r=document.createElement("div"),r.appendChild(g.element),this.viewArea.appendChild(r),e.layer=t.layer||"under1",r.className="custom-"+e.layer,e.element=g.element,e.holder=r,e.vpaid=g,o=document.createElement("img"),u=new Image,u.addEventListener("load",function(t){return o.style.width=t.target.width/t.target.height*21+"px"}),u.src=t.img,o.src=t.img,i=document.createElement("div"),i.className="hdrelay-default-button hdrelay-icon",null!=t.tooltip&&(i.dataset.tooltip=t.tooltip),i.appendChild(o),this.buttonArea.appendChild(i),e.img=o,t.open?(g.start(),r.style.visibility="visible"):r.style.visibility="hidden",o.addEventListener("click",function(t){return function(){var i,r,n,a,s,o,l,u;if("full"!==e.layer){for(r=!1,l=t.buttons,n=0,s=l.length;n<s;n++)i=l[n],"full"===i.layer&&"visible"===i.holder.style.visibility&&(r=!0,i.holder.style.visibility="hidden");if("visible"===e.holder.style.visibility&&r)return}if("hidden"===e.holder.style.visibility){for(delete t.lastAutoHides[e.layer],u=t.buttons,a=0,o=u.length;a<o;a++)i=u[a],i.layer===e.layer&&"visible"===i.holder.style.visibility&&(i.holder.style.visibility="hidden","full"!==e.layer&&(t.lastAutoHides[e.layer]=i));return e.vpaid.start(),e.holder.style.visibility="visible"}return t.lastAutoHides[e.layer]&&(t.lastAutoHides[e.layer].holder.style.visibility="visible"),e.holder.style.visibility="hidden"}}(this)),this.buttons.push(e)}},t}(),t.exports=r},function(t,e,i){function r(t){return i(n(t))}function n(t){var e=a[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var a={"./_reset.scss":57,"./control-button":6,"./control-button.coffee":6,"./default":25,"./default-controller":7,"./default-controller.coffee":7,"./default-icons":13,"./default-icons.coffee":13,"./default.coffee":25,"./default.jade":28,"./default.scss":26,"./preset-preview":10,"./preset-preview.coffee":10,"./presets-box":9,"./presets-box.coffee":9,"./scrollbar":8,"./scrollbar.coffee":8,"./vote-box":11,"./vote-box.coffee":11,"./vote-item":12,"./vote-item.coffee":12};r.keys=function(){return Object.keys(a)},r.resolve=n,t.exports=r,r.id=56},function(t,e,i){e=t.exports=i(14)(),e.push([t.i,"div.hdrelay-hdrelay-default{box-sizing:content-box!important}div.hdrelay-hdrelay-default ul{line-height:normal;font-size:inherit}",""])},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIwLjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHdpZHRoPSI1MDBweCIgaGVpZ2h0PSIxMjVweCIgdmlld0JveD0iMCAwIDUwMCAxMjUiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUwMCAxMjU7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS5zdDB7ZmlsbDojRkZGRkZGO30KCS5zdDF7ZmlsbDojNjY2NjY2O30KCS5zdDJ7ZmlsbDojRkVGRUZFO30KPC9zdHlsZT4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTQ4MC44LDQ2LjhjLTQuOC00LjgtMTAuNS03LjEtMTcuMy03LjFINjMuM2MtNi43LDAtMTIuNSwyLjQtMTcuNCw3LjFjLTQuOCw0LjgtNy4xLDEwLjYtNy4xLDE3LjQKCWMwLDYuNywyLjQsMTIuNSw3LjEsMTcuM2M0LjgsNC44LDEwLjYsNy4yLDE3LjQsNy4yaDQwMC4yYzYuNywwLDEyLjUtMi40LDE3LjMtNy4yYzQuOC00LjgsNy4yLTEwLjUsNy4yLTE3LjMKCUM0ODgsNTcuNCw0ODUuNiw1MS42LDQ4MC44LDQ2LjggTTM2NS41LDU1LjloLTYuOXYxOWgtNS4xdi0xOWgtN3YtNC4zaDE5LjFWNTUuOSBNMzgxLjMsNTEuNmg1LjFsOS43LDE1LjZoMC4xVjUxLjZoNC44djIzLjNoLTUuMQoJbC05LjctMTUuNmgtMC4xdjE1LjZoLTQuOFY1MS42IE00MDguMyw1Ni40YzAuNC0wLjcsMC45LTEuMywxLjMtMS44YzAuNS0wLjUsMS0xLjEsMS42LTEuNWMwLjYtMC40LDEuMy0wLjgsMS45LTEuMQoJYzEuNC0wLjYsMy4xLTAuOSw0LjktMC45YzEuOCwwLDMuNCwwLjMsNC44LDAuOWMwLjcsMC4zLDEuMywwLjcsMS45LDEuMWMwLjYsMC41LDEuMiwxLDEuNiwxLjVjMC41LDAuNSwwLjksMS4yLDEuMywxLjgKCWMwLjMsMC42LDAuNiwxLjMsMC45LDJjMC41LDEuNSwwLjgsMy4xLDAuOCw0LjljMCwxLjctMC4zLDMuMy0wLjgsNC43Yy0wLjUsMS41LTEuMywyLjgtMi4yLDMuOWMtMC41LDAuNS0xLDEtMS42LDEuNAoJYy0wLjYsMC40LTEuMywwLjgtMS45LDEuMWMtMS40LDAuNi0zLDAuOS00LjgsMC45Yy0xLjgsMC0zLjUtMC4zLTQuOS0wLjljLTAuNy0wLjMtMS4zLTAuNy0xLjktMS4xYy0wLjYtMC40LTEuMi0wLjktMS42LTEuNAoJYy0xLTEuMS0xLjctMi40LTIuMi0zLjljLTAuNS0xLjQtMC44LTMtMC44LTQuN2MwLTEuOCwwLjMtMy40LDAuOC00LjlDNDA3LjYsNTcuNyw0MDcuOSw1Nyw0MDguMyw1Ni40IE00NTguNSw1MS42aDVsLTYuMiwyMy4zCgloLTUuMWwtNC0xNS44aC0wLjFsLTMuOSwxNS44SDQzOWwtNi4xLTIzLjNoNS4xbDMuNywxNS44aDAuMWw0LjEtMTUuOGg0LjhsNCwxNkw0NTguNSw1MS42IE0xNTkuMyw1MmMwLjgsMC4zLDEuNSwwLjgsMi4xLDEuNAoJYzAuNiwwLjYsMS4xLDEuMywxLjQsMmMwLjMsMC43LDAuNCwxLjYsMC40LDIuNmMwLDAuNy0wLjEsMS4zLTAuMiwxLjhjLTAuMSwwLjYtMC4zLDEuMi0wLjYsMS42Yy0wLjYsMS0xLjYsMS44LTIuOSwyLjNWNjQKCWMwLjYsMC4xLDEuMSwwLjQsMS41LDAuN2MwLjUsMC40LDAuOCwwLjksMSwxLjNjMC4zLDAuNSwwLjUsMSwwLjYsMS42bDAuNCw0LjZsMC4zLDEuNGMwLjEsMC41LDAuMiwwLjksMC41LDEuMmgtNS4xCgljLTAuMy0wLjctMC40LTEuNi0wLjUtMi43bC0wLjMtM2MtMC4yLTEuMi0wLjYtMi4xLTEuMS0yLjdjLTAuNi0wLjUtMS41LTAuOC0yLjgtMC44SDE0OXY5LjFoLTUuMVY1MS42aDEyLjYKCUMxNTcuNSw1MS42LDE1OC41LDUxLjcsMTU5LjMsNTIgTTE5Mi41LDU4LjRjMC4zLTAuNywwLjYtMS40LDAuOS0yYzAuNC0wLjcsMC45LTEuMywxLjMtMS44YzAuNS0wLjUsMS0xLjEsMS42LTEuNQoJYzAuNi0wLjQsMS4zLTAuOCwxLjktMS4xYzEuNC0wLjYsMy4xLTAuOSw0LjktMC45YzEuMiwwLDIuNCwwLjIsMy42LDAuNmMxLjIsMC4zLDIuMiwwLjksMy4xLDEuNWMxLDAuNywxLjcsMS42LDIuMiwyLjcKCWMwLjYsMSwxLDIuMiwxLjEsMy42aC01Yy0wLjEtMC41LTAuMi0xLjEtMC41LTEuNWMtMC4zLTAuNS0wLjctMS0xLjEtMS4zYy0wLjUtMC40LTEtMC43LTEuNi0wLjljLTAuNS0wLjItMS4xLTAuMy0xLjctMC4zCgljLTEuMiwwLTIuMSwwLjItMywwLjdjLTAuOCwwLjQtMS41LDEtMiwxLjhjLTAuNSwwLjctMC44LDEuNS0xLDIuNmMtMC4zLDEtMC40LDEuOS0wLjQsM2MwLDEsMC4xLDEuOSwwLjQsMi45CgljMC4yLDAuOSwwLjUsMS43LDEsMi41YzAuNSwwLjcsMS4yLDEuNCwyLDEuOGMwLjgsMC40LDEuOCwwLjYsMywwLjZjMC43LDAsMS40LTAuMSwyLTAuM2MwLjYtMC4zLDEuMS0wLjYsMS41LTEuMQoJYzAuOS0xLDEuNC0yLjIsMS42LTMuOGg1Yy0wLjMsMS44LTAuNywzLjItMSw0Yy0wLjUsMS4yLTEuMywyLjEtMi4xLDNjLTAuOSwwLjgtMS45LDEuNS0zLjIsMS45Yy0xLjIsMC40LTIuNSwwLjYtMy45LDAuNgoJYy0xLjgsMC0zLjUtMC4zLTQuOS0wLjljLTAuNy0wLjMtMS4zLTAuNy0xLjktMS4xYy0wLjYtMC40LTEuMi0wLjktMS42LTEuNGMtMS0xLjEtMS43LTIuNC0yLjItMy45Yy0wLjUtMS40LTAuOC0zLTAuOC00LjcKCUMxOTEuNiw2MS42LDE5MS45LDU5LjksMTkyLjUsNTguNCBNMTg3LDUxLjZ2NC4zaC0xMi40djVoMTEuM3Y0aC0xMS4zdjUuN2gxMi42djQuM2gtMTcuN1Y1MS42SDE4NyBNMjIwLjksNTQuNgoJYzAuNS0wLjUsMS0xLjEsMS42LTEuNWMwLjYtMC40LDEuMy0wLjgsMS45LTEuMWMxLjQtMC42LDMuMS0wLjksNC45LTAuOWMxLjgsMCwzLjQsMC4zLDQuOCwwLjljMC43LDAuMywxLjMsMC43LDEuOSwxLjEKCWMwLjYsMC41LDEuMiwxLDEuNiwxLjVjMC41LDAuNSwwLjksMS4yLDEuMywxLjhjMC4zLDAuNiwwLjYsMS4zLDAuOSwyYzAuNSwxLjUsMC44LDMuMSwwLjgsNC45YzAsMS43LTAuMywzLjMtMC44LDQuNwoJYy0wLjUsMS41LTEuMywyLjgtMi4yLDMuOWMtMC41LDAuNS0xLDEtMS42LDEuNGMtMC42LDAuNC0xLjMsMC44LTEuOSwxLjFjLTEuNCwwLjYtMywwLjktNC44LDAuOWMtMS44LDAtMy41LTAuMy00LjktMC45CgljLTAuNy0wLjMtMS4zLTAuNy0xLjktMS4xYy0wLjYtMC40LTEuMi0wLjktMS42LTEuNGMtMS0xLjEtMS43LTIuNC0yLjItMy45Yy0wLjUtMS40LTAuOC0zLTAuOC00LjdjMC0xLjgsMC4zLTMuNCwwLjgtNC45CgljMC4zLTAuNywwLjYtMS40LDAuOS0yQzIyMCw1NS43LDIyMC41LDU1LjEsMjIwLjksNTQuNiBNMjQ2LjQsNTEuNmg1LjFsOS43LDE1LjZoMC4xVjUxLjZoNC44djIzLjNIMjYxbC05LjctMTUuNmgtMC4xdjE1LjZoLTQuOAoJVjUxLjYgTTI4Ny41LDUxLjZoNC44djIzLjNoLTUuMWwtOS43LTE1LjZoLTAuMXYxNS42aC00LjhWNTEuNmg1LjFsOS43LDE1LjZoMC4xVjUxLjYgTTMyNS43LDUzYzAuNi0wLjQsMS4zLTAuOCwxLjktMS4xCgljMS40LTAuNiwzLjEtMC45LDQuOS0wLjljMS4yLDAsMi40LDAuMiwzLjYsMC42YzEuMiwwLjMsMi4yLDAuOSwzLjEsMS41YzEsMC43LDEuNywxLjYsMi4yLDIuN2MwLjYsMSwxLDIuMiwxLjEsMy42aC01CgljLTAuMS0wLjUtMC4yLTEuMS0wLjUtMS41Yy0wLjMtMC41LTAuNy0xLTEuMS0xLjNjLTAuNS0wLjQtMS0wLjctMS42LTAuOWMtMC41LTAuMi0xLjEtMC4zLTEuNy0wLjNjLTEuMiwwLTIuMSwwLjItMywwLjcKCWMtMC44LDAuNC0xLjUsMS0yLDEuOGMtMC41LDAuNy0wLjgsMS41LTEsMi42Yy0wLjMsMS0wLjQsMS45LTAuNCwzYzAsMSwwLjEsMS45LDAuNCwyLjljMC4yLDAuOSwwLjUsMS43LDEsMi41CgljMC41LDAuNywxLjIsMS40LDIsMS44YzAuOCwwLjQsMS44LDAuNiwzLDAuNmMwLjcsMCwxLjQtMC4xLDItMC4zYzAuNi0wLjMsMS4xLTAuNiwxLjUtMS4xYzAuOS0xLDEuNC0yLjIsMS42LTMuOGg1CgljLTAuMywxLjgtMC43LDMuMi0xLDRjLTAuNSwxLjItMS4zLDIuMS0yLjEsM2MtMC45LDAuOC0xLjksMS41LTMuMiwxLjljLTEuMiwwLjQtMi41LDAuNi0zLjksMC42Yy0xLjgsMC0zLjUtMC4zLTQuOS0wLjkKCWMtMC43LTAuMy0xLjMtMC43LTEuOS0xLjFjLTAuNi0wLjQtMS4yLTAuOS0xLjYtMS40Yy0xLTEuMS0xLjctMi40LTIuMi0zLjljLTAuNS0xLjQtMC44LTMtMC44LTQuN2MwLTEuOCwwLjMtMy40LDAuOC00LjkKCWMwLjMtMC43LDAuNi0xLjQsMC45LTJjMC40LTAuNywwLjktMS4zLDEuMy0xLjhDMzI0LjUsNTQsMzI1LjEsNTMuNSwzMjUuNyw1MyBNMzE2LjMsNTEuNnY0LjNoLTEyLjR2NWgxMS4zdjRoLTExLjN2NS43aDEyLjZ2NC4zCgloLTE3LjdWNTEuNkgzMTYuMyBNMjI5LjQsNTUuM2MtMS4yLDAtMi4xLDAuMi0zLDAuN2MtMC44LDAuNC0xLjUsMS0yLDEuOGMtMC41LDAuNy0wLjgsMS41LTEsMi42Yy0wLjMsMS0wLjQsMS45LTAuNCwzCgljMCwxLDAuMSwxLjksMC40LDIuOWMwLjIsMC45LDAuNSwxLjcsMSwyLjVjMC41LDAuNywxLjIsMS40LDIsMS44YzAuOCwwLjQsMS44LDAuNiwzLDAuNmMxLjEsMCwyLTAuMiwyLjktMC42CgljMC44LTAuNSwxLjUtMS4xLDItMS44YzAuNS0wLjcsMC44LTEuNiwxLTIuNWMwLjMtMSwwLjQtMS45LDAuNC0yLjljMC0xLTAuMS0yLTAuNC0zYy0wLjItMS0wLjUtMS44LTEtMi42Yy0wLjUtMC44LTEuMi0xLjQtMi0xLjgKCUMyMzEuNSw1NS41LDIzMC41LDU1LjMsMjI5LjQsNTUuMyBNMTU2LjIsNTUuOGMtMC41LTAuMS0xLTAuMi0xLjYtMC4ySDE0OXY2LjVoNS42YzEuMiwwLDIuMS0wLjMsMi43LTAuOGMwLjYtMC41LDAuOS0xLjMsMC45LTIuNgoJYzAtMS4xLTAuMy0xLjktMC45LTIuNUMxNTcsNTYsMTU2LjYsNTUuOSwxNTYuMiw1NS44IE00MTguMSw1NS4zYy0xLjIsMC0yLjEsMC4yLTMsMC43Yy0wLjgsMC40LTEuNSwxLTIsMS44CgljLTAuNSwwLjctMC44LDEuNS0xLDIuNmMtMC4zLDEtMC40LDEuOS0wLjQsM2MwLDEsMC4xLDEuOSwwLjQsMi45YzAuMiwwLjksMC41LDEuNywxLDIuNWMwLjUsMC43LDEuMiwxLjQsMiwxLjgKCWMwLjgsMC40LDEuOCwwLjYsMywwLjZjMS4xLDAsMi0wLjIsMi45LTAuNmMwLjgtMC41LDEuNS0xLjEsMi0xLjhjMC41LTAuNywwLjgtMS42LDEtMi41YzAuMy0xLDAuNC0xLjksMC40LTIuOWMwLTEtMC4xLTItMC40LTMKCWMtMC4yLTEtMC41LTEuOC0xLTIuNmMtMC41LTAuOC0xLjItMS40LTItMS44QzQyMC4xLDU1LjUsNDE5LjIsNTUuMyw0MTguMSw1NS4zeiIvPgo8cGF0aCBkPSJNMzE2LjMsNTUuOXYtNC4zaC0xNy41djIzLjNoMTcuN3YtNC4zaC0xMi42di01LjdoMTEuM3YtNGgtMTEuM3YtNUgzMTYuMyBNMzI3LjYsNTEuOWMtMC43LDAuMy0xLjMsMC43LTEuOSwxLjEKCWMtMC42LDAuNS0xLjIsMS0xLjYsMS41Yy0wLjUsMC41LTAuOSwxLjItMS4zLDEuOGMtMC4zLDAuNi0wLjYsMS4zLTAuOSwyYy0wLjUsMS41LTAuOCwzLjEtMC44LDQuOWMwLDEuNywwLjMsMy4zLDAuOCw0LjcKCWMwLjUsMS41LDEuMywyLjgsMi4yLDMuOWMwLjUsMC41LDEsMSwxLjYsMS40YzAuNiwwLjQsMS4zLDAuOCwxLjksMS4xYzEuNCwwLjYsMy4xLDAuOSw0LjksMC45YzEuNCwwLDIuNy0wLjIsMy45LTAuNgoJYzEuMi0wLjUsMi4zLTEuMSwzLjItMS45YzAuOS0wLjgsMS42LTEuOCwyLjEtM2MwLjMtMC44LDAuNy0yLjEsMS00aC01Yy0wLjIsMS42LTAuNywyLjgtMS42LDMuOGMtMC40LDAuNS0wLjksMC45LTEuNSwxLjEKCWMtMC42LDAuMi0xLjMsMC4zLTIsMC4zYy0xLjIsMC0yLjEtMC4yLTMtMC42Yy0wLjgtMC41LTEuNS0xLjEtMi0xLjhjLTAuNS0wLjctMC44LTEuNi0xLTIuNWMtMC4zLTEtMC40LTEuOS0wLjQtMi45CgljMC0xLDAuMS0yLDAuNC0zYzAuMi0xLDAuNS0xLjksMS0yLjZjMC41LTAuOCwxLjItMS40LDItMS44YzAuOC0wLjUsMS44LTAuNywzLTAuN2MwLjYsMCwxLjIsMC4xLDEuNywwLjNjMC42LDAuMiwxLjIsMC41LDEuNiwwLjkKCWMwLjQsMC4zLDAuOCwwLjgsMS4xLDEuM2MwLjMsMC41LDAuNCwxLDAuNSwxLjVoNWMtMC4xLTEuNC0wLjUtMi42LTEuMS0zLjZjLTAuNS0xLTEuMy0xLjktMi4yLTIuN2MtMC45LTAuNy0xLjktMS4yLTMuMS0xLjUKCWMtMS4yLTAuNC0yLjMtMC42LTMuNi0wLjZDMzMwLjcsNTEsMzI5LjEsNTEuMywzMjcuNiw1MS45IE0yOTIuMyw1MS42aC00Ljh2MTUuNmgtMC4xbC05LjctMTUuNmgtNS4xdjIzLjNoNC44VjU5LjNoMC4xbDkuNywxNS42CgloNS4xVjUxLjYgTTI1MS41LDUxLjZoLTUuMXYyMy4zaDQuOFY1OS4zaDAuMWw5LjcsMTUuNmg1LjFWNTEuNmgtNC44djE1LjZoLTAuMUwyNTEuNSw1MS42IE0yMjIuNiw1My4xYy0wLjYsMC41LTEuMiwxLTEuNiwxLjUKCWMtMC41LDAuNS0wLjksMS4yLTEuMywxLjhjLTAuMywwLjYtMC42LDEuMy0wLjksMmMtMC41LDEuNS0wLjgsMy4xLTAuOCw0LjljMCwxLjcsMC4zLDMuMywwLjgsNC43YzAuNSwxLjUsMS4zLDIuOCwyLjIsMy45CgljMC41LDAuNSwxLDEsMS42LDEuNGMwLjYsMC40LDEuMywwLjgsMS45LDEuMWMxLjQsMC42LDMuMSwwLjksNC45LDAuOWMxLjgsMCwzLjQtMC4zLDQuOC0wLjljMC43LTAuMywxLjMtMC43LDEuOS0xLjEKCWMwLjYtMC40LDEuMi0wLjksMS42LTEuNGMxLTEuMSwxLjctMi40LDIuMi0zLjljMC41LTEuNCwwLjgtMywwLjgtNC43YzAtMS44LTAuMy0zLjQtMC44LTQuOWMtMC4zLTAuNy0wLjYtMS40LTAuOS0yCgljLTAuNC0wLjctMC45LTEuMy0xLjMtMS44Yy0wLjUtMC41LTEtMS4xLTEuNi0xLjVjLTAuNi0wLjQtMS4zLTAuOC0xLjktMS4xYy0xLjQtMC42LTMtMC45LTQuOC0wLjljLTEuOCwwLTMuNSwwLjMtNC45LDAuOQoJQzIyMy44LDUyLjMsMjIzLjIsNTIuNiwyMjIuNiw1My4xIE0yMjYuNSw1NmMwLjgtMC41LDEuOC0wLjcsMy0wLjdjMS4xLDAsMiwwLjIsMi45LDAuN2MwLjgsMC40LDEuNSwxLDIsMS44YzAuNSwwLjcsMC44LDEuNiwxLDIuNgoJYzAuMywxLDAuNCwxLjksMC40LDNjMCwxLTAuMSwxLjktMC40LDIuOWMtMC4yLDAuOS0wLjUsMS43LTEsMi41Yy0wLjUsMC43LTEuMiwxLjQtMiwxLjhjLTAuOCwwLjQtMS44LDAuNi0yLjksMC42CgljLTEuMiwwLTIuMS0wLjItMy0wLjZjLTAuOC0wLjUtMS41LTEuMS0yLTEuOGMtMC41LTAuNy0wLjgtMS42LTEtMi41Yy0wLjMtMS0wLjQtMS45LTAuNC0yLjljMC0xLDAuMS0yLDAuNC0zYzAuMi0xLDAuNS0xLjksMS0yLjYKCUMyMjUsNTcsMjI1LjYsNTYuNCwyMjYuNSw1NiBNMTg3LDU1Ljl2LTQuM2gtMTcuNXYyMy4zaDE3Ljd2LTQuM2gtMTIuNnYtNS43aDExLjN2LTRoLTExLjN2LTVIMTg3IE0xOTMuNCw1Ni40CgljLTAuMywwLjYtMC42LDEuMy0wLjksMmMtMC41LDEuNS0wLjgsMy4xLTAuOCw0LjljMCwxLjcsMC4zLDMuMywwLjgsNC43YzAuNSwxLjUsMS4zLDIuOCwyLjIsMy45YzAuNSwwLjUsMSwxLDEuNiwxLjQKCWMwLjYsMC40LDEuMywwLjgsMS45LDEuMWMxLjQsMC42LDMuMSwwLjksNC45LDAuOWMxLjQsMCwyLjctMC4yLDMuOS0wLjZjMS4yLTAuNSwyLjMtMS4xLDMuMi0xLjljMC45LTAuOCwxLjYtMS44LDIuMS0zCgljMC4zLTAuOCwwLjctMi4xLDEtNGgtNWMtMC4yLDEuNi0wLjcsMi44LTEuNiwzLjhjLTAuNCwwLjUtMC45LDAuOS0xLjUsMS4xYy0wLjYsMC4yLTEuMywwLjMtMiwwLjNjLTEuMiwwLTIuMS0wLjItMy0wLjYKCWMtMC44LTAuNS0xLjUtMS4xLTItMS44Yy0wLjUtMC43LTAuOC0xLjYtMS0yLjVjLTAuMy0xLTAuNC0xLjktMC40LTIuOWMwLTEsMC4xLTIsMC40LTNjMC4yLTEsMC41LTEuOSwxLTIuNmMwLjUtMC44LDEuMi0xLjQsMi0xLjgKCWMwLjgtMC41LDEuOC0wLjcsMy0wLjdjMC42LDAsMS4yLDAuMSwxLjcsMC4zYzAuNiwwLjIsMS4yLDAuNSwxLjYsMC45YzAuNCwwLjMsMC44LDAuOCwxLjEsMS4zYzAuMywwLjUsMC40LDEsMC41LDEuNWg1CgljLTAuMS0xLjQtMC41LTIuNi0xLjEtMy42Yy0wLjUtMS0xLjMtMS45LTIuMi0yLjdjLTAuOS0wLjctMS45LTEuMi0zLjEtMS41Yy0xLjItMC40LTIuMy0wLjYtMy42LTAuNmMtMS44LDAtMy41LDAuMy00LjksMC45CgljLTAuNywwLjMtMS4zLDAuNy0xLjksMS4xYy0wLjYsMC41LTEuMiwxLTEuNiwxLjVDMTk0LjIsNTUuMSwxOTMuOCw1NS43LDE5My40LDU2LjQgTTE2MS40LDUzLjVjLTAuNi0wLjYtMS4zLTEuMS0yLjEtMS40CgljLTAuOC0wLjMtMS44LTAuNC0yLjktMC40aC0xMi42djIzLjNoNS4xdi05LjFoNS4yYzEuMiwwLDIuMSwwLjMsMi44LDAuOGMwLjUsMC41LDAuOSwxLjQsMS4xLDIuN2wwLjMsM2MwLjEsMSwwLjIsMS45LDAuNSwyLjdoNS4xCgljLTAuMy0wLjMtMC40LTAuNy0wLjUtMS4ybC0wLjMtMS40bC0wLjQtNC42Yy0wLjEtMC42LTAuMy0xLjItMC42LTEuNmMtMC4yLTAuNS0wLjUtMC45LTEtMS4zYy0wLjQtMC4zLTAuOS0wLjYtMS41LTAuN3YtMC4xCgljMS4zLTAuNSwyLjItMS4zLDIuOS0yLjNjMC4zLTAuNSwwLjUtMSwwLjYtMS42YzAuMS0wLjUsMC4yLTEuMiwwLjItMS44YzAtMS0wLjEtMS44LTAuNC0yLjZDMTYyLjUsNTQuOCwxNjIsNTQuMSwxNjEuNCw1My41CgkgTTE1NC42LDU1LjZjMC42LDAsMS4yLDAuMSwxLjYsMC4yYzAuNCwwLjEsMC43LDAuMiwxLDAuNWMwLjYsMC41LDAuOSwxLjQsMC45LDIuNWMwLDEuMi0wLjMsMi4xLTAuOSwyLjZjLTAuNSwwLjUtMS40LDAuOC0yLjcsMC44CglIMTQ5di02LjVIMTU0LjYgTTQ2My41LDUxLjZoLTVsLTMuOSwxNmwtNC0xNmgtNC44bC00LjEsMTUuOGgtMC4xTDQzOCw1MS42aC01LjFsNi4xLDIzLjNoNS4ybDMuOS0xNS44aDAuMWw0LDE1LjhoNS4xTDQ2My41LDUxLjYKCSBNNDA5LjYsNTQuNmMtMC41LDAuNS0wLjksMS4yLTEuMywxLjhjLTAuMywwLjYtMC42LDEuMy0wLjksMmMtMC41LDEuNS0wLjgsMy4xLTAuOCw0LjljMCwxLjcsMC4zLDMuMywwLjgsNC43CgljMC41LDEuNSwxLjMsMi44LDIuMiwzLjljMC41LDAuNSwxLDEsMS42LDEuNGMwLjYsMC40LDEuMywwLjgsMS45LDEuMWMxLjQsMC42LDMuMSwwLjksNC45LDAuOWMxLjgsMCwzLjQtMC4zLDQuOC0wLjkKCWMwLjctMC4zLDEuMy0wLjcsMS45LTEuMWMwLjYtMC40LDEuMi0wLjksMS42LTEuNGMxLTEuMSwxLjctMi40LDIuMi0zLjljMC41LTEuNCwwLjgtMywwLjgtNC43YzAtMS44LTAuMy0zLjQtMC44LTQuOQoJYy0wLjMtMC43LTAuNi0xLjQtMC45LTJjLTAuNC0wLjctMC45LTEuMy0xLjMtMS44Yy0wLjUtMC41LTEtMS4xLTEuNi0xLjVjLTAuNi0wLjQtMS4zLTAuOC0xLjktMS4xYy0xLjQtMC42LTMtMC45LTQuOC0wLjkKCWMtMS44LDAtMy41LDAuMy00LjksMC45Yy0wLjcsMC4zLTEuMywwLjctMS45LDEuMUM0MTAuNiw1My41LDQxMC4xLDU0LDQwOS42LDU0LjYgTTQxNS4xLDU2YzAuOC0wLjUsMS44LTAuNywzLTAuNwoJYzEuMSwwLDIsMC4yLDIuOSwwLjdjMC44LDAuNCwxLjUsMSwyLDEuOGMwLjUsMC43LDAuOCwxLjYsMSwyLjZjMC4zLDEsMC40LDEuOSwwLjQsM2MwLDEtMC4xLDEuOS0wLjQsMi45Yy0wLjIsMC45LTAuNSwxLjctMSwyLjUKCWMtMC41LDAuNy0xLjIsMS40LTIsMS44Yy0wLjgsMC40LTEuOCwwLjYtMi45LDAuNmMtMS4yLDAtMi4xLTAuMi0zLTAuNmMtMC44LTAuNS0xLjUtMS4xLTItMS44Yy0wLjUtMC43LTAuOC0xLjYtMS0yLjUKCWMtMC4zLTEtMC40LTEuOS0wLjQtMi45YzAtMSwwLjEtMiwwLjQtM2MwLjItMSwwLjUtMS45LDEtMi42QzQxMy42LDU3LDQxNC4zLDU2LjQsNDE1LjEsNTYgTTM4Ni40LDUxLjZoLTUuMXYyMy4zaDQuOFY1OS4zaDAuMQoJbDkuNywxNS42aDUuMVY1MS42aC00Ljh2MTUuNmgtMC4xTDM4Ni40LDUxLjYgTTM1OC42LDU1LjloNi45di00LjNoLTE5LjF2NC4zaDd2MTloNS4xVjU1Ljl6Ii8+CjxnIGlkPSJyZWNvbm5lY3RCdXR0b25fMF9MYXllcjBfMF9GSUxMIj4KCTxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0xMTQuMywyMC4zYy01LjYtNS42LTEyLTkuOS0xOS4zLTEzYy03LjUtMy4yLTE1LjMtNC44LTIzLjUtNC44Yy04LjIsMC0xNi4xLDEuNi0yMy42LDQuOAoJCWMtMS42LDAuNy0zLjEsMS40LTQuNiwyLjFjLTUuNCwyLjktMTAuMyw2LjUtMTQuNywxMC44Yy01LjYsNS42LTkuOSwxMi0xMywxOS4zYy0zLjIsNy41LTQuOCwxNS4zLTQuOCwyMy42YzAsOC4yLDEuNiwxNiw0LjgsMjMuNQoJCWMzLjEsNy4zLDcuNCwxMy43LDEzLDE5LjNjMy45LDMuOSw4LjMsNy4yLDEzLjEsOS45YzAuNSwwLjMsMS4xLDAuNiwxLjYsMC45YzEuNSwwLjcsMywxLjUsNC42LDIuMWM3LjUsMy4yLDE1LjMsNC44LDIzLjYsNC44CgkJYzguMiwwLDE2LTEuNiwyMy41LTQuOGMyLjItMC45LDQuMy0xLjksNi4zLTMuMWM0LjctMi43LDktNiwxMy05LjljNS42LTUuNiw5LjktMTIsMTMtMTkuM2MzLjItNy41LDQuOC0xNS4zLDQuOC0yMy41CgkJYzAtOC4yLTEuNi0xNi4xLTQuOC0yMy42QzEyNC4yLDMyLjMsMTE5LjgsMjUuOSwxMTQuMywyMC4zIE0xMDEuMSwzNS43YzAsMC41LTAuMywxLTAuOCwxLjJjLTAuMywwLjEtMC45LDAuMy0xLjYsMC40bC0zNC4zLDcuMgoJCWMtMS4zLDAuMy0yLjIsMC4xLTIuOC0wLjRjLTAuNi0wLjYtMC43LTEuNi0wLjQtMi45bDEuMi00LjljLTAuMS0wLjMtMC4xLTAuNC0wLjEtMC41Yy02LjcsMS4yLTEyLjQsNS0xNi45LDExLjQKCQljLTUuMiw3LjQtNi42LDE1LjgtNC4yLDI1LjFsLTE0LjQsNi4xYy0wLjQtMi0wLjctMy40LTEtNC40Yy0wLjMtMS43LTAuNi0zLjEtMC43LTQuM2MtMS4zLTkuNiwwLjQtMTguNiw1LTI3LjEKCQljNS4yLTkuNSwxMi42LTE2LjIsMjIuNC0yMC4yYzIuMS0wLjksNC41LTEuNiw3LjItMi4yYzEuMS0wLjMsMy0wLjUsNS44LTAuN2MwLjYtMC4xLDEuMS0wLjMsMS4zLTAuNGMwLjQtMC4zLDAuNy0wLjcsMC44LTEuNAoJCWMwLjMtMS41LDAuOS0zLjcsMS44LTYuN2MwLjMtMS4zLDAuOS0yLDEuNi0yLjFjMC43LTAuMiwxLjYsMC4yLDIuNywxLjFjNC40LDQuMSw3LjgsNy4xLDEwLjEsOS4yYzMuNSwzLjEsOC45LDcuOCwxNiwxNC4xCgkJQzEwMC44LDM0LjIsMTAxLjIsMzUsMTAxLjEsMzUuNyBNOTguMyw1NC41YzAuMi0wLjMsMC42LTAuNiwxLjEtMC44YzIuOS0xLjIsNy0yLjksMTIuNi01LjNjMi4zLDUuNywzLjEsMTEuOSwyLjUsMTguNQoJCWMtMC43LDYuNy0yLjgsMTIuOS02LjIsMTguN2MtMy42LDYuMS04LjQsMTEuMS0xNC4zLDE0LjhjLTYuNSw0LjItMTMuOCw2LjYtMjEuOSw3LjJsLTIuMiw4LjRjLTAuMywxLjItMC45LDEuOS0xLjUsMi4xCgkJYy0wLjgsMC4xLTEuNy0wLjItMi42LTFMNDYuMyw5OS42Yy0zLjEtMi43LTUuNC00LjctNi45LTYuMWMtMC4zLTAuMy0wLjYtMC43LTAuOS0xLjFjLTAuMy0wLjUtMC4zLTAuOC0wLjItMQoJCWMwLjEtMC4zLDAuMy0wLjcsMC44LTFjMC40LTAuMywwLjgtMC41LDEuMi0wLjZsMzQuOS03LjRjMS4xLTAuMywxLjktMC4xLDIuNSwwLjRzMC43LDEuNCwwLjQsMi41bC0xLjYsNi4xCgkJYzAuOC0wLjIsMS44LTAuNSwzLjEtMC44YzcuMi0yLjYsMTIuNi03LjEsMTYuMS0xMy43YzMuNS02LjUsNC40LTEzLjQsMi43LTIwLjhDOTguMSw1NS4zLDk4LjEsNTQuOCw5OC4zLDU0LjUgTTg3LjQsNTkuMgoJCWMwLjQsMS4xLDAuNiwyLjMsMC42LDMuOGMwLDEuMy0wLjIsMi41LTAuNSwzLjZjLTAuMSwwLjUtMC4zLDEuMS0wLjYsMS41Yy0wLjIsMC41LTAuNSwwLjktMC44LDEuMmMtMC43LDAuOC0xLjUsMS40LTIuNSwxLjgKCQljLTAuNSwwLjMtMS4xLDAuNC0xLjYsMC41Yy0wLjYsMC4xLTEuMywwLjItMS45LDAuMmgtNy41VjU0LjRsOS4yLDAuMWMwLjUsMC4xLDEsMC4yLDEuNCwwLjRjMC41LDAuMiwxLDAuNCwxLjQsMC43CgkJYzAuNCwwLjIsMC44LDAuNSwxLjEsMC45YzAuMywwLjMsMC42LDAuNywwLjksMS4yQzg3LDU4LjIsODcuMiw1OC42LDg3LjQsNTkuMiBNNjMuMyw2MXYtNi42aDMuOHYxNy41aC0zLjh2LTcuNmgtNy4xdjcuNmgtMy44CgkJVjU0LjRoMy44VjYxSDYzLjMgTTg0LjMsNjMuNGMwLTAuOS0wLjEtMS43LTAuMy0yLjNjLTAuMS0wLjctMC40LTEuNC0wLjgtMS44Yy0wLjQtMC41LTAuOS0xLTEuNS0xLjJjLTAuNy0wLjMtMS41LTAuNC0yLjUtMC40CgkJaC0yLjh2MTFoMy41YzAuNSwwLDEuMS0wLjEsMS42LTAuMmMwLjUtMC4yLDAuOS0wLjUsMS4zLTAuOWMwLjQtMC40LDAuNy0xLDEtMS42Qzg0LjEsNjUuMSw4NC4zLDY0LjMsODQuMyw2My40eiIvPgoJPHBhdGggY2xhc3M9InN0MCIgZD0iTTYzLjMsNTQuNFY2MWgtNy4xdi02LjZoLTMuOHYxNy41aDMuOHYtNy42aDcuMXY3LjZoMy44VjU0LjRINjMuMyBNODgsNjNjMC0xLjQtMC4yLTIuNy0wLjYtMy44CgkJYy0wLjItMC41LTAuNC0xLTAuNy0xLjRjLTAuMy0wLjUtMC42LTAuOS0wLjktMS4yYy0wLjMtMC40LTAuNy0wLjctMS4xLTAuOWMtMC41LTAuMy0xLTAuNS0xLjQtMC43Yy0wLjUtMC4yLTEtMC4zLTEuNC0wLjQKCQlsLTkuMi0wLjF2MTcuNWg3LjVjMC43LDAsMS4zLTAuMSwxLjktMC4yYzAuNS0wLjEsMS4xLTAuMiwxLjYtMC41YzEtMC40LDEuOC0xLDIuNS0xLjhjMC4zLTAuMywwLjYtMC43LDAuOC0xLjIKCQljMC4zLTAuNSwwLjUtMSwwLjYtMS41Qzg3LjksNjUuNCw4OCw2NC4yLDg4LDYzIE04My45LDYxYzAuMiwwLjcsMC4zLDEuNSwwLjMsMi4zYzAsMS0wLjEsMS44LTAuNCwyLjVjLTAuMywwLjctMC42LDEuMi0xLDEuNgoJCWMtMC40LDAuNC0wLjksMC43LTEuMywwLjljLTAuNSwwLjEtMS4xLDAuMi0xLjYsMC4yaC0zLjV2LTExaDIuOGMxLDAsMS44LDAuMSwyLjUsMC40YzAuNiwwLjMsMS4xLDAuNywxLjUsMS4yCgkJQzgzLjUsNTkuNyw4My44LDYwLjMsODMuOSw2MXoiLz4KCTxwYXRoIGNsYXNzPSJzdDIiIGQ9Ik05OS41LDUzLjdjLTAuNSwwLjItMC45LDAuNS0xLjEsMC44Yy0wLjIsMC4zLTAuMiwwLjktMC4xLDEuNWMxLjgsNy40LDAuOSwxNC40LTIuNywyMC44CgkJYy0zLjUsNi41LTguOSwxMS4xLTE2LjEsMTMuN2MtMS4yLDAuMy0yLjIsMC42LTMuMSwwLjhsMS42LTYuMWMwLjMtMS4xLDAuMS0xLjktMC40LTIuNXMtMS40LTAuNy0yLjUtMC40bC0zNC45LDcuNAoJCWMtMC40LDAuMS0wLjgsMC4zLTEuMiwwLjZjLTAuNSwwLjMtMC43LDAuNy0wLjgsMWMtMC4xLDAuMi0wLjEsMC41LDAuMiwxYzAuMywwLjQsMC42LDAuOCwwLjksMS4xYzEuNSwxLjQsMy44LDMuNSw2LjksNi4xCgkJbDE5LjQsMTcuNWMwLjksMC44LDEuNywxLjIsMi42LDFjMC43LTAuMywxLjItMSwxLjUtMi4xbDIuMi04LjRjOC4yLTAuNywxNS41LTMuMSwyMS45LTcuMmM1LjktMy43LDEwLjctOC43LDE0LjMtMTQuOAoJCWMzLjUtNS44LDUuNS0xMiw2LjItMTguN2MwLjctNi42LTAuMS0xMi44LTIuNS0xOC41QzEwNi41LDUwLjcsMTAyLjMsNTIuNSw5OS41LDUzLjcgTTEwMC4zLDM2LjljMC41LTAuMywwLjgtMC43LDAuOC0xLjIKCQljMC4xLTAuNy0wLjMtMS41LTEuMi0yLjNjLTcuMS02LjMtMTIuNS0xMS0xNi0xNC4xYy0yLjMtMi01LjctNS4xLTEwLjEtOS4yYy0xLTEtMS45LTEuMy0yLjctMS4xYy0wLjcsMC4xLTEuMywwLjktMS42LDIuMQoJCWMtMSwzLTEuNiw1LjItMS44LDYuN2MtMC4xLDAuNy0wLjQsMS4yLTAuOCwxLjRjLTAuMywwLjEtMC43LDAuMy0xLjMsMC40Yy0yLjgsMC4yLTQuNywwLjQtNS44LDAuN2MtMi43LDAuNi01LjEsMS40LTcuMiwyLjIKCQljLTkuNyw0LTE3LjIsMTAuOC0yMi40LDIwLjJjLTQuNiw4LjQtNi4zLDE3LjUtNSwyNy4xYzAuMSwxLjIsMC40LDIuNiwwLjcsNC4zYzAuMywxLDAuNiwyLjQsMSw0LjRsMTQuNC02LjEKCQljLTIuNS05LjMtMS4xLTE3LjcsNC4yLTI1LjFjNC42LTYuNSwxMC4yLTEwLjMsMTYuOS0xMS40YzAsMC4xLDAsMC4yLDAuMSwwLjVsLTEuMiw0LjljLTAuMywxLjMtMC4yLDIuMiwwLjQsMi45CgkJYzAuNSwwLjUsMS41LDAuNywyLjgsMC40bDM0LjMtNy4yQzk5LjQsMzcuMiw5OS45LDM3LjEsMTAwLjMsMzYuOXoiLz4KPC9nPgo8L3N2Zz4K"},function(t,e){t.exports={attributes:{xmlns:"http://www.w3.org/2000/svg",width:"3200",height:"2000",viewBox:"1294 -604 3200 2000"},content:'<path d="M3165.25 1255.9h-225c-83.3 0-125-26.7-125-80v-330h-150v330c0 46.7 25 88.3 75 125 50 26.7 108.3 40 175 40h205l45-85m-1180-255c0-43.3-21.7-80-65-110-40-30-91.7-45-155-45h-410v495h150v-195h180l170 195h165l-180-205c96.6-26.6 145-71.6 145-135m-160 0c0 40-31.7 60-95 60h-225v-135h225c63.3 0 95 25 95 75m410-45c33.3-20 70-30 110-30h265v-80h-290c-80 0-150 20-210 60s-90 90-90 150v80c0 56.7 30 105 90 145 60 36.7 130 55 210 55h290v-85h-265c-40 0-76.7-10-110-30-26.7-20-40-43.3-40-70v-15h415v-95h-415v-5c0-33.3 13.3-60 40-80m-575-1510h-300v1335h300v-1335m810 0v530h-730v285h740v520h300v-1335h-310m930 1775h320l65 120h165l-305-495h-160l-305 495h155l65-120m55-85l105-190 115 190h-220m810-290l-185 190-180-190h-160l275 275v220h150v-220l275-275h-175m155-495v-480c0-116.7-45-216.7-135-300-86.7-83.3-193.3-125-320-125h-960v990h300v-710l660 5c43.3 0 80 15 110 45 30 23.3 45 55 45 95v480c0 43.3-15 78.3-45 105-30 30-66.7 45-110 45h-960v280l960 5c126.7 0 233.3-43.3 320-130 90-80 135-181.6 135-305z"/>'}},function(t,e){t.exports={attributes:{xmlns:"http://www.w3.org/2000/svg",width:"2200",height:"2000",viewBox:"-1394 -593 2200 2000"},content:'<path d="M-415.65-385.5c-20-13.3-33.3-20-40-20h-470c-13.3 0-26.7 6.7-40 20-13.3 20-20 36.7-20 50v1465c0 13.3 6.7 30 20 50 13.3 13.3 26.7 20 40 20h470c6.7 0 20-6.7 40-20 10-13.3 15-30 15-50v-1465c0-16.6-5-33.3-15-50m815 0c-13.3-13.3-26.7-20-40-20h-465c-10 0-25 6.7-45 20-10 16.7-15 33.3-15 50v1465c0 20 5 36.7 15 50 20 13.3 35 20 45 20h465c13.3 0 26.7-6.7 40-20 13.3-20 20-36.7 20-50v-1465c0-13.3-6.6-30-20-50z"/>'}},function(t,e){t.exports={attributes:{xmlns:"http://www.w3.org/2000/svg",width:"2200",height:"2000",viewBox:"794 -604 2200 2000"},content:'<path d="M2492.35 380.25c0-30-15-53.3-45-70l-980-714.8c-10-6.7-23.3-10-40-10-20 0-33.3 3.3-40 10-30 16.7-45 40-45 70v1429.6c0 36.7 15 61.6 45 75 26.7 10 53.3 10 80 0l980-719.8c29.9-16.7 45-40 45-70z"/>'}},function(t,e){t.exports={attributes:{xmlns:"http://www.w3.org/2000/svg",width:"2200",height:"2000",viewBox:"-1383 -603 2200 2000"},content:'<path d="M-1115.55 696.35c-21.3-21.3-46.2-32-74.6-32s-53.3 10.7-74.6 32c-21.3 21.3-32 47.9-32 79.9v474.2c0 28.4 10.7 53.3 32 74.6s47.9 32 79.9 32h479.5c32 0 60.4-10.7 85.2-32 21.3-21.3 32-46.2 32-74.6 0-28.4-10.7-53.3-32-74.6-24.9-21.3-53.3-32-85.2-32h-229l426.2-415.5c21.3-21.3 32-46.2 32-74.6 0-28.4-10.7-53.3-32-74.6-17.8-17.8-42.6-26.6-74.6-26.6-28.4 0-53.3 8.9-74.6 26.6l-426.2 420.9v-223.8c0-32-10.7-58.6-32-79.9m495.5-1230.7c-24.9-21.3-53.3-32-85.2-32h-479.5c-32 0-58.6 10.7-79.9 32s-32 46.2-32 74.6v479.5c0 28.4 10.7 53.3 32 74.6 21.3 21.3 46.2 32 74.6 32s53.3-10.7 74.6-32c21.3-21.3 32-46.2 32-74.6v-229.1l426.1 420.9c21.3 17.8 46.2 26.6 74.6 26.6 32 0 56.8-8.9 74.6-26.6 21.3-21.3 32-46.2 32-74.6 0-28.4-10.7-53.3-32-74.6l-426.2-415.5h229c32 0 60.4-10.7 85.2-32 21.3-21.3 32-46.2 32-74.6s-10.6-53.3-31.9-74.6m522.1 1188.1c0 28.4 10.7 53.3 32 74.6l426.2 415.5h-229.1c-32 0-58.6 10.7-79.9 32-24.9 21.3-37.3 46.2-37.3 74.6 0 28.4 12.4 53.3 37.3 74.6 21.3 21.3 47.9 32 79.9 32h479.5c32 0 58.6-10.7 79.9-32s32-46.2 32-74.6v-474.2c0-32-10.7-58.6-32-79.9-21.3-21.3-46.2-32-74.6-32-28.4 0-53.3 10.7-74.6 32-21.3 21.3-32 47.9-32 79.9v223.8l-426.2-420.9c-21.3-17.8-46.2-26.6-74.6-26.6-32 0-56.8 8.9-74.6 26.6-21.3 21.3-31.9 46.2-31.9 74.6m788.5-1188.1c-21.3-21.3-47.9-32-79.9-32h-479.5c-32 0-58.6 10.7-79.9 32-24.9 21.3-37.3 46.2-37.3 74.6s12.4 53.3 37.3 74.6c21.3 21.3 47.9 32 79.9 32h229.1l-426.2 415.5c-21.3 21.3-32 46.2-32 74.6 0 28.4 10.7 53.3 32 74.6 17.8 17.8 42.6 26.6 74.6 26.6 28.4 0 53.3-8.9 74.6-26.6l426.2-420.9v223.8c0 32 10.7 58.6 32 79.9 21.3 21.3 46.2 32 74.6 32 28.4 0 53.3-10.7 74.6-32 21.3-21.3 32-47.9 32-79.9v-474.2c-.2-28.4-10.8-53.3-32.1-74.6z"/>'}},function(t,e){t.exports={attributes:{xmlns:"http://www.w3.org/2000/svg",width:"2200",height:"2000"},content:'<path d="M1469.8 182.1c-21.3-21.3-46.2-32-74.6-32s-53.3 10.7-74.6 32c-21.3 21.3-32 47.9-32 79.9v474.2c0 28.4 10.7 53.3 32 74.6s47.9 32 79.9 32H1880c32 0 60.4-10.7 85.2-32 21.3-21.3 32-46.2 32-74.6s-10.7-53.3-32-74.6c-24.9-21.3-53.3-32-85.2-32h-229l426.2-415.5c21.3-21.3 32-46.2 32-74.6 0-28.4-10.7-53.3-32-74.6-17.8-17.8-42.6-26.6-74.6-26.6-28.4 0-53.3 8.9-74.6 26.6l-426.2 420.9V262c0-32-10.7-58.6-32-79.9m495.4 1007.1c-24.9-21.3-53.3-32-85.2-32h-479.5c-32 0-58.6 10.7-79.9 32-21.3 21.3-32 46.2-32 74.6v479.5c0 28.4 10.7 53.3 32 74.6s46.2 32 74.6 32 53.3-10.7 74.6-32c21.3-21.3 32-46.2 32-74.6v-229.1l426.1 420.9c21.3 17.8 46.2 26.6 74.6 26.6 32 0 56.8-8.9 74.6-26.6 21.3-21.3 32-46.2 32-74.6s-10.7-53.3-32-74.6l-426.2-415.5h229c32 0 60.4-10.7 85.2-32 21.3-21.3 32-46.2 32-74.6.1-28.4-10.6-53.3-31.9-74.6M89.8 139.5c0 28.4 10.7 53.3 32 74.6L548 629.6H318.9c-32 0-58.6 10.7-79.9 32-24.9 21.3-37.3 46.2-37.3 74.6s12.4 53.3 37.3 74.6c21.3 21.3 47.9 32 79.9 32h479.5c32 0 58.6-10.7 79.9-32s32-46.2 32-74.6V262c0-32-10.7-58.6-32-79.9-21.3-21.3-46.2-32-74.6-32-28.4 0-53.3 10.7-74.6 32s-32 47.9-32 79.9v223.8L270.9 64.9c-21.3-17.8-46.2-26.6-74.6-26.6-32 0-56.8 8.9-74.6 26.6-21.3 21.3-31.9 46.2-31.9 74.6m788.5 1049.7c-21.3-21.3-47.9-32-79.9-32H318.9c-32 0-58.6 10.7-79.9 32-24.9 21.3-37.3 46.2-37.3 74.6s12.4 53.3 37.3 74.6c21.3 21.3 47.9 32 79.9 32H548l-426.2 415.5c-21.3 21.3-32 46.2-32 74.6 0 28.4 10.7 53.3 32 74.6 17.8 17.8 42.6 26.6 74.6 26.6 28.4 0 53.3-8.9 74.6-26.6l426.2-420.9V1738c0 32 10.7 58.6 32 79.9 21.3 21.3 46.2 32 74.6 32 28.4 0 53.3-10.7 74.6-32 21.3-21.3 32-47.9 32-79.9v-474.2c-.2-28.4-10.8-53.3-32.1-74.6z"/>'}},function(t,e){t.exports={attributes:{xmlns:"http://www.w3.org/2000/svg",width:"2200",height:"2000"},content:'<path d="M318.4 772.6c-62 62-92.9 137-92.9 225 0 91.3 31 167.9 92.9 229.9s138.6 92.9 229.9 92.9c107.6 0 192.4-42.4 254.4-127.2l547.8 273.9c-9.8 29.3-14.7 60.3-14.7 92.9 0 88 32.6 163 97.8 225 62 62 137 92.9 225 92.9 91.3 0 167.9-31 229.9-92.9 62-62 92.9-137 92.9-225s-31-163-92.9-225c-62-65.2-138.6-97.8-229.9-97.8-101.1 0-184.2 40.8-249.5 122.3l-552.7-278.8c9.8-22.8 14.7-50.5 14.7-83.2 0-29.3-4.9-58.7-14.7-88l547.8-278.8c65.2 88 150 132.1 254.4 132.1 91.3 0 167.9-31 229.9-92.9 62-65.2 92.9-141.8 92.9-229.9s-31-163-92.9-225c-62-62-138.6-92.9-229.9-92.9-88 0-163 31-225 92.9-65.2 62-97.8 137-97.8 225 0 32.6 4.9 60.3 14.7 83.2L797.8 801.9c-65.2-81.5-148.4-122.3-249.5-122.3-91.3 0-167.9 31-229.9 93z"/>'}},function(t,e){t.exports={attributes:{xmlns:"http://www.w3.org/2000/svg",width:"2200",height:"2000"},content:'<path d="M506 471.7H250.4c-56.8 0-105.2 21.7-145.3 65.1C65 576.9 45 627 45 687.2v957.1c0 56.8 20 106.9 60.1 150.3 40.1 40.1 88.5 60.1 145.3 60.1H1939c56.8 0 106.9-20 150.3-60.1 40.1-43.4 60.1-93.5 60.1-150.3V687.2c0-60.1-20-110.2-60.1-150.3-43.4-43.4-93.5-65.1-150.3-65.1h-255.5c-43.4 0-70.2-20-80.2-60.1l-70.1-195.4c-13.4-43.4-40.1-65.1-80.2-65.1H736.5c-40.1 0-66.8 21.7-80.2 65.1l-70.2 195.4c-10 39.9-36.7 60-80.1 60m591.3 105.2c143.6 0 267.2 51.8 370.8 155.3 103.6 106.9 155.3 233.8 155.3 380.8 0 143.6-51.8 268.9-155.3 375.8-103.6 103.6-227.2 155.3-370.8 155.3-143.6 0-267.2-51.8-370.8-155.3C622.9 1385.2 571.2 1260 571.2 1113S623 839.1 726.5 732.2C830 628.7 953.6 576.9 1097.3 576.9m691.5 185.4c0-50.1 25.1-75.2 75.2-75.2s75.2 25.1 75.2 75.2c0 46.8-25.1 70.2-75.2 70.2-50.2 0-75.2-23.4-75.2-70.2m-471.1 576.3c63.5-63.5 95.2-138.6 95.2-225.5s-31.7-162-95.2-225.5c-60.1-63.5-133.6-95.2-220.5-95.2s-162 31.7-225.5 95.2-95.2 138.6-95.2 225.5 31.7 162 95.2 225.5c63.5 60.1 138.6 90.2 225.5 90.2s160.4-30.1 220.5-90.2z"/>'}},function(t,e){t.exports={attributes:{xmlns:"http://www.w3.org/2000/svg",width:"2000",height:"2000"},content:'<path d="M999.4 51.6c-525.1 0-950.8 425.7-950.8 950.8s425.7 950.8 950.8 950.8 950.8-425.7 950.8-950.8S1524.5 51.6 999.4 51.6zm454.9 1027.2l-567.1 390c-15.8 10.9-34.2 16.5-52.5 16.5-14.9 0-29.5-3.4-43.2-10.6-30.5-16.2-49.7-47.5-49.7-82V612.1c0-34.5 19.3-65.9 49.7-82 30.5-15.8 67.1-13.7 95.7 5.6L1454.3 926c25.2 17.4 40.1 46 40.1 76.4-.1 30.4-15 59-40.1 76.4z"/>'}},function(t,e){t.exports={attributes:{xmlns:"http://www.w3.org/2000/svg",width:"2200",height:"2000"},content:'<path d="M1734.7 625.1c-66-113.1-155.5-202.6-268.6-268.6-113.1-66-236.6-99-370.5-99s-257.4 33-370.5 99C612 422.5 522.5 512 456.5 625.1c-66 113.1-99 236.6-99 370.5s33 257.4 99 370.5c66 113.1 155.5 202.6 268.6 268.6 113.1 66 236.6 99 370.5 99s257.4-33 370.5-99c113.1-66 202.6-155.5 268.6-268.6 66-113.1 99-236.6 99-370.5-.1-134-33.1-257.5-99-370.5zm-291.2 544.4c12.2 12.2 18.3 26.6 18.3 43.3 0 17.3-6.1 32-18.3 44.2l-86.5 86.5c-12.2 12.2-26.9 18.2-44.2 18.2-16.7 0-31.1-6.1-43.2-18.2l-173.9-174-174 174c-12.2 12.2-26.6 18.2-43.2 18.2-17.3 0-32-6.1-44.2-18.2l-86.5-86.5c-12.2-12.2-18.3-26.9-18.3-44.2 0-16.7 6.1-31.1 18.3-43.3l174-173.9-174-174c-12.2-12.2-18.3-26.6-18.3-43.2 0-17.3 6.1-32 18.3-44.2l86.5-86.5c12.2-12.2 26.9-18.3 44.2-18.3 16.7 0 31.1 6.1 43.2 18.3l174 173.9 173.9-173.9c12.2-12.2 26.6-18.3 43.2-18.3 17.3 0 32 6.1 44.2 18.3l86.5 86.5c12.2 12.2 18.3 26.9 18.3 44.2 0 16.7-6.1 31.1-18.3 43.2l-173.9 174 173.9 173.9z"/>'}},function(t,e){t.exports={attributes:{xmlns:"http://www.w3.org/2000/svg",width:"2200",height:"2000"},content:'<path d="M850.697 578.716c-17.3 0-32 6.099-44.2 18.299l-86.5 86.5c-12.2 12.2-18.3 26.901-18.3 44.201 0 16.6 6.1 31 18.3 43.2l174 174-174 173.9c-12.2 12.2-18.3 26.598-18.3 43.298 0 17.3 6.1 32.002 18.3 44.202l86.5 86.5c12.2 12.1 26.9 18.199 44.2 18.199 16.6 0 31-6 43.2-18.2l174-174 173.9 174c12.1 12.1 26.5 18.2 43.2 18.2 17.3 0 32-6 44.2-18.2l86.5-86.5c12.2-12.2 18.3-26.9 18.3-44.2 0-16.7-6.1-31.1-18.3-43.3l-173.9-173.9 173.9-174c12.2-12.1 18.3-26.499 18.3-43.199 0-17.3-6.1-32.001-18.3-44.201l-86.5-86.5c-12.2-12.2-26.9-18.299-44.2-18.299-16.6 0-31 6.099-43.2 18.299l-173.9 173.9-174-173.9c-12.1-12.2-26.5-18.299-43.2-18.299z"/>'}},function(t,e){t.exports={attributes:{xmlns:"http://www.w3.org/2000/svg",width:"2000",height:"2000"},content:'<path d="M1007.4 259.6c406.914 0 736.8 329.886 736.8 736.8 0 406.914-329.886 736.8-736.8 736.8-406.914 0-736.8-329.886-736.8-736.8 0-406.914 329.886-736.8 736.8-736.8zm-352.514 796.004l439.46 302.222c12.245 8.446 26.503 12.786 40.684 12.786 11.547 0 22.86-2.635 33.477-8.214 23.635-12.554 38.514-36.81 38.514-63.544V693.946c0-26.735-14.956-51.067-38.514-63.544-23.635-12.244-51.997-10.616-74.16 4.34L654.886 937.196a71.943 71.943 0 0 0-31.075 59.204c.077 23.558 11.624 45.72 31.075 59.204z"/>'}},function(t,e){t.exports={attributes:{xmlns:"http://www.w3.org/2000/svg",width:"2000",height:"2000"},content:'<path d="M1007.4 1733.2c-406.914 0-736.8-329.886-736.8-736.8 0-406.914 329.886-736.8 736.8-736.8 406.914 0 736.8 329.886 736.8 736.8 0 406.914-329.886 736.8-736.8 736.8zm352.514-796.004l-439.46-302.222c-12.245-8.446-26.503-12.786-40.684-12.786-11.547 0-22.86 2.635-33.477 8.214-23.636 12.554-38.514 36.81-38.514 63.544v604.908c0 26.735 14.956 51.067 38.514 63.544 23.635 12.244 51.997 10.616 74.16-4.34l439.461-302.454a71.943 71.943 0 0 0 31.075-59.204c-.077-23.558-11.624-45.72-31.075-59.204z"/>'}},function(t,e){t.exports={attributes:{xmlns:"http://www.w3.org/2000/svg",width:"2000",height:"2000"},content:'<path d="M1744.2 996.4c0 406.914-329.886 736.8-736.8 736.8-406.914 0-736.8-329.886-736.8-736.8 0-406.914 329.886-736.8 736.8-736.8 406.914 0 736.8 329.886 736.8 736.8zM948.196 643.886l-302.222 439.46c-8.446 12.245-12.786 26.503-12.786 40.684 0 11.547 2.635 22.86 8.214 33.477 12.554 23.635 36.81 38.514 63.544 38.514h604.908c26.735 0 51.067-14.956 63.544-38.514 12.244-23.635 10.616-51.997-4.34-74.16l-302.454-439.461a71.942 71.942 0 0 0-59.204-31.075c-23.558.078-45.72 11.624-59.204 31.075z"/>'}},function(t,e){t.exports={attributes:{xmlns:"http://www.w3.org/2000/svg",width:"2000",height:"2000"},content:'<path d="M270.6 996.4c0-406.914 329.886-736.8 736.8-736.8 406.914 0 736.8 329.886 736.8 736.8 0 406.914-329.886 736.8-736.8 736.8-406.914 0-736.8-329.886-736.8-736.8zm796.004 352.514l302.222-439.46c8.446-12.245 12.786-26.503 12.786-40.684 0-11.547-2.635-22.86-8.214-33.477-12.554-23.636-36.81-38.514-63.544-38.514H704.946c-26.735 0-51.067 14.956-63.544 38.514-12.244 23.635-10.616 51.997 4.34 74.16l302.454 439.461a71.943 71.943 0 0 0 59.204 31.075c23.558-.077 45.72-11.624 59.204-31.075z"/>'}},function(t,e){t.exports={attributes:{xmlns:"http://www.w3.org/2000/svg",width:"2200",height:"2000"},content:'<path d="M1285.529 281.705c-126.643-33.305-253.215-33.305-379.858 0s-237.305 97.298-331.987 191.98C479.003 568.366 415.01 679.028 381.705 805.67c-33.305 126.643-33.305 253.215 0 379.858s97.298 237.305 191.98 331.987c94.681 94.681 205.343 158.674 331.986 191.979 126.643 33.305 253.215 33.305 379.858 0s237.305-97.298 331.987-191.98c94.681-94.681 158.674-205.343 191.979-331.986 33.305-126.643 33.305-253.215 0-379.858s-97.298-237.305-191.98-331.986c-94.823-94.682-205.485-158.675-331.986-191.98zm179.04 590.858c17.253 0 31.748 5.87 43.557 17.678 12.233 12.233 18.314 26.94 18.314 44.194v122.33c0 17.253-6.152 31.89-18.385 44.123-11.808 11.809-26.304 17.678-43.416 17.678l-246.002-.07v246.072c0 17.254-5.94 31.679-17.678 43.417-12.233 12.233-26.94 18.314-44.124 18.384h-122.329c-17.253 0-31.961-6.08-44.194-18.314-11.809-11.808-17.678-26.304-17.678-43.557l.07-246.003H726.633c-17.254 0-31.75-5.869-43.487-17.607-12.233-12.233-18.314-26.94-18.314-44.194v-122.33c0-17.253 6.08-31.96 18.314-44.194 11.808-11.808 26.304-17.677 43.487-17.607l246.002-.07V626.56c0-17.253 5.87-31.75 17.607-43.487 12.233-12.233 26.94-18.314 44.194-18.314h122.33c17.253 0 31.961 6.081 44.194 18.314 11.809 11.809 17.678 26.304 17.607 43.487l.07 246.002h245.932z"/>'}},function(t,e){t.exports={attributes:{xmlns:"http://www.w3.org/2000/svg",width:"2200",height:"2000"},content:'<path d="M1285.529 281.705c-126.643-33.305-253.215-33.305-379.858 0s-237.305 97.298-331.987 191.98C479.003 568.366 415.01 679.028 381.705 805.67c-33.305 126.643-33.305 253.215 0 379.858s97.298 237.305 191.98 331.987c94.681 94.681 205.343 158.674 331.986 191.979 126.643 33.305 253.215 33.305 379.858 0s237.305-97.298 331.987-191.98c94.681-94.681 158.674-205.343 191.979-331.986 33.305-126.643 33.305-253.215 0-379.858s-97.298-237.305-191.98-331.986c-94.823-94.682-205.485-158.675-331.986-191.98zm179.04 590.858c17.253 0 31.748 5.87 43.557 17.678 12.233 12.233 18.314 26.94 18.314 44.194v122.33c0 17.253-6.152 31.89-18.385 44.123-11.808 11.809-26.304 17.678-43.416 17.678-386.869 1.187-386.686-.07-738.007-.07-17.254 0-31.75-5.87-43.487-17.608-12.233-12.233-18.314-26.94-18.314-44.194v-122.33c0-17.253 6.08-31.96 18.314-44.194 11.808-11.808 26.304-17.677 43.487-17.607 340.802.82 341.927 0 737.936 0z"/>'}},function(t,e){t.exports={attributes:{xmlns:"http://www.w3.org/2000/svg",width:"2000",height:"2000"},content:'<path d="M999.4 51.6c-525.1 0-950.8 425.7-950.8 950.8 0 525.1 425.7 950.8 950.8 950.8 525.1 0 950.8-425.7 950.8-950.8 0-525.1-425.7-950.8-950.8-950.8z"/>'}},function(t,e){t.exports={attributes:{xmlns:"http://www.w3.org/2000/svg",width:"2200",height:"2000"},content:'<path d="M1124.55 1523.55c30 0 53.3-15 70-45l714.8-980c6.7-10 10-23.3 10-40 0-20-3.3-33.3-10-40-16.7-30-40-45-70-45H409.75c-36.7 0-61.6 15-75 45-10 26.7-10 53.3 0 80l719.8 980c16.7 29.9 40 45 70 45z"/>'}},function(t,e){t.exports={attributes:{xmlns:"http://www.w3.org/2000/svg",width:"2200",height:"2000"},content:'<path d="M1122.05 373.55c-30 0-53.3 15-70 45l-714.8 980c-6.7 10-10 23.3-10 40 0 20 3.3 33.3 10 40 16.7 30 40 45 70 45h1429.6c36.7 0 61.6-15 75-45 10-26.7 10-53.3 0-80l-719.8-980c-16.7-29.9-40-45-70-45z"/>'}},function(t,e){t.exports={attributes:{xmlns:"http://www.w3.org/2000/svg",width:"2200",height:"2000",viewBox:"-794 -603 2200 2000"},content:'<path d="M981.8 164C917.9-183.4 643.9-449.1 306-449.1c-264.8 0-493.2 163.5-602.8 408.7C-579.9.6-789.9 256-789.9 572.8c0 337.2 246.6 613.1 548 613.1H945.3c255.7 0 456.6-224.8 456.6-510.9 0-265.7-191.8-490.5-420.1-511zM762.6 470.6L306 981.5l-456.6-510.9h274V61.9h365.3v408.7h273.9z"/>'}},function(t,e){t.exports={attributes:{xmlns:"http://www.w3.org/2000/svg",width:"2200",height:"2000",viewBox:"-1394 -593 2200 2000"},content:'<path d="M-702.85-257.05v-335h-165v335h165m1420 250v-250c0-56.7-28.3-85-85-85h-250v170h-335v-170h-665v170h-335v-170h-250c-53.3 0-80 28.3-80 85v250c0 56.7 26.7 85 80 85v1330h1835v-1330c56.7 0 85-28.3 85-85m-250 1250.1h-1500V77.95h1500v1165.1m-750-750v335h330v-335h-330m80 585h170v-170.1h-170v170.1m500 0v-170.1h-165v170h165m-1000 .1v-170.1h-165v170h165m335 .1v-170.1h-165v170h165m-335-500h-165v165h165v-165m170-170h165v-165h-165v165m165 170h-165v165h165v-165m-500-334.9v165h165v-165h-165m1165 334.9h-165v165h165v-165m-165-334.9v165h165v-165h-165m-165 0h-170v165h170v-165m330-500.1v-335h-165v335h165z"/>'}},function(t,e){t.exports={attributes:{xmlns:"http://www.w3.org/2000/svg",width:"2900",height:"2000"},content:'<path d="M2434.093 515.056q40.385 44.871 40.385 98.718 0 58.333-40.385 98.718l-157.051 152.564q-40.385 40.384-94.231 40.384-58.333 0-103.205-40.384-40.385-40.385-40.385-94.231 0-58.333 40.385-98.718l157.051-157.051q44.872-40.385 98.718-40.385 58.333 0 98.718 40.385zM2348.837 1511.21q0 53.846 35.897 85.256 35.898 35.897 89.744 35.897h228.846q58.333 0 98.718-35.897 40.384-31.41 40.384-89.744 0-53.846-40.384-89.743-40.385-31.41-98.718-31.41h-219.872q-53.846 0-94.23 31.41-40.385 40.384-40.385 94.23zM2142.426 1502.235q0-287.18-201.923-493.59-210.897-206.41-498.077-206.41-291.666 0-493.59 206.41-210.897 201.923-210.897 493.59 0 53.846 40.385 94.23 40.384 35.898 98.718 35.898h251.282l314.102-314.102 314.103 314.102h251.282q53.846 0 94.23-35.897 40.385-40.385 40.385-94.23zM1568.067 241.338V461.21q0 58.333-35.897 98.717-31.41 40.385-89.744 40.385-53.846 0-89.743-40.385-35.898-35.897-35.898-98.717V241.338q0-58.334 35.898-94.231 35.897-40.385 89.743-40.385 58.334 0 89.744 40.385 35.897 40.385 35.897 94.23zM544.99 474.671q-53.846 0-94.23 40.385-40.385 44.871-40.385 98.718 0 58.333 40.385 98.718L607.81 865.056q40.385 40.384 94.23 40.384 58.334 0 98.719-40.384 40.384-40.385 40.384-94.231 0-58.333-40.384-98.718L648.196 515.056Q607.81 474.67 544.99 474.67zM177.042 1385.568q-53.846 0-94.231 31.41-40.385 35.898-40.385 89.744 0 58.334 40.385 89.744 35.897 35.897 94.23 35.897h219.873q58.333 0 98.718-35.897 40.384-31.41 40.384-89.744 0-53.846-40.384-89.743-40.385-31.41-98.718-31.41z"/>'}},function(t,e){t.exports={attributes:{xmlns:"http://www.w3.org/2000/svg",width:"2900",height:"2000"},content:'<path d="M2486.051 625.292q0 58.333-40.384 98.718l-157.052 152.564q-40.384 40.384-94.23 40.384-58.334 0-103.206-40.384-40.384-40.385-40.384-94.231 0-58.333 40.384-98.718l157.052-157.051q44.872-40.385 98.718-40.385 58.333 0 98.718 40.385 40.384 44.872 40.384 98.718zM2396.308 1607.984q35.897 35.897 89.743 35.897h228.846q58.334 0 98.718-35.897 40.385-31.41 40.385-89.744 0-53.846-40.385-89.743-40.384-31.41-98.718-31.41h-219.871q-53.847 0-94.231 31.41-40.385 40.384-40.385 94.23 0 53.847 35.898 85.257zM2154 1513.753q0-287.18-201.923-493.59-210.898-206.41-498.077-206.41-291.667 0-493.59 206.41-210.897 201.924-210.897 493.59 0 53.846 40.384 94.231 40.385 35.897 98.718 35.897h341.026l219.872 219.872 219.872-219.872h350q53.846 0 94.23-35.897 40.385-40.385 40.385-94.23zM1543.744 158.625q35.897 40.385 35.897 94.23v219.873q0 58.333-35.897 98.718-31.41 40.384-89.744 40.384-53.846 0-89.744-40.384-35.897-35.898-35.897-98.718V252.856q0-58.334 35.897-94.231 35.898-40.385 89.744-40.385 58.333 0 89.744 40.385zM556.564 486.19q-53.846 0-94.23 40.384-40.385 44.872-40.385 98.718 0 58.333 40.384 98.718l157.052 152.564q40.384 40.384 94.23 40.384 58.334 0 98.718-40.384 40.385-40.385 40.385-94.231 0-58.333-40.385-98.718L659.77 526.574q-40.384-40.385-103.205-40.385zM94.385 1428.497Q54 1464.394 54 1518.24q0 58.334 40.385 89.744 35.897 35.897 94.23 35.897h219.872q58.334 0 98.718-35.897 40.385-31.41 40.385-89.744 0-53.846-40.385-89.743-40.384-31.41-98.718-31.41H188.615q-53.846 0-94.23 31.41z"/>'}},function(t,e){t.exports={attributes:{xmlns:"http://www.w3.org/2000/svg",width:"2200",height:"2000"},content:'<path d="M1596.67 343.93q-56.595-41.16-123.48-25.726-72.03 15.435-108.044 77.175-36.015 56.595-20.58 123.48 15.435 72.03 72.03 108.045l82.32 66.885 113.19 164.64q36.014 92.61 36.014 195.51 0 102.9-36.015 195.51l-113.19 164.64q-66.884 72.03-164.64 113.19l-190.364 36.014-195.51-36.015-164.64-113.19q-72.03-72.03-113.19-164.64-36.015-92.61-36.015-195.51 0-149.204 82.32-277.83l210.945 210.946q87.465 87.465 149.205 61.74 61.74-25.725 61.74-149.205V153.564H392.74q-123.48 0-149.204 61.74-25.725 61.74 61.74 149.205L475.06 534.294q-87.465 113.19-133.77 246.96-46.304 128.625-46.304 272.685 0 169.784 66.884 324.134 61.74 154.35 180.075 272.685 118.335 123.48 277.83 185.22 154.35 66.885 318.99 66.885l329.28-66.885q154.35-61.74 272.684-180.075 118.335-123.48 185.22-277.83 61.74-154.35 61.74-324.134 0-169.785-61.74-324.135-66.885-154.35-185.22-272.685z"/>'}},function(t,e){t.exports={attributes:{xmlns:"http://www.w3.org/2000/svg",width:"2200",height:"2000"},content:'<path d="M1988.4 928.8l-980-714.8c-10-6.7-23.3-10-40-10-20 0-33.3 3.3-40 10-30 16.7-45 40-45 70v305.6L368.4 214c-10-6.7-23.3-10-40-10-20 0-33.3 3.3-40 10-30 16.7-45 40-45 70v1429.6c0 36.7 15 61.6 45 75 26.7 10 53.3 10 80 0l515-378.3v303.3c0 36.7 15 61.6 45 75 26.7 10 53.3 10 80 0l980-719.8c29.9-16.7 45-40 45-70s-15-53.4-45-70z"/>'}},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAADCAYAAAC56t6BAAAAFklEQVQI12NgYGBg+P///0wmBiiAMwBKbQObp8gYkQAAAABJRU5ErkJggg=="},function(t,e,i){var r,n,a=function(t,e){return function(){return t.apply(e,arguments)}};n=i(20),r=function(){function t(t){this.player=t,this._onAdEnded=a(this._onAdEnded,this),this._onAdStarted=a(this._onAdStarted,this),this._onVideEnd=a(this._onVideEnd,this),this._onVideoLoading=a(this._onVideoLoading,this),this._onStarted=a(this._onStarted,this),this._onFullScreenChange=a(this._onFullScreenChange,this),this._onVideoChange=a(this._onVideoChange,this),this._onVideoMetadata=a(this._onVideoMetadata,this),this.player.video.bind("change",this._onVideoChange),this.player.video.bind("metadata",this._onVideoMetadata),this.player.video.bind("loading",this._onVideoLoading),this.player.video.bind("error",this._onVideoError),this.player.bind("started",this._onStarted),null!=this.player.interface.ad&&(this.player.interface.ad.bind("start",this._onAdStarted),this.player.interface.ad.bind("end",this._onAdEnded)),n.addEventListener(this._onFullScreenChange),this.clicktoplay=!this.player.settings.video.autoPlay,this.started=!1,this.onAd=!1,this.firstPlay=!0}return t.prototype._onVideoMetadata=function(t){return this.player.trigger("metadata",t)},t.prototype._onVideoChange=function(t){return this.player.trigger("change",this)},t.prototype._onFullScreenChange=function(t){return this.player.trigger("change",this)},t.prototype._onStarted=function(){return this.started=!0,this.clicktoplay=!1,this.player.trigger("change",this)},t.prototype._onVideoLoading=function(){return this.clicktoplay=!1},t.prototype._onVideEnd=function(){return this.started=!1},t.prototype._onAdStarted=function(){return this.onAd=!0,this.player.trigger("change",this)},t.prototype._onAdEnded=function(){if(this.onAd)return this.onAd=!1,this.player.trigger("change",this)},t.prototype.isShowingAd=function(){return this.onAd},t.prototype.isStarted=function(){return this.started},t.prototype.isFullscreen=function(){return n.isFullScreen()},t.prototype.supportFullscreen=function(){return n.supportFullScreen()},t.prototype.isPlaying=function(){return this.player.video.state.isPlaying()},t.prototype.isPaused=function(){return this.player.video.state.isPaused()},t.prototype.isBuffering=function(){return this.player.video.state.isBuffering()},t.prototype.isEnded=function(){return this.player.video.state.isEnded()},t.prototype.isClicktoplay=function(){return this.clicktoplay},t.prototype.isLoading=function(){return this.player.video.state.isLoading()},t.prototype.isError=function(){return this.player.video.state.isError()},t.prototype.destroy=function(){return this.player.video.unbind("change",this._onVideoChange),this.player.video.unbind("metadata",this._onVideoMetadata),this.player.video.unbind("loading",this._onVideoLoading),this.player.unbind("started",this._onStarted),n.removeEventListener(this._onFullScreenChange)},t}(),t.exports=r},function(t,e){var i,r;r=/^([A-Za-z0-9]*)(\.hdrelay\.com)$/,i=function(){function t(t){this.player=t}return t._load=function(t,e){var i,r;r=new XMLHttpRequest;try{r.open("GET",t,!0)}catch(t){return i=t,e(i)}return r.onreadystatechange=function(){var t;if(4===r.readyState){if(r.status>=200&&r.status<300){try{t=JSON.parse(r.responseText)}catch(t){return i=t,e(i)}return e(null,t)}return e({error:"Invalid response "+r.status+": "+r.statusText})}},r.send()},t.prototype.play=function(t,e){var i,n,a;return null==e&&(e=1),"jpg"===this.player.settings.video.format?(n=this.player.settings.server.jpg,i=r.exec(n),null!=i&&(n=i[1]+"b"+i[2]),a=n+"/cameras/"+this.player.settings.camera.id+"/"):a=null!=t?"https://archive/"+this.player.settings.camera.id+"/"+e+"/"+t:this.player.settings.server.hls+"/camera/"+this.player.settings.camera.id+"/relay/playlist.m3u8",this.player.video.play(a)},t.prototype.playPreset=function(t){return null!=this.player.video.playPreset&&(this.player.video.playPreset(t),!0)},t.prototype.getPreviewUrl=function(){var t,e,i,n,a,s;return"last"===(null!=(n=this.player.settings.video.previewImage)?n.type:void 0)?(i=this.player.settings.video.previewImage.position||"default"," //img.hdrelay.com/frames/"+this.player.settings.camera.id+"/"+i+"/last.jpg"):"jpg"===this.player.settings.video.format?(a=this.player.settings.server.jpg,e=r.exec(a),s=this.player.settings.video.width||800,t=Math.floor(s/this.player.settings.video.aspectRatio),null!=e&&(a=e[1]+"b"+e[2]),a+"/cameras/"+this.player.settings.camera.id+"/GetOneShot?size="+s+"x"+t):this.player.settings.server.hls+"/camera/"+this.player.settings.camera.id+"/snapshot"},t.prototype.getInfo=function(e){var i,r,n;return r=(null!=(i=this.player.settings.video.record)?i.speeds:void 0)||[1],r=r.join(","),n="//img.hdrelay.com/api/record/info?camera="+this.player.settings.camera.id+"&speeds="+r,t._load(n,function(t,i){return null!=t?e(t):(this.lastInfo=i,this.lastInfoTimestamp=Date.now(),e(null,i))})},t.prototype._getInfo=function(t){return this.lastInfo?t(null,info):this.getInfo(t)},t.prototype.hasSpeeds=function(e){var i;return null!=e&&"live"!==e&&null!=this.lastInfo&&(i=t.getSpeedsAt(this.lastInfo,e),i.length>1)},t.getSpeedsAt=function(t,e){var i;return i=[],t.forEach(function(t){if(e>=t.first&&e<=t.last)return i.push(t.speed)}),i},t.prototype.getSpeedsAt=function(e,i){return this._getInfo(function(r,n){var a;return null!=r?i(r):(a=t.getSpeedsAt(n,e),i(null,a))})},t.prototype.download=function(e,i,r,n,a,s){var o;return o="https://manage.hdrelay.com/video/download/"+e+"?speed="+i+"&start="+r+"&end="+n+"&email="+a,t._load(o,function(t,e){return null!=t?s(t):s()})},t}(),t.exports=i},function(t,e){var i,r=function(t,e){return function(){return t.apply(e,arguments)}};i=function(){function t(t){this.player=t,this._onTimeout=r(this._onTimeout,this),this._onInteraction=r(this._onInteraction,this),this._onPlaying=r(this._onPlaying,this),this.player.video.bind("playing",this._onPlaying),this.player.bind("interaction",this._onInteraction)}return t.prototype._resetMax=function(){if(null!=this.playStart)return this.player.settings.video.timeout.max>0&&null==this.maxTimeoutTimer?(this.maxTimeoutTarget=Date.now()+1e3*this.player.settings.video.timeout.max,this.maxTimeoutTimer=setTimeout(this._onTimeout,1e3*this.player.settings.video.timeout.max)):void 0},t.prototype._resetInactive=function(){if(null!=this.playStart)return this.player.settings.video.timeout.inactive>0?(this.player.interface.showInactiveTimeOut(null),this.inactiveTimeoutTimer&&clearTimeout(this.inactiveTimeoutTimer),this.inactiveTimeoutTarget=Date.now()+1e3*this.player.settings.video.timeout.inactive,this.inactiveTimeoutTimer=setTimeout(this._onTimeout,1e3*this.player.settings.video.timeout.inactive)):void 0},t.prototype._resetNotifier=function(){if(this.player.settings.video.timeout.max>0||this.player.settings.video.timeout.inactive>0)return this.notifier=setInterval(function(t){return function(e){var i,r;if(t.maxTimeoutTarget||t.inactiveTimeoutTarget)return r=t.maxTimeoutTarget||t.inactiveTimeoutTarget,t.inactiveTimeoutTarget&&t.inactiveTimeoutTarget<t.maxTimeoutTarget&&(r=t.inactiveTimeoutTarget),i=r-Date.now(),i<11e3&&r===t.inactiveTimeoutTarget?t.player.interface.showInactiveTimeOut(i):void 0}}(this),1e3)},t.prototype._onPlaying=function(t){return this.playStart=Date.now(),this._resetMax(),this._resetInactive(),this._resetNotifier()},t.prototype._onInteraction=function(t){return this._resetInactive()},t.prototype._onTimeout=function(t){return this.player.state.lastPlay.time=this.player.video.state.time,this.player.video.stop(),this.reset()},t.prototype.reset=function(){return null!=this.inactiveTimeoutTimer&&(this.player.interface.showInactiveTimeOut(null),clearTimeout(this.inactiveTimeoutTimer),delete this.inactiveTimeoutTimer,delete this.inactiveTimeoutTarget),null!=this.maxTimeoutTimer&&(clearTimeout(this.maxTimeoutTimer),delete this.maxTimeoutTimer,delete this.maxTimeoutTarget),delete this.playStart},t.prototype.destroy=function(){return this.reset(),this.player.video.unbind("playing",this._onPlaying),this.player.unbind("interaction",this._onInteraction)},t}(),t.exports=i},function(t,e,i){var r,n;n=i(89),r=i(1),function(){function e(t){this.settings=t,r.mixin(this),this.connected=!1,this.running=!1}e.prototype.connect=function(t){if(!this.connected&&!this.running)return this.running=!0,this.socket=n("https://socket.hdrelay.com/"+this.settings.camera.id),Date.now(),this.socket.emit("get token",{priority:this.settings.video.control.priority},function(e){return function(i){return null==i?console.error("failed to get token",i):(e.token=i,e.socket.emit("listen votes",null,function(t){if(!t)return console.error("Failed to listen votes",t)}),e.socket.emit("listen control",null,function(t){if(!t)return console.error("Failed to listen control",t)}),e.socket.emit("listen ptz",null,function(t){if(!t)return console.error("Failed to listen ptz",t)}),e.socket.emit("listen reached",null,function(t){if(!t)return console.error("Failed to listen reached",t)}),e.socket.emit("listen info",null,function(t){if(!t)return console.error("Failed to listen info",t)}),e.socket.emit("listen presets",null,function(t){if(!t)return console.error("Failed to listen presets",t)}),e.socket.on("votes",function(t){return e._onVotes(t)}),e.socket.on("control",function(t){return e._onControl(t)}),e.socket.on("ptz",function(t){return e._onPTZ(t)}),e.socket.on("reached",function(t){return e._onReached(t)}),e.socket.on("info",function(t){return e._onInfo(t)}),e.socket.on("presets",function(t){return e._onPresets(t)}),e.socket.emit("get info",null,function(t){return null==t?console.error("failed to get info",t):(e.info=t,null!=e.info?e._onInfo(e.info):void 0)}),e.socket.emit("get presets",null,function(t){return null==t?console.error("failed to get presets",t):(e.presets=t,null!=e.presets?e._onPresets(e.presets):void 0)}),e.socket.emit("get ptz",null,function(t){return null==t?console.error("failed to get ptz",t):(e.ptz=t,e._onPTZ(e.ptz))}),e.connected=!0,e.trigger("connected"),null!=t?t():void 0)}}(this))},e.prototype.disconnect=function(){if(null!=this.socket)return this.socket.close(),this.socket=null,this.connected=!1,this.running=!1,this.trigger("disconnect")},e.prototype._onVotes=function(t){return this.trigger("votes",t)},e.prototype._onControl=function(t){return this.trigger("control",t)},e.prototype._onPTZ=function(t){return this.ptz=t,this.trigger("ptz",t)},e.prototype._onReached=function(t){return this.ptz=t,this.trigger("reached",t)},e.prototype._onInfo=function(t){return this.trigger("info",t)},e.prototype._onPresets=function(t){return this.trigger("presets",t)},e.prototype.vote=function(t){if(null!=this.socket)return this.socket.emit("vote",t,function(e){if(!e)return console.error("Failed to vote",t)})},e.prototype.getVotes=function(){var t;return t=function(t){return function(){return t.socket.emit("get votes",null,function(e){return t.trigger("votes",e)})}}(this),null!=this.socket?t():this.connect(t)},e.prototype.getControl=function(){var t;return t=function(t){return function(){return t.socket.emit("get control",null,function(e){return e<0?t.trigger("control",{control:!1,time:e}):e>0?t.trigger("control",{control:!0,time:e}):t.trigger("control",{control:!1,time:e})})}}(this),null!=this.socket?t():this.connect(t)},e.prototype.releaseControl=function(){if(null!=this.socket)return this.socket.emit("release control",null,function(t){if(!t)return console.error("Failed to release control")})},e.prototype.setPosition=function(t){if(null!=this.socket)return null==t.pan&&(t.pan=this.ptz.pan),null==t.tilt&&(t.tilt=this.ptz.tilt),null==t.zoom&&(t.zoom=this.ptz.zoom),this.socket.emit("set ptz",t,function(e){if(!e)return console.error("Failed to set position",t)})},e.prototype.gotoPreset=function(t){if(null!=this.socket)return this.socket.emit("goto preset",t,function(e){if(!e)return console.error("Failed to goto preset",t)})},e.prototype.setPositionByClick=function(t){if(null!=this.socket)return this.socket.emit("move by click",t,function(e){if(!e)return console.error("Failed to move by click",t)})},e.prototype.setPositionByArea=function(t){if(null!=this.socket)return this.socket.emit("move by area",t,function(e){if(!e)return console.error("Failed to move by area",t)})},e.prototype.moveLeft=function(){if(null!=this.socket)return this.socket.emit("move left",null,function(t){if(!t)return console.error("Failed to move left")})},e.prototype.moveRight=function(){if(null!=this.socket)return this.socket.emit("move right",null,function(t){if(!t)return console.error("Failed to move right")})},e.prototype.moveUp=function(){if(null!=this.socket)return this.socket.emit("move up",null,function(t){if(!t)return console.error("Failed to move up")})},e.prototype.moveDown=function(){if(null!=this.socket)return this.socket.emit("move down",null,function(t){if(!t)return console.error("Failed to move down")})},e.prototype.zoomIn=function(){if(null!=this.socket)return this.socket.emit("zoom in",null,function(t){if(!t)return console.error("Failed to zoom in")})},e.prototype.zoomOut=function(){if(null!=this.socket)return this.socket.emit("zoom out",null,function(t){if(!t)return console.error("Failed to zoom out")})},t.exports=e}()},function(t,e,i){(function(e){/*!
 * Socket.IO v2.3.1
 * (c) 2014-2020 Guillermo Rauch
 * Released under the MIT License.
 */
!function(e,i){t.exports=function(){return function(t){function e(r){if(i[r])return i[r].exports;var n=i[r]={exports:{},id:r,loaded:!1};return t[r].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){function r(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var i,r=n(t),a=r.source,u=r.id,d=r.path,c=l[u]&&d in l[u].nsps;return e.forceNew||e["force new connection"]||!1===e.multiplex||c?(o("ignoring socket cache for %s",a),i=s(a,e)):(l[u]||(o("new io instance for %s",a),l[u]=s(a,e)),i=l[u]),r.query&&!e.query&&(e.query=r.query),i.socket(r.path,e)}var n=i(1),a=i(7),s=i(12),o=i(3)("socket.io-client");t.exports=e=r;var l=e.managers={};e.protocol=a.protocol,e.connect=r,e.Manager=i(12),e.Socket=i(37)},function(t,e,i){function r(t,e){var i=t;e=e||"undefined"!=typeof location&&location,null==t&&(t=e.protocol+"//"+e.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?e.protocol+t:e.host+t),/^(https?|wss?):\/\//.test(t)||(a("protocol-less url %s",t),t=void 0!==e?e.protocol+"//"+t:"https://"+t),a("parse %s",t),i=n(t)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";var r=-1!==i.host.indexOf(":"),s=r?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+s+":"+i.port,i.href=i.protocol+"://"+s+(e&&e.port===i.port?"":":"+i.port),i}var n=i(2),a=i(3)("socket.io-client:url");t.exports=r},function(t,e){function i(t,e){var i=/\/{2,9}/g,r=e.replace(i,"/").split("/");return"/"!=e.substr(0,1)&&0!==e.length||r.splice(0,1),"/"==e.substr(e.length-1,1)&&r.splice(r.length-1,1),r}function r(t,e){var i={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(t,e,r){e&&(i[e]=r)}),i}var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,a=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(t){var e=t,s=t.indexOf("["),o=t.indexOf("]");-1!=s&&-1!=o&&(t=t.substring(0,s)+t.substring(s,o).replace(/:/g,";")+t.substring(o,t.length));for(var l=n.exec(t||""),u={},d=14;d--;)u[a[d]]=l[d]||"";return-1!=s&&-1!=o&&(u.source=e,u.host=u.host.substring(1,u.host.length-1).replace(/;/g,":"),u.authority=u.authority.replace("[","").replace("]","").replace(/;/g,":"),u.ipv6uri=!0),u.pathNames=i(u,u.path),u.queryKey=r(u,u.query),u}},function(t,e,i){(function(r){"use strict";function n(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function a(t){var i=this.useColors;if(t[0]=(i?"%c":"")+this.namespace+(i?" %c":" ")+t[0]+(i?"%c ":" ")+"+"+e.humanize(this.diff),i){var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var n=0,a=0;t[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&(n++,"%c"===t&&(a=n))}),t.splice(a,0,r)}}function s(){return"object"===("undefined"==typeof console?"undefined":u(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function o(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}}function l(){var t;try{t=e.storage.debug}catch(t){}return!t&&void 0!==r&&"env"in r&&(t=r.env.DEBUG),t}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e=t.exports=i(5),e.log=s,e.formatArgs=a,e.save=o,e.load=l,e.useColors=n,e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(l())}).call(e,i(4))},function(t,e){function i(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function n(t){if(d===setTimeout)return setTimeout(t,0);if((d===i||!d)&&setTimeout)return d=setTimeout,setTimeout(t,0);try{return d(t,0)}catch(e){try{return d.call(null,t,0)}catch(e){return d.call(this,t,0)}}}function a(t){if(c===clearTimeout)return clearTimeout(t);if((c===r||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(t);try{return c(t)}catch(e){try{return c.call(null,t)}catch(e){return c.call(this,t)}}}function s(){g&&f&&(g=!1,f.length?p=f.concat(p):y=-1,p.length&&o())}function o(){if(!g){var t=n(s);g=!0;for(var e=p.length;e;){for(f=p,p=[];++y<e;)f&&f[y].run();y=-1,e=p.length}f=null,g=!1,a(t)}}function l(t,e){this.fun=t,this.array=e}function u(){}var d,c,h=t.exports={};!function(){try{d="function"==typeof setTimeout?setTimeout:i}catch(t){d=i}try{c="function"==typeof clearTimeout?clearTimeout:r}catch(t){c=r}}();var f,p=[],g=!1,y=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];p.push(new l(t,e)),1!==p.length||g||n(o)},l.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=u,h.addListener=u,h.once=u,h.off=u,h.removeListener=u,h.removeAllListeners=u,h.emit=u,h.prependListener=u,h.prependOnceListener=u,h.listeners=function(t){return[]},h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,e,i){"use strict";function r(t){var i,r=0;for(i in t)r=(r<<5)-r+t.charCodeAt(i),r|=0;return e.colors[Math.abs(r)%e.colors.length]}function n(t){function i(){if(i.enabled){var t=i,r=+new Date,a=r-(n||r);t.diff=a,t.prev=n,t.curr=r,n=r;for(var s=new Array(arguments.length),o=0;o<s.length;o++)s[o]=arguments[o];s[0]=e.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var l=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,function(i,r){if("%%"===i)return i;l++;var n=e.formatters[r];if("function"==typeof n){var a=s[l];i=n.call(t,a),s.splice(l,1),l--}return i}),e.formatArgs.call(t,s),(i.log||e.log||console.log.bind(console)).apply(t,s)}}var n;return i.namespace=t,i.enabled=e.enabled(t),i.useColors=e.useColors(),i.color=r(t),i.destroy=a,"function"==typeof e.init&&e.init(i),e.instances.push(i),i}function a(){var t=e.instances.indexOf(this);return-1!==t&&(e.instances.splice(t,1),!0)}function s(t){e.save(t),e.names=[],e.skips=[];var i,r=("string"==typeof t?t:"").split(/[\s,]+/),n=r.length;for(i=0;i<n;i++)r[i]&&(t=r[i].replace(/\*/g,".*?"),"-"===t[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")));for(i=0;i<e.instances.length;i++){var a=e.instances[i];a.enabled=e.enabled(a.namespace)}}function o(){e.enable("")}function l(t){if("*"===t[t.length-1])return!0;var i,r;for(i=0,r=e.skips.length;i<r;i++)if(e.skips[i].test(t))return!1;for(i=0,r=e.names.length;i<r;i++)if(e.names[i].test(t))return!0;return!1}function u(t){return t instanceof Error?t.stack||t.message:t}e=t.exports=n.debug=n.default=n,e.coerce=u,e.disable=o,e.enable=s,e.enabled=l,e.humanize=i(6),e.instances=[],e.names=[],e.skips=[],e.formatters={}},function(t,e){function i(t){if(t=String(t),!(t.length>100)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var i=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return i*d;case"days":case"day":case"d":return i*u;case"hours":case"hour":case"hrs":case"hr":case"h":return i*l;case"minutes":case"minute":case"mins":case"min":case"m":return i*o;case"seconds":case"second":case"secs":case"sec":case"s":return i*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}function r(t){return t>=u?Math.round(t/u)+"d":t>=l?Math.round(t/l)+"h":t>=o?Math.round(t/o)+"m":t>=s?Math.round(t/s)+"s":t+"ms"}function n(t){return a(t,u,"day")||a(t,l,"hour")||a(t,o,"minute")||a(t,s,"second")||t+" ms"}function a(t,e,i){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+i:Math.ceil(t/e)+" "+i+"s"}var s=1e3,o=60*s,l=60*o,u=24*l,d=365.25*u;t.exports=function(t,e){e=e||{};var a=typeof t;if("string"===a&&t.length>0)return i(t);if("number"===a&&!1===isNaN(t))return e.long?n(t):r(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,i){function r(){}function n(t){var i=""+t.type;if(e.BINARY_EVENT!==t.type&&e.BINARY_ACK!==t.type||(i+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(i+=t.nsp+","),null!=t.id&&(i+=t.id),null!=t.data){var r=a(t.data);if(!1===r)return v;i+=r}return h("encoded %j as %s",t,i),i}function a(t){try{return JSON.stringify(t)}catch(t){return!1}}function s(t,e){function i(t){var i=p.deconstructPacket(t),r=n(i.packet),a=i.buffers;a.unshift(r),e(a)}p.removeBlobs(t,i)}function o(){this.reconstructor=null}function l(t){var i=0,r={type:Number(t.charAt(0))};if(null==e.types[r.type])return c("unknown packet type "+r.type);if(e.BINARY_EVENT===r.type||e.BINARY_ACK===r.type){for(var n="";"-"!==t.charAt(++i)&&(n+=t.charAt(i),i!=t.length););if(n!=Number(n)||"-"!==t.charAt(i))throw new Error("Illegal attachments");r.attachments=Number(n)}if("/"===t.charAt(i+1))for(r.nsp="";++i;){var a=t.charAt(i);if(","===a)break;if(r.nsp+=a,i===t.length)break}else r.nsp="/";var s=t.charAt(i+1);if(""!==s&&Number(s)==s){for(r.id="";++i;){var a=t.charAt(i);if(null==a||Number(a)!=a){--i;break}if(r.id+=t.charAt(i),i===t.length)break}r.id=Number(r.id)}if(t.charAt(++i)){var o=u(t.substr(i));if(!1===o||r.type!==e.ERROR&&!g(o))return c("invalid payload");r.data=o}return h("decoded %s as %j",t,r),r}function u(t){try{return JSON.parse(t)}catch(t){return!1}}function d(t){this.reconPack=t,this.buffers=[]}function c(t){return{type:e.ERROR,data:"parser error: "+t}}var h=i(3)("socket.io-parser"),f=i(8),p=i(9),g=i(10),y=i(11);e.protocol=4,e.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],e.CONNECT=0,e.DISCONNECT=1,e.EVENT=2,e.ACK=3,e.ERROR=4,e.BINARY_EVENT=5,e.BINARY_ACK=6,e.Encoder=r,e.Decoder=o;var v=e.ERROR+'"encode error"';r.prototype.encode=function(t,i){h("encoding packet %j",t),e.BINARY_EVENT===t.type||e.BINARY_ACK===t.type?s(t,i):i([n(t)])},f(o.prototype),o.prototype.add=function(t){var i;if("string"==typeof t)i=l(t),e.BINARY_EVENT===i.type||e.BINARY_ACK===i.type?(this.reconstructor=new d(i),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",i)):this.emit("decoded",i);else{if(!y(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(i=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,this.emit("decoded",i))}},o.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},d.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){var e=p.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null},d.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(t,e,i){function r(t){if(t)return n(t)}function n(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},r.prototype.once=function(t,e){function i(){this.off(t,i),e.apply(this,arguments)}return i.fn=e,this.on(t,i),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i=this._callbacks["$"+t];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r,n=0;n<i.length;n++)if((r=i[n])===e||r.fn===e){i.splice(n,1);break}return 0===i.length&&delete this._callbacks["$"+t],this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),i=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(i){i=i.slice(0);for(var r=0,n=i.length;r<n;++r)i[r].apply(this,e)}return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,i){function r(t,e){if(!t)return t;if(s(t)){var i={_placeholder:!0,num:e.length};return e.push(t),i}if(a(t)){for(var n=new Array(t.length),o=0;o<t.length;o++)n[o]=r(t[o],e);return n}if("object"==typeof t&&!(t instanceof Date)){var n={};for(var l in t)n[l]=r(t[l],e);return n}return t}function n(t,e){if(!t)return t;if(t&&t._placeholder)return e[t.num];if(a(t))for(var i=0;i<t.length;i++)t[i]=n(t[i],e);else if("object"==typeof t)for(var r in t)t[r]=n(t[r],e);return t}var a=i(10),s=i(11),o=Object.prototype.toString,l="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===o.call(Blob),u="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===o.call(File);e.deconstructPacket=function(t){var e=[],i=t.data,n=t;return n.data=r(i,e),n.attachments=e.length,{packet:n,buffers:e}},e.reconstructPacket=function(t,e){return t.data=n(t.data,e),t.attachments=void 0,t},e.removeBlobs=function(t,e){function i(t,o,d){if(!t)return t;if(l&&t instanceof Blob||u&&t instanceof File){r++;var c=new FileReader;c.onload=function(){d?d[o]=this.result:n=this.result,--r||e(n)},c.readAsArrayBuffer(t)}else if(a(t))for(var h=0;h<t.length;h++)i(t[h],h,t);else if("object"==typeof t&&!s(t))for(var f in t)i(t[f],f,t)}var r=0,n=t;i(n),r||e(n)}},function(t,e){var i={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},function(t,i){function r(t){return n&&e.isBuffer(t)||a&&(t instanceof ArrayBuffer||s(t))}t.exports=r;var n="function"==typeof e&&"function"==typeof e.isBuffer,a="function"==typeof ArrayBuffer,s=function(t){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer}},function(t,e,i){function r(t,e){if(!(this instanceof r))return new r(t,e);t&&"object"==typeof t&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new h({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var i=e.parser||o;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this.autoConnect=!1!==e.autoConnect,this.autoConnect&&this.open()}var n=i(13),a=i(37),s=i(8),o=i(7),l=i(39),u=i(40),d=i(3)("socket.io-client:manager"),c=i(36),h=i(41),f=Object.prototype.hasOwnProperty;t.exports=r,r.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var t in this.nsps)f.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},r.prototype.updateSocketIds=function(){for(var t in this.nsps)f.call(this.nsps,t)&&(this.nsps[t].id=this.generateId(t))},r.prototype.generateId=function(t){return("/"===t?"":t+"#")+this.engine.id},s(r.prototype),r.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},r.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},r.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},r.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},r.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},r.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},r.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},r.prototype.open=r.prototype.connect=function(t,e){if(d("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;d("opening %s",this.uri),this.engine=n(this.uri,this.opts);var i=this.engine,r=this;this.readyState="opening",this.skipReconnect=!1;var a=l(i,"open",function(){r.onopen(),t&&t()}),s=l(i,"error",function(e){if(d("connect_error"),r.cleanup(),r.readyState="closed",r.emitAll("connect_error",e),t){var i=new Error("Connection error");i.data=e,t(i)}else r.maybeReconnectOnOpen()});if(!1!==this._timeout){var o=this._timeout;d("connect attempt will timeout after %d",o),0===o&&a.destroy();var u=setTimeout(function(){d("connect attempt timed out after %d",o),a.destroy(),i.close(),i.emit("error","timeout"),r.emitAll("connect_timeout",o)},o);this.subs.push({destroy:function(){clearTimeout(u)}})}return this.subs.push(a),this.subs.push(s),this},r.prototype.onopen=function(){d("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(l(t,"data",u(this,"ondata"))),this.subs.push(l(t,"ping",u(this,"onping"))),this.subs.push(l(t,"pong",u(this,"onpong"))),this.subs.push(l(t,"error",u(this,"onerror"))),this.subs.push(l(t,"close",u(this,"onclose"))),this.subs.push(l(this.decoder,"decoded",u(this,"ondecoded")))},r.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},r.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},r.prototype.ondata=function(t){this.decoder.add(t)},r.prototype.ondecoded=function(t){this.emit("packet",t)},r.prototype.onerror=function(t){d("error",t),this.emitAll("error",t)},r.prototype.socket=function(t,e){function i(){~c(n.connecting,r)||n.connecting.push(r)}var r=this.nsps[t];if(!r){r=new a(this,t,e),this.nsps[t]=r;var n=this;r.on("connecting",i),r.on("connect",function(){r.id=n.generateId(t)}),this.autoConnect&&i()}return r},r.prototype.destroy=function(t){var e=c(this.connecting,t);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},r.prototype.packet=function(t){d("writing packet %j",t);var e=this;t.query&&0===t.type&&(t.nsp+="?"+t.query),e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,function(i){for(var r=0;r<i.length;r++)e.engine.write(i[r],t.options);e.encoding=!1,e.processPacketQueue()}))},r.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},r.prototype.cleanup=function(){d("cleanup");for(var t=this.subs.length,e=0;e<t;e++)this.subs.shift().destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},r.prototype.close=r.prototype.disconnect=function(){d("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},r.prototype.onclose=function(t){d("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},r.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)d("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();d("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var i=setTimeout(function(){t.skipReconnect||(d("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),t.skipReconnect||t.open(function(e){e?(d("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",e.data)):(d("reconnect success"),t.onreconnect())}))},e);this.subs.push({destroy:function(){clearTimeout(i)}})}},r.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)}},function(t,e,i){t.exports=i(14),t.exports.parser=i(22)},function(t,e,i){function r(t,e){return this instanceof r?(e=e||{},t&&"object"==typeof t&&(e=t,t=null),t?(t=d(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=d(e.host).host),this.secure=null!=e.secure?e.secure:"undefined"!=typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.agent=e.agent||!1,this.hostname=e.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=e.query||{},"string"==typeof this.query&&(this.query=c.decode(this.query)),this.upgrade=!1!==e.upgrade,this.path=(e.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!e.forceJSONP,this.jsonp=!1!==e.jsonp,this.forceBase64=!!e.forceBase64,this.enablesXDR=!!e.enablesXDR,this.withCredentials=!1!==e.withCredentials,this.timestampParam=e.timestampParam||"t",this.timestampRequests=e.timestampRequests,this.transports=e.transports||["polling","websocket"],this.transportOptions=e.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=e.policyPort||843,this.rememberUpgrade=e.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=e.onlyBinaryUpgrades,this.perMessageDeflate=!1!==e.perMessageDeflate&&(e.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=e.pfx||null,this.key=e.key||null,this.passphrase=e.passphrase||null,this.cert=e.cert||null,this.ca=e.ca||null,this.ciphers=e.ciphers||null,this.rejectUnauthorized=void 0===e.rejectUnauthorized||e.rejectUnauthorized,this.forceNode=!!e.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(e.extraHeaders&&Object.keys(e.extraHeaders).length>0&&(this.extraHeaders=e.extraHeaders),e.localAddress&&(this.localAddress=e.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,void this.open()):new r(t,e)}function n(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}var a=i(15),s=i(8),o=i(3)("engine.io-client:socket"),l=i(36),u=i(22),d=i(2),c=i(30);t.exports=r,r.priorWebsocketSuccess=!1,s(r.prototype),r.protocol=u.protocol,r.Socket=r,r.Transport=i(21),r.transports=i(15),r.parser=i(22),r.prototype.createTransport=function(t){o('creating transport "%s"',t);var e=n(this.query);e.EIO=u.protocol,e.transport=t;var i=this.transportOptions[t]||{};return this.id&&(e.sid=this.id),new a[t]({query:e,socket:this,agent:i.agent||this.agent,hostname:i.hostname||this.hostname,port:i.port||this.port,secure:i.secure||this.secure,path:i.path||this.path,forceJSONP:i.forceJSONP||this.forceJSONP,jsonp:i.jsonp||this.jsonp,forceBase64:i.forceBase64||this.forceBase64,enablesXDR:i.enablesXDR||this.enablesXDR,withCredentials:i.withCredentials||this.withCredentials,timestampRequests:i.timestampRequests||this.timestampRequests,timestampParam:i.timestampParam||this.timestampParam,policyPort:i.policyPort||this.policyPort,pfx:i.pfx||this.pfx,key:i.key||this.key,passphrase:i.passphrase||this.passphrase,cert:i.cert||this.cert,ca:i.ca||this.ca,ciphers:i.ciphers||this.ciphers,rejectUnauthorized:i.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:i.perMessageDeflate||this.perMessageDeflate,extraHeaders:i.extraHeaders||this.extraHeaders,forceNode:i.forceNode||this.forceNode,localAddress:i.localAddress||this.localAddress,requestTimeout:i.requestTimeout||this.requestTimeout,protocols:i.protocols||void 0,isReactNative:this.isReactNative})},r.prototype.open=function(){var t;if(this.rememberUpgrade&&r.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length){var e=this;return void setTimeout(function(){e.emit("error","No transports available")},0)}t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},r.prototype.setTransport=function(t){o("setting transport %s",t.name);var e=this;this.transport&&(o("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",function(){e.onDrain()}).on("packet",function(t){e.onPacket(t)}).on("error",function(t){e.onError(t)}).on("close",function(){e.onClose("transport close")})},r.prototype.probe=function(t){function e(){if(h.onlyBinaryUpgrades){var e=!this.supportsBinary&&h.transport.supportsBinary;c=c||e}c||(o('probe transport "%s" opened',t),d.send([{type:"ping",data:"probe"}]),d.once("packet",function(e){if(!c)if("pong"===e.type&&"probe"===e.data){if(o('probe transport "%s" pong',t),h.upgrading=!0,h.emit("upgrading",d),!d)return;r.priorWebsocketSuccess="websocket"===d.name,o('pausing current transport "%s"',h.transport.name),h.transport.pause(function(){c||"closed"!==h.readyState&&(o("changing transport and sending upgrade packet"),u(),h.setTransport(d),d.send([{type:"upgrade"}]),h.emit("upgrade",d),d=null,h.upgrading=!1,h.flush())})}else{o('probe transport "%s" failed',t);var i=new Error("probe error");i.transport=d.name,h.emit("upgradeError",i)}}))}function i(){c||(c=!0,u(),d.close(),d=null)}function n(e){var r=new Error("probe error: "+e);r.transport=d.name,i(),o('probe transport "%s" failed because of error: %s',t,e),h.emit("upgradeError",r)}function a(){n("transport closed")}function s(){n("socket closed")}function l(t){d&&t.name!==d.name&&(o('"%s" works - aborting "%s"',t.name,d.name),i())}function u(){d.removeListener("open",e),d.removeListener("error",n),d.removeListener("close",a),h.removeListener("close",s),h.removeListener("upgrading",l)}o('probing transport "%s"',t);var d=this.createTransport(t,{probe:1}),c=!1,h=this;r.priorWebsocketSuccess=!1,d.once("open",e),d.once("error",n),d.once("close",a),this.once("close",s),this.once("upgrading",l),d.open()},r.prototype.onOpen=function(){if(o("socket open"),this.readyState="open",r.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){o("starting upgrade probes");for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}},r.prototype.onPacket=function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(o('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else o('packet received with socket readyState "%s"',this.readyState)},r.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},r.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){"closed"!==e.readyState&&e.onClose("ping timeout")},t||e.pingInterval+e.pingTimeout)},r.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){o("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)},r.prototype.ping=function(){var t=this;this.sendPacket("ping",function(){t.emit("ping")})},r.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},r.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(o("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},r.prototype.write=r.prototype.send=function(t,e,i){return this.sendPacket("message",t,e,i),this},r.prototype.sendPacket=function(t,e,i,r){if("function"==typeof e&&(r=e,e=void 0),"function"==typeof i&&(r=i,i=null),"closing"!==this.readyState&&"closed"!==this.readyState){i=i||{},i.compress=!1!==i.compress;var n={type:t,data:e,options:i};this.emit("packetCreate",n),this.writeBuffer.push(n),r&&this.once("flush",r),this.flush()}},r.prototype.close=function(){function t(){r.onClose("forced close"),o("socket closing - telling transport to close"),r.transport.close()}function e(){r.removeListener("upgrade",e),r.removeListener("upgradeError",e),t()}function i(){r.once("upgrade",e),r.once("upgradeError",e)}if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var r=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?i():t()}):this.upgrading?i():t()}return this},r.prototype.onError=function(t){o("socket error %j",t),r.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},r.prototype.onClose=function(t,e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){o('socket close with reason: "%s"',t);var i=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),i.writeBuffer=[],i.prevBufferLen=0}},r.prototype.filterUpgrades=function(t){for(var e=[],i=0,r=t.length;i<r;i++)~l(this.transports,t[i])&&e.push(t[i]);return e}},function(t,e,i){function r(t){var e=!1,i=!1,r=!1!==t.jsonp;if("undefined"!=typeof location){var o="https:"===location.protocol,l=location.port;l||(l=o?443:80),e=t.hostname!==location.hostname||l!==t.port,i=t.secure!==o}if(t.xdomain=e,t.xscheme=i,"open"in new n(t)&&!t.forceJSONP)return new a(t);if(!r)throw new Error("JSONP disabled");return new s(t)}var n=i(16),a=i(19),s=i(33),o=i(34);e.polling=r,e.websocket=o},function(t,e,i){var r=i(17),n=i(18);t.exports=function(t){var e=t.xdomain,i=t.xscheme,a=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!e||r))return new XMLHttpRequest}catch(t){}try{if("undefined"!=typeof XDomainRequest&&!i&&a)return new XDomainRequest}catch(t){}if(!e)try{return new(n[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}},function(t,e){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}},function(t,e){t.exports=function(){return"undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()}()},function(t,e,i){function r(){}function n(t){if(l.call(this,t),this.requestTimeout=t.requestTimeout,this.extraHeaders=t.extraHeaders,"undefined"!=typeof location){var e="https:"===location.protocol,i=location.port;i||(i=e?443:80),this.xd="undefined"!=typeof location&&t.hostname!==location.hostname||i!==t.port,this.xs=t.secure!==e}}function a(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.withCredentials=t.withCredentials,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}function s(){for(var t in a.requests)a.requests.hasOwnProperty(t)&&a.requests[t].abort()}var o=i(16),l=i(20),u=i(8),d=i(31),c=i(3)("engine.io-client:polling-xhr"),h=i(18);if(t.exports=n,t.exports.Request=a,d(n,l),n.prototype.supportsBinary=!0,n.prototype.request=function(t){return t=t||{},t.uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.withCredentials=this.withCredentials,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new a(t)},n.prototype.doWrite=function(t,e){var i="string"!=typeof t&&void 0!==t,r=this.request({method:"POST",data:t,isBinary:i}),n=this;r.on("success",e),r.on("error",function(t){n.onError("xhr post error",t)}),this.sendXhr=r},n.prototype.doPoll=function(){c("xhr poll");var t=this.request(),e=this;t.on("data",function(t){e.onData(t)}),t.on("error",function(t){e.onError("xhr poll error",t)}),this.pollXhr=t},u(a.prototype),a.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var e=this.xhr=new o(t),i=this;try{c("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async);try{if(this.extraHeaders){e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0);for(var r in this.extraHeaders)this.extraHeaders.hasOwnProperty(r)&&e.setRequestHeader(r,this.extraHeaders[r])}}catch(t){}if("POST"===this.method)try{this.isBinary?e.setRequestHeader("Content-type","application/octet-stream"):e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{e.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in e&&(e.withCredentials=this.withCredentials),this.requestTimeout&&(e.timeout=this.requestTimeout),this.hasXDR()?(e.onload=function(){i.onLoad()},e.onerror=function(){i.onError(e.responseText)}):e.onreadystatechange=function(){if(2===e.readyState)try{var t=e.getResponseHeader("Content-Type");(i.supportsBinary&&"application/octet-stream"===t||"application/octet-stream; charset=UTF-8"===t)&&(e.responseType="arraybuffer")}catch(t){}4===e.readyState&&(200===e.status||1223===e.status?i.onLoad():setTimeout(function(){i.onError("number"==typeof e.status?e.status:0)},0))},c("xhr data %s",this.data),e.send(this.data)}catch(t){return void setTimeout(function(){i.onError(t)},0)}"undefined"!=typeof document&&(this.index=a.requestsCount++,a.requests[this.index]=this)},a.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},a.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},a.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},a.prototype.cleanup=function(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=r:this.xhr.onreadystatechange=r,t)try{this.xhr.abort()}catch(t){}"undefined"!=typeof document&&delete a.requests[this.index],this.xhr=null}},a.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type")}catch(t){}t="application/octet-stream"===e||"application/octet-stream; charset=UTF-8"===e?this.xhr.response||this.xhr.responseText:this.xhr.responseText}catch(t){this.onError(t)}null!=t&&this.onData(t)},a.prototype.hasXDR=function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR},a.prototype.abort=function(){this.cleanup()},a.requestsCount=0,a.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",s);else if("function"==typeof addEventListener){var f="onpagehide"in h?"pagehide":"unload";addEventListener(f,s,!1)}},function(t,e,i){function r(t){var e=t&&t.forceBase64;d&&!e||(this.supportsBinary=!1),n.call(this,t)}var n=i(21),a=i(30),s=i(22),o=i(31),l=i(32),u=i(3)("engine.io-client:polling");t.exports=r;var d=function(){return null!=new(i(16))({xdomain:!1}).responseType}();o(r,n),r.prototype.name="polling",r.prototype.doOpen=function(){this.poll()},r.prototype.pause=function(t){function e(){u("paused"),i.readyState="paused",t()}var i=this;if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(u("we are currently polling - waiting to pause"),r++,this.once("pollComplete",function(){u("pre-pause polling complete"),--r||e()})),this.writable||(u("we are currently writing - waiting to pause"),r++,this.once("drain",function(){u("pre-pause writing complete"),--r||e()}))}else e()},r.prototype.poll=function(){u("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},r.prototype.onData=function(t){var e=this;u("polling got data %s",t);var i=function(t,i,r){return"opening"===e.readyState&&e.onOpen(),"close"===t.type?(e.onClose(),!1):void e.onPacket(t)};s.decodePayload(t,this.socket.binaryType,i),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():u('ignoring poll - transport state "%s"',this.readyState))},r.prototype.doClose=function(){function t(){u("writing close packet"),e.write([{type:"close"}])}var e=this;"open"===this.readyState?(u("transport open - closing"),t()):(u("transport not open - deferring close"),this.once("open",t))},r.prototype.write=function(t){var e=this;this.writable=!1;var i=function(){e.writable=!0,e.emit("drain")};s.encodePayload(t,this.supportsBinary,function(t){e.doWrite(t,i)})},r.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",i="";return!1!==this.timestampRequests&&(t[this.timestampParam]=l()),this.supportsBinary||t.sid||(t.b64=1),t=a.encode(t),this.port&&("https"===e&&443!==Number(this.port)||"http"===e&&80!==Number(this.port))&&(i=":"+this.port),t.length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+i+this.path+t}},function(t,e,i){function r(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.withCredentials=t.withCredentials,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.forceNode=t.forceNode,this.isReactNative=t.isReactNative,this.extraHeaders=t.extraHeaders,this.localAddress=t.localAddress}var n=i(22),a=i(8);t.exports=r,a(r.prototype),r.prototype.onError=function(t,e){var i=new Error(t);return i.type="TransportError",i.description=e,this.emit("error",i),this},r.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},r.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},r.prototype.send=function(t){if("open"!==this.readyState)throw new Error("Transport not open");this.write(t)},r.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},r.prototype.onData=function(t){var e=n.decodePacket(t,this.socket.binaryType);this.onPacket(e)},r.prototype.onPacket=function(t){this.emit("packet",t)},r.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(t,e,i){function r(t,i){return i("b"+e.packets[t.type]+t.data.data)}function n(t,i,r){if(!i)return e.encodeBase64Packet(t,r);var n=t.data,a=new Uint8Array(n),s=new Uint8Array(1+n.byteLength);s[0]=m[t.type];for(var o=0;o<a.length;o++)s[o+1]=a[o];return r(s.buffer)}function a(t,i,r){if(!i)return e.encodeBase64Packet(t,r);var n=new FileReader;return n.onload=function(){e.encodePacket({type:t.type,data:n.result},i,!0,r)},n.readAsArrayBuffer(t.data)}function s(t,i,r){if(!i)return e.encodeBase64Packet(t,r);if(v)return a(t,i,r);var n=new Uint8Array(1);return n[0]=m[t.type],r(new T([n.buffer,t.data]))}function o(t){try{t=p.decode(t,{strict:!1})}catch(t){return!1}return t}function l(t,e,i){for(var r=new Array(t.length),n=f(t.length,i),a=0;a<t.length;a++)!function(t,i,n){e(i,function(e,i){r[t]=i,n(e,r)})}(a,t[a],n)}var u,d=i(23),c=i(24),h=i(25),f=i(26),p=i(27);"undefined"!=typeof ArrayBuffer&&(u=i(28));var g="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),y="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),v=g||y;e.protocol=3;var m=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},L=d(m),w={type:"error",data:"parser error"},T=i(29);e.encodePacket=function(t,e,i,a){"function"==typeof e&&(a=e,e=!1),"function"==typeof i&&(a=i,i=null);var o=void 0===t.data?void 0:t.data.buffer||t.data;if("undefined"!=typeof ArrayBuffer&&o instanceof ArrayBuffer)return n(t,e,a);if(void 0!==T&&o instanceof T)return s(t,e,a);if(o&&o.base64)return r(t,a);var l=m[t.type];return void 0!==t.data&&(l+=i?p.encode(String(t.data),{strict:!1}):String(t.data)),a(""+l)},e.encodeBase64Packet=function(t,i){var r="b"+e.packets[t.type];if(void 0!==T&&t.data instanceof T){var n=new FileReader;return n.onload=function(){var t=n.result.split(",")[1];i(r+t)},n.readAsDataURL(t.data)}var a;try{a=String.fromCharCode.apply(null,new Uint8Array(t.data))}catch(e){for(var s=new Uint8Array(t.data),o=new Array(s.length),l=0;l<s.length;l++)o[l]=s[l];a=String.fromCharCode.apply(null,o)}return r+=btoa(a),i(r)},e.decodePacket=function(t,i,r){if(void 0===t)return w;if("string"==typeof t){if("b"===t.charAt(0))return e.decodeBase64Packet(t.substr(1),i);if(r&&!1===(t=o(t)))return w;var n=t.charAt(0);return Number(n)==n&&L[n]?t.length>1?{type:L[n],data:t.substring(1)}:{type:L[n]}:w}var a=new Uint8Array(t),n=a[0],s=h(t,1);return T&&"blob"===i&&(s=new T([s])),{type:L[n],data:s}},e.decodeBase64Packet=function(t,e){var i=L[t.charAt(0)];if(!u)return{type:i,data:{base64:!0,data:t.substr(1)}};var r=u.decode(t.substr(1));return"blob"===e&&T&&(r=new T([r])),{type:i,data:r}},e.encodePayload=function(t,i,r){function n(t){return t.length+":"+t}function a(t,r){e.encodePacket(t,!!s&&i,!1,function(t){r(null,n(t))})}"function"==typeof i&&(r=i,i=null);var s=c(t);return i&&s?T&&!v?e.encodePayloadAsBlob(t,r):e.encodePayloadAsArrayBuffer(t,r):t.length?void l(t,a,function(t,e){return r(e.join(""))}):r("0:")},e.decodePayload=function(t,i,r){if("string"!=typeof t)return e.decodePayloadAsBinary(t,i,r);"function"==typeof i&&(r=i,i=null);var n;if(""===t)return r(w,0,1);for(var a,s,o="",l=0,u=t.length;l<u;l++){var d=t.charAt(l);if(":"===d){if(""===o||o!=(a=Number(o)))return r(w,0,1);if(s=t.substr(l+1,a),o!=s.length)return r(w,0,1);if(s.length){if(n=e.decodePacket(s,i,!1),w.type===n.type&&w.data===n.data)return r(w,0,1);if(!1===r(n,l+a,u))return}l+=a,o=""}else o+=d}return""!==o?r(w,0,1):void 0},e.encodePayloadAsArrayBuffer=function(t,i){function r(t,i){e.encodePacket(t,!0,!0,function(t){return i(null,t)})}return t.length?void l(t,r,function(t,e){var r=e.reduce(function(t,e){var i;return i="string"==typeof e?e.length:e.byteLength,t+i.toString().length+i+2},0),n=new Uint8Array(r),a=0;return e.forEach(function(t){var e="string"==typeof t,i=t;if(e){for(var r=new Uint8Array(t.length),s=0;s<t.length;s++)r[s]=t.charCodeAt(s);i=r.buffer}n[a++]=e?0:1;for(var o=i.byteLength.toString(),s=0;s<o.length;s++)n[a++]=parseInt(o[s]);n[a++]=255;for(var r=new Uint8Array(i),s=0;s<r.length;s++)n[a++]=r[s]}),i(n.buffer)}):i(new ArrayBuffer(0))},e.encodePayloadAsBlob=function(t,i){function r(t,i){e.encodePacket(t,!0,!0,function(t){var e=new Uint8Array(1);if(e[0]=1,"string"==typeof t){for(var r=new Uint8Array(t.length),n=0;n<t.length;n++)r[n]=t.charCodeAt(n);t=r.buffer,e[0]=0}for(var a=t instanceof ArrayBuffer?t.byteLength:t.size,s=a.toString(),o=new Uint8Array(s.length+1),n=0;n<s.length;n++)o[n]=parseInt(s[n]);if(o[s.length]=255,T){var l=new T([e.buffer,o.buffer,t]);i(null,l)}})}l(t,r,function(t,e){return i(new T(e))})},e.decodePayloadAsBinary=function(t,i,r){"function"==typeof i&&(r=i,i=null);for(var n=t,a=[];n.byteLength>0;){for(var s=new Uint8Array(n),o=0===s[0],l="",u=1;255!==s[u];u++){if(l.length>310)return r(w,0,1);l+=s[u]}n=h(n,2+l.length),l=parseInt(l);var d=h(n,0,l);if(o)try{d=String.fromCharCode.apply(null,new Uint8Array(d))}catch(t){var c=new Uint8Array(d);d="";for(var u=0;u<c.length;u++)d+=String.fromCharCode(c[u])}a.push(d),n=h(n,l)}var f=a.length;a.forEach(function(t,n){r(e.decodePacket(t,i,!0),n,f)})}},function(t,e){t.exports=Object.keys||function(t){var e=[],i=Object.prototype.hasOwnProperty;for(var r in t)i.call(t,r)&&e.push(r);return e}},function(t,i,r){function n(t){if(!t||"object"!=typeof t)return!1;if(a(t)){for(var i=0,r=t.length;i<r;i++)if(n(t[i]))return!0;return!1}if("function"==typeof e&&e.isBuffer&&e.isBuffer(t)||"function"==typeof ArrayBuffer&&t instanceof ArrayBuffer||o&&t instanceof Blob||l&&t instanceof File)return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return n(t.toJSON(),!0);for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&n(t[s]))return!0;return!1}var a=r(10),s=Object.prototype.toString,o="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===s.call(Blob),l="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===s.call(File);t.exports=n},function(t,e){t.exports=function(t,e,i){var r=t.byteLength;if(e=e||0,i=i||r,t.slice)return t.slice(e,i);if(e<0&&(e+=r),i<0&&(i+=r),i>r&&(i=r),e>=r||e>=i||0===r)return new ArrayBuffer(0);for(var n=new Uint8Array(t),a=new Uint8Array(i-e),s=e,o=0;s<i;s++,o++)a[o]=n[s];return a.buffer}},function(t,e){function i(t,e,i){function n(t,r){if(n.count<=0)throw new Error("after called too many times");--n.count,t?(a=!0,e(t),e=i):0!==n.count||a||e(null,r)}var a=!1;return i=i||r,n.count=t,0===t?e():n}function r(){}t.exports=i},function(t,e){function i(t){for(var e,i,r=[],n=0,a=t.length;n<a;)e=t.charCodeAt(n++),e>=55296&&e<=56319&&n<a?(i=t.charCodeAt(n++),56320==(64512&i)?r.push(((1023&e)<<10)+(1023&i)+65536):(r.push(e),n--)):r.push(e);return r}function r(t){for(var e,i=t.length,r=-1,n="";++r<i;)e=t[r],e>65535&&(e-=65536,n+=p(e>>>10&1023|55296),e=56320|1023&e),n+=p(e);return n}function n(t,e){if(t>=55296&&t<=57343){if(e)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function a(t,e){return p(t>>e&63|128)}function s(t,e){if(0==(4294967168&t))return p(t);var i="";return 0==(4294965248&t)?i=p(t>>6&31|192):0==(4294901760&t)?(n(t,e)||(t=65533),i=p(t>>12&15|224),i+=a(t,6)):0==(4292870144&t)&&(i=p(t>>18&7|240),i+=a(t,12),i+=a(t,6)),i+=p(63&t|128)}function o(t,e){e=e||{};for(var r,n=!1!==e.strict,a=i(t),o=a.length,l=-1,u="";++l<o;)r=a[l],u+=s(r,n);return u}function l(){if(f>=h)throw Error("Invalid byte index");var t=255&c[f];if(f++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function u(t){var e,i,r,a,s;if(f>h)throw Error("Invalid byte index");if(f==h)return!1;if(e=255&c[f],f++,0==(128&e))return e;if(192==(224&e)){if(i=l(),(s=(31&e)<<6|i)>=128)return s;throw Error("Invalid continuation byte")}if(224==(240&e)){if(i=l(),r=l(),(s=(15&e)<<12|i<<6|r)>=2048)return n(s,t)?s:65533;throw Error("Invalid continuation byte")}if(240==(248&e)&&(i=l(),r=l(),a=l(),(s=(7&e)<<18|i<<12|r<<6|a)>=65536&&s<=1114111))return s;throw Error("Invalid UTF-8 detected")}function d(t,e){e=e||{};var n=!1!==e.strict;c=i(t),h=c.length,f=0;for(var a,s=[];!1!==(a=u(n));)s.push(a);return r(s)}/*! https://mths.be/utf8js v2.1.2 by @mathias */
var c,h,f,p=String.fromCharCode;t.exports={version:"2.1.2",encode:o,decode:d}},function(t,e){!function(t){"use strict";e.encode=function(e){var i,r=new Uint8Array(e),n=r.length,a="";for(i=0;i<n;i+=3)a+=t[r[i]>>2],a+=t[(3&r[i])<<4|r[i+1]>>4],a+=t[(15&r[i+1])<<2|r[i+2]>>6],a+=t[63&r[i+2]];return n%3==2?a=a.substring(0,a.length-1)+"=":n%3==1&&(a=a.substring(0,a.length-2)+"=="),a},e.decode=function(e){var i,r,n,a,s,o=.75*e.length,l=e.length,u=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var d=new ArrayBuffer(o),c=new Uint8Array(d);for(i=0;i<l;i+=4)r=t.indexOf(e[i]),n=t.indexOf(e[i+1]),a=t.indexOf(e[i+2]),s=t.indexOf(e[i+3]),c[u++]=r<<2|n>>4,c[u++]=(15&n)<<4|a>>2,c[u++]=(3&a)<<6|63&s;return d}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},function(t,e){function i(t){return t.map(function(t){if(t.buffer instanceof ArrayBuffer){var e=t.buffer;if(t.byteLength!==e.byteLength){var i=new Uint8Array(t.byteLength);i.set(new Uint8Array(e,t.byteOffset,t.byteLength)),e=i.buffer}return e}return t})}function r(t,e){e=e||{};var r=new a;return i(t).forEach(function(t){r.append(t)}),e.type?r.getBlob(e.type):r.getBlob()}function n(t,e){return new Blob(i(t),e||{})}var a=void 0!==a?a:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,s=function(){try{return 2===new Blob(["hi"]).size}catch(t){return!1}}(),o=s&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(t){return!1}}(),l=a&&a.prototype.append&&a.prototype.getBlob;"undefined"!=typeof Blob&&(r.prototype=Blob.prototype,n.prototype=Blob.prototype),t.exports=function(){return s?o?Blob:n:l?r:void 0}()},function(t,e){e.encode=function(t){var e="";for(var i in t)t.hasOwnProperty(i)&&(e.length&&(e+="&"),e+=encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return e},e.decode=function(t){for(var e={},i=t.split("&"),r=0,n=i.length;r<n;r++){var a=i[r].split("=");e[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return e}},function(t,e){t.exports=function(t,e){var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},function(t,e){"use strict";function i(t){var e="";do{e=s[t%o]+e,t=Math.floor(t/o)}while(t>0);return e}function r(t){var e=0;for(d=0;d<t.length;d++)e=e*o+l[t.charAt(d)];return e}function n(){var t=i(+new Date);return t!==a?(u=0,a=t):t+"."+i(u++)}for(var a,s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),o=64,l={},u=0,d=0;d<o;d++)l[s[d]]=d;n.encode=i,n.decode=r,t.exports=n},function(t,e,i){function r(){}function n(t){a.call(this,t),this.query=this.query||{},l||(l=o.___eio=o.___eio||[]),this.index=l.length;var e=this;l.push(function(t){e.onData(t)}),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",function(){e.script&&(e.script.onerror=r)},!1)}var a=i(20),s=i(31),o=i(18);t.exports=n;var l,u=/\n/g,d=/\\n/g;s(n,a),n.prototype.supportsBinary=!1,n.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),a.prototype.doClose.call(this)},n.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var i=document.getElementsByTagName("script")[0];i?i.parentNode.insertBefore(e,i):(document.head||document.body).appendChild(e),this.script=e,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)},100)},n.prototype.doWrite=function(t,e){function i(){r(),e()}function r(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(t){n.onError("jsonp polling iframe removal error",t)}try{var t='<iframe src="javascript:0" name="'+n.iframeId+'">';a=document.createElement(t)}catch(t){a=document.createElement("iframe"),a.name=n.iframeId,a.src="javascript:0"}a.id=n.iframeId,n.form.appendChild(a),n.iframe=a}var n=this;if(!this.form){var a,s=document.createElement("form"),o=document.createElement("textarea"),l=this.iframeId="eio_iframe_"+this.index;s.className="socketio",s.style.position="absolute",s.style.top="-1000px",s.style.left="-1000px",s.target=l,s.method="POST",s.setAttribute("accept-charset","utf-8"),o.name="d",s.appendChild(o),document.body.appendChild(s),this.form=s,this.area=o}this.form.action=this.uri(),r(),t=t.replace(d,"\\\n"),this.area.value=t.replace(u,"\\n");try{this.form.submit()}catch(t){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===n.iframe.readyState&&i()}:this.iframe.onload=i}},function(t,i,r){function n(t){t&&t.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=a&&!t.forceNode,this.protocols=t.protocols,this.usingBrowserWebSocket||(f=s),o.call(this,t)}var a,s,o=r(21),l=r(22),u=r(30),d=r(31),c=r(32),h=r(3)("engine.io-client:websocket");if("undefined"!=typeof WebSocket?a=WebSocket:"undefined"!=typeof self&&(a=self.WebSocket||self.MozWebSocket),"undefined"==typeof window)try{s=r(35)}catch(t){}var f=a||s;t.exports=n,d(n,o),n.prototype.name="websocket",n.prototype.supportsBinary=!0,n.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=this.protocols,i={};this.isReactNative||(i.agent=this.agent,i.perMessageDeflate=this.perMessageDeflate,i.pfx=this.pfx,i.key=this.key,i.passphrase=this.passphrase,i.cert=this.cert,i.ca=this.ca,i.ciphers=this.ciphers,i.rejectUnauthorized=this.rejectUnauthorized),this.extraHeaders&&(i.headers=this.extraHeaders),this.localAddress&&(i.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?e?new f(t,e):new f(t):new f(t,e,i)}catch(t){return this.emit("error",t)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},n.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},n.prototype.write=function(t){function i(){r.emit("flush"),setTimeout(function(){r.writable=!0,r.emit("drain")},0)}var r=this;this.writable=!1;for(var n=t.length,a=0,s=n;a<s;a++)!function(t){l.encodePacket(t,r.supportsBinary,function(a){if(!r.usingBrowserWebSocket){var s={};t.options&&(s.compress=t.options.compress),r.perMessageDeflate&&("string"==typeof a?e.byteLength(a):a.length)<r.perMessageDeflate.threshold&&(s.compress=!1)}try{r.usingBrowserWebSocket?r.ws.send(a):r.ws.send(a,s)}catch(t){h("websocket closed before onclose event")}--n||i()})}(t[a])},n.prototype.onClose=function(){o.prototype.onClose.call(this)},n.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},n.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",i="";return this.port&&("wss"===e&&443!==Number(this.port)||"ws"===e&&80!==Number(this.port))&&(i=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=c()),this.supportsBinary||(t.b64=1),t=u.encode(t),t.length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+i+this.path+t},n.prototype.check=function(){return!(!f||"__initialize"in f&&this.name===n.prototype.name)}},function(t,e){},function(t,e){var i=[].indexOf;t.exports=function(t,e){if(i)return t.indexOf(e);for(var r=0;r<t.length;++r)if(t[r]===e)return r;return-1}},function(t,e,i){function r(t,e,i){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},i&&i.query&&(this.query=i.query),this.io.autoConnect&&this.open()}var n=i(7),a=i(8),s=i(38),o=i(39),l=i(40),u=i(3)("socket.io-client:socket"),d=i(30),c=i(24);t.exports=r;var h={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},f=a.prototype.emit;a(r.prototype),r.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[o(t,"open",l(this,"onopen")),o(t,"packet",l(this,"onpacket")),o(t,"close",l(this,"onclose"))]}},r.prototype.open=r.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.reconnecting||this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},r.prototype.send=function(){var t=s(arguments);return t.unshift("message"),this.emit.apply(this,t),this},r.prototype.emit=function(t){if(h.hasOwnProperty(t))return f.apply(this,arguments),this;var e=s(arguments),i={type:(void 0!==this.flags.binary?this.flags.binary:c(e))?n.BINARY_EVENT:n.EVENT,data:e};return i.options={},i.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(u("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),i.id=this.ids++),this.connected?this.packet(i):this.sendBuffer.push(i),this.flags={},this},r.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},r.prototype.onopen=function(){if(u("transport is open - connecting"),"/"!==this.nsp)if(this.query){var t="object"==typeof this.query?d.encode(this.query):this.query;u("sending connect packet with query %s",t),this.packet({type:n.CONNECT,query:t})}else this.packet({type:n.CONNECT})},r.prototype.onclose=function(t){u("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},r.prototype.onpacket=function(t){var e=t.nsp===this.nsp,i=t.type===n.ERROR&&"/"===t.nsp;if(e||i)switch(t.type){case n.CONNECT:this.onconnect();break;case n.EVENT:case n.BINARY_EVENT:this.onevent(t);break;case n.ACK:case n.BINARY_ACK:this.onack(t);break;case n.DISCONNECT:this.ondisconnect();break;case n.ERROR:this.emit("error",t.data)}},r.prototype.onevent=function(t){var e=t.data||[];u("emitting event %j",e),null!=t.id&&(u("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?f.apply(this,e):this.receiveBuffer.push(e)},r.prototype.ack=function(t){var e=this,i=!1;return function(){if(!i){i=!0;var r=s(arguments);u("sending ack %j",r),e.packet({type:c(r)?n.BINARY_ACK:n.ACK,id:t,data:r})}}},r.prototype.onack=function(t){var e=this.acks[t.id];"function"==typeof e?(u("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):u("bad ack %s",t.id)},r.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},r.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)f.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},r.prototype.ondisconnect=function(){u("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},r.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},r.prototype.close=r.prototype.disconnect=function(){return this.connected&&(u("performing disconnect (%s)",this.nsp),this.packet({type:n.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},r.prototype.compress=function(t){return this.flags.compress=t,this},r.prototype.binary=function(t){return this.flags.binary=t,this}},function(t,e){function i(t,e){var i=[];e=e||0;for(var r=e||0;r<t.length;r++)i[r-e]=t[r];return i}t.exports=i},function(t,e){function i(t,e,i){return t.on(e,i),{destroy:function(){t.removeListener(e,i)}}}t.exports=i},function(t,e){var i=[].slice;t.exports=function(t,e){if("string"==typeof e&&(e=t[e]),"function"!=typeof e)throw new Error("bind() requires a function");var r=i.call(arguments,2);return function(){return e.apply(t,r.concat(i.call(arguments)))}}},function(t,e){function i(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=i,i.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),i=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-i:t+i}return 0|Math.min(t,this.max)},i.prototype.reset=function(){this.attempts=0},i.prototype.setMin=function(t){this.ms=t},i.prototype.setMax=function(t){this.max=t},i.prototype.setJitter=function(t){this.jitter=t}}])}()}()}).call(e,i(90).Buffer)},function(t,e,i){"use strict";(function(t){function r(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function n(t,e){if(r()<e)throw new RangeError("Invalid typed array length");return a.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=a.prototype):(null===t&&(t=new a(e)),t.length=e),t}function a(t,e,i){if(!(a.TYPED_ARRAY_SUPPORT||this instanceof a))return new a(t,e,i);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return u(this,t)}return s(this,t,e,i)}function s(t,e,i,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?h(t,e,i,r):"string"==typeof e?d(t,e,i):f(t,e)}function o(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function l(t,e,i,r){return o(e),e<=0?n(t,e):void 0!==i?"string"==typeof r?n(t,e).fill(i,r):n(t,e).fill(i):n(t,e)}function u(t,e){if(o(e),t=n(t,e<0?0:0|p(e)),!a.TYPED_ARRAY_SUPPORT)for(var i=0;i<e;++i)t[i]=0;return t}function d(t,e,i){if("string"==typeof i&&""!==i||(i="utf8"),!a.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var r=0|y(e,i);t=n(t,r);var s=t.write(e,i);return s!==r&&(t=t.slice(0,s)),t}function c(t,e){var i=e.length<0?0:0|p(e.length);t=n(t,i);for(var r=0;r<i;r+=1)t[r]=255&e[r];return t}function h(t,e,i,r){if(e.byteLength,i<0||e.byteLength<i)throw new RangeError("'offset' is out of bounds");if(e.byteLength<i+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===i&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,i):new Uint8Array(e,i,r),a.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=a.prototype):t=c(t,e),t}function f(t,e){if(a.isBuffer(e)){var i=0|p(e.length);return t=n(t,i),0===t.length?t:(e.copy(t,0,0,i),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||Q(e.length)?n(t,0):c(t,e);if("Buffer"===e.type&&Z(e.data))return c(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function p(t){if(t>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|t}function g(t){return+t!=t&&(t=0),a.alloc(+t)}function y(t,e){if(a.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var i=t.length;if(0===i)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return H(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return W(t).length;default:if(r)return H(t).length;e=(""+e).toLowerCase(),r=!0}}function v(t,e,i){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if(i>>>=0,e>>>=0,i<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return R(this,e,i);case"utf8":case"utf-8":return _(this,e,i);case"ascii":return k(this,e,i);case"latin1":case"binary":return D(this,e,i);case"base64":return A(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,e,i);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function m(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function L(t,e,i,r,n){if(0===t.length)return-1;if("string"==typeof i?(r=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=n?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(n)return-1;i=t.length-1}else if(i<0){if(!n)return-1;i=0}if("string"==typeof e&&(e=a.from(e,r)),a.isBuffer(e))return 0===e.length?-1:w(t,e,i,r,n);if("number"==typeof e)return e&=255,a.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):w(t,[e],i,r,n);throw new TypeError("val must be string, number or Buffer")}function w(t,e,i,r,n){function a(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}var s=1,o=t.length,l=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,o/=2,l/=2,i/=2}var u;if(n){var d=-1;for(u=i;u<o;u++)if(a(t,u)===a(e,-1===d?0:u-d)){if(-1===d&&(d=u),u-d+1===l)return d*s}else-1!==d&&(u-=u-d),d=-1}else for(i+l>o&&(i=o-l),u=i;u>=0;u--){for(var c=!0,h=0;h<l;h++)if(a(t,u+h)!==a(e,h)){c=!1;break}if(c)return u}return-1}function T(t,e,i,r){i=Number(i)||0;var n=t.length-i;r?(r=Number(r))>n&&(r=n):r=n;var a=e.length;if(a%2!=0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var s=0;s<r;++s){var o=parseInt(e.substr(2*s,2),16);if(isNaN(o))return s;t[i+s]=o}return s}function E(t,e,i,r){return q(H(e,t.length-i),t,i,r)}function b(t,e,i,r){return q(K(e),t,i,r)}function M(t,e,i,r){return b(t,e,i,r)}function S(t,e,i,r){return q(W(e),t,i,r)}function C(t,e,i,r){return q(V(e,t.length-i),t,i,r)}function A(t,e,i){return 0===e&&i===t.length?X.fromByteArray(t):X.fromByteArray(t.slice(e,i))}function _(t,e,i){i=Math.min(t.length,i);for(var r=[],n=e;n<i;){var a=t[n],s=null,o=a>239?4:a>223?3:a>191?2:1;if(n+o<=i){var l,u,d,c;switch(o){case 1:a<128&&(s=a);break;case 2:128==(192&(l=t[n+1]))&&(c=(31&a)<<6|63&l)>127&&(s=c);break;case 3:l=t[n+1],u=t[n+2],128==(192&l)&&128==(192&u)&&(c=(15&a)<<12|(63&l)<<6|63&u)>2047&&(c<55296||c>57343)&&(s=c);break;case 4:l=t[n+1],u=t[n+2],d=t[n+3],128==(192&l)&&128==(192&u)&&128==(192&d)&&(c=(15&a)<<18|(63&l)<<12|(63&u)<<6|63&d)>65535&&c<1114112&&(s=c)}}null===s?(s=65533,o=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),n+=o}return x(r)}function x(t){var e=t.length;if(e<=$)return String.fromCharCode.apply(String,t);for(var i="",r=0;r<e;)i+=String.fromCharCode.apply(String,t.slice(r,r+=$));return i}function k(t,e,i){var r="";i=Math.min(t.length,i);for(var n=e;n<i;++n)r+=String.fromCharCode(127&t[n]);return r}function D(t,e,i){var r="";i=Math.min(t.length,i);for(var n=e;n<i;++n)r+=String.fromCharCode(t[n]);return r}function R(t,e,i){var r=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>r)&&(i=r);for(var n="",a=e;a<i;++a)n+=G(t[a]);return n}function N(t,e,i){for(var r=t.slice(e,i),n="",a=0;a<r.length;a+=2)n+=String.fromCharCode(r[a]+256*r[a+1]);return n}function I(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function j(t,e,i,r,n,s){if(!a.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<s)throw new RangeError('"value" argument is out of bounds');if(i+r>t.length)throw new RangeError("Index out of range")}function O(t,e,i,r){e<0&&(e=65535+e+1);for(var n=0,a=Math.min(t.length-i,2);n<a;++n)t[i+n]=(e&255<<8*(r?n:1-n))>>>8*(r?n:1-n)}function P(t,e,i,r){e<0&&(e=4294967295+e+1);for(var n=0,a=Math.min(t.length-i,4);n<a;++n)t[i+n]=e>>>8*(r?n:3-n)&255}function F(t,e,i,r,n,a){if(i+r>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function U(t,e,i,r,n){return n||F(t,e,i,4,3.4028234663852886e38,-3.4028234663852886e38),J.write(t,e,i,r,23,4),i+4}function B(t,e,i,r,n){return n||F(t,e,i,8,1.7976931348623157e308,-1.7976931348623157e308),J.write(t,e,i,r,52,8),i+8}function z(t){if(t=Y(t).replace(tt,""),t.length<2)return"";for(;t.length%4!=0;)t+="=";return t}function Y(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function G(t){return t<16?"0"+t.toString(16):t.toString(16)}function H(t,e){e=e||1/0;for(var i,r=t.length,n=null,a=[],s=0;s<r;++s){if((i=t.charCodeAt(s))>55295&&i<57344){if(!n){if(i>56319){(e-=3)>-1&&a.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&a.push(239,191,189);continue}n=i;continue}if(i<56320){(e-=3)>-1&&a.push(239,191,189),n=i;continue}i=65536+(n-55296<<10|i-56320)}else n&&(e-=3)>-1&&a.push(239,191,189);if(n=null,i<128){if((e-=1)<0)break;a.push(i)}else if(i<2048){if((e-=2)<0)break;a.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;a.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;a.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return a}function K(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}function V(t,e){for(var i,r,n,a=[],s=0;s<t.length&&!((e-=2)<0);++s)i=t.charCodeAt(s),r=i>>8,n=i%256,a.push(n),a.push(r);return a}function W(t){return X.toByteArray(z(t))}function q(t,e,i,r){for(var n=0;n<r&&!(n+i>=e.length||n>=t.length);++n)e[n+i]=t[n];return n}function Q(t){return t!==t}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var X=i(91),J=i(92),Z=i(93);e.Buffer=a,e.SlowBuffer=g,e.INSPECT_MAX_BYTES=50,a.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=r(),a.poolSize=8192,a._augment=function(t){return t.__proto__=a.prototype,t},a.from=function(t,e,i){return s(null,t,e,i)},a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0})),a.alloc=function(t,e,i){return l(null,t,e,i)},a.allocUnsafe=function(t){return u(null,t)},a.allocUnsafeSlow=function(t){return u(null,t)},a.isBuffer=function(t){return!(null==t||!t._isBuffer)},a.compare=function(t,e){if(!a.isBuffer(t)||!a.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var i=t.length,r=e.length,n=0,s=Math.min(i,r);n<s;++n)if(t[n]!==e[n]){i=t[n],r=e[n];break}return i<r?-1:r<i?1:0},a.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(t,e){if(!Z(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return a.alloc(0);var i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;var r=a.allocUnsafe(e),n=0;for(i=0;i<t.length;++i){var s=t[i];if(!a.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,n),n+=s.length}return r},a.byteLength=y,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},a.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},a.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},a.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?_(this,0,t):v.apply(this,arguments)},a.prototype.equals=function(t){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===a.compare(this,t)},a.prototype.inspect=function(){var t="",i=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(t+=" ... ")),"<Buffer "+t+">"},a.prototype.compare=function(t,e,i,r,n){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===r&&(r=0),void 0===n&&(n=this.length),e<0||i>t.length||r<0||n>this.length)throw new RangeError("out of range index");if(r>=n&&e>=i)return 0;if(r>=n)return-1;if(e>=i)return 1;if(e>>>=0,i>>>=0,r>>>=0,n>>>=0,this===t)return 0;for(var s=n-r,o=i-e,l=Math.min(s,o),u=this.slice(r,n),d=t.slice(e,i),c=0;c<l;++c)if(u[c]!==d[c]){s=u[c],o=d[c];break}return s<o?-1:o<s?1:0},a.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},a.prototype.indexOf=function(t,e,i){return L(this,t,e,i,!0)},a.prototype.lastIndexOf=function(t,e,i){return L(this,t,e,i,!1)},a.prototype.write=function(t,e,i,r){if(void 0===e)r="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)r=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(i)?(i|=0,void 0===r&&(r="utf8")):(r=i,i=void 0)}var n=this.length-e;if((void 0===i||i>n)&&(i=n),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return T(this,t,e,i);case"utf8":case"utf-8":return E(this,t,e,i);case"ascii":return b(this,t,e,i);case"latin1":case"binary":return M(this,t,e,i);case"base64":return S(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,t,e,i);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $=4096;a.prototype.slice=function(t,e){var i=this.length;t=~~t,e=void 0===e?i:~~e,t<0?(t+=i)<0&&(t=0):t>i&&(t=i),e<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t);var r;if(a.TYPED_ARRAY_SUPPORT)r=this.subarray(t,e),r.__proto__=a.prototype;else{var n=e-t;r=new a(n,void 0);for(var s=0;s<n;++s)r[s]=this[s+t]}return r},a.prototype.readUIntLE=function(t,e,i){t|=0,e|=0,i||I(t,e,this.length);for(var r=this[t],n=1,a=0;++a<e&&(n*=256);)r+=this[t+a]*n;return r},a.prototype.readUIntBE=function(t,e,i){t|=0,e|=0,i||I(t,e,this.length);for(var r=this[t+--e],n=1;e>0&&(n*=256);)r+=this[t+--e]*n;return r},a.prototype.readUInt8=function(t,e){return e||I(t,1,this.length),this[t]},a.prototype.readUInt16LE=function(t,e){return e||I(t,2,this.length),this[t]|this[t+1]<<8},a.prototype.readUInt16BE=function(t,e){return e||I(t,2,this.length),this[t]<<8|this[t+1]},a.prototype.readUInt32LE=function(t,e){return e||I(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},a.prototype.readUInt32BE=function(t,e){return e||I(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},a.prototype.readIntLE=function(t,e,i){t|=0,e|=0,i||I(t,e,this.length);for(var r=this[t],n=1,a=0;++a<e&&(n*=256);)r+=this[t+a]*n;return n*=128,r>=n&&(r-=Math.pow(2,8*e)),r},a.prototype.readIntBE=function(t,e,i){t|=0,e|=0,i||I(t,e,this.length);for(var r=e,n=1,a=this[t+--r];r>0&&(n*=256);)a+=this[t+--r]*n;return n*=128,a>=n&&(a-=Math.pow(2,8*e)),a},a.prototype.readInt8=function(t,e){return e||I(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},a.prototype.readInt16LE=function(t,e){e||I(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},a.prototype.readInt16BE=function(t,e){e||I(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},a.prototype.readInt32LE=function(t,e){return e||I(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},a.prototype.readInt32BE=function(t,e){return e||I(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},a.prototype.readFloatLE=function(t,e){return e||I(t,4,this.length),J.read(this,t,!0,23,4)},a.prototype.readFloatBE=function(t,e){return e||I(t,4,this.length),J.read(this,t,!1,23,4)},a.prototype.readDoubleLE=function(t,e){return e||I(t,8,this.length),J.read(this,t,!0,52,8)},a.prototype.readDoubleBE=function(t,e){return e||I(t,8,this.length),J.read(this,t,!1,52,8)},a.prototype.writeUIntLE=function(t,e,i,r){t=+t,e|=0,i|=0,r||j(this,t,e,i,Math.pow(2,8*i)-1,0);var n=1,a=0;for(this[e]=255&t;++a<i&&(n*=256);)this[e+a]=t/n&255;return e+i},a.prototype.writeUIntBE=function(t,e,i,r){t=+t,e|=0,i|=0,r||j(this,t,e,i,Math.pow(2,8*i)-1,0);var n=i-1,a=1;for(this[e+n]=255&t;--n>=0&&(a*=256);)this[e+n]=t/a&255;return e+i},a.prototype.writeUInt8=function(t,e,i){return t=+t,e|=0,i||j(this,t,e,1,255,0),a.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},a.prototype.writeUInt16LE=function(t,e,i){return t=+t,e|=0,i||j(this,t,e,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):O(this,t,e,!0),e+2},a.prototype.writeUInt16BE=function(t,e,i){return t=+t,e|=0,i||j(this,t,e,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):O(this,t,e,!1),e+2},a.prototype.writeUInt32LE=function(t,e,i){return t=+t,e|=0,i||j(this,t,e,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):P(this,t,e,!0),e+4},a.prototype.writeUInt32BE=function(t,e,i){return t=+t,e|=0,i||j(this,t,e,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):P(this,t,e,!1),e+4},a.prototype.writeIntLE=function(t,e,i,r){if(t=+t,e|=0,!r){var n=Math.pow(2,8*i-1);j(this,t,e,i,n-1,-n)}var a=0,s=1,o=0;for(this[e]=255&t;++a<i&&(s*=256);)t<0&&0===o&&0!==this[e+a-1]&&(o=1),this[e+a]=(t/s>>0)-o&255;return e+i},a.prototype.writeIntBE=function(t,e,i,r){if(t=+t,e|=0,!r){var n=Math.pow(2,8*i-1);j(this,t,e,i,n-1,-n)}var a=i-1,s=1,o=0;for(this[e+a]=255&t;--a>=0&&(s*=256);)t<0&&0===o&&0!==this[e+a+1]&&(o=1),this[e+a]=(t/s>>0)-o&255;return e+i},a.prototype.writeInt8=function(t,e,i){return t=+t,e|=0,i||j(this,t,e,1,127,-128),a.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},a.prototype.writeInt16LE=function(t,e,i){return t=+t,e|=0,i||j(this,t,e,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):O(this,t,e,!0),e+2},a.prototype.writeInt16BE=function(t,e,i){return t=+t,e|=0,i||j(this,t,e,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):O(this,t,e,!1),e+2},a.prototype.writeInt32LE=function(t,e,i){return t=+t,e|=0,i||j(this,t,e,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):P(this,t,e,!0),e+4},a.prototype.writeInt32BE=function(t,e,i){return t=+t,e|=0,i||j(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):P(this,t,e,!1),e+4},a.prototype.writeFloatLE=function(t,e,i){return U(this,t,e,!0,i)},a.prototype.writeFloatBE=function(t,e,i){return U(this,t,e,!1,i)},a.prototype.writeDoubleLE=function(t,e,i){return B(this,t,e,!0,i)},a.prototype.writeDoubleBE=function(t,e,i){return B(this,t,e,!1,i)},a.prototype.copy=function(t,e,i,r){if(i||(i=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<i&&(r=i),r===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-i&&(r=t.length-e+i);var n,s=r-i;if(this===t&&i<e&&e<r)for(n=s-1;n>=0;--n)t[n+e]=this[n+i];else if(s<1e3||!a.TYPED_ARRAY_SUPPORT)for(n=0;n<s;++n)t[n+e]=this[n+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+s),e);return s},a.prototype.fill=function(t,e,i,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,i=this.length):"string"==typeof i&&(r=i,i=this.length),1===t.length){var n=t.charCodeAt(0);n<256&&(t=n)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!a.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0);var s;if("number"==typeof t)for(s=e;s<i;++s)this[s]=t;else{var o=a.isBuffer(t)?t:H(new a(t,r).toString()),l=o.length;for(s=0;s<i-e;++s)this[s+e]=o[s%l]}return this};var tt=/[^+\/0-9A-Za-z-_]/g}).call(e,i(17))},function(t,e,i){"use strict";function r(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");return-1===i&&(i=e),[i,i===e?0:4-i%4]}function n(t){var e=r(t),i=e[0],n=e[1];return 3*(i+n)/4-n}function a(t,e,i){return 3*(e+i)/4-i}function s(t){var e,i,n=r(t),s=n[0],o=n[1],l=new h(a(t,s,o)),u=0,d=o>0?s-4:s;for(i=0;i<d;i+=4)e=c[t.charCodeAt(i)]<<18|c[t.charCodeAt(i+1)]<<12|c[t.charCodeAt(i+2)]<<6|c[t.charCodeAt(i+3)],l[u++]=e>>16&255,l[u++]=e>>8&255,l[u++]=255&e;return 2===o&&(e=c[t.charCodeAt(i)]<<2|c[t.charCodeAt(i+1)]>>4,l[u++]=255&e),1===o&&(e=c[t.charCodeAt(i)]<<10|c[t.charCodeAt(i+1)]<<4|c[t.charCodeAt(i+2)]>>2,l[u++]=e>>8&255,l[u++]=255&e),l}function o(t){return d[t>>18&63]+d[t>>12&63]+d[t>>6&63]+d[63&t]}function l(t,e,i){for(var r,n=[],a=e;a<i;a+=3)r=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),n.push(o(r));return n.join("")}function u(t){for(var e,i=t.length,r=i%3,n=[],a=0,s=i-r;a<s;a+=16383)n.push(l(t,a,a+16383>s?s:a+16383));return 1===r?(e=t[i-1],n.push(d[e>>2]+d[e<<4&63]+"==")):2===r&&(e=(t[i-2]<<8)+t[i-1],n.push(d[e>>10]+d[e>>4&63]+d[e<<2&63]+"=")),n.join("")}e.byteLength=n,e.toByteArray=s,e.fromByteArray=u;for(var d=[],c=[],h="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,g=f.length;p<g;++p)d[p]=f[p],c[f.charCodeAt(p)]=p;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},function(t,e){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,i,r,n){var a,s,o=8*n-r-1,l=(1<<o)-1,u=l>>1,d=-7,c=i?n-1:0,h=i?-1:1,f=t[e+c];for(c+=h,a=f&(1<<-d)-1,f>>=-d,d+=o;d>0;a=256*a+t[e+c],c+=h,d-=8);for(s=a&(1<<-d)-1,a>>=-d,d+=r;d>0;s=256*s+t[e+c],c+=h,d-=8);if(0===a)a=1-u;else{if(a===l)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,r),a-=u}return(f?-1:1)*s*Math.pow(2,a-r)},e.write=function(t,e,i,r,n,a){var s,o,l,u=8*a-n-1,d=(1<<u)-1,c=d>>1,h=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:a-1,p=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,s=d):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),e+=s+c>=1?h/l:h*Math.pow(2,1-c),e*l>=2&&(s++,l/=2),s+c>=d?(o=0,s=d):s+c>=1?(o=(e*l-1)*Math.pow(2,n),s+=c):(o=e*Math.pow(2,c-1)*Math.pow(2,n),s=0));n>=8;t[i+f]=255&o,f+=p,o/=256,n-=8);for(s=s<<n|o,u+=n;u>0;t[i+f]=255&s,f+=p,s/=256,u-=8);t[i+f-p]|=128*g}},function(t,e){var i={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},function(t,e,i){var r;r=i(0),t.exports=function(t,e,i,n){var a;if(n[t]=i,n.HDRelay)return a={load:function(){return n.scrollBy(0,1),n.scrollBy(0,-1)},create:function(e){var i,a;return a=r.createToken(),e.token=a,i=new n[t](e),null==n[t].players&&(n[t].players={}),n[t].players[a]=i,i}},n.HDRelay._as(e,a)}}]);