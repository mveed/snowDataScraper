define(function(require){"use strict";var $=require("jquery"),resizeEventName="resize.headercomponent";function HeaderAnimation($component){this.init($component)}function addAlphatoRgba($elem,opacity){return $elem.css("background-color").replace(")",","+opacity+")").replace("rgb","rgba")}HeaderAnimation.prototype.init=function($component){this.cacheDom($component);this.setBackgroundProperties();this.initComponentPosition()};HeaderAnimation.prototype.cacheDom=function($component){this.dom={};this.dom.header=$("header.main-v2");if(this.dom.header.length==0){this.dom.header=$(".microsite header.header")}this.dom.headerBody=this.dom.header.find(".header-menu.header-menu-body");this.dom.headerMenuScroller=this.dom.headerBody.find(".header-menu-scroller");this.dom.component=$component};HeaderAnimation.prototype.initComponentPosition=function(){$(window).on(resizeEventName,function(){var currentComponentTop=parseInt(this.dom.component.css("top"));if(currentComponentTop<0){this.dom.component.css("top",-(this.dom.component.height()+this.dom.header.height()))}this.setBackgroundImage()}.bind(this))};HeaderAnimation.prototype.setBackgroundProperties=function(){this.setBackgroundImage();if(this.dom.headerMenuScroller.data("background-opacity")){this.dom.headerMenuScroller.css("background-color",addAlphatoRgba(this.dom.headerMenuScroller,this.dom.headerMenuScroller.data("background-opacity")))}};HeaderAnimation.prototype.setBackgroundImage=function(){if(this.dom.headerBody.data("desktop-bg-img")&&this.dom.headerBody.data("mobile-bg-img")){if(window.innerWidth>425){this.dom.headerBody.css("background",'url("'+this.dom.headerBody.data("desktop-bg-img")+'")')}else{this.dom.headerBody.css("background",'url("'+this.dom.headerBody.data("mobile-bg-img")+'")')}}};HeaderAnimation.prototype.open=function(completeFn,duration){var openingClass="header-component-opening";this.dom.component.css("top",-(this.dom.component.height()+this.dom.header.height()));this.dom.component.removeClass("d-invisible");this.dom.header.addClass(openingClass);this.dom.component.stop().animate({top:this.dom.header.height()},duration!==undefined?duration:500,function(){this.dom.header.addClass("header-component-open");this.dom.header.removeClass(openingClass);if(completeFn!==undefined){completeFn()}}.bind(this))};HeaderAnimation.prototype.close=function(updateHeaderState,completeFn,duration){this.dom.component.stop().animate({top:-(this.dom.component.height()+this.dom.header.height())},duration!==undefined?duration:500,function(){if(updateHeaderState){this.dom.header.removeClass("header-component-open")}this.dom.component.addClass("d-invisible");if(completeFn!==undefined){completeFn()}}.bind(this))};return HeaderAnimation});