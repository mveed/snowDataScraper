define(function(require){"use strict";var $=require("jquery"),menuAnimations=require("header-menu-animation"),openCloseAnimations,headerComponentModel,headerStateManager=require("header-component-manager"),dom={},scrollHelper,hamburgerOpenClass="hamburger-wrapper-open",menuOpenClass="header-menu-body-open",isMicrosite=false;init();function init(){cacheDom();attachHandlers();openCloseAnimations=new(require("header-animation"))(dom.menu);scrollHelper=new(require("header-dropdown-scroll-helper"))($("body"),dom.menu,dom.menuScrollContainer);headerComponentModel=new(require("header-component-model"))(dom.menu,closeMenu,function(){return dom.menu.hasClass(menuOpenClass)});headerStateManager.register(headerComponentModel)}function cacheDom(){dom.header=$("header.main-v2");if(dom.header.length==0){dom.header=$(".microsite header.header");isMicrosite=true}dom.hamburgerWrapper=dom.header.find(".hamburger-wrapper");dom.hamburger=dom.hamburgerWrapper.find(".hamburger");dom.menu=dom.header.find(".header-menu-body");dom.menuScrollContainer=dom.menu.find(".header-menu-scroller-inner");if(!isMicrosite){if(!$(".navigation-deal").length){dom.menu.addClass("noDeal")}}}function attachHandlers(){dom.hamburger.menuToggleAnimation=menuAnimations.createMenuToggleAnimation(dom.hamburger);dom.hamburger.on("click",toggleMenu)}function toggleMenu(){if(dom.menu.hasClass(menuOpenClass)){closeMenu(true)}else{openMenu()}}function openMenu(){headerStateManager.closeOtherComponents(headerComponentModel.id,false);dom.hamburgerWrapper.addClass(hamburgerOpenClass);scrollHelper.dropdownOpened();dom.hamburger.menuToggleAnimation.animateMenuButtonX();dom.menu.addClass(menuOpenClass);openCloseAnimations.open()}function closeMenu(updateHeaderState){dom.hamburgerWrapper.removeClass(hamburgerOpenClass);scrollHelper.dropdownClosed();dom.menu.removeClass(menuOpenClass);dom.hamburger.menuToggleAnimation.animateMenuButtonHamburger();openCloseAnimations.close(updateHeaderState)}});