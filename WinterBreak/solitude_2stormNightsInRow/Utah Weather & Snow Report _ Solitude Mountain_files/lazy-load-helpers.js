define(function(){"use strict";return{lazyLoadDefaultSelectImages:function(){return[].slice.call(document.querySelectorAll("img.lazy"))},removeLazyLoadDefaultListeners:function(callback){document.removeEventListener("scroll",callback);window.removeEventListener("resize",callback);window.removeEventListener("orientationchange",callback)},addLazyLoadDefaultListeners:function(callback){document.addEventListener("scroll",callback);window.addEventListener("resize",callback);window.addEventListener("orientationchange",callback)},lazyLoadDefaultSetImage:function(lazy){lazy.src=lazy.dataset.src},setUpLazyLoadImages:function(selectImages,addListeners,removeListeners,setImage){var lazyImages=selectImages();var active=false;function isVisible(lazyImage,margin){return lazyImage.getBoundingClientRect().top<=window.innerHeight+margin&&lazyImage.getBoundingClientRect().bottom>=0&&getComputedStyle(lazyImage).display!=="none"}var loadImages=function(callback,margin){lazyImages.forEach(function(lazyImage){if(!isVisible(lazyImage,margin)){return}setImage(lazyImage);lazyImage.onload=function(){lazyImage.classList.remove("lazy")};lazyImages=lazyImages.filter(function(image){return image!==lazyImage});if(lazyImages.length===0){removeListeners(callback)}});active=false};var lazyLoad=function(){if(active!==false){return}active=true;setTimeout(function(){loadImages(lazyLoad,400)},200)};addListeners(lazyLoad);setTimeout(loadImages(lazyLoad,400),0)}}});